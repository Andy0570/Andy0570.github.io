<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
<meta name="keywords" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:type" content="website">
<meta property="og:title" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:url" content="https://andy0570.com/page/19/index.html">
<meta property="og:site_name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta name="twitter:description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">



  <link rel="alternate" href="/atom.xml" title="ç‹¬æœ¨èˆŸçš„æœ¨" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/19/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>ç‹¬æœ¨èˆŸçš„æœ¨</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ç‹¬æœ¨èˆŸçš„æœ¨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾<span class="badge">57</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£<span class="badge">310</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>å…³äº</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>æœç´¢</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/22/iOS APP æ¡†æ¶ä½“ç³»/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/22/iOS APP æ¡†æ¶ä½“ç³»/" class="post-title-link" itemprop="url">iOS APP æ¡†æ¶ä½“ç³»</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-22 14:37:00" itemprop="dateCreated datePublished" datetime="2017-06-22T14:37:00+08:00">2017-06-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:14:10" itemprop="dateModified" datetime="2019-04-18T01:14:10+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-èµ„æº/" itemprop="url" rel="index"><span itemprop="name">iOS èµ„æº</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/22/iOS APP æ¡†æ¶ä½“ç³»/" class="leancloud_visitors" data-flag-title="iOS APP æ¡†æ¶ä½“ç³»">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>è´´ä¸Šé™†é™†ç»­ç»­ä»å„ä¸ªåœ°æ–¹çœ‹è¿‡çš„æ­å»º  iOS APP æ¡†æ¶çš„æ–‡ç« ï¼Œæ•´ç†å‡ºæ¥ï¼Œä»¥åçœ‹åˆ°å¥½çš„å†è´´å‡ºæ¥ã€‚</p>
<h3 id="ç†è®ºéƒ¨åˆ†"><a href="#ç†è®ºéƒ¨åˆ†" class="headerlink" title="ç†è®ºéƒ¨åˆ†"></a>ç†è®ºéƒ¨åˆ†</h3><hr>
<ul>
<li><a href="https://www.objccn.io/issue-13-0/" target="_blank" rel="noopener">objccn.ioâ€”â€”æ¶æ„</a></li>
<li><a href="http://www.cocoachina.com/cms/wap.php?action=article&amp;id=14916&amp;from=singlemessage&amp;isappinstalled=1" target="_blank" rel="noopener">iOS æ¶æ„æ¨¡å¼â€“è§£å¯† MVCï¼ŒMVPï¼ŒMVVMä»¥åŠVIPERæ¶æ„</a></li>
<li><a href="http://mrpeak.cn/blog/ios-arch/" target="_blank" rel="noopener">iOSåº”ç”¨æ¶æ„ç°çŠ¶åˆ†æ@MrPeak</a> ğŸ‘</li>
</ul>
<hr>
<ul>
<li><a href="http://www.cocoachina.com/ios/20161025/17849.html" target="_blank" rel="noopener">åšä¸€ä¸ª App å‰éœ€è¦è€ƒè™‘çš„å‡ ä»¶äº‹</a><br>æœ¬æ–‡ä»å®è§‚çš„è§’åº¦æ¥è®¨è®ºå¼€å‘ç§»åŠ¨åº”ç”¨éœ€è¦å…³æ³¨çš„ç‚¹ï¼Œç†è®ºæ€§æ€è€ƒå¤šä¸€äº›ã€‚åŒ…æ‹¬å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿã€Commit Message è§„èŒƒã€ä»£ç è§„èŒƒã€å‡†å¤‡ä¸€ä»½ç¼–ç¨‹å®ˆåˆ™ã€é¡µé¢å¸ƒå±€è§„èŒƒã€ç»Ÿè®¡åŸ‹ç‚¹ã€App æ¶æ„ã€é¡µé¢è·³è½¬æœºåˆ¶ã€åœ¨çº¿é…ç½®ã€é€‰æ‹©åˆé€‚çš„ Crash å¹³å°ã€Code Reviewã€é€‰æ‹©åˆé€‚çš„å¼€å‘æ¨¡å¼ã€æŒç»­é›†æˆã€Bug ç®¡ç†ç³»ç»Ÿã€é¡¹ç›®ç®¡ç†å·¥å…·ã€Checklistã€‚</li>
</ul>
<hr>
<ul>
<li><a href="http://www.cocoachina.com/ios/20160316/15685.html" target="_blank" rel="noopener">åœ¨å†™ä¸€ä¸ªiOSåº”ç”¨ä¹‹å‰å¿…é¡»åšçš„7ä»¶äº‹(é™„ç›¸å…³èµ„æº)</a><br>ç¿»è¯‘ä½œå“ã€éå¸¸å€¼å¾—ä¸€çœ‹ï¼Œä¸»è¦æ˜¯é™„æœ‰ç›¸å…³<strong>èµ„æºé“¾æ¥</strong>ï¼ˆæ¯”å¿ƒâ¤ï¸ï¼‰ã€‚<br>å…¶ä¸­æåˆ°çš„å‡ ä¸ªç‚¹ï¼š<ol>
<li>ä¸ºå·¥ç¨‹è®¾ç½®ç¼–ç é£æ ¼è§„èŒƒï¼›</li>
<li>åœ¨å†™ä»£ç ä¹‹å‰ç¡®å®šåº”ç”¨çš„æ¶æ„ï¼›</li>
<li>è®¾å®šåº”ç”¨çš„ç›®å½•ç»“æ„ï¼›</li>
<li>é¡¹ç›®ä¾èµ–ç®¡ç†ï¼›</li>
<li>ä¸ºåº”ç”¨è®¾ç½®åˆé€‚çš„Schemeï¼›</li>
<li>è®¾ç½®åˆé€‚çš„Certificateså’ŒProvisioning Profilesï¼›</li>
<li>è®¾ç½®åº”ç”¨æŒç»­é›†æˆå’Œäº¤ä»˜è¿‡ç¨‹ã€‚</li>
</ol>
</li>
</ul>
<hr>
<ul>
<li><a href="http://www.cocoachina.com/ios/20170804/20131.html" target="_blank" rel="noopener">[è´èŠç§‘æŠ€]iOS ä»£ç æ¶æ„ï¼ˆä¸€ï¼‰å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ˜“å¤ç”¨çš„ç»„ä»¶</a><br>ä»¥ä¸€ä¸ªè¾ƒç®€å•çš„ UI ç»„ä»¶ä¸ºä¾‹ï¼Œä»‹ç»è´èŠ iOS ç»„åœ¨è®¾è®¡å¯å¤ç”¨ç»„ä»¶æ—¶çš„ä¸€ç‚¹å°æŠ€å·§ã€‚<h3 id="å®ç”¨éƒ¨åˆ†"><a href="#å®ç”¨éƒ¨åˆ†" class="headerlink" title="å®ç”¨éƒ¨åˆ†"></a>å®ç”¨éƒ¨åˆ†</h3></li>
<li><a href="http://www.cocoachina.com/ios/20170815/20252.html" target="_blank" rel="noopener">è®©ä½ å¿«é€Ÿäº†è§£å¹¶æŒæ¡å¦‚ä½•è¿›è¡ŒiOSå¼€å‘æŠ€èƒ½</a></li>
</ul>
<hr>
<ul>
<li><a href="http://www.cocoachina.com/ios/20170525/19363.html" target="_blank" rel="noopener">iOS ä»0åˆ°1æ­å»ºé«˜å¯ç”¨Appæ¡†æ¶</a><br>æ¢è®¨äº† <strong>Xcode</strong> é¡¹ç›®åº”åŒ…å«çš„ç›®å½•ç»“æ„ã€‚æå‡ºæ˜“è¯»æ€§ã€æ˜“ç»´æŠ¤æ€§ã€æ˜“æ‰©å±•æ€§çš„æ¶æ„åŸåˆ™ã€‚å¹¶é™„æœ‰åŸºäºMVCè®¾è®¡çš„é€šç”¨APPæ¡†æ¶: <a href="https://github.com/XuYang8026/UniversalProject" target="_blank" rel="noopener"><strong>MiAiApp</strong></a>ï¼Œå¯ä»¥å‚è€ƒã€‚</li>
</ul>
<hr>
<ul>
<li><a href="http://www.cocoachina.com/ios/20170620/19579.html" target="_blank" rel="noopener">iOS:æ€æ ·åˆ›å»ºä¸€ä¸ªå¥½çš„Appç›®å½•ç»“æ„ @é›ªå±±è¸ç—•</a></li>
<li><a href="http://www.jianshu.com/p/0c6f3f4b3b34" target="_blank" rel="noopener">æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•æ­å»ºiOSé¡¹ç›®åŸºæœ¬æ¡†æ¶</a></li>
<li><a href="http://www.jianshu.com/p/89e25c288d76" target="_blank" rel="noopener">iOS APPæ¡†æ¶æ­å»ºç®€æï¼ˆé™„GitHubæ‰˜ç®¡Demoï¼‰</a></li>
<li><a href="http://www.jianshu.com/p/6eb7eabda386" target="_blank" rel="noopener">ååˆ†é’Ÿæ­å»ºä¸»æµæ¡†æ¶_ç®€å•çš„ç½‘ç»œéƒ¨åˆ†(OC)</a><br>ä¹Ÿæ˜¯æ­å»º iOS åº”ç”¨ç›®å½•ç»“æ„ã€å†…å®¹æˆ–ç¹çæˆ–ç®€å•ï¼Œæˆ–è¾¹è§’ï¼Œå¯ä»¥å‚è€ƒçœ‹çœ‹ã€‚</li>
</ul>
<hr>
<ul>
<li><a href="http://www.jianshu.com/p/4ef3d3737661" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯å¼€å‘ App çš„æ­£ç¡®æ­¥éª¤?</a><br>æœ¬æ–‡ä»ä¸€ä¸ªç®€å•çš„ tableView App è¯´èµ·ï¼Œè°ˆè®ºäº†å¼€å‘ä¸€ä¸ª App çš„4ä¸ªæ­¥éª¤ï¼šéœ€æ±‚åˆ†æã€æ„å»ºæ¶æ„ã€ç»†èŠ‚å®ç°ã€ä¼˜åŒ–æ‹“å±•ã€‚ç®€å•ä»‹ç»äº†å¤šçº¿ç¨‹å’Œå‡ ç§è®¾è®¡æ¨¡å¼ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚</li>
</ul>
<hr>
<ul>
<li><a href="http://www.10tiao.com/html/216/201706/2652549903/1.html" target="_blank" rel="noopener">ç”¨ Swift æ¶æ„ iOS åº”ç”¨çš„æ­£ç¡®å§¿åŠ¿</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/22/ç¿»è¯‘æ–‡æ¡£ï¼šå†™å¥½ commit messages/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/22/ç¿»è¯‘æ–‡æ¡£ï¼šå†™å¥½ commit messages/" class="post-title-link" itemprop="url">ç¿»è¯‘æ–‡æ¡£ï¼šå†™å¥½ commit messages</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-22 11:56:00" itemprop="dateCreated datePublished" datetime="2017-06-22T11:56:00+08:00">2017-06-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:02:09" itemprop="dateModified" datetime="2019-04-18T01:02:09+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ç¿»è¯‘æ–‡æ¡£/" itemprop="url" rel="index"><span itemprop="name">ç¿»è¯‘æ–‡æ¡£</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/22/ç¿»è¯‘æ–‡æ¡£ï¼šå†™å¥½ commit messages/" class="leancloud_visitors" data-flag-title="ç¿»è¯‘æ–‡æ¡£ï¼šå†™å¥½ commit messages">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>åŸæ–‡ï¼š</p>
<ul>
<li><a href="https://github.com/erlang/otp/wiki/Writing-good-commit-messages" target="_blank" rel="noopener">Writing good commit messages</a></li>
</ul>
<p>Good commit messages serve at least three important purposes:</p>
<ul>
<li>To speed up the reviewing process.</li>
<li>To help us write a good release note.</li>
<li>To help the future maintainers of Erlang/OTP (it could be you!), say five years into the future, to find out why a particular change was made to the code or why a specific feature was added.</li>
</ul>
<p>è‰¯å¥½çš„æäº¤ä¿¡æ¯è‡³å°‘æœ‰ä¸‰ä¸ªé‡è¦çš„ç›®çš„ï¼š</p>
<ul>
<li>åŠ å¿«å®¡æŸ¥è¿‡ç¨‹ã€‚</li>
<li>å¸®åŠ©æˆ‘ä»¬å†™ä¸€ä¸ªå¾ˆå¥½çš„å‘è¡Œç‰ˆæœ¬è¯´æ˜ã€‚</li>
<li>ä¸ºäº†å¸®åŠ©æœªæ¥çš„ Erlang / OTPç»´æŠ¤è€…ï¼ˆå¯èƒ½æ˜¯ä½ ï¼ï¼‰ï¼Œæ¯”å¦‚è¯´å°†æ¥çš„äº”å¹´ï¼Œè¦å¼„æ¸…æ¥šä¸ºä»€ä¹ˆè¦å¯¹ä»£ç åšå‡ºç‰¹åˆ«çš„æ”¹å˜ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆæ·»åŠ äº†ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½ã€‚</li>
</ul>
<p>Structure your commit message like this:</p>
<p>From: [[<a href="http://git-scm.com/book/ch5-2.html]]" target="_blank" rel="noopener">http://git-scm.com/book/ch5-2.html]]</a></p>
<blockquote>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; Short (<span class="number">50</span> <span class="keyword">chars</span> <span class="keyword">or</span> less) summary <span class="keyword">of</span> changes</span><br><span class="line">&gt;</span><br><span class="line">&gt; More <span class="keyword">detailed</span> explanatory <span class="keyword">text</span>, <span class="keyword">if</span> necessary.  Wrap <span class="keyword">it</span> <span class="built_in">to</span> about <span class="number">72</span></span><br><span class="line">&gt; <span class="keyword">characters</span> <span class="keyword">or</span> so.  In some contexts, <span class="keyword">the</span> <span class="keyword">first</span> <span class="built_in">line</span> is treated <span class="keyword">as</span> <span class="keyword">the</span></span><br><span class="line">&gt; subject <span class="keyword">of</span> <span class="keyword">an</span> email <span class="keyword">and</span> <span class="keyword">the</span> rest <span class="keyword">of</span> <span class="keyword">the</span> <span class="keyword">text</span> <span class="keyword">as</span> <span class="keyword">the</span> body.  The blank</span><br><span class="line">&gt; <span class="built_in">line</span> separating <span class="keyword">the</span> summary <span class="built_in">from</span> <span class="keyword">the</span> body is critical (unless you omit</span><br><span class="line">&gt; <span class="keyword">the</span> body entirely); tools like rebase can <span class="built_in">get</span> confused <span class="keyword">if</span> you run <span class="keyword">the</span></span><br><span class="line">&gt; <span class="literal">two</span> together.</span><br><span class="line">&gt;</span><br><span class="line">&gt; Further paragraphs come <span class="keyword">after</span> blank <span class="keyword">lines</span>.</span><br><span class="line">&gt;</span><br><span class="line">&gt;   - Bullet points are okay, too</span><br><span class="line">&gt;</span><br><span class="line">&gt;   - Typically <span class="keyword">a</span> hyphen <span class="keyword">or</span> asterisk is used <span class="keyword">for</span> <span class="keyword">the</span> bullet, preceded <span class="keyword">by</span> <span class="keyword">a</span></span><br><span class="line">&gt;     single <span class="literal">space</span>, <span class="keyword">with</span> blank <span class="keyword">lines</span> <span class="keyword">in</span> between, but conventions vary here</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä½ æäº¤çš„æ¶ˆæ¯ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>æ¥è‡ªï¼š[[<a href="http://git-scm.com/book/ch5-2.html]]" target="_blank" rel="noopener">http://git-scm.com/book/ch5-2.html]]</a></p>
<blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> çŸ­ï¼ˆ50ä¸ªå­—ç¬¦æˆ–æ›´å°‘ï¼‰æ›´æ”¹çš„æ‘˜è¦</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> æ›´è¯¦ç»†çš„è§£é‡Šæ€§æ–‡æœ¬ï¼Œå¦‚æœ‰å¿…è¦ã€‚ åŒ…è£¹çº¦72å­—ç¬¦ç­‰ã€‚ </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¬¬ä¸€è¡Œå°±åƒç”µå­é‚®ä»¶çš„ä¸»é¢˜ï¼Œæ–‡æœ¬çš„å…¶ä½™éƒ¨åˆ†ä¸ºæ­£æ–‡ã€‚ </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> å°†æ‘˜è¦ä¸æ­£æ–‡åˆ†å¼€çš„ç©ºç™½è¡Œã€çº¿æ˜¯è‡³å…³é‡è¦çš„ï¼ˆé™¤éä½ å®Œå…¨çœç•¥æ­£æ–‡ï¼‰;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> å¦‚æœä½ åŒæ—¶è¿è¡Œä¸¤ä¸ªçš„è¯ï¼Œåƒ rebase è¿™æ ·çš„å·¥å…·ä¼šå˜å¾—å›°æƒ‘ã€‚</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> ç©ºç™½è¡Œåå†™æ›´å¤šçš„æ®µè½ã€‚</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Â Â  - æ— åºåˆ—è¡¨ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Â Â  - åœ¨ç©ºç™½è¡Œä¹‹é—´ï¼Œé€šå¸¸ä½¿ç”¨è¿å­—ç¬¦æˆ–æ˜Ÿå·ä½œä¸ºåºå·ï¼Œå‰é¢åŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼Œä½†è®¨è®ºåœ¨è¿™é‡Œ</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="DO"><a href="#DO" class="headerlink" title="DO"></a>DO</h2><ul>
<li>Write the summary line and description of what you have done in the imperative mode, that is as if you were commanding someone. Start the line with â€œFixâ€, â€œAddâ€, â€œChangeâ€ instead of â€œFixedâ€, â€œAddedâ€, â€œChangedâ€.</li>
<li>Always leave the second line blank.</li>
<li>Line break the commit message (to make the commit message readable without having to scroll horizontally in <code>gitk</code>).</li>
</ul>
<ul>
<li>åœ¨å‘½ä»¤æ¨¡å¼ä¸­å†™å‡ºä½ æ‰€åšçš„æ€»ç»“å’Œæè¿°è¡Œï¼Œå°±å¥½åƒä½ åœ¨å‘½ä»¤æŸäººä¸€æ ·ã€‚ ä»¥â€œFixâ€ï¼Œâ€œAddâ€ï¼Œâ€œChangeâ€è€Œä¸æ˜¯â€œFixedâ€ï¼Œâ€œAddedâ€ï¼Œâ€œChangedâ€å¼€å¤´ã€‚</li>
<li>å§‹ç»ˆå°†ç¬¬äºŒè¡Œç•™ç©ºã€‚</li>
<li>ç”¨è¡Œæ¥åˆ†ç¦»æäº¤æ¶ˆæ¯ï¼ˆä½¿æäº¤æ¶ˆæ¯å¯è¯»ï¼Œè€Œä¸å¿…åœ¨<code>gitk</code>ä¸­æ°´å¹³æ»šåŠ¨ï¼‰ã€‚</li>
</ul>
<h2 id="DONâ€™T"><a href="#DONâ€™T" class="headerlink" title="DONâ€™T"></a>DONâ€™T</h2><ul>
<li>Donâ€™t end the summary line with a period - itâ€™s a title and titles donâ€™t end with a period.</li>
</ul>
<ul>
<li>ä¸è¦ç”¨æ—¥æœŸæ¥ç»“æŸä¸€æ®µæ‘˜è¦è¡Œ - è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜ï¼Œè€Œæ ‡é¢˜æ˜¯ä¸ä¼šä»¥æ—¥æœŸæ¥ç»“å°¾çš„ã€‚</li>
</ul>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>If it seems difficult to summarize what your commit does, it may be because it includes several logical changes or bug fixes, and are better split up into several commits using <code>git add -p</code>.</li>
</ul>
<ul>
<li>å¦‚æœçœ‹èµ·æ¥éš¾ä»¥æ€»ç»“ä½ æäº¤æ‰€åšçš„å·¥ä½œï¼Œå¯èƒ½æ˜¯å› ä¸ºå®ƒåŒ…å«äº†å‡ ä¸ªé€»è¾‘æ›´æ”¹æˆ–é”™è¯¯ä¿®å¤ã€‚å¯ä»¥ä½¿ç”¨<code>git add -p</code>æ›´å¥½åœ°åˆ†æˆå‡ ä¸ªä¸åŒçš„æäº¤ã€‚</li>
</ul>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>The following blog post has a nice discussion of commit messages:</p>
<p>â€œOn commit messagesâ€:<a href="http://who-t.blogspot.com/2009/12/on-commit-messages.html" target="_blank" rel="noopener">http://who-t.blogspot.com/2009/12/on-commit-messages.html</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/22/iOS ç¼–ç¨‹ï¼šNSArrayã€NSDictionaryæ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/22/iOS ç¼–ç¨‹ï¼šNSArrayã€NSDictionaryæ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜/" class="post-title-link" itemprop="url">iOS ç¼–ç¨‹ï¼šNSArrayã€NSDictionary æ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-22 10:33:00" itemprop="dateCreated datePublished" datetime="2017-06-22T10:33:00+08:00">2017-06-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:16:25" itemprop="dateModified" datetime="2019-04-18T01:16:25+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-ç¼–ç¨‹/" itemprop="url" rel="index"><span itemprop="name">Objective-C ç¼–ç¨‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/22/iOS ç¼–ç¨‹ï¼šNSArrayã€NSDictionaryæ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜/" class="leancloud_visitors" data-flag-title="iOS ç¼–ç¨‹ï¼šNSArrayã€NSDictionary æ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="NSArrayã€NSDictionaryæ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#NSArrayã€NSDictionaryæ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="NSArrayã€NSDictionaryæ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜"></a>NSArrayã€NSDictionaryæ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜</h2><p>å¦‚æœåœ¨ console ä¸­é‡åˆ°äº† <strong>NSArray</strong>ã€<strong>NSDictionary</strong>æ‰“å°ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œè§£å†³æ–¹æ³•ä¹‹ä¸€æ˜¯åˆ›å»º <code>NSArray+Extension</code> å’Œ <code>NSDictionary+Extension</code> ä¸¤ä¸ªCategoryåˆ†ç±»ã€‚</p>
<blockquote>
<p>âš ï¸ Xcode 8.0 ä¹‹åä½¿ç”¨ <code>NSLog</code> æ‰“å°æ—¶ä¼šäº§ç”Ÿè¯¥é—®é¢˜ã€‚</p>
</blockquote>
<h3 id="NSArray-Extension"><a href="#NSArray-Extension" class="headerlink" title="NSArray+Extension"></a>NSArray+Extension</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">NSString</span> *)descriptionWithLocale:(<span class="keyword">id</span>)locale</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableString</span> *msr = [<span class="built_in">NSMutableString</span> string];</span><br><span class="line">    [msr appendString:<span class="string">@"["</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">id</span> obj <span class="keyword">in</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        [msr appendFormat:<span class="string">@"\n\t%@,"</span>,obj];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å»æ‰æœ€åä¸€ä¸ªé€—å·ï¼ˆ,ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> ([msr hasSuffix:<span class="string">@","</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *str = [msr substringToIndex:msr.length - <span class="number">1</span>];</span><br><span class="line">        msr = [<span class="built_in">NSMutableString</span> stringWithString:str];</span><br><span class="line">    &#125;</span><br><span class="line">    [msr appendString:<span class="string">@"\n]"</span>];</span><br><span class="line">    <span class="keyword">return</span> msr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="NSDictionary-Extension"><a href="#NSDictionary-Extension" class="headerlink" title="NSDictionary+Extension"></a>NSDictionary+Extension</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">NSString</span> *)descriptionWithLocale:(<span class="keyword">id</span>)locale</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableString</span> *msr = [<span class="built_in">NSMutableString</span> string];</span><br><span class="line">    [msr appendString:<span class="string">@"&#123;"</span>];</span><br><span class="line">    [<span class="keyword">self</span> enumerateKeysAndObjectsUsingBlock:^(<span class="keyword">id</span> key, <span class="keyword">id</span> obj, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">        [msr appendFormat:<span class="string">@"\n\t%@ = %@,"</span>,key,obj];</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">//å»æ‰æœ€åä¸€ä¸ªé€—å·ï¼ˆ,ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> ([msr hasSuffix:<span class="string">@","</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *str = [msr substringToIndex:msr.length - <span class="number">1</span>];</span><br><span class="line">        msr = [<span class="built_in">NSMutableString</span> stringWithString:str];</span><br><span class="line">    &#125;</span><br><span class="line">    [msr appendString:<span class="string">@"\n&#125;"</span>];</span><br><span class="line">    <span class="keyword">return</span> msr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="NSDictionary-çš„-valueä¸ºç©ºé€ æˆçš„crash"><a href="#NSDictionary-çš„-valueä¸ºç©ºé€ æˆçš„crash" class="headerlink" title="NSDictionary çš„ valueä¸ºç©ºé€ æˆçš„crash"></a><strong>NSDictionary</strong> çš„ valueä¸ºç©ºé€ æˆçš„crash</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> å¡«å……valueä¸ºç©ºé€ æˆçš„crash</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> @return ä¿®æ”¹åçš„NSDictionary</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//.h</span></span><br><span class="line">- (<span class="built_in">NSDictionary</span> *)deleteAllNULLValue;</span><br><span class="line"></span><br><span class="line"><span class="comment">//.m</span></span><br><span class="line">- (<span class="built_in">NSDictionary</span> *)deleteAllNULLValue &#123;</span><br><span class="line">    <span class="built_in">NSMutableDictionary</span> *mutableDic = [[<span class="built_in">NSMutableDictionary</span> alloc] init];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *keyStr <span class="keyword">in</span> <span class="keyword">self</span>.allKeys) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([[<span class="keyword">self</span> objectForKey:keyStr] isEqual:[<span class="built_in">NSNull</span> null]]) &#123;</span><br><span class="line">            [mutableDic setObject:<span class="string">@"null"</span> forKey:keyStr];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            [mutableDic setObject:[<span class="keyword">self</span> objectForKey:keyStr] forKey:keyStr];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> mutableDic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–æ–¹æ³•</p>
<ul>
<li><a href="https://github.com/524429264/HYBUnicodeReadable" target="_blank" rel="noopener">GitHub:HYBUnicodeReadable</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/21/CocoaLumberjackâ€”â€”ç®€å•å¥½ç”¨çš„æ—¥å¿—æ¡†æ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/21/CocoaLumberjackâ€”â€”ç®€å•å¥½ç”¨çš„æ—¥å¿—æ¡†æ¶/" class="post-title-link" itemprop="url">CocoaLumberjackâ€”â€”ç®€å•å¥½ç”¨çš„æ—¥å¿—æ¡†æ¶</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-21 17:38:00" itemprop="dateCreated datePublished" datetime="2017-06-21T17:38:00+08:00">2017-06-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:08:14" itemprop="dateModified" datetime="2019-04-18T01:08:14+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-å¼€æºæ¡†æ¶/" itemprop="url" rel="index"><span itemprop="name">iOS å¼€æºæ¡†æ¶</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/21/CocoaLumberjackâ€”â€”ç®€å•å¥½ç”¨çš„æ—¥å¿—æ¡†æ¶/" class="leancloud_visitors" data-flag-title="CocoaLumberjackâ€”â€”ç®€å•å¥½ç”¨çš„æ—¥å¿—æ¡†æ¶">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<ul>
<li>GitHubæºç :<a href="https://github.com/CocoaLumberjack/CocoaLumberjack" target="_blank" rel="noopener">CocoaLumberjack</a></li>
<li><p>star:9000+</p>
</li>
<li><p><a href="http://lemonjar.com/iosconsole/" target="_blank" rel="noopener">iOS Console</a></p>
</li>
</ul>
<h1 id="README-md"><a href="#README-md" class="headerlink" title="README.md"></a>README.md</h1><p><img src="http://upload-images.jianshu.io/upload_images/2648731-91234ade511187ff.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Lumberjack logo"></p>
<p><strong>CocoaLumberjack</strong> æ˜¯ä¸€ä¸ªé€‚ç”¨äºMacå’ŒiOSçš„å¿«é€Ÿã€ç®€å•ï¼Œè€Œä¸”åŠŸèƒ½å¼ºå¤§ä¸”çµæ´»çš„æ—¥å¿—æ¡†æ¶</p>
<h3 id="å¦‚ä½•å¼€å§‹"><a href="#å¦‚ä½•å¼€å§‹" class="headerlink" title="å¦‚ä½•å¼€å§‹"></a>å¦‚ä½•å¼€å§‹</h3><ul>
<li>é€šè¿‡ <a href="http://cocoapods.org" target="_blank" rel="noopener">CocoaPods</a> å®‰è£…</li>
</ul>
<h5 id="é€šè¿‡-CocoaPods-å®‰è£…-Swift-ç‰ˆæœ¬"><a href="#é€šè¿‡-CocoaPods-å®‰è£…-Swift-ç‰ˆæœ¬" class="headerlink" title="é€šè¿‡ CocoaPods å®‰è£… Swift ç‰ˆæœ¬"></a>é€šè¿‡ CocoaPods å®‰è£… Swift ç‰ˆæœ¬</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span>, <span class="string">'8.0'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># You need to set target when you use CocoaPods 1.0.0 or later.</span></span><br><span class="line">target <span class="string">'SampleTarget'</span> <span class="keyword">do</span> </span><br><span class="line">  use_frameworks!</span><br><span class="line">  pod <span class="string">'CocoaLumberjack/Swift'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„: <code>Swift</code> å­ç©ºé—´ä¸­åŒ…å«äº†æ‰€æœ‰çš„ Objectice-C ä»£ç å’Œ Swift ä»£ç ï¼Œæ‰€ä»¥è¿™æ˜¯è¶³å¤Ÿçš„ã€‚<br>For more details about how to use Swift with Lumberjack, see <a href="https://github.com/CocoaLumberjack/CocoaLumberjack/issues/405" target="_blank" rel="noopener">this conversation</a>.</p>
<h5 id="Swift-ç”¨æ³•"><a href="#Swift-ç”¨æ³•" class="headerlink" title="Swift ç”¨æ³•"></a>Swift ç”¨æ³•</h5><p>If you installed using CocoaPods or manually:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CocoaLumberjack</span><br></pre></td></tr></table></figure></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DDLog</span>.add(<span class="type">DDTTYLogger</span>.sharedInstance) <span class="comment">// TTY = Xcode console</span></span><br><span class="line"><span class="type">DDLog</span>.add(<span class="type">DDASLLogger</span>.sharedInstance) <span class="comment">// ASL = Apple System Logs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fileLogger: <span class="type">DDFileLogger</span> = <span class="type">DDFileLogger</span>() <span class="comment">// File Logger</span></span><br><span class="line">fileLogger.rollingFrequency = <span class="type">TimeInterval</span>(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>)  <span class="comment">// 24 hours</span></span><br><span class="line">fileLogger.logFileManager.maximumNumberOfLogFiles = <span class="number">7</span></span><br><span class="line"><span class="type">DDLog</span>.add(fileLogger)</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="type">DDLogVerbose</span>(<span class="string">"Verbose"</span>);</span><br><span class="line"><span class="type">DDLogDebug</span>(<span class="string">"Debug"</span>);</span><br><span class="line"><span class="type">DDLogInfo</span>(<span class="string">"Info"</span>);</span><br><span class="line"><span class="type">DDLogWarn</span>(<span class="string">"âš ï¸"</span>);</span><br><span class="line"><span class="type">DDLogError</span>(<span class="string">"Error"</span>);</span><br></pre></td></tr></table></figure>
<h5 id="é€šè¿‡-CocoaPods-å®‰è£…-Objectice-C-ç‰ˆæœ¬"><a href="#é€šè¿‡-CocoaPods-å®‰è£…-Objectice-C-ç‰ˆæœ¬" class="headerlink" title="é€šè¿‡ CocoaPods å®‰è£… Objectice-C ç‰ˆæœ¬"></a>é€šè¿‡ CocoaPods å®‰è£… Objectice-C ç‰ˆæœ¬</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span>, <span class="string">'7.0'</span></span><br><span class="line">pod <span class="string">'CocoaLumberjack'</span></span><br></pre></td></tr></table></figure>
<h5 id="Obj-C-ç”¨æ³•"><a href="#Obj-C-ç”¨æ³•" class="headerlink" title="Obj-C ç”¨æ³•"></a>Obj-C ç”¨æ³•</h5><p>å¦‚æœä½ æŠŠ <strong>Lumberjack</strong> ä½œä¸ºæ¡†æ¶å¯¼å…¥ï¼Œä½ å¯ä»¥ <code>@import CocoaLumberjack</code>ã€‚</p>
<p>å¦åˆ™, <code>#import &lt;CocoaLumberjack/CocoaLumberjack.h&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[DDLog addLogger:[DDTTYLogger sharedInstance]]; // TTY = Xcode æ§åˆ¶å°</span><br><span class="line">[DDLog addLogger:[DDASLLogger sharedInstance]]; // ASL = Apple System Logs è‹¹æœç³»ç»Ÿæ—¥å¿—</span><br><span class="line"></span><br><span class="line">DDFileLogger *fileLogger = [[DDFileLogger alloc] init]; // æœ¬åœ°æ–‡ä»¶æ—¥å¿—</span><br><span class="line">fileLogger.rollingFrequency = 60 * 60 * 24; // æ¯24å°æ—¶åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶</span><br><span class="line">fileLogger.logFileManager.maximumNumberOfLogFiles = 7; // æœ€å¤šå…è®¸åˆ›å»º7ä¸ªæ–‡ä»¶</span><br><span class="line">[DDLog addLogger:fileLogger];</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">DDLogVerbose(@&quot;Verbose&quot;);</span><br><span class="line">DDLogDebug(@&quot;Debug&quot;);</span><br><span class="line">DDLogInfo(@&quot;Info&quot;);</span><br><span class="line">DDLogWarn(@&quot;âš ï¸&quot;);</span><br><span class="line">DDLogError(@&quot;Error&quot;);</span><br></pre></td></tr></table></figure>
<h5 id="ä½¿ç”¨-Carthage-iOS-8-å®‰è£…"><a href="#ä½¿ç”¨-Carthage-iOS-8-å®‰è£…" class="headerlink" title="ä½¿ç”¨ Carthage (iOS 8+) å®‰è£…"></a>ä½¿ç”¨ Carthage (iOS 8+) å®‰è£…</h5><p><a href="https://github.com/Carthage/Carthage" target="_blank" rel="noopener">Carthage</a> is a lightweight dependency manager for Swift and Objective-C. It leverages CocoaTouch modules and is less invasive than CocoaPods.</p>
<p>To install with Carthage, follow the instruction on <a href="https://github.com/Carthage/Carthage" target="_blank" rel="noopener">Carthage</a></p>
<p>Cartfile<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">github</span> <span class="string">"CocoaLumberjack/CocoaLumberjack"</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>or <a href="Documentation/GettingStarted.md#manual-installation">install manually</a></li>
<li>read the <a href="Documentation/GettingStarted.md">Getting started</a> guide, check out the <a href="Documentation/FAQ.md">FAQ</a> section or the other <a href="Documentation/">docs</a></li>
<li>if you find issues or want to suggest improvements, create an issue or a pull request</li>
<li>for all kinds of questions involving CocoaLumberjack, use the <a href="http://groups.google.com/group/cocoalumberjack" target="_blank" rel="noopener">Google group</a> or StackOverflow (use <a href="http://stackoverflow.com/questions/tagged/lumberjack" target="_blank" rel="noopener">#lumberjack</a>).</li>
</ul>
<h3 id="CocoaLumberjack-3"><a href="#CocoaLumberjack-3" class="headerlink" title="CocoaLumberjack 3"></a>CocoaLumberjack 3</h3><h4 id="è¿ç§»åˆ°-3-x"><a href="#è¿ç§»åˆ°-3-x" class="headerlink" title="è¿ç§»åˆ° 3.x"></a>è¿ç§»åˆ° 3.x</h4><ul>
<li>å¾…å®š</li>
</ul>
<h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><h4 id="Lumberjack-æ˜¯-å¿«é€Ÿ-amp-ç®€å•-è€Œä¸”å¼ºå¤§-amp-çµæ´»çš„"><a href="#Lumberjack-æ˜¯-å¿«é€Ÿ-amp-ç®€å•-è€Œä¸”å¼ºå¤§-amp-çµæ´»çš„" class="headerlink" title="Lumberjack æ˜¯ å¿«é€Ÿ &amp; ç®€å•, è€Œä¸”å¼ºå¤§ &amp; çµæ´»çš„."></a>Lumberjack æ˜¯ å¿«é€Ÿ &amp; ç®€å•, è€Œä¸”å¼ºå¤§ &amp; çµæ´»çš„.</h4><p>å®ƒåœ¨æ¦‚å¿µä¸Šä¸å…¶ä»–æµè¡Œçš„æ—¥å¿—è®°å½•æ¡†æ¶ç±»ä¼¼ï¼Œå¦‚log4jï¼Œå®ƒæ˜¯ä¸“ä¸º <strong>Objective-C</strong> è®¾è®¡çš„ï¼Œå¹¶ä¸”åˆ©ç”¨äº†è¯¸å¦‚å¤šçº¿ç¨‹ï¼ŒGCDï¼ˆå¦‚æœå¯ç”¨ï¼‰ï¼Œæ— é”åŸå­æ“ä½œï¼ˆlockless atomic operationsï¼‰å’ŒåŠ¨æ€æ€§è´¨çš„ <strong>Objective-C</strong> runtimeã€‚</p>
<h4 id="Lumberjack-æ›´å¿«é€Ÿ"><a href="#Lumberjack-æ›´å¿«é€Ÿ" class="headerlink" title="Lumberjack æ›´å¿«é€Ÿ"></a>Lumberjack æ›´å¿«é€Ÿ</h4><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒæ¯” <code>NSLog</code> å¿«ä¸€ä¸ªæ•°é‡çº§ã€‚</p>
<h4 id="Lumberjack-æ˜¯ç®€å•çš„"><a href="#Lumberjack-æ˜¯ç®€å•çš„" class="headerlink" title="Lumberjack æ˜¯ç®€å•çš„"></a>Lumberjack æ˜¯ç®€å•çš„</h4><p>å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œå®ƒå‡ ä¹åªéœ€è¦ä¸€è¡Œä»£ç æ¥é…ç½® <strong>lumberjack</strong>ã€‚ ç„¶ååªéœ€ç”¨ <code>DDLog</code> è¯­å¥æ›¿æ¢æ‚¨çš„ <code>NSLog</code> è¯­å¥å³å¯ã€‚ ï¼ˆå¹¶ä¸” <code>DDLog</code> å®ä¸ <code>NSLog</code> å…·æœ‰å®Œå…¨ç›¸åŒçš„æ ¼å¼å’Œè¯­æ³•ï¼Œå› æ­¤å®ƒéå¸¸ç®€å•ã€‚ï¼‰</p>
<h4 id="Lumberjack-æ˜¯å¼ºå¤§çš„"><a href="#Lumberjack-æ˜¯å¼ºå¤§çš„" class="headerlink" title="Lumberjack æ˜¯å¼ºå¤§çš„"></a>Lumberjack æ˜¯å¼ºå¤§çš„</h4><p>ä¸€æ¡æ—¥å¿—è¯­å¥å¯ä»¥è¢«å‘é€åˆ°å¤šä¸ªè®°å½•å™¨ä¸Šï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åŒæ—¶ç™»å½•åˆ°æ–‡ä»¶å’Œæ§åˆ¶å°ã€‚ æƒ³è¦æ›´å¤šï¼Ÿ åˆ›å»ºè‡ªå·±çš„è®°å½•å™¨ï¼ˆå¾ˆç®€å•ï¼‰ï¼Œå¹¶é€šè¿‡ç½‘ç»œå‘é€æ‚¨çš„æ—¥å¿—ã€‚ æˆ–è€…åˆ°æ•°æ®åº“æˆ–åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚ é™åˆ¶å®ƒçš„åªæœ‰å¤©ç©º(The sky is the limit)ã€‚</p>
<h4 id="Lumberjack-æ˜¯çµæ´»çš„"><a href="#Lumberjack-æ˜¯çµæ´»çš„" class="headerlink" title="Lumberjack æ˜¯çµæ´»çš„:"></a>Lumberjack æ˜¯çµæ´»çš„:</h4><p>é…ç½®ä½ éœ€è¦è®°å½•çš„æ—¥å¿—ã€‚ æ›´æ”¹æ¯ä¸ªæ–‡ä»¶çš„æ—¥å¿—çº§åˆ«ï¼ˆä¾¿äºå®Œç¾è°ƒè¯•ï¼‰ã€‚æ›´æ”¹æ¯ä¸ªè®°å½•å™¨çš„æ—¥å¿—çº§åˆ«ï¼ˆè¯¦ç»†çš„æ§åˆ¶å°ï¼Œä½†ç®€æ˜çš„æ—¥å¿—æ–‡ä»¶ï¼‰ã€‚ æ›´æ”¹æ¯ä¸ª Xcodeé…ç½®çš„æ—¥å¿—çº§åˆ«ï¼ˆè¯¦ç»†è°ƒè¯•ï¼Œä½†ç®€æ˜æ‰¼è¦ï¼‰ã€‚ å°†æ—¥å¿—è¯­å¥ä»å‘è¡Œç‰ˆæœ¬ä¸­ç¼–è¯‘å‡ºæ¥ã€‚ è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„æ—¥å¿—çº§åˆ«æ•°é‡ã€‚ æ·»åŠ é€‚åˆä½ è‡ªå·±çš„æ—¥å¿—ã€‚ åœ¨è¿è¡Œæ—¶åŠ¨æ€æ›´æ”¹æ—¥å¿—çº§åˆ«ã€‚ é€‰æ‹©å¦‚ä½•ä»¥åŠä½•æ—¶å¸Œæœ›æ—¥å¿—æ–‡ä»¶æ»šåŠ¨ã€‚ å°†æ—¥å¿—æ–‡ä»¶ä¸Šä¼ åˆ°ä¸­å¤®æœåŠ¡å™¨ã€‚ å‹ç¼©å½’æ¡£æ—¥å¿—æ–‡ä»¶ä»¥èŠ‚çœç£ç›˜ç©ºé—´â€¦</p>
<h3 id="è¿™ä¸ªæ¡†æ¶å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„å¦‚æœ"><a href="#è¿™ä¸ªæ¡†æ¶å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„å¦‚æœ" class="headerlink" title="è¿™ä¸ªæ¡†æ¶å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„å¦‚æœ:"></a>è¿™ä¸ªæ¡†æ¶å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„å¦‚æœ:</h3><ul>
<li>ä½ æ­£åœ¨å¯»æ‰¾ä¸€ç§æ–¹æ³•æ¥è¿½è¸ªä¸å¯å†ç°çš„é”™è¯¯ï¼Œè¿™äº›é”™è¯¯åœ¨è¯¥é¢†åŸŸä¸æ–­æ¶Œç°ã€‚</li>
<li>ä½ å¯¹iPhoneä¸Šçš„è¶…çŸ­æ§åˆ¶å°æ—¥å¿—æ„Ÿåˆ°æ²®ä¸§ã€‚</li>
<li>ä½ æ­£åœ¨å¯»æ±‚åœ¨æ”¯æŒæ€§å’Œç¨³å®šæ€§æ–¹é¢å°†åº”ç”¨æå‡åˆ°ä¸€ä¸ªæ–°çš„æ°´å¹³ã€‚</li>
<li>ä½ æ­£åœ¨ä¸ºä½ çš„åº”ç”¨ç¨‹åºï¼ˆMacæˆ–iPhoneï¼‰å¯»æ‰¾ä¼ä¸šçº§æ—¥å¿—è®°å½•è§£å†³æ–¹æ¡ˆã€‚</li>
</ul>
<h3 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h3><ul>
<li><strong><a href="Documentation/GettingStarted.md">Get started using Lumberjack</a></strong></li>
<li><a href="Documentation/XcodeTricks.md">Different log levels for Debug and Release builds</a></li>
<li><a href="Documentation/PerLoggerLogLevels.md">Different log levels for each logger</a></li>
<li><a href="Documentation/XcodeColors.md">Use colors in the Xcode debugging console</a></li>
<li><a href="Documentation/CustomFormatters.md">Write your own custom formatters</a></li>
<li><a href="Documentation/FAQ.md">FAQ</a></li>
<li><a href="Documentation/Performance.md">Analysis of performance with benchmarks</a></li>
<li><a href="Documentation/ProblemSolution.md">Common issues you may encounter and their solutions</a></li>
<li><a href="Documentation/AppCode-support.md">AppCode support</a></li>
<li><strong><a href="Documentation/">Full Lumberjack documentation</a></strong></li>
</ul>
<h3 id="é…ç½®éœ€æ±‚"><a href="#é…ç½®éœ€æ±‚" class="headerlink" title="é…ç½®éœ€æ±‚"></a>é…ç½®éœ€æ±‚</h3><p>å½“å‰ç‰ˆæœ¬çš„ <strong>Lumberjack</strong> éœ€è¦:</p>
<ul>
<li>Xcode 8 or later</li>
<li>Swift 3.0 or later</li>
<li>iOS 5 or later</li>
<li>OS X 10.7 or later</li>
<li>WatchOS 2 or later</li>
<li>TVOS 9 or later</li>
</ul>
<h4 id="å‘åå…¼å®¹æ€§"><a href="#å‘åå…¼å®¹æ€§" class="headerlink" title="å‘åå…¼å®¹æ€§"></a>å‘åå…¼å®¹æ€§</h4><ul>
<li>for Xcode 7.3 and Swift 2.3, use the 2.4.0 version</li>
<li>for Xcode 7.3 and Swift 2.2, use the 2.3.0 version</li>
<li>for Xcode 7.2 and 7.1, use the 2.2.0 version</li>
<li>for Xcode 7.0 or earlier, use the 2.1.0 version</li>
<li>for Xcode 6 or earlier, use the 2.0.x version</li>
<li>for OS X &lt; 10.7 support, use the 1.6.0 version</li>
</ul>
<h3 id="æ²Ÿé€š"><a href="#æ²Ÿé€š" class="headerlink" title="æ²Ÿé€š"></a>æ²Ÿé€š</h3><ul>
<li>If you <strong>need help</strong>, use <a href="http://stackoverflow.com/questions/tagged/lumberjack" target="_blank" rel="noopener">Stack Overflow</a>. (Tag â€˜lumberjackâ€™)</li>
<li>If youâ€™d like to <strong>ask a general question</strong>, use <a href="http://stackoverflow.com/questions/tagged/lumberjack" target="_blank" rel="noopener">Stack Overflow</a>.</li>
<li>If you <strong>found a bug</strong>, open an issue.</li>
<li>If you <strong>have a feature request</strong>, open an issue.</li>
<li>If you <strong>want to contribute</strong>, submit a pull request.</li>
</ul>
<h3 id="ä½œè€…"><a href="#ä½œè€…" class="headerlink" title="ä½œè€…"></a>ä½œè€…</h3><ul>
<li><a href="https://github.com/robbiehanson" target="_blank" rel="noopener">Robbie Hanson</a></li>
<li>Love the project? Wanna buy me a coffee? (or a beer :D) <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=UZRA26JPJB3DA" target="_blank" rel="noopener">[å›¾ç‰‡ä¸Šä¼ å¤±è´¥â€¦(image-d928bf-1510647423281)]</a></li>
</ul>
<h3 id="Collaborators"><a href="#Collaborators" class="headerlink" title="Collaborators"></a>Collaborators</h3><ul>
<li><a href="https://github.com/rivera-ernesto" target="_blank" rel="noopener">Ernesto Rivera</a></li>
<li><a href="https://github.com/dvor" target="_blank" rel="noopener">Dmitry Vorobyov</a></li>
<li><a href="https://github.com/bpoplauschi" target="_blank" rel="noopener">Bogdan Poplauschi</a></li>
<li><a href="https://github.com/MaddTheSane" target="_blank" rel="noopener">C.W. Betts</a></li>
</ul>
<h3 id="License"><a href="#License" class="headerlink" title="License"></a>License</h3><ul>
<li>CocoaLumberjack is available under the BSD license. See the <a href="https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/LICENSE.txt" target="_blank" rel="noopener">LICENSE file</a>.</li>
</ul>
<h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-7a30a685c34455a5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>âš ï¸ å…‰çœ‹ <strong>README.md</strong> æ–‡æ¡£å…¶å®æ˜¯å®Œå…¨ä¸å¤Ÿçš„ï¼Œæˆ‘å‘ç°å®é™…é¡¹ç›®ä¸­ä½¿ç”¨æ—¶è¿˜æ˜¯æœ‰å¾ˆå¤šæ³¨æ„ç‚¹ï¼Œæœ€å¥½è¯¦ç»†çœ‹çœ‹ <strong>Documentation</strong> é‡Œé¢çš„æ–‡ç« ã€‚</p>
<h3 id="ä½¿ç”¨æ­¤æ¡†æ¶å‰ï¼Œæ‰“å°æ—¥å¿—æ˜¯è¿™ä¹ˆåšçš„"><a href="#ä½¿ç”¨æ­¤æ¡†æ¶å‰ï¼Œæ‰“å°æ—¥å¿—æ˜¯è¿™ä¹ˆåšçš„" class="headerlink" title="ä½¿ç”¨æ­¤æ¡†æ¶å‰ï¼Œæ‰“å°æ—¥å¿—æ˜¯è¿™ä¹ˆåšçš„"></a>ä½¿ç”¨æ­¤æ¡†æ¶å‰ï¼Œæ‰“å°æ—¥å¿—æ˜¯è¿™ä¹ˆåšçš„</h3><hr>
<p>è®°å½•æ—¥å¿—ä¸€èˆ¬åšæ³•æ˜¯åœ¨ Release æ¨¡å¼ä¸‹ç¦ç”¨ NSLogï¼Œæ¯”å¦‚åœ¨ <code>.pch</code> æ–‡ä»¶ä¸­ï¼Œé€šè¿‡å¯¹ç¯å¢ƒçš„åˆ¤æ–­ï¼Œå¯¹ <code>NSLog</code> åšä¸åŒçš„å¤„ç†ã€‚å› æ­¤ï¼Œåœ¨ä¸ä½¿ç”¨ <strong>CocoaLumberjack</strong> ä¹‹å‰ï¼Œæˆ‘çš„<code>.pch</code> æ–‡ä»¶ä¸­æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/****************** æ‰“å°æ—¥å¿— ******************/</span><br><span class="line">#ifdef DEBUG</span><br><span class="line">#define HQString [NSString stringWithFormat:@&quot;%s&quot;, __FILE__].lastPathComponent</span><br><span class="line">#define HQLog(...) printf(&quot;%s: %s ç¬¬%dè¡Œ:\n %s\n\n&quot;, [[NSString hql_stringDate] UTF8String], [HQString UTF8String] , __LINE__, [[NSString stringWithFormat:__VA_ARGS__] UTF8String]);</span><br><span class="line">#else</span><br><span class="line">#define  HQLog(...);</span><br><span class="line">#endif	/* DEBUG */</span><br></pre></td></tr></table></figure>
<p>è¿˜éœ€è¦ä¸º <code>NSString</code> ç±»å†™ä¸€ä¸ªèŒƒç•´ç±»æ–¹æ³•è¾“å‡ºæ—¶é—´ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+ (NSString *)hql_stringDate &#123;</span><br><span class="line">    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];</span><br><span class="line">    [dateFormatter setDateFormat:@&quot;YYYY-MM-dd hh:mm:ss&quot;];</span><br><span class="line">    NSString *dateString = [dateFormatter stringFromDate:[NSDate date]];</span><br><span class="line">    return dateString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é¡¹ç›®ä¸­ä½¿ç”¨CocoaLumberjack"><a href="#é¡¹ç›®ä¸­ä½¿ç”¨CocoaLumberjack" class="headerlink" title="é¡¹ç›®ä¸­ä½¿ç”¨CocoaLumberjack"></a>é¡¹ç›®ä¸­ä½¿ç”¨CocoaLumberjack</h2><ul>
<li><a href="https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/Documentation/GettingStarted.md" target="_blank" rel="noopener">Getting started with the CocoaLumberjack framework.</a></li>
</ul>
<hr>
<p>ä½¿ç”¨ <strong>CocoaLumberjack</strong>  åˆ†ä¸ºä¸‰æ­¥ï¼š</p>
<ol>
<li>æ·»åŠ  <strong>CocoaLumberjack</strong> æ–‡ä»¶åˆ°é¡¹ç›®ä¸­ï¼›</li>
<li>é“¾æ¥é…ç½® <strong>CocoaLumberjack</strong>ï¼›</li>
<li>å°†ä½ çš„ <code>NSLog</code> è¯­å¥è½¬æ¢ä¸ºä½¿ç”¨ <strong>CocoaLumberjack</strong> å®;</li>
</ol>
<h3 id="æ·»åŠ -CocoaLumberjack-æ–‡ä»¶åˆ°é¡¹ç›®ä¸­"><a href="#æ·»åŠ -CocoaLumberjack-æ–‡ä»¶åˆ°é¡¹ç›®ä¸­" class="headerlink" title="æ·»åŠ  CocoaLumberjack æ–‡ä»¶åˆ°é¡¹ç›®ä¸­"></a>æ·»åŠ  <strong>CocoaLumberjack</strong> æ–‡ä»¶åˆ°é¡¹ç›®ä¸­</h3><h4 id="Cocoapods"><a href="#Cocoapods" class="headerlink" title="Cocoapods"></a>Cocoapods</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">platform :ios, &apos;8.0&apos;</span><br><span class="line">pod &apos;CocoaLumberjack&apos;</span><br></pre></td></tr></table></figure>
<h3 id="é“¾æ¥é…ç½®-CocoaLumberjack"><a href="#é“¾æ¥é…ç½®-CocoaLumberjack" class="headerlink" title="é“¾æ¥é…ç½® CocoaLumberjack"></a>é“¾æ¥é…ç½® <strong>CocoaLumberjack</strong></h3><ol>
<li>å¼•å…¥å¤´æ–‡ä»¶</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#define LOG_LEVEL_DEF ddLogLevel</span><br><span class="line">#import &lt;CocoaLumberjack/CocoaLumberjack.h&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>è®¾ç½®å…¨å±€çŠ¶æ€ Log çº§åˆ«</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static const DDLogLevel ddLogLevel = DDLogLevelDebug;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ä»¥ä¸Šä¸¤ä¸ªæ­¥éª¤åœ¨ <code>.pch</code> ä¸­è®¾ç½®å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/** æ‰“å°æ—¥å¿— */</span><br><span class="line">#define LOG_LEVEL_DEF ddLogLevel</span><br><span class="line">#import &lt;CocoaLumberjack/CocoaLumberjack.h&gt;</span><br><span class="line"></span><br><span class="line">#ifdef DEBUG</span><br><span class="line">static const DDLogLevel ddLogLevel = DDLogLevelVerbose;</span><br><span class="line">#else</span><br><span class="line">static const DDLogLevel ddLogLevel = DDLogLevelWarning;</span><br><span class="line">#endif	/* DEBUG */</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><code>AppDelegate.m</code>æ–‡ä»¶</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</span><br><span class="line">    // DDTTYLoggerï¼Œä½ çš„æ—¥å¿—è¯­å¥å°†è¢«å‘é€åˆ°Xcodeæ§åˆ¶å°</span><br><span class="line">    [DDLog addLogger:[DDTTYLogger sharedInstance]];</span><br><span class="line"></span><br><span class="line">    // DDASLLoggerï¼Œä½ çš„æ—¥å¿—è¯­å¥å°†è¢«å‘é€åˆ°è‹¹æœæ–‡ä»¶ç³»ç»Ÿã€ä½ çš„æ—¥å¿—çŠ¶æ€ä¼šè¢«å‘é€åˆ° Console.app</span><br><span class="line">    [DDLog addLogger:[DDASLLogger sharedInstance]];</span><br><span class="line"></span><br><span class="line">    // DDFileLoggerï¼Œä½ çš„æ—¥å¿—è¯­å¥å°†å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé»˜è®¤è·¯å¾„åœ¨æ²™ç›’çš„Library/Caches/Logs/ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸ºbundleid+ç©ºæ ¼+æ—¥æœŸ.logã€‚</span><br><span class="line">    DDFileLogger *fileLogger = [[DDFileLogger alloc] init];</span><br><span class="line">    fileLogger.rollingFrequency = 60 * 60 * 24; // åˆ·æ–°é¢‘ç‡ä¸º24å°æ—¶</span><br><span class="line">    fileLogger.logFileManager.maximumNumberOfLogFiles = 7; // ä¿å­˜ä¸€å‘¨çš„æ—¥å¿—ï¼Œå³7å¤©</span><br><span class="line">    [DDLog addLogger:fileLogger];</span><br><span class="line"></span><br><span class="line">    // äº§ç”ŸLog</span><br><span class="line">    DDLogVerbose(@&quot;Verbose&quot;);	// è¯¦ç»†æ—¥å¿—</span><br><span class="line">    DDLogDebug(@&quot;Debug&quot;);    	// è°ƒè¯•æ—¥å¿—</span><br><span class="line">    DDLogInfo(@&quot;Info&quot;);     	// ä¿¡æ¯æ—¥å¿—</span><br><span class="line">    DDLogWarn(@&quot;Warn&quot;);			// è­¦å‘Šæ—¥å¿—</span><br><span class="line">    DDLogError(@&quot;Error&quot;);		// é”™è¯¯æ—¥å¿—</span><br><span class="line"></span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç¨‹åºï¼Œå¯ä»¥åœ¨Xocdeæ§åˆ¶å°çœ‹åˆ°ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1608265-b750b65396b1febe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ä½¿ç”¨å‰åçš„å˜åŒ–ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Convert from this:</span><br><span class="line">NSLog(@&quot;Broken sprocket detected!&quot;);</span><br><span class="line">NSLog(@&quot;User selected file:%@ withSize:%u&quot;, filePath, fileSize);</span><br><span class="line"></span><br><span class="line">// To this:</span><br><span class="line">DDLogError(@&quot;Broken sprocket detected!&quot;);</span><br><span class="line">DDLogVerbose(@&quot;User selected file:%@ withSize:%u&quot;, filePath, fileSize);</span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„é‚£æ ·ï¼Œ<code>DDLog</code> å®ä¸ <code>NSLog</code> å…·æœ‰å®Œå…¨ç›¸åŒçš„è¯­æ³•ã€‚</p>
<h2 id="CocoaLumberjack-çš„-Log-æ ·å¼"><a href="#CocoaLumberjack-çš„-Log-æ ·å¼" class="headerlink" title="CocoaLumberjack çš„ Log æ ·å¼"></a>CocoaLumberjack çš„ Log æ ·å¼</h2><ol>
<li><strong>DDLog</strong>ï¼ˆæ•´ä¸ªæ¡†æ¶çš„åŸºç¡€ï¼‰</li>
<li><strong>DDASLLogger</strong>ï¼ˆå‘é€æ—¥å¿—åˆ°è‹¹æœçš„æ—¥å¿—ç³»ç»Ÿï¼Œä»¥ä¾¿å®ƒä»¬æ˜¾ç¤ºåœ¨Console.appä¸Šï¼‰</li>
<li><strong>DDTTYLoyger</strong>ï¼ˆå‘é€æ—¥å¿—åˆ°Xcodeæ§åˆ¶å°ï¼‰</li>
<li><strong>DDFIleLoger</strong>ï¼ˆæŠŠæ—¥å¿—å†™å…¥æœ¬åœ°æ–‡ä»¶ï¼‰</li>
</ol>
<h3 id="Logçº§åˆ«"><a href="#Logçº§åˆ«" class="headerlink" title="Logçº§åˆ«"></a>Logçº§åˆ«</h3><p>ä½ éœ€è¦è€ƒè™‘ç”¨å“ªç§æ—¥å¿—çº§åˆ«ï¼Œ<strong>CocoaLumberjack</strong> æœ‰5ç§ <code>DDLogFlag</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_OPTIONS(NSUInteger, DDLogFlag)&#123;</span><br><span class="line">    DDLogFlagError      = (1 &lt;&lt; 0),</span><br><span class="line">    DDLogFlagWarning    = (1 &lt;&lt; 1),</span><br><span class="line">    DDLogFlagInfo       = (1 &lt;&lt; 2),</span><br><span class="line">    DDLogFlagDebug      = (1 &lt;&lt; 3),</span><br><span class="line">    DDLogFlagVerbose    = (1 &lt;&lt; 4)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>DDLogLevel</code> ç”¨æ¥è¿‡æ»¤æ¯æ¡Log</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSUInteger, DDLogLevel)&#123;</span><br><span class="line">    DDLogLevelOff       = 0,</span><br><span class="line">    DDLogLevelError     = (DDLogFlagError),</span><br><span class="line">    DDLogLevelWarning   = (DDLogLevelError   | DDLogFlagWarning),</span><br><span class="line">    DDLogLevelInfo      = (DDLogLevelWarning | DDLogFlagInfo),</span><br><span class="line">    DDLogLevelDebug     = (DDLogLevelInfo    | DDLogFlagDebug),</span><br><span class="line">    DDLogLevelVerbose   = (DDLogLevelDebug   | DDLogFlagVerbose),</span><br><span class="line">    DDLogLevelAll       = NSUIntegerMax</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œå¦‚æœä½ å°†æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º <code>DDLogLevelInfo</code>ï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ° <strong>DDLogLevelError</strong>ã€<strong>DDLogLevelWarning</strong> å’Œ<strong>DDLogLevelInfo</strong>è¯­å¥ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥<a href="https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/Documentation/CustomLogLevels.md" target="_blank" rel="noopener">è‡ªå®šä¹‰Logçº§åˆ«æˆ–è€…æ¯ä¸ªçº§åˆ«çš„åå­—</a>æˆ–è€…<a href="https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/Documentation/FineGrainedLogging.md" target="_blank" rel="noopener">åœ¨å•çº¯çš„çº§åˆ«ä¸Šå¢åŠ ä¸€äº›é«˜çº§ç”¨æ³•</a></p>
<hr>
<ul>
<li><a href="https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/Documentation/XcodeTricks.md" target="_blank" rel="noopener">Automatically use different log levels per xcode configuration.</a></li>
</ul>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºDebugå’ŒReleaseæ¨¡å¼è®¾ç½®ä¸åŒçš„Logçº§åˆ«ï¼š</p>
<p>Xcode 4+ :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#ifdef DEBUG </span><br><span class="line">static const DDLogLevel ddLogLevel = DDLogLevelVerbose;</span><br><span class="line">#else </span><br><span class="line">static const DDLogLevel ddLogLevel = DDLogLevelWarning;</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li><a href="https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/Documentation/PerLoggerLogLevels.md" target="_blank" rel="noopener">Use Log Level per Logger</a></li>
</ul>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæ¯ç§ logger è®°å½•å™¨è®¾ç½®ä¸åŒçš„æ—¥å¿—çº§åˆ«ï¼š</p>
<p>å¦‚æœä½ éœ€è¦ä¸ºæ¯ä¸ª logger è®°å½•å™¨ä½¿ç”¨ä¸åŒçš„æ—¥å¿—çº§åˆ«ï¼ˆå³ï¼Œå¦‚æœä½ æœ‰è‡ªå®šä¹‰è®°å½•å™¨ï¼Œå¦‚Crashlyticsè®°å½•å™¨ï¼Œå®ƒä¸åº”è¯¥è®°å½• Info æˆ– Debugï¼‰ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ <code>[DDLog addLoggerï¼šwithLevelï¼š]</code>æ–¹æ³•è½»æ¾å®ç°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[DDLog addLogger:[DDASLLogger sharedInstance] withLevel:DDLogLevelInfo];</span><br><span class="line">[DDLog addLogger:[DDTTYLogger sharedInstance] withLevel:DDLogLevelDebug];</span><br></pre></td></tr></table></figure>
<p>ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨æ—§çš„ç±»æ–¹æ³•<code>+ addLoggerï¼š</code>ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨ <strong>DDLogLevelVerbose</strong> ä½œä¸ºé»˜è®¤å€¼ï¼Œå®ƒä¸ä¼šæ’é™¤ä»»ä½•æ—¥å¿—ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>[DDLog allLoggersWithLevel]</code>æ–¹æ³•æ£€ç´¢ä¸ <strong>DDLog</strong> å…³è”çš„æ¯ä¸ªè®°å½•å™¨å’Œçº§åˆ«çš„åˆ—è¡¨ã€‚</p>
<hr>
<h3 id="è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼"><a href="#è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼" class="headerlink" title="è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼"></a>è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼</h3><ul>
<li><a href="https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/Documentation/CustomFormatters.md" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£è‡ªå®šä¹‰æ—¥å¿—çš„formatteræ ¼å¼</a>ï¼š</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .h</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;DDLog.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HQLCustomFormatter</span> : <span class="title">NSObject</span> &lt;<span class="title">DDLogFormatter</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> atomicLoggerCount;</span><br><span class="line">    <span class="built_in">NSDateFormatter</span> *threadUnsafeDateFormatter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .m</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"HQLCustomFormatter.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;libkern/OSAtomic.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> KdateFormatString = <span class="string">@"yyyy/MM/dd HH:mm:ss"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">HQLCustomFormatter</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)stringFromDate:(<span class="built_in">NSDate</span> *)date &#123;</span><br><span class="line">    int32_t loggerCount = OSAtomicAdd32(<span class="number">0</span>, &amp;atomicLoggerCount);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (loggerCount &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// Single-threaded mode.</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (threadUnsafeDateFormatter == <span class="literal">nil</span>) &#123;</span><br><span class="line">            threadUnsafeDateFormatter = [[<span class="built_in">NSDateFormatter</span> alloc] init];</span><br><span class="line">            [threadUnsafeDateFormatter setDateFormat:KdateFormatString];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> [threadUnsafeDateFormatter stringFromDate:date];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Multi-threaded mode.</span></span><br><span class="line">        <span class="comment">// NSDateFormatter is NOT thread-safe.</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSString</span> *key = <span class="string">@"MyCustomFormatter_NSDateFormatter"</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSMutableDictionary</span> *threadDictionary = [[<span class="built_in">NSThread</span> currentThread] threadDictionary];</span><br><span class="line">        <span class="built_in">NSDateFormatter</span> *dateFormatter = [threadDictionary objectForKey:key];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (dateFormatter == <span class="literal">nil</span>) &#123;</span><br><span class="line">            dateFormatter = [[<span class="built_in">NSDateFormatter</span> alloc] init];</span><br><span class="line">            [dateFormatter setDateFormat:KdateFormatString];</span><br><span class="line">            </span><br><span class="line">            [threadDictionary setObject:dateFormatter forKey:key];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> [dateFormatter stringFromDate:date];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - DDLogFormatter</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)formatLogMessage:(DDLogMessage *)logMessage &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *logLevel; <span class="comment">// æ—¥å¿—ç­‰çº§</span></span><br><span class="line">    <span class="keyword">switch</span> (logMessage-&gt;_flag) &#123;</span><br><span class="line">        <span class="keyword">case</span> DDLogFlagError    : logLevel = <span class="string">@"Error"</span>;   <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> DDLogFlagWarning  : logLevel = <span class="string">@"Warning"</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> DDLogFlagInfo     : logLevel = <span class="string">@"Info"</span>;    <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> DDLogFlagDebug    : logLevel = <span class="string">@"Debug"</span>;   <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>                : logLevel = <span class="string">@"Verbose"</span>; <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *dateAndTime = [<span class="keyword">self</span> stringFromDate:(logMessage.timestamp)]; <span class="comment">// æ—¥æœŸå’Œæ—¶é—´</span></span><br><span class="line">    <span class="built_in">NSString</span> *logFileName = logMessage -&gt; _fileName; <span class="comment">// æ–‡ä»¶å</span></span><br><span class="line">    <span class="built_in">NSString</span> *logFunction = logMessage -&gt; _function; <span class="comment">// æ–¹æ³•å</span></span><br><span class="line">    <span class="built_in">NSUInteger</span> logLine = logMessage -&gt; _line;        <span class="comment">// è¡Œå·</span></span><br><span class="line">    <span class="built_in">NSString</span> *logMsg = logMessage-&gt;_message;         <span class="comment">// æ—¥å¿—æ¶ˆæ¯</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ—¥å¿—æ ¼å¼ï¼šæ—¥æœŸå’Œæ—¶é—´ æ–‡ä»¶å æ–¹æ³•å : è¡Œæ•° &lt;æ—¥å¿—ç­‰çº§&gt; æ—¥å¿—æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@ %@ %@ : %lu &lt;%@&gt; %@"</span>, dateAndTime, logFileName, logFunction, logLine, logLevel, logMsg];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)didAddToLogger:(<span class="keyword">id</span> &lt;DDLogger&gt;)logger &#123;</span><br><span class="line">    OSAtomicIncrement32(&amp;atomicLoggerCount);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)willRemoveFromLogger:(<span class="keyword">id</span> &lt;DDLogger&gt;)logger &#123;</span><br><span class="line">    OSAtomicDecrement32(&amp;atomicLoggerCount);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œè‡ªå®šä¹‰å¥½æ—¥å¿—ä¹‹åè®°å¾—æ·»åŠ <br><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">[DDTTYLogger sharedInstance]</span>.logFormatter = <span class="comment">[<span class="comment">[HQLCustomFormatter alloc]</span> init]</span>; // è‡ªå®šä¹‰æ—¥å¿—</span><br><span class="line"><span class="comment">[DDLog addLogger:<span class="comment">[DDTTYLogger sharedInstance]</span>]</span>; // TTY = Xcode console</span><br><span class="line"><span class="comment">[DDLog addLogger:<span class="comment">[DDASLLogger sharedInstance]</span>]</span>; // ASL = Apple System Logs</span><br><span class="line"></span><br><span class="line">DDFileLogger *fileLogger = <span class="comment">[<span class="comment">[DDFileLogger alloc]</span> init]</span>; // File Logger</span><br><span class="line">fileLogger.rollingFrequency = 60 * 60 * 24; // 24 hour rolling</span><br><span class="line">fileLogger.logFileManager.maximumNumberOfLogFiles = 7;</span><br><span class="line"><span class="comment">[DDLog addLogger:fileLogger]</span>;</span><br></pre></td></tr></table></figure></p>
<p>æ›´å¤šè¯¦ç»†æ–‡æ¡£:</p>
<ul>
<li><a href="https://github.com/CocoaLumberjack/CocoaLumberjack/tree/master/Documentation" target="_blank" rel="noopener">CocoaLumberjack Documentation</a></li>
</ul>
<h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-7a9ea31f196204cf.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</blockquote>
<h4 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h4><ul>
<li><a href="https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/Documentation/GettingStarted.md" target="_blank" rel="noopener"><em>Getting started with the CocoaLumberjack framework.</em></a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#define LOG_LEVEL_DEF ddLogLevel // è¦å…ˆè®¾ç½®å®å®šä¹‰</span><br><span class="line">#import &lt;CocoaLumberjack/CocoaLumberjack.h&gt;</span><br><span class="line"></span><br><span class="line">#ifdef DEBUG</span><br><span class="line">static const DDLogLevel ddLogLevel = DDLogLevelVerbose; // ddLogLevel æ³¨æ„å¤§å°å†™è¦ä¸€è‡´</span><br><span class="line">#else</span><br><span class="line">static const DDLogLevel ddLogLevel = DDLogLevelWarning;</span><br><span class="line">#endif	/* DEBUG */</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://www.jianshu.com/p/7b799bef0107" target="_blank" rel="noopener">CocoaLumberjackï¼šç®€å•å¥½ç”¨çš„Logåº“</a></li>
<li><a href="https://zllbird.github.io/2016/01/09/cocoalumberjackçš„é›†æˆå’Œå­¦ä¹ /" target="_blank" rel="noopener">CocoaLumberjackçš„é›†æˆå’Œå­¦ä¹ </a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/21/iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† HQLPasswordViewDemo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/21/iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† HQLPasswordViewDemo/" class="post-title-link" itemprop="url">iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† HQLPasswordViewDemo</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-21 09:37:00" itemprop="dateCreated datePublished" datetime="2017-06-21T09:37:00+08:00">2017-06-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:11:28" itemprop="dateModified" datetime="2019-04-18T01:11:28+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/21/iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† HQLPasswordViewDemo/" class="leancloud_visitors" data-flag-title="iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† HQLPasswordViewDemo">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h1 id="HQLPasswordViewDemo"><a href="#HQLPasswordViewDemo" class="headerlink" title="HQLPasswordViewDemo"></a>HQLPasswordViewDemo</h1><p>ä¹‹å‰ä¸€ç¯‡æ–‡ç« ï¼š<a href="http://www.jianshu.com/p/833a38476c63" target="_blank" rel="noopener">å¯†ç è¾“å…¥æ¡†ï¼šCYPasswordView_Block æºç è§£æ</a> ç²—ç•¥çš„åˆ†æäº† <strong>CYPasswordView</strong> çš„æºç ï¼Œå› ä¸ºè¦ç”¨åˆ°ï¼Œä½†æ˜¯æ€»è§‰å¾—å®ç°çš„æ–¹å¼ä¸å¤Ÿä¼˜é›…ï¼Œäºæ˜¯æˆ‘åˆç…§ç€é‡å†™äº†ä¸€éï¼Œåœ¨å¤§è‡´å®ç°æ–¹å¼åŸºæœ¬ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä¼˜åŒ–äº†äº›è®¸åœ°æ–¹ï¼š</p>
<h3 id="ä¸€ã€æ¡†æ¶ç»“æ„"><a href="#ä¸€ã€æ¡†æ¶ç»“æ„" class="headerlink" title="ä¸€ã€æ¡†æ¶ç»“æ„"></a>ä¸€ã€æ¡†æ¶ç»“æ„</h3><hr>
<p>æ¡†æ¶ç»“æ„åŸºæœ¬ä¸å˜ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-3be0d798b2a87150.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="äºŒã€HQLPasswordBackgroundView"><a href="#äºŒã€HQLPasswordBackgroundView" class="headerlink" title="äºŒã€HQLPasswordBackgroundView"></a>äºŒã€HQLPasswordBackgroundView</h3><hr>
<p>èƒŒæ™¯è§†å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-f8ab82a1c1e54a7d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ä¿®æ”¹æˆ–è€…ä¼˜åŒ–çš„åœ°æ–¹ï¼š</p>
<ul>
<li>æ ‡é¢˜æ”¹ç”¨ label æ ‡ç­¾çš„å½¢å¼æ˜¾ç¤ºï¼›</li>
<li><code>drawRect:</code> æ–¹æ³•ä¸­åªç”»äº†èƒŒæ™¯è§†å›¾å’Œè¾“å…¥æ¡†ï¼›</li>
<li>é‡æ„äº†é‡ç½®å°åœ†ç‚¹çš„å®ç°æ–¹å¼ï¼›</li>
</ul>
<h4 id="1ï¸âƒ£-æ ‡é¢˜æ”¹ç”¨-label-æ ‡ç­¾çš„å½¢å¼æ˜¾ç¤º"><a href="#1ï¸âƒ£-æ ‡é¢˜æ”¹ç”¨-label-æ ‡ç­¾çš„å½¢å¼æ˜¾ç¤º" class="headerlink" title="1ï¸âƒ£ æ ‡é¢˜æ”¹ç”¨ label æ ‡ç­¾çš„å½¢å¼æ˜¾ç¤º"></a>1ï¸âƒ£ æ ‡é¢˜æ”¹ç”¨ label æ ‡ç­¾çš„å½¢å¼æ˜¾ç¤º</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">    self = [super initWithFrame:frame];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        [self setupSubViews];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** æ·»åŠ å­æ§ä»¶ */</span><br><span class="line">- (void)setupSubViews &#123;</span><br><span class="line">    [self addSubview:self.titleLabel];</span><br><span class="line">    [self addSubview:self.closeButton];</span><br><span class="line">    [self addSubview:self.forgetPwdButton];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)layoutSubviews &#123;</span><br><span class="line">    [super layoutSubviews];</span><br><span class="line">    </span><br><span class="line">    // è®¾ç½®ã€æ ‡é¢˜ã€‘çš„åæ ‡</span><br><span class="line">    self.titleLabel.centerX = HQLScreenWidth * 0.5;</span><br><span class="line">    self.titleLabel.centerY = HQLPasswordViewTitleHeight * 0.5;</span><br><span class="line">    </span><br><span class="line">    // è®¾ç½®ã€å…³é—­æŒ‰é’®ã€‘çš„åæ ‡</span><br><span class="line">    self.closeButton.width  = HQLPasswordViewCloseButtonWH;</span><br><span class="line">    self.closeButton.height = HQLPasswordViewCloseButtonWH;</span><br><span class="line">    self.closeButton.x = HQLPasswordViewCloseButtonMarginLeft;</span><br><span class="line">    self.closeButton.centerY = HQLPasswordViewTitleHeight * 0.5;</span><br><span class="line">    </span><br><span class="line">    // è®¾ç½®ã€å¿˜è®°å¯†ç ã€‘æŒ‰é’®çš„åæ ‡</span><br><span class="line">    self.forgetPwdButton.x = HQLScreenWidth - (HQLScreenWidth - HQLPasswordViewTextFieldWidth) * 0.5 - self.forgetPwdButton.width;</span><br><span class="line">    self.forgetPwdButton.y = HQLPasswordViewTitleHeight + HQLPasswordViewTextFieldMarginTop + HQLPasswordViewTextFieldHeight + HQLPasswordViewForgetPWDButtonMarginTop;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2ï¸âƒ£-drawRect-æ–¹æ³•ä¸­åªç”»äº†èƒŒæ™¯è§†å›¾å’Œè¾“å…¥æ¡†ï¼›"><a href="#2ï¸âƒ£-drawRect-æ–¹æ³•ä¸­åªç”»äº†èƒŒæ™¯è§†å›¾å’Œè¾“å…¥æ¡†ï¼›" class="headerlink" title="2ï¸âƒ£ drawRect: æ–¹æ³•ä¸­åªç”»äº†èƒŒæ™¯è§†å›¾å’Œè¾“å…¥æ¡†ï¼›"></a>2ï¸âƒ£ <code>drawRect:</code> æ–¹æ³•ä¸­åªç”»äº†èƒŒæ™¯è§†å›¾å’Œè¾“å…¥æ¡†ï¼›</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (void)drawRect:(CGRect)rect &#123;</span><br><span class="line">    // ç”»èƒŒæ™¯è§†å›¾</span><br><span class="line">    UIImage *backgroundImage =</span><br><span class="line">        [UIImage imageNamed:HQLPasswordViewSrcName(@&quot;password_background&quot;)];</span><br><span class="line">    [backgroundImage drawInRect:rect];</span><br><span class="line">    </span><br><span class="line">    // ç”»è¾“å…¥æ¡†</span><br><span class="line">    UIImage *imgTextField =</span><br><span class="line">        [UIImage imageNamed:HQLPasswordViewSrcName(@&quot;password_textfield&quot;)];</span><br><span class="line">    [imgTextField drawInRect:[self textFieldRect]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3ï¸âƒ£-é‡æ„äº†é‡ç½®å°åœ†ç‚¹çš„å®ç°æ–¹å¼ï¼›"><a href="#3ï¸âƒ£-é‡æ„äº†é‡ç½®å°åœ†ç‚¹çš„å®ç°æ–¹å¼ï¼›" class="headerlink" title="3ï¸âƒ£ é‡æ„äº†é‡ç½®å°åœ†ç‚¹çš„å®ç°æ–¹å¼ï¼›"></a>3ï¸âƒ£ é‡æ„äº†é‡ç½®å°åœ†ç‚¹çš„å®ç°æ–¹å¼ï¼›</h4><ol>
<li>é¦–å…ˆæ•°ç»„ä¸­å­˜æ”¾çš„æ˜¯6ä¸ª <code>dotsImageView</code> å¯¹è±¡ï¼Œå¯¹åº”6ä¸ªä¸åŒä½ç½®çš„ â—</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">- (NSMutableArray *)dotsImgArray &#123;</span><br><span class="line">    if (!_dotsImgArray) &#123;</span><br><span class="line">        _dotsImgArray = [NSMutableArray arrayWithCapacity:KPasswordNumber];</span><br><span class="line">        for (int i = 0; i &lt; KPasswordNumber; i++) &#123;</span><br><span class="line">            </span><br><span class="line">            // textField çš„ Rect</span><br><span class="line">            CGFloat textFieldW = HQLPasswordViewTextFieldWidth;</span><br><span class="line">            CGFloat textFieldH = HQLPasswordViewTextFieldHeight;</span><br><span class="line">            CGFloat textFieldX = (HQLScreenWidth - textFieldW) * 0.5;</span><br><span class="line">            CGFloat textFieldY = HQLPasswordViewTitleHeight + HQLPasswordViewTextFieldMarginTop;</span><br><span class="line">           </span><br><span class="line">            // åœ†ç‚¹ çš„ Rect</span><br><span class="line">            CGFloat pointW = HQLPasswordViewPointnWH;</span><br><span class="line">            CGFloat pointH = HQLPasswordViewPointnWH;</span><br><span class="line">            CGFloat pointY = textFieldY + (textFieldH - pointH) * 0.5;</span><br><span class="line">            // ä¸€ä¸ªæ ¼å­çš„å®½åº¦</span><br><span class="line">            CGFloat cellW = textFieldW / KPasswordNumber;</span><br><span class="line">            CGFloat padding = (cellW - pointW) * 0.5;</span><br><span class="line">            // åœ†ç‚¹çš„ X</span><br><span class="line">            CGFloat pointX = textFieldX + (2 * i + 1) * padding + i * pointW;</span><br><span class="line">            // æ·»åŠ åœ†å½¢å›¾ç‰‡</span><br><span class="line">            UIImage *dotsImage =</span><br><span class="line">                [UIImage imageNamed:HQLPasswordViewSrcName(@&quot;password_point&quot;)];</span><br><span class="line">            UIImageView *dotsImageView =</span><br><span class="line">                [[UIImageView alloc] initWithImage:dotsImage];</span><br><span class="line">            dotsImageView.contentMode = UIViewContentModeScaleAspectFit;</span><br><span class="line">            dotsImageView.frame = CGRectMake(pointX, pointY, pointW, pointH);</span><br><span class="line">            // å…ˆå…¨éƒ¨éšè—</span><br><span class="line">            dotsImageView.hidden = YES;</span><br><span class="line">            </span><br><span class="line">            [self addSubview:dotsImageView];</span><br><span class="line">            [_dotsImgArray addObject:dotsImageView];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return _dotsImgArray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>é€šè¿‡ä¼ å…¥å½“å‰å¯†ç çš„é•¿åº¦ <code>length</code>  é‡ç½®å°åœ†ç‚¹ï¼Œæ¯” <code>length</code>å€¼å¤§çš„ <code>dotsImgArray</code> è§†å›¾è®¾ç½®ä¸ºæ˜¾ç¤ºï¼Œæ¯” <code>length</code>å€¼å°çš„ <code>dotsImgArray</code> è§†å›¾è®¾ç½®ä¸ºéšè—ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// é‡ç½®åœ†ç‚¹</span><br><span class="line">- (void)resetDotsWithLength:(NSUInteger)length &#123;</span><br><span class="line">    for (int i = 0; i &lt; self.dotsImgArray.count; i++) &#123;</span><br><span class="line">        if (length == 0 || i &gt;= length) &#123;</span><br><span class="line">            ((UIImageView *)[self.dotsImgArray objectAtIndex:i]).hidden = YES;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            ((UIImageView *)[self.dotsImgArray objectAtIndex:i]).hidden = NO;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="HQLPasswordView"><a href="#HQLPasswordView" class="headerlink" title="HQLPasswordView"></a>HQLPasswordView</h3><p>å¯†ç è¾“å…¥è§†å›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-f90c81c4a46ebd87.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ä¿®æ”¹æˆ–è€…ä¼˜åŒ–çš„åœ°æ–¹ï¼š</p>
<ul>
<li>å¯†ç è¾“å…¥æ¡† <code>pwdTextField</code> å’Œç”»ä¸Šå»çš„è¾“å…¥æ¡†å›¾ç‰‡ä¸€æ ·å¤§ï¼Œå¯ä»¥å“åº”ç”¨æˆ·è§¦æ‘¸å¹¶å¼¹å‡ºé”®ç›˜ï¼Œè€Œä¸æ˜¯ <code>CGRectMake(0, 0, 1, 1)</code>  ï¼›</li>
<li>ä¹‹å‰å¤šå‡ºæ¥çš„å•å‡»æ‰‹åŠ¿ä¹Ÿä¸æµªè´¹ï¼Œç»„ç»‡åˆæœ‰æ–°ä»»åŠ¡äº†ï¼šç”¨æˆ·å¦‚æœè§¦æ‘¸ä¸Šæ–¹ç°è‰²çš„è’™ç‰ˆè§†å›¾ä¹Ÿæ˜¯å¯ä»¥å…³é—­å¯†ç è¾“å…¥æ¡†çš„ã€‚</li>
<li>å› ä¸ºä¿®æ”¹äº†å°åœ†ç‚¹çš„å®ç°æ–¹å¼ï¼Œæ‰€ä»¥ <code>UITextFieldDelegate</code> å§”æ‰˜åè®®å®ç°æ–¹å¼ä¹Ÿæœ‰æ”¹åŠ¨ã€‚</li>
</ul>
<h4 id="1ï¸âƒ£-å¯†ç è¾“å…¥æ¡†-pwdTextField-å¯ä»¥å“åº”ç”¨æˆ·è§¦æ‘¸å¹¶å¼¹å‡ºé”®ç›˜"><a href="#1ï¸âƒ£-å¯†ç è¾“å…¥æ¡†-pwdTextField-å¯ä»¥å“åº”ç”¨æˆ·è§¦æ‘¸å¹¶å¼¹å‡ºé”®ç›˜" class="headerlink" title="1ï¸âƒ£ å¯†ç è¾“å…¥æ¡† pwdTextField å¯ä»¥å“åº”ç”¨æˆ·è§¦æ‘¸å¹¶å¼¹å‡ºé”®ç›˜"></a>1ï¸âƒ£ å¯†ç è¾“å…¥æ¡† <code>pwdTextField</code> å¯ä»¥å“åº”ç”¨æˆ·è§¦æ‘¸å¹¶å¼¹å‡ºé”®ç›˜</h4><p>åªè¦æŠŠå®ƒæ‰€æœ‰çš„é¢œè‰²è®¾ç½®ä¸ºé€æ˜å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (UITextField *)pwdTextField &#123;</span><br><span class="line">    if (!_pwdTextField) &#123;</span><br><span class="line">        _pwdTextField = [[UITextField alloc] init];</span><br><span class="line">        _pwdTextField.frame = [self.backgroundView textFieldRect];</span><br><span class="line">        _pwdTextField.backgroundColor = [UIColor clearColor];</span><br><span class="line">        _pwdTextField.textColor = [UIColor clearColor];</span><br><span class="line">        _pwdTextField.tintColor = [UIColor clearColor];</span><br><span class="line">        _pwdTextField.keyboardType = UIKeyboardTypeNumberPad;</span><br><span class="line">        _pwdTextField.delegate = self;</span><br><span class="line">    &#125;</span><br><span class="line">    return _pwdTextField;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2ï¸âƒ£-ç”¨æˆ·å¦‚æœè§¦æ‘¸ä¸Šæ–¹ç°è‰²çš„è’™ç‰ˆè§†å›¾å¯ä»¥å…³é—­å¯†ç è¾“å…¥æ¡†ã€‚"><a href="#2ï¸âƒ£-ç”¨æˆ·å¦‚æœè§¦æ‘¸ä¸Šæ–¹ç°è‰²çš„è’™ç‰ˆè§†å›¾å¯ä»¥å…³é—­å¯†ç è¾“å…¥æ¡†ã€‚" class="headerlink" title="2ï¸âƒ£ ç”¨æˆ·å¦‚æœè§¦æ‘¸ä¸Šæ–¹ç°è‰²çš„è’™ç‰ˆè§†å›¾å¯ä»¥å…³é—­å¯†ç è¾“å…¥æ¡†ã€‚"></a>2ï¸âƒ£ ç”¨æˆ·å¦‚æœè§¦æ‘¸ä¸Šæ–¹ç°è‰²çš„è’™ç‰ˆè§†å›¾å¯ä»¥å…³é—­å¯†ç è¾“å…¥æ¡†ã€‚</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> ç”¨æˆ·ç‚¹å‡»äº‹ä»¶,è§¦æ‘¸ç°è‰²è’™ç‰ˆåŒºåŸŸï¼Œå®ç°å…³é—­æ“ä½œ</span><br><span class="line"> */</span><br><span class="line">- (void)tap:(UITapGestureRecognizer *)recognizer &#123;</span><br><span class="line">    // è·å–ç‚¹å‡»çš„åæ ‡ä½ç½®</span><br><span class="line">    CGPoint point = [recognizer locationInView:self];</span><br><span class="line">    // è¾“å…¥æ¡†ä¸Šæ–¹çš„è’™ç‰ˆåŒºåŸŸ</span><br><span class="line">    CGRect frame = CGRectMake(0,</span><br><span class="line">                              0,</span><br><span class="line">                              HQLScreenWidth,</span><br><span class="line">                              HQLScreenHeight - HQLPasswordInputViewHeight);</span><br><span class="line">    // åˆ¤æ–­ç‚¹å‡»åŒºåŸŸæ˜¯å¦åŒ…å«åœ¨è’™ç‰ˆçŸ©å½¢ä¸­</span><br><span class="line">    if (CGRectContainsPoint(frame, point)) &#123;</span><br><span class="line">        [self removePasswordView];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** ç§»é™¤å¯†ç è¾“å…¥è§†å›¾ */</span><br><span class="line">- (void)removePasswordView &#123;</span><br><span class="line">    [self.pwdTextField resignFirstResponder];</span><br><span class="line">    [self removeFromSuperview];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¸âƒ£  <code>UITextFieldDelegate</code> å§”æ‰˜åè®®å®ç°æ–¹å¼ä¹Ÿæœ‰æ”¹åŠ¨:</p>
<p>ç”¨åè®®çš„æ–¹å¼è‡ªåŠ¨é‡ç½®å¯†ç è¾“å…¥æ¡†ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨çƒ§è„‘åˆ¤æ–­</p>
<p>æ¯æ¬¡å¼¹å‡ºé”®ç›˜å°±é‡ç½®å¯†ç æ¡†</p>
<p>1.ç¬¬ä¸€æ¬¡è·Ÿéšå¯†ç è¾“å…¥è§†å›¾å¼¹å‡ºä¼šè°ƒç”¨ï¼›</p>
<p>2.æç¤ºå¯†ç è¾“å…¥é”™è¯¯ï¼Œå†æ¬¡è¾“å…¥å¯†ç ä¼šè°ƒç”¨ï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - UITextFieldDelegate</span><br><span class="line"></span><br><span class="line">- (void)textFieldDidBeginEditing:(UITextField *)textField &#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;,NSStringFromSelector(_cmd));</span><br><span class="line">    </span><br><span class="line">    // æ¯æ¬¡ TextField å¼€å§‹ç¼–è¾‘ï¼Œéƒ½è¦é‡ç½®å¯†ç æ¡†</span><br><span class="line">    [self clearUpPassword];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¸…é™¤å¯†ç </span><br><span class="line">- (void)clearUpPassword &#123;</span><br><span class="line">    // 1.æ¸…ç©ºè¾“å…¥æ–‡æœ¬æ¡†å¯†ç </span><br><span class="line">    self.pwdTextField.text = @&quot;&quot;;</span><br><span class="line">    // 2.æ¸…ç©ºé»‘è‰²åœ†ç‚¹</span><br><span class="line">    [self.backgroundView resetDotsWithLength:0];</span><br><span class="line">    // 3.éšè—åŠ è½½å›¾ç‰‡å’Œæ–‡å­—</span><br><span class="line">    self.rotationImageView.hidden = YES;</span><br><span class="line">    self.loadingTextLabel.hidden  = YES;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¯å½“ç”¨æˆ·æ“ä½œå¯¼è‡´å…¶æ–‡æœ¬æ›´æ”¹æ—¶ï¼Œæ–‡æœ¬å­—æ®µå°†è°ƒç”¨æ­¤æ–¹æ³•ã€‚ ä½¿ç”¨æ­¤æ–¹æ³•æ¥éªŒè¯ç”¨æˆ·é”®å…¥çš„æ–‡æœ¬ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•æ¥é˜²æ­¢ç”¨æˆ·è¾“å…¥ä»»ä½•æ•°å­—ï¼Œä½†ä¸èƒ½è¾“å…¥æ•°å€¼ã€‚</span><br><span class="line">// æ¯å½“ä¸€ä¸ªå­—ç¬¦è¢«é”®å…¥æ—¶ï¼Œéƒ½ä¼šé¦–å…ˆè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¯¢é—®æ˜¯å¦åº”è¯¥å°†è¾“å…¥çš„å­—ç¬¦æ·»åŠ è¿› TextField ä¸­ã€‚</span><br><span class="line">// å› æ­¤è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ­£è¢«è¾“å…¥çš„å­—ç¬¦å®é™…ä¸Šè¿˜æ²¡æœ‰è¢«æ·»åŠ è¿› TextField ä¸­</span><br><span class="line">- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string &#123;    </span><br><span class="line">    // è¾“å…¥è¿› TextField çš„æ•°å­—ä¸ªæ•°</span><br><span class="line">    NSUInteger numberLength = textField.text.length + string.length;</span><br><span class="line">    </span><br><span class="line">    if([string isEqualToString:@&quot;&quot;]) &#123;</span><br><span class="line">        // 1.åˆ¤æ–­æ˜¯ä¸æ˜¯åˆ é™¤é”®ï¼Ÿ</span><br><span class="line">        [self.backgroundView resetDotsWithLength:numberLength - 1];</span><br><span class="line">        return YES;</span><br><span class="line">    &#125; else if(numberLength &gt;= KPasswordNumber) &#123;</span><br><span class="line">        // 2.åˆ¤æ–­æ­¤æ¬¡è¾“å…¥æ•°å­—çš„æ˜¯ä¸æ˜¯ç¬¬6ä¸ªæ•°å­—ï¼Ÿ</span><br><span class="line">        [self.backgroundView resetDotsWithLength:numberLength];</span><br><span class="line">        // 2.1 æ”¶èµ·é”®ç›˜</span><br><span class="line">        [self.pwdTextField resignFirstResponder];</span><br><span class="line">        // 2.2 å‘èµ·è¯·æ±‚ Block</span><br><span class="line">        if (self.finishBlock) &#123;</span><br><span class="line">            [self startLoading];</span><br><span class="line">            NSString *password = [textField.text stringByAppendingString:string];</span><br><span class="line">            self.finishBlock(password);</span><br><span class="line">        &#125;</span><br><span class="line">        return NO;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // 3.æ¯æ¬¡é”®å…¥ä¸€ä¸ªå€¼ï¼Œéƒ½è¦é‡è®¾é»‘ç‚¹</span><br><span class="line">        [self.backgroundView resetDotsWithLength:numberLength];</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ï¸âƒ£ å…¶å®ƒçš„æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œå°‘äº†å‡ ä¸ªç§»é™¤è§†å›¾çš„ä¸€äº›é‡ç½®æ–¹æ³•</p>
<h4 id="UIView-åŠ¨ç”»"><a href="#UIView-åŠ¨ç”»" class="headerlink" title="UIView åŠ¨ç”»"></a>UIView åŠ¨ç”»</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration </span><br><span class="line">                      delay:(NSTimeInterval)delay </span><br><span class="line">                    options:(UIViewAnimationOptions)options </span><br><span class="line">                  animations:(void (^)(void))animations </span><br><span class="line">                  completion:(void (^ __nullable)(BOOL finished))completion ;</span><br><span class="line"></span><br><span class="line">[UIView animateWithDuration:(NSTimeInterval)          // åŠ¨ç”»çš„æŒç»­æ—¶é—´</span><br><span class="line">                      delay:(NSTimeInterval)          // åŠ¨ç”»æ‰§è¡Œçš„å»¶è¿Ÿæ—¶é—´</span><br><span class="line">                    options:(UIViewAnimationOptions)  // æ‰§è¡Œçš„åŠ¨ç”»é€‰é¡¹ï¼Œ</span><br><span class="line">                 animations:^&#123;</span><br><span class="line"></span><br><span class="line">        // è¦æ‰§è¡Œçš„åŠ¨ç”»ä»£ç </span><br><span class="line"> &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">        // åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åçš„è°ƒç”¨</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æŒ‡å®šåŠ¨ç”»æŒç»­æ—¶é—´ã€åŠ¨ç”»å»¶è¿Ÿã€æ‰§è¡ŒåŠ¨ç”»é€‰é¡¹å’ŒåŠ¨ç”»å®Œæˆåå›è°ƒçš„ Block å¯¹è±¡ æ›´æ”¹ä¸€ä¸ªæˆ–å¤šä¸ªè§†å›¾çš„åŠ¨ç”»ã€‚</p>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)paymentButtonDidClicked:(id)sender &#123;</span><br><span class="line"></span><br><span class="line">    self.passwordView = [[HQLPasswordView alloc] init];</span><br><span class="line">    [self.passwordView showInView:self.view.window];</span><br><span class="line">    self.passwordView.title = @&quot;æˆ‘æ˜¯æ ‡é¢˜&quot;;</span><br><span class="line">    self.passwordView.loadingText = @&quot;æ­£åœ¨æ”¯ä»˜ä¸­...&quot;;</span><br><span class="line">    self.passwordView.closeBlock = ^&#123;</span><br><span class="line">        NSLog(@&quot;å–æ¶ˆæ”¯ä»˜å›è°ƒ...&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">    self.passwordView.forgetPasswordBlock = ^&#123;</span><br><span class="line">        NSLog(@&quot;å¿˜è®°å¯†ç å›è°ƒ...&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">    WS(weakself);</span><br><span class="line">    self.passwordView.finishBlock = ^(NSString *password) &#123;</span><br><span class="line">        NSLog(@&quot;å®Œæˆæ”¯ä»˜å›è°ƒ...&quot;);</span><br><span class="line">        </span><br><span class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(kRequestTime * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">            flag = !flag;</span><br><span class="line">            if (flag) &#123;</span><br><span class="line">                // è´­ä¹°æˆåŠŸï¼Œè·³è½¬åˆ°æˆåŠŸé¡µ</span><br><span class="line">                [weakself.passwordView requestComplete:YES message:@&quot;è´­ä¹°æˆåŠŸ&quot;];</span><br><span class="line">                </span><br><span class="line">                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)( KDelay* NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    // ä»çˆ¶è§†å›¾ç§»é™¤å¯†ç è¾“å…¥è§†å›¾</span><br><span class="line">                    [weakself.passwordView removePasswordView];</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // è´­ä¹°å¤±è´¥ï¼Œè·³è½¬åˆ°å¤±è´¥é¡µ</span><br><span class="line">                [weakself.passwordView requestComplete:NO];</span><br><span class="line">                </span><br><span class="line">                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(KDelay * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    // è´­ä¹°å¤±è´¥çš„å¤„ç†ï¼Œä¹Ÿå¯ä»¥ç»§ç»­æ”¯ä»˜</span><br><span class="line">                    </span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œé™„ä¸Š<br><a href="https://github.com/Andy0570/HQLPasswordViewDemo" target="_blank" rel="noopener">GitHubåœ°å€ï¼šHQLPasswordViewDemo</a></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/chernyog/CYPasswordView" target="_blank" rel="noopener">GitHub:chernyog/CYPasswordView</a></li>
<li><a href="https://github.com/chernyog/CYPasswordView_Block" target="_blank" rel="noopener">GitHub:chernyog/CYPasswordView_Block</a></li>
<li><a href="http://www.jianshu.com/p/7059c017ad0a" target="_blank" rel="noopener">iOSå¼€å‘ï¼šä»¿å¾®ä¿¡ã€æ”¯ä»˜å®6ä½å¯†ç è¾“å…¥æ¡†</a></li>
<li><a href="http://www.jianshu.com/p/2aed522aa258" target="_blank" rel="noopener">æ‰‹æŠŠæ‰‹æ•™ä½ è‡ªåŠ¨å–æ¶ˆtextFieldç¬¬ä¸€å“åº”çš„è®¾ç½®</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/20/iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† CYPasswordView_Block æºç è§£æ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/20/iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† CYPasswordView_Block æºç è§£æ/" class="post-title-link" itemprop="url">iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† CYPasswordView_Block æºç è§£æ</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-20 18:21:00" itemprop="dateCreated datePublished" datetime="2017-06-20T18:21:00+08:00">2017-06-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:11:12" itemprop="dateModified" datetime="2019-04-18T01:11:12+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/20/iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† CYPasswordView_Block æºç è§£æ/" class="leancloud_visitors" data-flag-title="iOS ç¼–ç¨‹ï¼šå¯†ç è¾“å…¥æ¡† CYPasswordView_Block æºç è§£æ">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>æ”¯ä»˜ç±»åº”ç”¨é€šå¸¸éƒ½éœ€è¦è¾“å…¥6ä½æ”¯ä»˜å¯†ç ï¼Œæœ‰çš„æ˜¯ç”¨ AlertView çš„æ–¹å¼å®ç°çš„ï¼Œä¾‹å¦‚åœ¨ iPhoneçš„ App Store ä¸­ä¸‹è½½åº”ç”¨ï¼Œæœ‰æ—¶ä¼šå¼¹çª—è®©ä½ è¾“å…¥å¯†ç ,ç•Œé¢å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-847cbfdb8ff73eb6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt> </p>
<p>è¿˜æœ‰ä¸€ç§ç±»ä¼¼è¿™æ ·çš„ï¼ŒæŠŠè¾“å…¥æ¡†æ”¾åœ¨å•ç‹¬çš„é¡µé¢ä¸Šï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1840399-9def9a00bb9b37fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>æ”¯ä»˜å®å¾®ä¿¡åšçš„æ˜¯ç±»ä¼¼åŠæ¨¡æ€è§†å›¾çš„ç•Œé¢ï¼ˆä¸‹é¢çš„æ˜¯æ·˜ç¥¨ç¥¨çš„è¾“å…¥å¯†ç ç•Œé¢ï¼‰ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-f62fca20bbf42d14.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ç½‘ä¸Šæœå¯»äº†è®¸ä¹…ï¼Œæ‰¾äº†ä¸ªæœ€æ¥è¿‘ç¬¬ä¸‰ç§æ–¹å¼çš„ Demo ï¼š</p>
<ul>
<li><a href="https://github.com/chernyog/CYPasswordView" target="_blank" rel="noopener">GitHub:chernyog/CYPasswordView</a></li>
<li><a href="https://github.com/chernyog/CYPasswordView_Block" target="_blank" rel="noopener">GitHub:chernyog/CYPasswordView_Block</a></li>
</ul>
<h1 id="CYPasswordView-Block-æºç è§£æ"><a href="#CYPasswordView-Block-æºç è§£æ" class="headerlink" title="CYPasswordView_Block æºç è§£æ"></a>CYPasswordView_Block æºç è§£æ</h1><h2 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h2><hr>
<p><a href="https://github.com/chernyog/CYPasswordView_Block" target="_blank" rel="noopener">CYPasswordView_Block</a> æ˜¯ä¸€ä¸ªæ¨¡ä»¿æ”¯ä»˜å®è¾“å…¥æ”¯ä»˜å¯†ç çš„å¯†ç æ¡†(è¿™æ˜¯ä¸€ä¸ªç”¨blockä¼ é€’äº‹ä»¶çš„ç‰ˆæœ¬ï¼Œé¿å…äº†å› å¤šçº§é¡µé¢åˆ‡æ¢å¹¶ä¸”éƒ½å¼¹å‡ºå¯†ç æ¡†è€Œé€ æˆé€šçŸ¥ç›‘å¬æ··ä¹±çš„bug)</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-8831a27434b8db4d.gif?imageMogr2/auto-orient/strip" alt><img src="http://upload-images.jianshu.io/upload_images/2648731-626da661c7068647.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="äºŒã€ä½¿ç”¨æ–¹æ³•"><a href="#äºŒã€ä½¿ç”¨æ–¹æ³•" class="headerlink" title="äºŒã€ä½¿ç”¨æ–¹æ³•"></a>äºŒã€ä½¿ç”¨æ–¹æ³•</h3><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)showPasswordView:(id)sender &#123;</span><br><span class="line"></span><br><span class="line">    WS(weakSelf);</span><br><span class="line">    // å®ä¾‹åŒ– CYPasswordView å¯¹è±¡</span><br><span class="line">    self.passwordView = [[CYPasswordView alloc] init];</span><br><span class="line">    // å¼¹å‡ºå¯†ç æ¡†</span><br><span class="line">    [self.passwordView showInView:self.view.window];</span><br><span class="line">    self.passwordView.loadingText = @&quot;æäº¤ä¸­...&quot;;</span><br><span class="line">    // å…³é—­å¯†ç æ¡†</span><br><span class="line">    self.passwordView.cancelBlock = ^&#123;</span><br><span class="line">        [weakSelf cancel];</span><br><span class="line">    &#125;;</span><br><span class="line">    // å¿˜è®°å¯†ç </span><br><span class="line">    self.passwordView.forgetPasswordBlock = ^&#123;</span><br><span class="line">        [weakSelf forgetPWD];</span><br><span class="line">    &#125;;</span><br><span class="line">    // å¯†ç è¾“å…¥å®Œæˆçš„å›è°ƒ</span><br><span class="line">    self.passwordView.finish = ^(NSString *password) &#123;</span><br><span class="line">        [weakSelf.passwordView hidenKeyboard];</span><br><span class="line">        [weakSelf.passwordView startLoading];</span><br><span class="line">        CYLog(@&quot;cy ========= å‘é€ç½‘ç»œè¯·æ±‚  pwd=%@&quot;, password);</span><br><span class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(kRequestTime * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">            flag = !flag;</span><br><span class="line">            if (flag) &#123;</span><br><span class="line">                // è´­ä¹°æˆåŠŸï¼Œè·³è½¬åˆ°æˆåŠŸé¡µ</span><br><span class="line">                [weakSelf.passwordView requestComplete:YES message:@&quot;è´­ä¹°æˆåŠŸâ€¦â€¦&quot;];</span><br><span class="line">                [weakSelf.passwordView stopLoading];</span><br><span class="line">                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(kDelay * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    [weakSelf.passwordView hide];</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // è´­ä¹°å¤±è´¥ï¼Œè·³è½¬åˆ°å¤±è´¥é¡µ</span><br><span class="line">                [weakSelf.passwordView requestComplete:NO];</span><br><span class="line">                [weakSelf.passwordView stopLoading];</span><br><span class="line">                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(kDelay * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    [weakSelf.passwordView hide];</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰ã€å®ç°æ–¹å¼"><a href="#ä¸‰ã€å®ç°æ–¹å¼" class="headerlink" title="ä¸‰ã€å®ç°æ–¹å¼"></a>ä¸‰ã€å®ç°æ–¹å¼</h3><hr>
<h4 id="éœ€è¦å“ªäº›æ§ä»¶å…ƒç´ ï¼Ÿ"><a href="#éœ€è¦å“ªäº›æ§ä»¶å…ƒç´ ï¼Ÿ" class="headerlink" title="éœ€è¦å“ªäº›æ§ä»¶å…ƒç´ ï¼Ÿ"></a>éœ€è¦å“ªäº›æ§ä»¶å…ƒç´ ï¼Ÿ</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-626da661c7068647.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ç…§ç€å›¾ç‰‡çœ‹éœ€è¦å“ªäº›æ§ä»¶å…ƒç´ ï¼Œè‡ªä¸Šè€Œä¸‹ï¼Œä»å·¦å¾€å³çœ‹ï¼š</p>
<ol>
<li>ç°è‰²çš„èƒŒæ™¯å›¾å±‚ coverView,ç”¨äºè¦†ç›–ä¸Šä¸€ä¸ªè§†å›¾ï¼›</li>
<li>å æ®åŠä¸ªå±å¹•çš„è¾“å…¥æ¡†è§†å›¾ï¼Œè¯¥è§†å›¾ä¸Šæœ‰ï¼š<ul>
<li>æ ‡é¢˜æ–‡æœ¬ï¼›</li>
<li>å…³é—­æŒ‰é’®ã€å¿˜è®°å¯†ç æŒ‰é’®ï¼›</li>
<li>å¸¦6ä¸ªæ ¼å­çš„å¯†ç è¾“å…¥æ¡†ï¼›</li>
<li>åŠ è½½å›¾ç‰‡ã€åŠ è½½æ–‡æœ¬</li>
</ul>
</li>
</ol>
<h4 id="å¦‚ä½•æ˜¾ç¤ºå¯†ç ï¼Ÿ"><a href="#å¦‚ä½•æ˜¾ç¤ºå¯†ç ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ˜¾ç¤ºå¯†ç ï¼Ÿ"></a>å¦‚ä½•æ˜¾ç¤ºå¯†ç ï¼Ÿ</h4><ol>
<li>é”®ç›˜ä¸Šè¾“å…¥æ•°å­—æ—¶ï¼Œå¹¶ä¸ä¼šå®æ—¶æ˜¾ç¤º123456â€¦ï¼Œè€Œæ˜¯æ˜¾ç¤º â—â—â—â—â—â—ï¼Œ è¿™æ˜¯ä¸ºäº†å¯†ç è¾“å…¥å®‰å…¨èµ·è§çš„ä¸€è´¯åšæ³•ã€‚ä¸º <strong>UITextField</strong> è®¾ç½® <code>secureTextEntry</code> å±æ€§ä¸º <strong>YES</strong>ã€‚å¯ä»¥ç¦ç”¨ç”¨æˆ·åœ¨è§†å›¾ä¸­å¤åˆ¶æ–‡æœ¬çš„åŠŸèƒ½ã€‚ è¿˜ä¼šç”¨* ä»£æ›¿è¾“å…¥çš„å­—ç¬¦ã€‚</li>
<li>ä½†æ˜¯åŸç”Ÿçš„æ§ä»¶æ— æ³•å®ç°åœ¨ä¸€ä¸ªæ ¼å­é‡Œè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸”è¿˜è¦åœ¨è¿™ä¸ªæ ¼å­ä¸­å¿ƒæ˜¾ç¤ºâ—ï¼Œæ‰€ä»¥å¯†ç è¾“å…¥çš„6ä¸ªæ–¹æ¡†å’Œâ—éƒ½æ˜¯å‡è±¡ï¼Œæ˜¯ç”¨ä»£ç ç”»ä¸Šå»çš„ã€‚</li>
<li>æ¯æ¬¡åœ¨ <strong>UITextField</strong> ä¸­è¾“å…¥ã€åˆ é™¤æ•°å­—ï¼Œéƒ½è¦è¿›è¡Œåˆ¤æ–­ï¼Œæ ¹æ® <strong>UITextField</strong> ä¸­æ–‡æœ¬çš„ä¸ªæ•°åŒæ­¥æ·»åŠ æˆ–åˆ é™¤â—</li>
<li>è¾¹ç•Œæƒ…å†µï¼Œå½“è¾“å…¥çš„æ•°å­—ä¸ªæ•°å¤§äºç­‰äº6ä¸ªï¼Œç¦æ­¢è¾“å…¥ã€‚</li>
<li>ä¸ºäº†æé«˜ç”¨æˆ·ä½“éªŒï¼Œå½“è¾“å…¥å®Œç¬¬6ä¸ªæ•°å­—æ—¶ï¼Œè‡ªåŠ¨å…³é—­é”®ç›˜ï¼Œå‘èµ·ç½‘ç»œè¯·æ±‚ä»¥éªŒè¯å¯†ç ã€‚</li>
</ol>
<h2 id="CYPasswordView-Block-æºç åˆ†æ"><a href="#CYPasswordView-Block-æºç åˆ†æ" class="headerlink" title="CYPasswordView_Block æºç åˆ†æ"></a>CYPasswordView_Block æºç åˆ†æ</h2><h3 id="CYPasswordViewä»£ç ç»“æ„"><a href="#CYPasswordViewä»£ç ç»“æ„" class="headerlink" title="CYPasswordViewä»£ç ç»“æ„"></a>CYPasswordViewä»£ç ç»“æ„</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-8e312309b69a5f03.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ul>
<li><p>CYPasswordView.bundle</p>
<p>å›¾ç‰‡åº“ï¼ŒåŒ…å«æ‰€æœ‰å›¾ç‰‡ç´ æ</p>
</li>
<li><p>CYConst</p>
<p>é€šç”¨å®å®šä¹‰ã€å¯†ç æ¡†å„æ§ä»¶çš„å°ºå¯¸å¸¸é‡</p>
</li>
<li><p>UIView+Extension</p>
<p>ç®€åŒ–è®¾ç½®è§†å›¾å°ºå¯¸çš„èŒƒç•´æ–¹æ³•</p>
</li>
<li><p>CYPasswordInputView</p>
<p>å¯†ç æ¡†çš„è¾“å…¥èƒŒæ™¯è§†å›¾(æŠŠ <a href="mailto:`password_background@2x.png" target="_blank" rel="noopener">`password_background@2x.png</a><code>ã€</code><a href="mailto:password_textfield@2x.png" target="_blank" rel="noopener">password_textfield@2x.png</a>`ä¸¤ä¸ªèƒŒæ™¯å›¾ç‰‡ç»˜åˆ¶ä¸Šå»)ï¼Œä¸»è¦åŒ…å«æ ‡é¢˜ã€å…³é—­æŒ‰é’®ã€å¿˜è®°å¯†ç æŒ‰é’®ã€ä»¥åŠç»˜åˆ¶6ä¸ªâ—çš„æ“ä½œã€‚</p>
</li>
<li><p>CYPasswordView</p>
<p>åŒ…å«è’™ç‰ˆå›¾å±‚ã€CYPasswordInputViewã€UITextField æ§ä»¶ã€å†æ·»åŠ åŠ è½½å›¾ç‰‡ã€åŠ è½½æ–‡å­—æ ‡ç­¾ã€å¤„ç†åˆ¤æ–­è¾“å…¥é€»è¾‘ã€åŠ è½½æ˜¾ç¤ºæ—‹è½¬åŠ¨ç”»ç­‰</p>
</li>
</ul>
<p>å‰ä¸‰ä¸ªä¸å¤šè¯´äº†ï¼Œä¸»è¦çœ‹åä¸¤ä¸ª</p>
<h3 id="CYPasswordInputView"><a href="#CYPasswordInputView" class="headerlink" title="CYPasswordInputView"></a>CYPasswordInputView</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-25d1c32d092c70a8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>åœ¨æŒ‡å®šåˆå§‹åŒ–æ–¹æ³• <code>initWithFrame:</code>ä¸­æ·»åŠ  <strong>å…³é—­æŒ‰é’®</strong> å’Œ <strong>å¿˜è®°å¯†ç æŒ‰é’®</strong>,ç„¶ååœ¨ <code>layoutSubviews</code> æ–¹æ³•ä¸­å¯¹è¿™ä¸¤ä¸ªæ§ä»¶é‡æ–°å¸ƒå±€ï¼ŒæŒ‰é’®çš„ Target-Action ç‚¹å‡»äº‹ä»¶é€šè¿‡ Blocks ä¼ é€’ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark  - ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span><br><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">    if (self = [super initWithFrame:frame]) &#123;</span><br><span class="line">        self.backgroundColor = [UIColor clearColor];</span><br><span class="line">        /** æ·»åŠ å­æ§ä»¶ */</span><br><span class="line">        [self setupSubViews];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** æ·»åŠ å­æ§ä»¶ */</span><br><span class="line">- (void)setupSubViews &#123;</span><br><span class="line">    /** å…³é—­æŒ‰é’® */</span><br><span class="line">    UIButton *btnCancel = [UIButton buttonWithType:UIButtonTypeCustom];</span><br><span class="line">    [self addSubview:btnCancel];</span><br><span class="line">    [btnCancel setBackgroundImage:[UIImage imageNamed:CYPasswordViewSrcName(@&quot;password_close&quot;)] forState:UIControlStateNormal];</span><br><span class="line">    [btnCancel setTitleColor:[UIColor darkGrayColor] forState:UIControlStateNormal];</span><br><span class="line">    self.btnClose = btnCancel;</span><br><span class="line">    [self.btnClose addTarget:self action:@selector(btnClose_Click:) forControlEvents:UIControlEventTouchUpInside];</span><br><span class="line">    </span><br><span class="line">    /** å¿˜è®°å¯†ç æŒ‰é’® */</span><br><span class="line">    UIButton *btnForgetPWD = [UIButton buttonWithType:UIButtonTypeCustom];</span><br><span class="line">    [self addSubview:btnForgetPWD];</span><br><span class="line">    [btnForgetPWD setTitle:@&quot;å¿˜è®°å¯†ç ï¼Ÿ&quot; forState:UIControlStateNormal];</span><br><span class="line">    [btnForgetPWD setTitleColor:CYColor(0, 125, 227) forState:UIControlStateNormal];</span><br><span class="line">    btnForgetPWD.titleLabel.font = CYFont(13);</span><br><span class="line">    [btnForgetPWD sizeToFit];</span><br><span class="line">    self.btnForgetPWD = btnForgetPWD;</span><br><span class="line">    [self.btnForgetPWD addTarget:self action:@selector(btnForgetPWD_Click:) forControlEvents:UIControlEventTouchUpInside];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)layoutSubviews &#123;</span><br><span class="line">    [super layoutSubviews];</span><br><span class="line">    // è®¾ç½®å…³é—­æŒ‰é’®çš„åæ ‡</span><br><span class="line">    self.btnClose.width = CYPasswordViewCloseButtonWH;</span><br><span class="line">    self.btnClose.height = CYPasswordViewCloseButtonWH;</span><br><span class="line">    self.btnClose.x = CYPasswordViewCloseButtonMarginLeft;</span><br><span class="line">    self.btnClose.centerY = CYPasswordViewTitleHeight * 0.5;</span><br><span class="line">    </span><br><span class="line">    // è®¾ç½®å¿˜è®°å¯†ç æŒ‰é’®çš„åæ ‡</span><br><span class="line">    self.btnForgetPWD.x = CYScreenWidth - (CYScreenWidth - CYPasswordViewTextFieldWidth) * 0.5 - self.btnForgetPWD.width;</span><br><span class="line">    self.btnForgetPWD.y = CYPasswordViewTitleHeight + CYPasswordViewTextFieldMarginTop + CYPasswordViewTextFieldHeight + CYPasswordViewForgetPWDButtonMarginTop;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŒ‰é’®ç‚¹å‡»</span><br><span class="line">- (void)btnClose_Click:(UIButton *)sender &#123;</span><br><span class="line">    if (self.cancelBlock) &#123;</span><br><span class="line">        self.cancelBlock();</span><br><span class="line">    &#125;</span><br><span class="line">    [self.inputNumArray removeAllObjects];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)btnForgetPWD_Click:(UIButton *)sender &#123;</span><br><span class="line">    if (self.forgetPasswordBlock) &#123;</span><br><span class="line">        self.forgetPasswordBlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>drawRect:</code> æ–¹æ³•ä¸­æŠŠå›¾ç‰‡ç”»åœ¨å›¾å±‚ä¸Šï¼Œæ ‡é¢˜ä¹Ÿå¹¶ä¸æ˜¯ Label æ§ä»¶ï¼Œè€Œæ˜¯ç”»ä¸Šå»çš„å­—ç¬¦ä¸²ï¼Œ6ä¸ªâ—ä¹ŸåŒæ—¶è¢«ç”»ä¸Šå»äº†ï¼Œå®ƒæ˜¯éå†æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ç”»ä¸Šå»çš„ã€‚</p>
<p>æ‰€ä»¥è¯´ï¼Œæ¯æ¬¡åœ¨è¾“å…¥æ¡†ä¸­åˆ é™¤ã€æ·»åŠ æ•°å­—ï¼Œéƒ½ä¼šé€šè¿‡è°ƒç”¨ <code>[self setNeedsDisplay]</code> å°† <code>drawRect:</code>æ–¹æ³•ä¸­çš„æ‰€æœ‰è§†å›¾é‡æ–°ç»˜åˆ¶ä¸€éï¼Œç›®çš„æ˜¯éœ€è¦éå†æ•°ç»„ï¼Œé‡ç”»â—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">- (void)drawRect:(CGRect)rect &#123;</span><br><span class="line">    // ç”»èƒŒæ™¯è§†å›¾</span><br><span class="line">    UIImage *imgBackground =</span><br><span class="line">        [UIImage imageNamed:CYPasswordViewSrcName(@&quot;password_background&quot;)];</span><br><span class="line">    [imgBackground drawInRect:rect];</span><br><span class="line">    </span><br><span class="line">    // ç”»è¾“å…¥æ¡†</span><br><span class="line">    CGFloat textfieldY = CYPasswordViewTitleHeight + CYPasswordViewTextFieldMarginTop;</span><br><span class="line">    CGFloat textfieldW = CYPasswordViewTextFieldWidth;</span><br><span class="line">    CGFloat textfieldX = (CYScreenWidth - textfieldW) * 0.5;</span><br><span class="line">    CGFloat textfieldH = CYPasswordViewTextFieldHeight;</span><br><span class="line">    UIImage *imgTextfield =</span><br><span class="line">        [UIImage imageNamed:CYPasswordViewSrcName(@&quot;password_textfield&quot;)];</span><br><span class="line">    [imgTextfield drawInRect:CGRectMake(textfieldX, textfieldY, textfieldW, textfieldH)];</span><br><span class="line">    </span><br><span class="line">    // ç”»æ ‡é¢˜</span><br><span class="line">    NSString *title = (self.title ? self.title : @&quot;è¾“å…¥äº¤æ˜“å¯†ç &quot;);</span><br><span class="line">    NSDictionary *arrts = @&#123;NSFontAttributeName:CYFontB(18)&#125;;</span><br><span class="line">    CGSize size = [title boundingRectWithSize:CGSizeMake(MAXFLOAT, MAXFLOAT)</span><br><span class="line">                                      options:NSStringDrawingUsesLineFragmentOrigin</span><br><span class="line">                                   attributes:arrts</span><br><span class="line">                                      context:nil].size;</span><br><span class="line">    CGFloat titleW = size.width;</span><br><span class="line">    CGFloat titleH = size.height;</span><br><span class="line">    CGFloat titleX = (self.width - titleW) * 0.5;</span><br><span class="line">    CGFloat titleY = (CYPasswordViewTitleHeight - titleH) * 0.5;</span><br><span class="line">    CGRect titleRect = CGRectMake(titleX, titleY, titleW, titleH);</span><br><span class="line">    </span><br><span class="line">    NSMutableDictionary *attr = [NSMutableDictionary dictionary];</span><br><span class="line">    attr[NSFontAttributeName] = CYFontB(18);</span><br><span class="line">    attr[NSForegroundColorAttributeName] = CYColor(102, 102, 102);</span><br><span class="line">    [title drawInRect:titleRect withAttributes:attr];</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    // ç”»ç‚¹</span><br><span class="line">    UIImage *pointImage =</span><br><span class="line">        [UIImage imageNamed:CYPasswordViewSrcName(@&quot;password_point&quot;)];</span><br><span class="line">    CGFloat pointW = CYPasswordViewPointnWH;</span><br><span class="line">    CGFloat pointH = CYPasswordViewPointnWH;</span><br><span class="line">    CGFloat pointY = textfieldY + (textfieldH - pointH) * 0.5;</span><br><span class="line">    __block CGFloat pointX;</span><br><span class="line">    </span><br><span class="line">    // ä¸€ä¸ªæ ¼å­çš„å®½åº¦</span><br><span class="line">    CGFloat cellW = textfieldW / kNumCount;</span><br><span class="line">    CGFloat padding = (cellW - pointW) * 0.5;</span><br><span class="line">    // æ ¹æ®æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ç”»é»‘ç‚¹</span><br><span class="line">    [self.inputNumArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123;</span><br><span class="line">        pointX = textfieldX + (2 * idx + 1) * padding + idx * pointW;</span><br><span class="line">        [pointImage drawInRect:CGRectMake(pointX, pointY, pointW, pointH)];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆæ¥çœ‹åœ¨ç±»æ‰©å±•ä¸­å£°æ˜çš„å¯å˜æ•°ç»„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/** ä¿å­˜ç”¨æˆ·è¾“å…¥çš„æ•°å­—é›†åˆ */</span><br><span class="line">@property (nonatomic, strong) NSMutableArray *inputNumArray;</span><br></pre></td></tr></table></figure>
<p>å“åº”è¾“å…¥çš„ä¸¤ä¸ªæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark  - ç§æœ‰æ–¹æ³•</span><br><span class="line">// å“åº”ç”¨æˆ·æŒ‰ä¸‹åˆ é™¤é”®äº‹ä»¶</span><br><span class="line">- (void)deleteNumber &#123;</span><br><span class="line">    [self.inputNumArray removeLastObject]; // å¦‚æœæ˜¯åˆ é™¤é”®ï¼Œå°±ç§»é™¤æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªæ•°å­—</span><br><span class="line">    [self setNeedsDisplay]; // æ ¹æ®æ•°ç»„çš„ä¸ªæ•°é‡ç»˜æ•´ä¸ªè§†å›¾</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å“åº”ç”¨æˆ·æŒ‰ä¸‹æ•°å­—é”®äº‹ä»¶</span><br><span class="line">- (void)number:(NSDictionary *)userInfo &#123;</span><br><span class="line">    NSString *numObj = userInfo[CYPasswordViewKeyboardNumberKey];</span><br><span class="line">    if (numObj.length &gt;= kNumCount) return; // âš ï¸ è¿™è¡Œä»£ç åº”è¯¥æ˜¯æ°¸è¿œä¸ä¼šæ‰§è¡Œçš„å§ã€‚ç­‰ä¼šå†è¯´ä¸ºå•¥</span><br><span class="line">    [self.inputNumArray addObject:numObj]; // è¿™é‡Œæ¯æ¬¡è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œå°±ä¼šæŠŠè¯¥æ•°å­—å­˜è¿›æ•°ç»„ä¸­</span><br><span class="line">    [self setNeedsDisplay]; // æ ¹æ®æ•°ç»„çš„ä¸ªæ•°é‡ç»˜æ•´ä¸ªè§†å›¾</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å¯ä»¥ä¸ç”¨é‡ç»˜æ•´ä¸ªè§†å›¾ï¼Œå› ä¸ºåªæ˜¯é‡ç½®å°åœ†ç‚¹ï¼Œå¯ä»¥é‡ç»˜æŒ‡å®šåŒºåŸŸè§†å›¾ï¼š<code>setNeedsDisplayInRect:</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// å“åº”ç”¨æˆ·æŒ‰ä¸‹åˆ é™¤é”®äº‹ä»¶</span><br><span class="line">- (void)deleteNumber &#123;</span><br><span class="line">    [self.inputNumArray removeLastObject];</span><br><span class="line">    [self setNeedsDisplayInRect:[self textFieldRect]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å“åº”ç”¨æˆ·æŒ‰ä¸‹æ•°å­—é”®äº‹ä»¶</span><br><span class="line">- (void)number:(NSDictionary *)userInfo &#123;</span><br><span class="line">    NSString *numObj = userInfo[CYPasswordViewKeyboardNumberKey];</span><br><span class="line">    if (numObj.length &gt;= kNumCount) return;    </span><br><span class="line">    [self.inputNumArray addObject:numObj];</span><br><span class="line">    [self setNeedsDisplayInRect:[self textFieldRect]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (CGRect)textFieldRect &#123;</span><br><span class="line">    CGFloat textfieldY = CYPasswordViewTitleHeight + CYPasswordViewTextFieldMarginTop;</span><br><span class="line">    CGFloat textfieldW = CYPasswordViewTextFieldWidth;</span><br><span class="line">    CGFloat textfieldX = (CYScreenWidth - textfieldW) * 0.5;</span><br><span class="line">    CGFloat textfieldH = CYPasswordViewTextFieldHeight;</span><br><span class="line">    return CGRectMake(textfieldX, textfieldY, textfieldW, textfieldH);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="CYPasswordView"><a href="#CYPasswordView" class="headerlink" title="CYPasswordView"></a>CYPasswordView</h3><p>å†çœ‹ <strong>CYPasswordView</strong> è¿™ä¸ªç±»ï¼ŒæŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ä¸­æ·»åŠ äº†å‡ ä¸ªå­è§†å›¾ã€è’™ç‰ˆã€è¾“å…¥æ¡†ã€å“åº”è€… UITextFieldã€åŠ è½½å›¾ç‰‡å’ŒåŠ è½½æ–‡å­—ã€å•å‡»æ‰‹åŠ¿ã€‚å¸ƒå±€å­è§†å›¾æ–¹æ³• <code>layoutSubviews</code>ä¸­é‡æ–°å¸ƒå±€äº†åŠ è½½å›¾ç‰‡å’ŒåŠ è½½æ–‡å­—æ ‡ç­¾çš„ä½ç½®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">    self = [super initWithFrame:CYScreen.bounds]; // frame æ˜¯å›ºå®šçš„</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        [self setupUI];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)setupUI &#123;</span><br><span class="line">    self.backgroundColor = [UIColor clearColor];</span><br><span class="line">    // è’™ç‰ˆ</span><br><span class="line">    [self addSubview:self.coverView];</span><br><span class="line">    // è¾“å…¥æ¡†</span><br><span class="line">    [self addSubview:self.passwordInputView];</span><br><span class="line">    // å“åº”è€…</span><br><span class="line">    [self addSubview:self.txfResponsder];</span><br><span class="line">    [self.passwordInputView addSubview:self.imgRotation];</span><br><span class="line">    [self.passwordInputView addSubview:self.lblMessage];</span><br><span class="line">    // æ‰‹åŠ¿</span><br><span class="line">    [self addGestureRecognizer:[[UITapGestureRecognizer alloc]</span><br><span class="line">                                initWithTarget:self</span><br><span class="line">                                action:@selector(tap:)]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)layoutSubviews &#123;</span><br><span class="line">    [super layoutSubviews];</span><br><span class="line">  	// è°ƒæ•´æ—‹è½¬å›¾ç‰‡å¸ƒå±€</span><br><span class="line">    self.imgRotation.centerX = self.passwordInputView.centerX;</span><br><span class="line">    self.imgRotation.centerY = self.passwordInputView.height * 0.5;</span><br><span class="line">    // è°ƒæ•´æç¤ºæ–‡æœ¬å¸ƒå±€</span><br><span class="line">    self.lblMessage.x = 0;</span><br><span class="line">    self.lblMessage.y = CGRectGetMaxY(self.imgRotation.frame) + 20;</span><br><span class="line">    self.lblMessage.width = CYScreenWidth;</span><br><span class="line">    self.lblMessage.height = 30;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>â‘  æ·»åŠ å•å‡»æ‰‹åŠ¿çš„ä½œç”¨ï¼šç‚¹å‡»è¾“å…¥æ¡†ï¼Œå¼¹å‡ºé”®ç›˜</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (void)tap:(UITapGestureRecognizer *)recognizer &#123;</span><br><span class="line">    // è·å–ç‚¹å‡»çš„åæ ‡ä½ç½®</span><br><span class="line">    CGPoint p = [recognizer locationInView:self.passwordInputView];</span><br><span class="line">    // 6å—çŸ©å½¢è¾“å…¥æ¡†åŒºåŸŸ</span><br><span class="line">    CGRect f = CGRectMake(39, 80, 297, 50);</span><br><span class="line">    // åˆ¤æ–­ç‚¹å‡»åŒºåŸŸæ˜¯å¦åŒ…å«åœ¨è¾“å…¥æ¡†åŒºåŸŸä¸­</span><br><span class="line">    if (CGRectContainsPoint(f, p)) &#123;</span><br><span class="line">        [self.txfResponsder becomeFirstResponder];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        NSLog(@&quot;==============&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºè¦å“åº”ç‚¹å‡»äº‹ä»¶ï¼Œæ‰€ä»¥è’™ç‰ˆæ˜¯ä¸€ä¸ª <strong>UIControl</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (UIControl *)coverView &#123;</span><br><span class="line">    if (_coverView == nil) &#123;</span><br><span class="line">        _coverView = [[UIControl alloc] init];</span><br><span class="line">        [_coverView setBackgroundColor:[UIColor blackColor]];</span><br><span class="line">        _coverView.alpha = 0.4;</span><br><span class="line">        _coverView.frame = self.bounds;</span><br><span class="line">    &#125;</span><br><span class="line">    return _coverView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>â‘¡ ä¸ºä½•è¦æ‰‹åŠ¨é€šè¿‡ç‚¹å‡»äº‹ä»¶å¼¹å‡ºé”®ç›˜ï¼Œè€Œä¸æ˜¯ç‚¹å‡» UITextField è‡ªåŠ¨å¼¹å‡ºé”®ç›˜ ï¼Ÿ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// è¿™é‡Œçš„ UITextField å®ä¾‹å¯¹è±¡å°±åƒåå­—ä¸€æ ·ï¼Œåªæ˜¯ä½œä¸ºä¸€ä¸ªå“åº”è€…ï¼Œ</span><br><span class="line">// å®ƒçš„ frame æ˜¯ CGRectMake(0, 0, 1, 1)</span><br><span class="line">// ä¼˜åŒ–ç‚¹ï¼šå…¶å®è¿˜æ˜¯å¯ä»¥æŠŠå®ƒè®¾ç½®å¾—è·Ÿå›¾ç‰‡ä¸€æ ·å¤§çš„ï¼Œåªè¦æŠŠå®ƒè®¾ç½®ä¸ºé€æ˜å°±è¡Œäº†ï¼ŒèƒŒæ™¯è‰²ã€textã€tintColorã€é€šé€šè®¾ç½®ä¸ºé€æ˜è‰²ï¼Œ1.å¯ä»¥å……åˆ†åˆ©ç”¨æ§ä»¶æœ¬èº«çš„ç‰¹æ€§ã€‚2.ä¸ç”¨æ‰‹åŠ¨æ·»åŠ ç‚¹å‡»äº‹ä»¶ã€‚</span><br><span class="line">- (UITextField *)txfResponsder &#123;</span><br><span class="line">    if (_txfResponsder == nil) &#123;</span><br><span class="line">        _txfResponsder = [[UITextField alloc] init];</span><br><span class="line">        _txfResponsder.delegate = self;</span><br><span class="line">        _txfResponsder.keyboardType = UIKeyboardTypeNumberPad;</span><br><span class="line">        _txfResponsder.frame = CGRectMake(0, 0, 1, 1);</span><br><span class="line">        _txfResponsder.secureTextEntry = YES;</span><br><span class="line">    &#125;</span><br><span class="line">    return _txfResponsder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç±»ä¸­å®ç°å–æ¶ˆæŒ‰é’®å’Œå¿˜è®°å¯†ç æŒ‰é’®ä¾æ—§æ˜¯é€šè¿‡ Block çš„æ–¹å¼ä¼ é€’ï¼Œåªæ˜¯å¢åŠ äº†é‡ç½®å¯†ç æ¡†æ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">- (CYPasswordInputView *)passwordInputView &#123;</span><br><span class="line">    WS(weakself);</span><br><span class="line">    if (_passwordInputView == nil) &#123;</span><br><span class="line">        _passwordInputView = [[CYPasswordInputView alloc] init];</span><br><span class="line">      </span><br><span class="line">        _passwordInputView.cancelBlock = ^&#123;</span><br><span class="line">            [weakself cancel];</span><br><span class="line">        &#125;;</span><br><span class="line">      </span><br><span class="line">        _passwordInputView.forgetPasswordBlock = ^&#123;</span><br><span class="line">            [weakself forgetPassword];</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    return _passwordInputView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** è¾“å…¥æ¡†çš„å–æ¶ˆæŒ‰é’®ç‚¹å‡» */</span><br><span class="line">- (void)cancel &#123;</span><br><span class="line">    [self resetPasswordView];</span><br><span class="line">    if (self.cancelBlock) &#123;</span><br><span class="line">        self.cancelBlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">/** è¾“å…¥æ¡†çš„å¿˜è®°å¯†ç æŒ‰é’®ç‚¹å‡» */</span><br><span class="line">- (void)forgetPassword &#123;</span><br><span class="line">    [self resetPasswordView];</span><br><span class="line">    if (self.forgetPasswordBlock) &#123;</span><br><span class="line">        self.forgetPasswordBlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** é‡ç½®å¯†ç æ¡† */</span><br><span class="line">- (void)resetPasswordView &#123;</span><br><span class="line">    [self hidenKeyboard:^(BOOL finished) &#123;</span><br><span class="line">        self.passwordInputView.hidden = YES;</span><br><span class="line">        tempStr = nil;</span><br><span class="line">        [self removeFromSuperview];</span><br><span class="line">        [self hidenKeyboard:nil];</span><br><span class="line">        [self.passwordInputView setNeedsDisplay];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤„ç†é”®ç›˜è¾“å…¥çš„  <code>UITextFieldDelegate</code> åè®®æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark  - å¸¸é‡åŒº</span><br><span class="line">// å‰é¢çš„è§’è½é‡Œå£°æ˜äº†ä¸€ä¸ªå˜é‡ç”¨æˆ·ä¿å­˜å¯†ç å­—ç¬¦ä¸²</span><br><span class="line">static NSString *tempStr;</span><br><span class="line"></span><br><span class="line">//...</span><br><span class="line"></span><br><span class="line">#pragma mark  - &lt;UITextFieldDelegate&gt;</span><br><span class="line">#pragma mark  å¤„ç†å­—ç¬¦ä¸² å’Œ åˆ é™¤é”®</span><br><span class="line"></span><br><span class="line">// æ¯å½“ä¸€ä¸ªå­—ç¬¦è¢«é”®å…¥æ—¶ï¼Œéƒ½ä¼šé¦–å…ˆè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¯¢é—®æ˜¯å¦åº”è¯¥å°†è¾“å…¥çš„å­—ç¬¦æ·»åŠ è¿› TextField ä¸­ã€‚</span><br><span class="line">// å› æ­¤è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ­£è¢«è¾“å…¥çš„å­—ç¬¦å®é™…ä¸Šè¿˜æ²¡æœ‰è¢«æ·»åŠ è¿› TextField ä¸­</span><br><span class="line">- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string &#123;</span><br><span class="line">    if (!tempStr) &#123;</span><br><span class="line">        tempStr = string;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        // æŠŠæ­£åœ¨è¾“å…¥çš„æ•°å­—å’Œä¹‹å‰æ‰€æœ‰è¾“å…¥çš„æ•°å­—æ‹¼æ¥èµ·æ¥</span><br><span class="line">        // å› æ­¤ tempStr å­—ç¬¦ä¸²ä¸­å­˜æ”¾çš„æ˜¯æ‰€æœ‰çš„æ•°å­—</span><br><span class="line">        tempStr = [NSString stringWithFormat:@&quot;%@%@&quot;,tempStr,string];</span><br><span class="line">    &#125;</span><br><span class="line">    // åˆ¤æ–­æ˜¯å¦æ˜¯åˆ é™¤æŒ‰é’®ï¼Ÿ</span><br><span class="line">    if ([string isEqualToString:@&quot;&quot;]) &#123;</span><br><span class="line">        // å“åº”ç”¨æˆ·æŒ‰ä¸‹åˆ é™¤é”®äº‹ä»¶ï¼Œåˆ é™¤å°é»‘ç‚¹</span><br><span class="line">        [self.passwordInputView deleteNumber];</span><br><span class="line">        // å¦‚æœæ˜¯åˆ é™¤æŒ‰é’®ï¼Œå†åˆ¤æ–­å®¹å™¨å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Ÿ</span><br><span class="line">        if (tempStr.length &gt; 0) &#123;   //  åˆ é™¤æœ€åä¸€ä¸ªå­—ç¬¦ä¸²</span><br><span class="line">            NSString *lastStr = [tempStr substringToIndex:[tempStr length] - 1];</span><br><span class="line">            tempStr = lastStr;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else&#123;</span><br><span class="line">        // å¦‚æœä¸æ˜¯åˆ é™¤æŒ‰é’®ï¼Œå…ˆåˆ¤æ–­å®¹å™¨å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å¦=6ï¼Ÿ</span><br><span class="line">        if (tempStr.length == 6) &#123;</span><br><span class="line">            if (self.finish) &#123;</span><br><span class="line">                self.finish(tempStr);</span><br><span class="line">                self.finish = nil;</span><br><span class="line">            &#125;</span><br><span class="line">            tempStr = nil;</span><br><span class="line">        &#125;</span><br><span class="line">        // æ›´æ–° CYPasswordInputView ä¸­çš„é»‘ç‚¹</span><br><span class="line">        // â‡ï¸æŠŠå½“å‰è¾“å…¥çš„æ•°å­—é€šè¿‡å­—å…¸çš„æ–¹å¼ä¼ é€’,keyä¸ºå¸¸é‡ï¼Œvalue æ˜¯å½“å‰è¾“å…¥çš„æ•°å­—</span><br><span class="line">        NSMutableDictionary *userInfoDict = [NSMutableDictionary dictionary];</span><br><span class="line">        userInfoDict[CYPasswordViewKeyboardNumberKey] = string;</span><br><span class="line">        [self.passwordInputView number:userInfoDict];</span><br><span class="line">    &#125;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â‡ï¸å› ä¸ºå½“å‰è¾“å…¥çš„æ•°å­—æ˜¯é€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼å‘é€ç»™ <code>passwordInputView</code> å¯¹è±¡çš„ï¼Œæ‰€ä»¥å®ƒå“åº”ç”¨æˆ·æŒ‰ä¸‹æ•°å­—çš„æ–¹æ³•ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// å“åº”ç”¨æˆ·æŒ‰ä¸‹æ•°å­—é”®äº‹ä»¶</span><br><span class="line">- (void)number:(NSDictionary *)userInfo &#123;</span><br><span class="line">    NSString *numObj = userInfo[CYPasswordViewKeyboardNumberKey];</span><br><span class="line">    if (numObj.length &gt;= kNumCount) return; // âš ï¸ </span><br><span class="line">    [self.inputNumArray addObject:numObj]; // è¿™é‡Œæ¯æ¬¡è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œå°±ä¼šæŠŠè¯¥æ•°å­—å­˜è¿›æ•°ç»„ä¸­</span><br><span class="line">    [self setNeedsDisplay]; // æ ¹æ®æ•°ç»„çš„ä¸ªæ•°é‡ç»˜æ•´ä¸ªè§†å›¾</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•ä¸­çš„ <code>numObj</code> å°±æ˜¯å½“å‰è¾“å…¥çš„æ•°å­—ï¼Œ<code>numObj.length</code> æ°¸è¿œç­‰äº1ï¼Œæ‰€ä»¥æˆ‘è¯´è¿™è¡Œä»£ç æ˜¯æ°¸è¿œä¸ä¼šæ‰§è¡Œçš„ã€‚</p>
<p>å¼¹å‡ºå¯†ç æ¡†çš„æ–¹æ³•:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å¼¹å‡ºå¯†ç æ¡†</span><br><span class="line">[self.passwordView showInView:self.view.window];</span><br></pre></td></tr></table></figure>
<p>æºç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">- (void)showInView:(UIView *)view &#123;</span><br><span class="line">    [view addSubview:self];</span><br><span class="line">    /** è¾“å…¥æ¡†èµ·å§‹frame */</span><br><span class="line">    self.passwordInputView.height = CYPasswordInputViewHeight;</span><br><span class="line">    self.passwordInputView.y = self.height;</span><br><span class="line">    self.passwordInputView.width = CYScreenWidth;</span><br><span class="line">    self.passwordInputView.x = 0;</span><br><span class="line">    /** å¼¹å‡ºé”®ç›˜ */</span><br><span class="line">    [self showKeyboard];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** é”®ç›˜å¼¹å‡º */</span><br><span class="line">- (void)showKeyboard &#123;</span><br><span class="line">    [self.txfResponsder becomeFirstResponder];</span><br><span class="line">    [UIView animateWithDuration:CYPasswordViewAnimationDuration</span><br><span class="line">                          delay:0</span><br><span class="line">                        options:UIViewAnimationOptionTransitionNone</span><br><span class="line">                     animations:^&#123;</span><br><span class="line">         self.passwordInputView.y = (self.height - self.passwordInputView.height);</span><br><span class="line">                     &#125;</span><br><span class="line">                     completion:^(BOOL finished) &#123;</span><br><span class="line">         NSLog(@&quot; ========= %@&quot;, NSStringFromCGRect(self.passwordInputView.frame));</span><br><span class="line">                     &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ·»åŠ äº†ä¸€ä¸ªåŠ¨ç”»è®© <code>passwordInputView</code> çš„ Y ç‚¹ä»:</p>
<p> <code>self.height</code> â†’ <code>(self.height - self.passwordInputView.height)</code></p>
<p>å°±æ˜¯ä»åº•éƒ¨å‘ä¸Šæ¨å‡ºçš„åŠ¨ç”»ï¼Œå®ƒæ˜¯å…ˆå¼¹å‡ºé”®ç›˜ï¼Œå†å¼¹å‡º<code>passwordInputView</code>ã€‚</p>
<p>æœ€åï¼Œæ—‹è½¬åŠ¨ç”»éƒ½æ˜¯å¯¹åŠ è½½å›¾ç‰‡å’ŒåŠ è½½æ–‡å­—ä½œäº†ä¸€äº›æ›´æ”¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  å¼€å§‹æ—‹è½¬</span><br><span class="line"> */</span><br><span class="line">- (void)startRotation:(UIView *)view &#123;</span><br><span class="line">    _imgRotation.hidden = NO;</span><br><span class="line">    _imgRotation.image = </span><br><span class="line">      [UIImage imageNamed:CYPasswordViewSrcName(@&quot;password_loading_b&quot;)];</span><br><span class="line">    _lblMessage.hidden = NO;</span><br><span class="line">    self.lblMessage.text = _loadingText;</span><br><span class="line">  </span><br><span class="line">    CABasicAnimation* rotationAnimation;</span><br><span class="line">    rotationAnimation = [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation.z&quot;];</span><br><span class="line">    rotationAnimation.toValue = [NSNumber numberWithFloat: M_PI * 2.0 ];</span><br><span class="line">    rotationAnimation.duration = 2.0;</span><br><span class="line">    rotationAnimation.cumulative = YES;</span><br><span class="line">    rotationAnimation.repeatCount = MAXFLOAT;</span><br><span class="line">    [view.layer addAnimation:rotationAnimation forKey:@&quot;rotationAnimation&quot;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  ç»“æŸæ—‹è½¬</span><br><span class="line"> */</span><br><span class="line">- (void)stopRotation:(UIView *)view &#123;</span><br><span class="line">    [view.layer removeAllAnimations];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)startLoading &#123;</span><br><span class="line">    [self startRotation:self.imgRotation];</span><br><span class="line">    [self.passwordInputView disEnalbeCloseButton:NO];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)stopLoading &#123;</span><br><span class="line">    [self stopRotation:self.imgRotation];</span><br><span class="line">    [self.passwordInputView disEnalbeCloseButton:YES];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)requestComplete:(BOOL)state &#123;</span><br><span class="line">    if (state) &#123;</span><br><span class="line">        [self requestComplete:state message:@&quot;æ”¯ä»˜æˆåŠŸ&quot;];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        [self requestComplete:state message:@&quot;æ”¯ä»˜å¤±è´¥&quot;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">- (void)requestComplete:(BOOL)state message:(NSString *)message &#123;</span><br><span class="line">    if (state) &#123;</span><br><span class="line">        // è¯·æ±‚æˆåŠŸ</span><br><span class="line">        self.lblMessage.text = message;</span><br><span class="line">        self.imgRotation.image = </span><br><span class="line">          [UIImage imageNamed:CYPasswordViewSrcName(@&quot;password_success&quot;)];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // è¯·æ±‚å¤±è´¥</span><br><span class="line">        self.lblMessage.text = message;</span><br><span class="line">        self.imgRotation.image = </span><br><span class="line">          [UIImage imageNamed:CYPasswordViewSrcName(@&quot;password_error&quot;)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ†æå®Œä»¥ä¸Šæºç åï¼Œæˆ‘åˆå¯¹è¯¥é¡¹ç›®é‡æ„å¹¶è¿›è¡Œäº†äº›è®¸ä¿®æ”¹ï¼š</p>
<ul>
<li><a href="http://www.jianshu.com/p/7aa9c9d2b366" target="_blank" rel="noopener">å¯†ç è¾“å…¥æ¡†ï¼šHQLPasswordViewDemo</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/11/iOS ç¼–ç¨‹ï¼šè½»é‡åŒ–è§†å›¾æ§åˆ¶å™¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/11/iOS ç¼–ç¨‹ï¼šè½»é‡åŒ–è§†å›¾æ§åˆ¶å™¨/" class="post-title-link" itemprop="url">iOS ç¼–ç¨‹ï¼šè½»é‡åŒ–è§†å›¾æ§åˆ¶å™¨</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-11 16:06:00" itemprop="dateCreated datePublished" datetime="2017-06-11T16:06:00+08:00">2017-06-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 15:32:54" itemprop="dateModified" datetime="2019-04-17T15:32:54+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/11/iOS ç¼–ç¨‹ï¼šè½»é‡åŒ–è§†å›¾æ§åˆ¶å™¨/" class="leancloud_visitors" data-flag-title="iOS ç¼–ç¨‹ï¼šè½»é‡åŒ–è§†å›¾æ§åˆ¶å™¨">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>â­ï¸â­ï¸â­ï¸</p>
<p>è¿™æ˜¯ä¸€ç¯‡è½»é‡åŒ–è§†å›¾æ§åˆ¶å™¨çš„ç¬”è®°ï¼Œé’ˆå¯¹åŸæ–‡æœ‰æ‰€æ›´æ”¹ï¼ŒåŠ äº†è‡ªå·±çš„ä¸€äº›ç†è§£ã€‚</p>
<p>å‚è€ƒçš„æ–‡ç« å¦‚ä¸‹ï¼š</p>
<ul>
<li><a href="https://www.objccn.io/issue-1-1/" target="_blank" rel="noopener">æ›´è½»é‡çš„ View Controllers @ObjC ä¸­å›½</a></li>
<li><a href="https://www.objccn.io/issue-1-2/" target="_blank" rel="noopener">æ•´æ´çš„ Table View ä»£ç  @ObjC ä¸­å›½</a></li>
<li><a href="https://objccn.io/issue-1-4/" target="_blank" rel="noopener">View Controller å®¹å™¨ @ObjCä¸­å›½</a></li>
</ul>
<p>ä¹Ÿæ¨èç»™ä½ ï¼Œå»ºè®®å¯¹ç€<a href="https://github.com/objcio/issue-1-lighter-view-controllers" target="_blank" rel="noopener">æºç </a>æ–Ÿé…Œæ¨æ•²ï¼Œç¡®å®å¤§æœ‰è£¨ç›Šã€‚</p>
</blockquote>
<p>[TOC]</p>
<h1 id="æ•´æ´çš„-Table-View-ä»£ç "><a href="#æ•´æ´çš„-Table-View-ä»£ç " class="headerlink" title="æ•´æ´çš„ Table View ä»£ç "></a>æ•´æ´çš„ Table View ä»£ç </h1><h2 id="Table-View-Controller-çš„é™åˆ¶"><a href="#Table-View-Controller-çš„é™åˆ¶" class="headerlink" title="Table View Controller çš„é™åˆ¶"></a>Table View Controller çš„é™åˆ¶</h2><p>UITableViewController å¯¹è±¡ çš„ view å±æ€§æ°¸è¿œéƒ½æ˜¯ä¸€ä¸ª tableViewã€‚å¦‚æœä½ ç¨åå†³å®šåœ¨ tableView æ—è¾¹æ˜¾ç¤ºä¸€äº›ä¸œè¥¿ï¼ˆæ¯”å¦‚ä¸€ä¸ªåœ°å›¾ï¼‰ï¼Œæˆ–è€…åœ¨è§†å›¾åº•éƒ¨æ˜¾ç¤ºä¸€ä¸ªå›ºå®šä½ç½®çš„ Button æ§ä»¶ï¼Œè¿™æ—¶å€™ UITableViewController  å°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œè¦å®ç°è¯¥éœ€æ±‚åªèƒ½æŠŠçˆ¶ç±»æ”¹æˆ UIViewControllerï¼Œç„¶åæŠŠ tableView è®¾ç½®ä¸º subView ï¼Œå†è°ƒæ•´å­è§†å›¾ä¹‹é—´çš„å¸ƒå±€â€¦æ€»ä¹‹ï¼Œå°±æ˜¯æ–°å»ºä¸€ä¸ªç±»ï¼Œå…¨éƒ¨æ¨å€’é‡æ¥ã€‚</p>
<h3 id="ä½¿ç”¨-Child-View-Controllers"><a href="#ä½¿ç”¨-Child-View-Controllers" class="headerlink" title="ä½¿ç”¨ Child View Controllers"></a>ä½¿ç”¨ Child View Controllers</h3><p>å’Œå®Œå…¨æŠ›å¼ƒ UITableViewController å¯¹è±¡ä¸åŒï¼Œä½ è¿˜å¯ä»¥å°†å®ƒä½œä¸º child view controller æ·»åŠ åˆ°å…¶ä»– view controller ä¸­ï¼ˆ<a href="http://objccn.io/issue-1-4" target="_blank" rel="noopener">å…³äºæ­¤è¯é¢˜çš„æ–‡ç« </a>ï¼‰ã€‚è¿™æ ·ï¼Œparent view controller åœ¨ç®¡ç†å…¶ä»–çš„ä½ éœ€è¦çš„æ–°åŠ çš„ç•Œé¢å…ƒç´ çš„åŒæ—¶ï¼Œtable view controller è¿˜å¯ä»¥ç»§ç»­ç®¡ç†å®ƒçš„ tableViewã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (void)addPhotoDetailsTableView &#123;</span><br><span class="line">  </span><br><span class="line">    DetailsViewController *details = [[DetailsViewController alloc] init];</span><br><span class="line">    details.photo = self.photo;</span><br><span class="line">    details.delegate = self;</span><br><span class="line">    [self addChildViewController:details];</span><br><span class="line">  </span><br><span class="line">    CGRect frame = self.view.bounds;</span><br><span class="line">    frame.origin.y = 110;</span><br><span class="line">    details.view.frame = frame;</span><br><span class="line">    [self.view addSubview:details.view];</span><br><span class="line">  </span><br><span class="line">    [details didMoveToParentViewController:self];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â‡ï¸ ä¼˜åŒ–åŸç†ï¼šæŠŠ è‡ªå®šä¹‰çš„ <strong>UITableViewController</strong> å­ç±»å¯¹è±¡è®¾ç½®ä¸ºè§†å›¾æ§åˆ¶å™¨çš„ <code>childViewController</code>ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä½ å°±å¿…é¡»åœ¨ child view controller å’Œ parent view controller ä¹‹é—´å»ºç«‹æ¶ˆæ¯ä¼ é€’çš„æ¸ é“ã€‚æ¯”å¦‚ï¼Œå¦‚æœç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ª tableView ä¸­çš„ cellï¼Œparent view controller éœ€è¦çŸ¥é“è¿™ä¸ªäº‹ä»¶æ¥æ¨å…¥å…¶ä»– view controllerã€‚æ ¹æ®ä½¿ç”¨ä¹ æƒ¯ï¼Œ<strong>é€šå¸¸æœ€æ¸…æ™°çš„æ–¹å¼æ˜¯ä¸ºè¿™ä¸ª table view controller å®šä¹‰ä¸€ä¸ª delegate protocolï¼Œç„¶ååˆ° parent view controller ä¸­å»å®ç°</strong>ã€‚</p>
<p>â‡ï¸ å½“é€‰æ‹© DetailsViewController ä¸­çš„æŸä¸€è¡Œæ—¶ï¼Œé€šè¿‡ Delegate è®© parentViewController ä¸­å»å®ç°å…·ä½“çš„è¡Œä¸ºæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">// ============================== </span><br><span class="line">// DetailsViewController.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">@class Photo;</span><br><span class="line"></span><br><span class="line">@protocol DetailsViewControllerDelegate</span><br><span class="line">- (void)didSelectPhotoAttributeWithKey:(NSString *)key;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface DetailsViewController : UITableViewController</span><br><span class="line">@property (nonatomic, strong) Photo *photo;</span><br><span class="line">@property (nonatomic, weak) id &lt;DetailsViewControllerDelegate&gt; delegate;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">// ============================== </span><br><span class="line">// DetailsViewController.h</span><br><span class="line">@implementation DetailsViewController</span><br><span class="line">  </span><br><span class="line">// ...</span><br><span class="line">  </span><br><span class="line">#pragma mark UITableViewDelegate</span><br><span class="line">- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    NSString *key = self.keys[(NSUInteger) indexPath.row];</span><br><span class="line">    [self.delegate didSelectPhotoAttributeWithKey:key];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ============================== </span><br><span class="line">// parentViewController çš„å®ç°æ–‡ä»¶</span><br><span class="line">@interface PhotoViewController () &lt;DetailsViewControllerDelegate&gt;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation PhotoViewController</span><br><span class="line"></span><br><span class="line">// ...</span><br><span class="line">  </span><br><span class="line">#pragma mark DetailsViewControllerDelegate</span><br><span class="line">- (void)didSelectPhotoAttributeWithKey:(NSString *)key</span><br><span class="line">&#123;</span><br><span class="line">    // å®ç°ç‚¹å‡» childViewController æŸä¸€è¡Œåçš„è¡Œä¸º</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†ç¦»å…³æ³¨ç‚¹ï¼ˆSeparating-Concernsï¼‰"><a href="#åˆ†ç¦»å…³æ³¨ç‚¹ï¼ˆSeparating-Concernsï¼‰" class="headerlink" title="åˆ†ç¦»å…³æ³¨ç‚¹ï¼ˆSeparating Concernsï¼‰"></a>åˆ†ç¦»å…³æ³¨ç‚¹ï¼ˆSeparating Concernsï¼‰</h2><h3 id="æ­å»º-Model-å¯¹è±¡å’Œ-Cell-ä¹‹é—´çš„æ¡¥æ¢"><a href="#æ­å»º-Model-å¯¹è±¡å’Œ-Cell-ä¹‹é—´çš„æ¡¥æ¢" class="headerlink" title="æ­å»º Model å¯¹è±¡å’Œ Cell ä¹‹é—´çš„æ¡¥æ¢"></a>æ­å»º Model å¯¹è±¡å’Œ Cell ä¹‹é—´çš„æ¡¥æ¢</h3><p>åœ¨ Cell ä¸Šæ˜¾ç¤º Model å±‚æ•°æ®ï¼Œé€šå¸¸çš„åšæ³•æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// é€šå¸¸åšæ³•ï¼š</span><br><span class="line">- (UITableViewCell *)tableView:(UITableView *)tableView</span><br><span class="line">         cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    PhotoCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;PhotoCell&quot;</span><br><span class="line">                                                      forIndexPath:indexPath];</span><br><span class="line">    Photo *photo = items[indexPath.row];</span><br><span class="line">    cell.photoTitleLabel.text = photo.name;</span><br><span class="line">    NSString* date = [self.dateFormatter stringFromDate:photo.creationDate];</span><br><span class="line">    cell.photoDateLabel.text = date;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™æ ·çš„ä»£ç ä¼šè®© data source å˜å¾—æ··ä¹±ï¼Œå› ä¸ºå®ƒå‘ data source æš´éœ²äº† Cell çš„è®¾è®¡ã€‚</p>
<p>â‡ï¸â‡ï¸ ä¼˜åŒ–åŸç†ï¼šä¸º Cell åˆ›å»ºä¸€ä¸ªèŒƒç•´ï¼ˆ<strong>Category</strong>ï¼‰ç±»æ¥é…ç½® Modelï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// ============================== </span><br><span class="line">// PhotoCell+ConfigureForPhoto.h</span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &quot;PhotoCell.h&quot;</span><br><span class="line">@class Photo;</span><br><span class="line"></span><br><span class="line">@interface PhotoCell (ConfigureForPhoto)</span><br><span class="line">// Apple å®˜æ–¹çš„æ¨èçš„åšæ³•ï¼šä¸ºé¿å…æ–¹æ³•å†²çªï¼Œåœ¨ Category ç±»ä¸­çš„æ–¹æ³•è¦åŠ å‰ç¼€_</span><br><span class="line">- (void)hql_configureForPhoto:(Photo *)photo;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">// ============================== </span><br><span class="line">// PhotoCell+ConfigureForPhoto.m</span><br><span class="line">#import &quot;PhotoCell+ConfigureForPhoto.h&quot;</span><br><span class="line">#import &quot;Photo.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation PhotoCell (ConfigureForPhoto)</span><br><span class="line"></span><br><span class="line">- (void)hql_configureForPhoto:(Photo *)photo &#123;</span><br><span class="line">    self.photoTitleLabel.text = photo.name;</span><br><span class="line">    self.photoDateLabel.text =</span><br><span class="line">        [self.dateFormatter stringFromDate:photo.creationDate];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (NSDateFormatter *)dateFormatter &#123;</span><br><span class="line">    static NSDateFormatter *dateFormatter;</span><br><span class="line">    if (!dateFormatter) &#123;</span><br><span class="line">        dateFormatter = [[NSDateFormatter alloc] init];</span><br><span class="line">        dateFormatter.timeStyle = NSDateFormatterMediumStyle;</span><br><span class="line">        dateFormatter.dateStyle = NSDateFormatterMediumStyle;</span><br><span class="line">    &#125;</span><br><span class="line">    return dateFormatter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>æœ‰äº†ä¸Šè¿°ä»£ç åï¼Œè§†å›¾æ§åˆ¶å™¨ä¸­çš„ data source æ–¹æ³•å°±å˜å¾—ç®€å•äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// ä¼˜åŒ–åšæ³•ï¼š</span><br><span class="line">- (UITableViewCell *)tableView:(UITableView *)tableView</span><br><span class="line">         cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    PhotoCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;PhotoCell&quot;</span><br><span class="line">                                                      forIndexPath:indexPath];</span><br><span class="line">    Photo *photo = items[indexPath.row];</span><br><span class="line">    [cell hql_configureForPhoto:photo];</span><br><span class="line">    return cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è®©-Cell-å¯å¤ç”¨"><a href="#è®©-Cell-å¯å¤ç”¨" class="headerlink" title="è®© Cell å¯å¤ç”¨"></a>è®© Cell å¯å¤ç”¨</h3><blockquote>
<p>â‡ï¸</p>
<p>å…³äºå¦‚ä½•è®© cell å¯ä»¥æ¥æ”¶ä»»ä½•ç±»å‹çš„ Model  ä¸€å¼€å§‹æ²¡ç†è§£</p>
<p>å‚è€ƒäº†äººå®¶çš„ç¬”è®°ï¼š<a href="http://devtian.me/2015/03/23/objc-io-studynotes-ViewController-slim/" target="_blank" rel="noopener">objc.io å­¦ä¹ ç¬”è®°-ViewControllerç˜¦èº«è®°</a></p>
</blockquote>
<p>æœ‰æ—¶å¤šç§ model å¯¹è±¡éœ€è¦ç”¨åŒä¸€ç±»å‹çš„ cell æ¥è¡¨ç¤ºï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥è®© cell å¯ä»¥å¤ç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ç»™ cell å®šä¹‰ä¸€ä¸ª protocolï¼Œéœ€è¦ç”¨è¿™ä¸ª cell æ˜¾ç¤ºçš„å¯¹è±¡å¿…é¡»éµå¾ªè¿™ä¸ª protocolã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@protocol HQLTableViewCellConfigureDelegate &lt;NSObject&gt;</span><br><span class="line">- (NSString *)imageName;</span><br><span class="line">- (NSString *)mainTitle;</span><br><span class="line">- (NSString *)detailTitle;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>ç„¶åç®€å•ä¿®æ”¹ category ä¸­çš„è®¾ç½®æ–¹æ³•ï¼Œè®©å®ƒå¯ä»¥æ¥å—éµå¾ªè¿™ä¸ª protocol çš„ä»»ä½•å¯¹è±¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (void)setContent:(id&lt;CellConfigDelegate&gt;)model;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦ä½¿ç”¨è¯¥ cell çš„ Model å°±å¿…é¡»éµå®ˆ cell ä¸­çš„ Delegate ï¼Œè¿”å›è®¾ç½® cell æ‰€éœ€è¦çš„æ¨¡å‹å¯¹è±¡ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HQLModel.h</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"HQLTableViewCell.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HQLModel</span> : <span class="title">NSObject</span> &lt;<span class="title">HQLTableViewCellConfigureDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *icon;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *ModelDescription;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// HQLModel.m</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"HQLModel.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">HQLModel</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - HQLTableViewCellConfigureDelegate</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)imageName &#123;</span><br><span class="line">    <span class="keyword">return</span> _icon;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)mainTitle &#123;</span><br><span class="line">    <span class="keyword">return</span> _name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)detailTitle &#123;</span><br><span class="line">    <span class="keyword">return</span> _ModelDescription;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>è¿™äº›ç®€å•çš„æ­¥éª¤è®© cell å’Œä»»ä½•ç‰¹æ®Šçš„ model å¯¹è±¡ä¹‹é—´å¾—ä»¥è§£è€¦ï¼Œè®©å®ƒå¯é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹ã€‚</p>
<h3 id="åœ¨-Cell-å†…éƒ¨æ§åˆ¶-Cell-çš„çŠ¶æ€"><a href="#åœ¨-Cell-å†…éƒ¨æ§åˆ¶-Cell-çš„çŠ¶æ€" class="headerlink" title="åœ¨ Cell å†…éƒ¨æ§åˆ¶ Cell çš„çŠ¶æ€"></a>åœ¨ Cell å†…éƒ¨æ§åˆ¶ Cell çš„çŠ¶æ€</h3><p>å¦‚æœä½ æƒ³è‡ªå®šä¹‰ tableView é»˜è®¤çš„é«˜äº®æˆ–é€‰æ‹©è¡Œä¸ºï¼Œä½ å¯ä»¥å®ç°ä¸¤ä¸ª delegate æ–¹æ³•ï¼ŒæŠŠç‚¹å‡»çš„ cell ä¿®æ”¹æˆæˆ‘ä»¬æƒ³è¦çš„æ ·å­ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// é€šå¸¸åšæ³•ï¼Œåœ¨è§†å›¾æ§åˆ¶å™¨ä¸­ä¿®æ”¹ç‚¹å‡»é€‰æ‹© cell çš„é«˜äº®è¡Œä¸º</span><br><span class="line">- (void)tableView:(UITableView *)tableView</span><br><span class="line">        didHighlightRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    PhotoCell *cell = [tableView cellForRowAtIndexPath:indexPath];</span><br><span class="line">    cell.photoTitleLabel.shadowColor = [UIColor darkGrayColor];</span><br><span class="line">    cell.photoTitleLabel.shadowOffset = CGSizeMake(3, 3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)tableView:(UITableView *)tableView</span><br><span class="line">        didUnhighlightRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    PhotoCell *cell = [tableView cellForRowAtIndexPath:indexPath];</span><br><span class="line">    cell.photoTitleLabel.shadowColor = nil;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œè¿™ä¸¤ä¸ª delegate æ–¹æ³•çš„å®ç°åˆåŸºäº view controller çŸ¥æ™“ cell å®ç°çš„å…·ä½“ç»†èŠ‚ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ›¿æ¢æˆ–é‡æ–°è®¾è®¡ cellï¼Œæˆ‘ä»¬å¿…é¡»æ”¹å†™ delegate ä»£ç ã€‚View çš„å®ç°ç»†èŠ‚å’Œ delegate çš„å®ç°äº¤ç»‡åœ¨ä¸€èµ·äº†ã€‚æˆ‘ä»¬åº”è¯¥æŠŠè¿™äº›ç»†èŠ‚ç§»åˆ° cell è‡ªèº«ä¸­å»ã€‚</p>
<p>â‡ï¸ ä¼˜åŒ–åŸç†ï¼šè®© cell è‡ªå·±çš„ .m æ–‡ä»¶ä¸­å»å®ç°ä¿®æ”¹ Cell çŠ¶æ€çš„æ–¹æ³• ï¼Œæ¥è¾¾åˆ°åˆ†ç¦»ä»£ç çš„ç›®çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@implementation PhotoCell</span><br><span class="line">// ...</span><br><span class="line">- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated &#123;</span><br><span class="line">    [super setHighlighted:highlighted animated:animated];</span><br><span class="line">    if (highlighted) &#123;</span><br><span class="line">        self.photoTitleLabel.shadowColor = [UIColor darkGrayColor];</span><br><span class="line">        self.photoTitleLabel.shadowOffset = CGSizeMake(3, 3);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        self.photoTitleLabel.shadowColor = nil;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨åŠªåŠ›<strong>æŠŠ view å±‚å’Œ controller å±‚çš„å®ç°ç»†èŠ‚åˆ†ç¦»å¼€</strong>ã€‚delegate è‚¯å®šå¾—æ¸…æ¥šä¸€ä¸ª view è¯¥æ˜¾ç¤ºä»€ä¹ˆçŠ¶æ€ï¼Œä½†æ˜¯å®ƒä¸åº”è¯¥äº†è§£å¦‚ä½•ä¿®æ”¹ view ç»“æ„æˆ–è€…ç»™æŸäº› subviews è®¾ç½®æŸäº›å±æ€§ä»¥è·å¾—æ­£ç¡®çš„çŠ¶æ€ã€‚æ‰€æœ‰è¿™äº›é€»è¾‘éƒ½åº”è¯¥å°è£…åˆ° view å†…éƒ¨ï¼Œç„¶åç»™å¤–éƒ¨æä¾›ä¸€ä¸ªç®€å•çš„ APIã€‚</p>
<h3 id="æ§åˆ¶å¤šä¸ª-Cell-ç±»å‹"><a href="#æ§åˆ¶å¤šä¸ª-Cell-ç±»å‹" class="headerlink" title="æ§åˆ¶å¤šä¸ª Cell ç±»å‹"></a>æ§åˆ¶å¤šä¸ª Cell ç±»å‹</h3><p>å¦‚æœä¸€ä¸ª tableView é‡Œé¢æœ‰å¤šç§ç±»å‹çš„ cellï¼Œdata source æ–¹æ³•å¾ˆå¿«å°±éš¾ä»¥æ§åˆ¶äº†ã€‚åœ¨æˆ‘ä»¬ç¤ºä¾‹ç¨‹åºä¸­ï¼ŒDetailsViewController æœ‰ä¸¤ç§ä¸åŒç±»å‹çš„ cellï¼šä¸€ç§ç”¨äºæ˜¾ç¤ºå‡ ä¸ªæ˜Ÿï¼Œå¦ä¸€ç§ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªé”®å€¼å¯¹ã€‚ä¸ºäº†åˆ’åˆ†å¤„ç†ä¸åŒ cell ç±»å‹çš„ä»£ç ï¼Œdata source æ–¹æ³•ç®€å•åœ°<strong>é€šè¿‡åˆ¤æ–­ cell çš„ç±»å‹ï¼ŒæŠŠä»»åŠ¡æ´¾å‘ç»™å…¶ä»–æŒ‡å®šçš„æ–¹æ³•</strong>ã€‚</p>
<p>â‡ï¸ ä¼˜åŒ–åŸç†ï¼šçœ‹æºç å°±å¾ˆå®¹æ˜“ç†è§£ï¼Œæ ¹æ®ä¸åŒç±»å‹çš„ Cell ï¼Œé…ç½®æ–¹æ³•åˆ†å¼€å†™åœ¨æŒ‡å®šçš„æ–¹æ³•ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">- (UITableViewCell *)tableView:(UITableView *)tableView</span><br><span class="line">         cellForRowAtIndexPath:(NSIndexPath *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    NSString *key = self.keys[(NSUInteger) indexPath.row];</span><br><span class="line">    id value = [self.photo valueForKey:key];</span><br><span class="line">    UITableViewCell *cell;</span><br><span class="line">    if ([key isEqual:PhotoRatingKey]) &#123;</span><br><span class="line">        cell = [self cellForRating:value indexPath:indexPath];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        cell = [self detailCellForKey:key value:value];</span><br><span class="line">    &#125;</span><br><span class="line">    return cell;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (RatingCell *)cellForRating:(NSNumber *)rating</span><br><span class="line">                    indexPath:(NSIndexPath *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UITableViewCell *)detailCellForKey:(NSString *)key</span><br><span class="line">                                value:(id)value</span><br><span class="line">&#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Table view controllersï¼ˆä»¥åŠå…¶ä»–çš„ controller å¯¹è±¡ï¼‰åº”è¯¥åœ¨ model å’Œ view å¯¹è±¡ä¹‹é—´æ‰®æ¼”<a href="http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/ControllerObject.html" target="_blank" rel="noopener">åè°ƒè€…å’Œè°ƒè§£è€…çš„è§’è‰²</a>ã€‚å®ƒä¸åº”è¯¥å…³å¿ƒæ˜æ˜¾å±äº view å±‚æˆ– model å±‚çš„ä»»åŠ¡ã€‚ä½ åº”è¯¥å§‹ç»ˆè®°ä½è¿™ç‚¹ï¼Œè¿™æ · delegate å’Œ data source æ–¹æ³•ä¼šå˜å¾—æ›´å°å·§ï¼Œæœ€å¤šåŒ…å«ä¸€äº›ç®€å•çš„æ ·æ¿ä»£ç ã€‚</p>
<p>è¿™ä¸ä»…å‡å°‘äº† table view controllers çš„å¤§å°å’Œå¤æ‚æ€§ï¼Œè€Œä¸”è¿˜æŠŠä¸šåŠ¡é€»è¾‘å’Œ view çš„é€»è¾‘æ”¾åˆ°äº†æ›´åˆé€‚çš„åœ°æ–¹ã€‚Controller å±‚çš„é‡Œé‡Œå¤–å¤–çš„å®ç°ç»†èŠ‚éƒ½è¢«å°è£…æˆäº†ç®€å•çš„ APIï¼Œæœ€ç»ˆï¼Œå®ƒå˜å¾—æ›´åŠ å®¹æ˜“ç†è§£ï¼Œä¹Ÿæ›´åˆ©äºå›¢é˜Ÿåä½œã€‚</p>
<h1 id="æ›´è½»é‡çš„-View-Controllers"><a href="#æ›´è½»é‡çš„-View-Controllers" class="headerlink" title="æ›´è½»é‡çš„ View Controllers"></a>æ›´è½»é‡çš„ View Controllers</h1><h2 id="æŠŠ-Data-Source-å’Œå…¶ä»–-Protocols-åˆ†ç¦»å‡ºæ¥"><a href="#æŠŠ-Data-Source-å’Œå…¶ä»–-Protocols-åˆ†ç¦»å‡ºæ¥" class="headerlink" title="æŠŠ Data Source å’Œå…¶ä»– Protocols åˆ†ç¦»å‡ºæ¥"></a>æŠŠ Data Source å’Œå…¶ä»– Protocols åˆ†ç¦»å‡ºæ¥</h2><blockquote>
<p>â‡ï¸ â‡ï¸ </p>
<p>ä¹‹å‰çš„ç†è§£æœ‰äº›åå·®ï¼Œæˆ‘æ˜ç™½ä½œè€…è½»é‡åŒ– table view controller çš„ç›®çš„æ˜¯ä¸ºäº†å¤ç”¨ã€‚</p>
<p>ä¹‹å‰ä»¥ä¸ºæ˜¯å¤ç”¨ æ§åˆ¶å™¨ ç±»ï¼›</p>
<p>åæ¥æ‰æ˜ç™½æ˜¯ä¸ºäº†å¤ç”¨ <strong>UITableViewDataSource</strong> åè®®çš„ä¸¤ä¸ªå®ç°æ–¹æ³•ï¼š</p>
<ul>
<li>tableView:numberOfRowsInSection:</li>
<li>tableView:cellForRowAtIndexPath:</li>
</ul>
<p>æŠŠ <strong>UITableViewDataSource</strong> åè®®éœ€è¦å®ç°çš„ä¸¤ä¸ªæ–¹æ³•å†™åœ¨ä¸€ä¸ªå•ç‹¬çš„ç±»ï¼ˆåˆ›å»ºä¸€ä¸ª ArrayDataSource ç±»ä½œä¸ºé€šç”¨çš„æ•°æ®æºç±»ï¼‰ä¸­ã€‚æˆ‘ä»¬å°±ä¸ç”¨åœ¨æ¯ä¸ªå«æœ‰ tableView çš„ ViewController é‡Œè¾¹éƒ½å®ç°ä¸€é <strong>UITableViewDataSource</strong> åè®®äº†ï¼Œåªè¦åˆ›å»º ArrayDataSource ç±»å¹¶ä¼ å…¥æŒ‡å®šçš„å‡ ä¸ªå‚æ•°ã€‚</p>
</blockquote>
<p>æŠŠ <code>UITableViewDataSource</code> çš„ä»£ç æå–å‡ºæ¥æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„ç±»ä¸­ï¼Œæ˜¯ä¸º view controller ç˜¦èº«çš„å¼ºå¤§æŠ€æœ¯ä¹‹ä¸€ã€‚</p>
<p>ç¤ºä¾‹é¡¹ç›®ä¸­ï¼Œæœ‰ä¸ª <code>PhotosViewController</code> ç±»ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// é€šå¸¸çš„åšæ³•ï¼š</span><br><span class="line"># pragma mark - UITableViewDataSource</span><br><span class="line"></span><br><span class="line">- (Photo*)photoAtIndexPath:(NSIndexPath*)indexPath &#123;</span><br><span class="line">    return photos[(NSUInteger)indexPath.row];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (NSInteger)tableView:(UITableView*)tableView</span><br><span class="line"> numberOfRowsInSection:(NSInteger)section &#123;</span><br><span class="line">    return photos.count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UITableViewCell*)tableView:(UITableView*)tableView</span><br><span class="line">        cellForRowAtIndexPath:(NSIndexPath*)indexPath &#123;</span><br><span class="line">    PhotoCell* cell =</span><br><span class="line">        [tableView dequeueReusableCellWithIdentifier:PhotoCellIdentifier</span><br><span class="line">                                        forIndexPath:indexPath];</span><br><span class="line">    Photo* photo = [self photoAtIndexPath:indexPath];</span><br><span class="line">    cell.label.text = photo.name;</span><br><span class="line">    return cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™äº›ä»£ç åŸºæœ¬éƒ½æ˜¯å›´ç»•æ•°ç»„åšä¸€äº›äº‹æƒ…ï¼Œæ›´é’ˆå¯¹åœ°è¯´ï¼Œæ˜¯å›´ç»• view controller æ‰€ç®¡ç†çš„ photos æ•°ç»„åšä¸€äº›äº‹æƒ…ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•æŠŠæ•°ç»„ç›¸å…³çš„ä»£ç ç§»åˆ°<a href="https://github.com/objcio/issue-1-lighter-view-controllers/blob/master/PhotoData/ArrayDataSource.h" target="_blank" rel="noopener">å•ç‹¬çš„ç±»</a>ä¸­ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª block æ¥è®¾ç½® cellï¼Œä¹Ÿå¯ä»¥ç”¨ delegate æ¥åšè¿™ä»¶äº‹ï¼Œè¿™å–å†³äºä½ çš„ä¹ æƒ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">// ============================== </span><br><span class="line">// ArrayDataSource.h</span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> é…ç½®cellçš„Blockå¯¹è±¡</span><br><span class="line"></span><br><span class="line"> @param cell cell å¯¹è±¡ç±»</span><br><span class="line"> @param item item æ¨¡å‹ç±»</span><br><span class="line"> */</span><br><span class="line">typedef void (^TableViewCellConfigureBlock)(id cell, id item);</span><br><span class="line"></span><br><span class="line">@interface ArrayDataSource : NSObject &lt;UITableViewDataSource&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> ArrayDataSource çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•</span><br><span class="line"></span><br><span class="line"> @param anItems             å‚æ•°ä¸€ï¼šæ•°ç»„æ¨¡å‹</span><br><span class="line"> @param aCellIdentifier     å‚æ•°äºŒï¼šcellå¤ç”¨æ ‡è¯†ç¬¦</span><br><span class="line"> @param aConfigureCellBlock å‚æ•°ä¸‰ï¼šé…ç½®cellçš„Blockå¯¹è±¡</span><br><span class="line"> @return è¿”å›å€¼ï¼šArrayDataSourceå®ä¾‹å¯¹è±¡</span><br><span class="line"> */</span><br><span class="line">- (id)initWithItems:(NSArray *)anItems</span><br><span class="line">     cellIdentifier:(NSString *)aCellIdentifier</span><br><span class="line"> configureCellBlock:(TableViewCellConfigureBlock)aConfigureCellBlock;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> æ ¹æ® index æ‰¾åˆ° item æ¨¡å‹</span><br><span class="line"> </span><br><span class="line"> è¿™æ˜¯ä¸€ä¸ªå…¬å…±æ–¹æ³•ï¼Œç”¨åˆ°çš„åœ°æ–¹ä¸»è¦æœ‰ä¸¤å¤„ï¼š</span><br><span class="line"> 1.é…ç½® cell æ—¶ï¼Œæ ¹æ® index ç´¢å¼•æ˜¾ç¤º model æ•°æ®ï¼›</span><br><span class="line"> 2.å½“ç”¨æˆ·ç‚¹å‡» cell æ—¶ï¼Œæ ¹æ® index ç´¢å¼• æ‰¾åˆ°å¯¹åº”çš„ model ä½œå‡ºå“åº”</span><br><span class="line"> </span><br><span class="line"> @param indexPath index ç´¢å¼•</span><br><span class="line"> @return item æ¨¡å‹</span><br><span class="line"> */</span><br><span class="line">- (id)itemAtIndexPath:(NSIndexPath *)indexPath;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ============================== </span><br><span class="line">// ArrayDataSource.m</span><br><span class="line">#import &quot;ArrayDataSource.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ArrayDataSource ()</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong) NSArray *items;</span><br><span class="line">@property (nonatomic, copy) NSString *cellIdentifier;</span><br><span class="line">@property (nonatomic, copy) TableViewCellConfigureBlock configureCellBlock;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@implementation ArrayDataSource</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark - Init</span><br><span class="line"></span><br><span class="line">- (id)init &#123;</span><br><span class="line">    return nil;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (id)initWithItems:(NSArray *)anItems</span><br><span class="line">     cellIdentifier:(NSString *)aCellIdentifier</span><br><span class="line"> configureCellBlock:(TableViewCellConfigureBlock)aConfigureCellBlock</span><br><span class="line">&#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        self.items = anItems;</span><br><span class="line">        self.cellIdentifier = aCellIdentifier;</span><br><span class="line">        self.configureCellBlock = [aConfigureCellBlock copy];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark - Public</span><br><span class="line"></span><br><span class="line">- (id)itemAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    return self.items[(NSUInteger) indexPath.row];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark UITableViewDataSource</span><br><span class="line"></span><br><span class="line">- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section &#123;</span><br><span class="line">    return self.items.count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    UITableViewCell *cell =</span><br><span class="line">        [tableView dequeueReusableCellWithIdentifier:self.cellIdentifier</span><br><span class="line">                                        forIndexPath:indexPath];</span><br><span class="line">    id item = [self itemAtIndexPath:indexPath];</span><br><span class="line">    // è°ƒç”¨ Block æ–¹æ³•é…ç½® cell</span><br><span class="line">    self.configureCellBlock(cell, item);</span><br><span class="line">    return cell;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥æŠŠ view controller ä¸­çš„è¿™ 3 ä¸ªæ–¹æ³•å»æ‰äº†ï¼Œå–è€Œä»£ä¹‹ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>ArrayDataSource</code> ç±»çš„å®ä¾‹ä½œä¸º table view çš„ data sourceã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (void)setupTableView &#123;</span><br><span class="line">    // å‚æ•°ä¸€ï¼šæ•°æ®æºæ•°ç»„</span><br><span class="line">    NSArray *photos = [AppDelegate sharedDelegate].store.sortedPhotos;</span><br><span class="line">    // å‚æ•°ä¸‰ï¼šé…ç½® cell çš„ Block å¯¹è±¡</span><br><span class="line">    TableViewCellConfigureBlock configureCell = ^(PhotoCell *cell, Photo *photo) &#123;</span><br><span class="line">        // å†…éƒ¨å®ç°çš„æ˜¯ cell çš„èŒƒç•´æ–¹æ³•ï¼šæ ¹æ® model æ˜¾ç¤º cell</span><br><span class="line">        [cell configureForPhoto:photo];</span><br><span class="line">    &#125;;</span><br><span class="line">    self.photosArrayDataSource =</span><br><span class="line">        [[ArrayDataSource alloc] initWithItems:photos</span><br><span class="line">                                cellIdentifier:PhotoCellIdentifier</span><br><span class="line">                            configureCellBlock:configureCell];</span><br><span class="line">    self.tableView.dataSource = self.photosArrayDataSource;</span><br><span class="line">    </span><br><span class="line">    [self.tableView registerNib:[PhotoCell nib]</span><br><span class="line">         forCellReuseIdentifier:PhotoCellIdentifier];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ ä¸ç”¨æ‹…å¿ƒæŠŠä¸€ä¸ª index path æ˜ å°„åˆ°æ•°ç»„ä¸­çš„ä½ç½®äº†ï¼Œæ¯æ¬¡ä½ æƒ³æŠŠè¿™ä¸ªæ•°ç»„æ˜¾ç¤ºåˆ°ä¸€ä¸ª table view ä¸­æ—¶ï¼Œä½ éƒ½å¯ä»¥å¤ç”¨è¿™äº›ä»£ç ã€‚ä½ ä¹Ÿå¯ä»¥å®ç°ä¸€äº›é¢å¤–çš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>tableView:commitEditingStyle:forRowAtIndexPath:</code>ï¼Œåœ¨ table view controllers ä¹‹é—´å…±äº«ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿå¯ä»¥æ‰©å±•åˆ°å…¶ä»– protocols ä¸Šé¢ã€‚æœ€æ˜æ˜¾çš„ä¸€ä¸ªå°±æ˜¯ <code>UICollectionViewDataSource</code>ã€‚è¿™ç»™äº†ä½ æå¤§çš„çµæ´»æ€§ï¼›å¦‚æœåœ¨å¼€å‘çš„æŸä¸ªæ—¶å€™ï¼Œä½ æƒ³ç”¨ <code>UICollectionView</code> ä»£æ›¿ <code>UITableView</code>ï¼Œä½ å‡ ä¹ä¸éœ€è¦å¯¹ view controller ä½œä»»ä½•ä¿®æ”¹ã€‚ä½ ç”šè‡³å¯ä»¥è®©ä½ çš„ data source åŒæ—¶æ”¯æŒè¿™ä¸¤ä¸ªåè®®ã€‚</p>
<h2 id="å°†ä¸šåŠ¡é€»è¾‘ç§»åˆ°-Model-ä¸­"><a href="#å°†ä¸šåŠ¡é€»è¾‘ç§»åˆ°-Model-ä¸­" class="headerlink" title="å°†ä¸šåŠ¡é€»è¾‘ç§»åˆ° Model ä¸­"></a>å°†ä¸šåŠ¡é€»è¾‘ç§»åˆ° Model ä¸­</h2><p>â‡ï¸ â‡ï¸ ä¼˜åŒ–åŸç†ï¼šæŠŠå¤„ç†<u>ä¸šåŠ¡é€»è¾‘</u>çš„ä»£ç ç§»åŠ¨åˆ° Model ç±»çš„ category ä¸­ä¼šå˜å¾—æ›´åŠ æ¸…æ™°ã€‚</p>
<h2 id="åˆ›å»º-Store-ç±»"><a href="#åˆ›å»º-Store-ç±»" class="headerlink" title="åˆ›å»º Store ç±»"></a>åˆ›å»º Store ç±»</h2><p>â‡ï¸ â‡ï¸ä¼˜åŒ–åŸç†ï¼šStore å¯¹è±¡ä¼šå…³å¿ƒ<u>æ•°æ®åŠ è½½</u>ã€<u>ç¼“å­˜</u>å’Œè®¾ç½®<u>æ•°æ®æ ˆ</u>ã€‚å®ƒä¹Ÿç»å¸¸è¢«ç§°ä¸º<strong>æœåŠ¡å±‚</strong>æˆ–è€…<strong>ä»“åº“</strong>ã€‚é€šè¿‡åˆ†ç¦»ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤ç”¨è¿™äº›ä»£ç ï¼Œå•ç‹¬æµ‹è¯•ä»–ä»¬ï¼Œå¹¶ä¸”è®© view controller ä¿æŒå°å·§ã€‚</p>
<h2 id="æŠŠç½‘ç»œè¯·æ±‚é€»è¾‘ç§»åˆ°-Model-å±‚"><a href="#æŠŠç½‘ç»œè¯·æ±‚é€»è¾‘ç§»åˆ°-Model-å±‚" class="headerlink" title="æŠŠç½‘ç»œè¯·æ±‚é€»è¾‘ç§»åˆ° Model å±‚"></a>æŠŠç½‘ç»œè¯·æ±‚é€»è¾‘ç§»åˆ° Model å±‚</h2><p>å’Œä¸Šé¢çš„ä¸»é¢˜ç›¸ä¼¼ï¼šä¸è¦åœ¨ view controller ä¸­åšç½‘ç»œè¯·æ±‚çš„é€»è¾‘ã€‚å–è€Œä»£ä¹‹ï¼Œä½ åº”è¯¥å°†å®ƒä»¬å°è£…åˆ°å¦ä¸€ä¸ªç±»ä¸­ã€‚è¿™æ ·ï¼Œä½ çš„ view controller å°±å¯ä»¥åœ¨ä¹‹åé€šè¿‡ä½¿ç”¨å›è°ƒï¼ˆæ¯”å¦‚ä¸€ä¸ª completion çš„ blockï¼‰æ¥è¯·æ±‚ç½‘ç»œäº†ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œç¼“å­˜å’Œé”™è¯¯æ§åˆ¶ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªç±»é‡Œé¢å®Œæˆã€‚</p>
<p>â‡ï¸ â‡ï¸ ä¼˜åŒ–åŸç†ï¼šå°±æ˜¯æŠŠå¤„ç†ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•å°è£…åœ¨å•ç‹¬çš„ç±»åº“ä¸­ï¼Œæ¯”å¦‚çŒ¿é¢˜åº“çš„å¼€æºæ¡†æ¶ <a href="https://github.com/yuantiku/YTKNetwork" target="_blank" rel="noopener">YTKNetwork</a>ã€‚</p>
<h2 id="æŠŠ-View-ä»£ç ç§»åˆ°-View-å±‚"><a href="#æŠŠ-View-ä»£ç ç§»åˆ°-View-å±‚" class="headerlink" title="æŠŠ View ä»£ç ç§»åˆ° View å±‚"></a>æŠŠ View ä»£ç ç§»åˆ° View å±‚</h2><p>ä¸åº”è¯¥åœ¨ view controller ä¸­æ„å»ºå¤æ‚çš„ view å±‚æ¬¡ç»“æ„ã€‚ä½ å¯ä»¥ä½¿ç”¨ Interface Builder æˆ–è€…æŠŠ views å°è£…åˆ°ä¸€ä¸ª <code>UIView</code> å­ç±»å½“ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªé€‰æ‹©æ—¥æœŸçš„æ§ä»¶ï¼ŒæŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªåä¸º <code>DatePickerView</code> çš„ç±»ä¸­ä¼šæ¯”æŠŠæ‰€æœ‰çš„äº‹æƒ…éƒ½åœ¨ view controller ä¸­åšå¥½å¥½å¾—å¤šã€‚å†ä¸€æ¬¡ï¼Œè¿™æ ·å¢åŠ äº†å¯å¤ç”¨æ€§å¹¶ä¿æŒäº†ç®€å•ã€‚</p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ä¸€äº›ç”¨æ¥åˆ›å»ºæ›´å°å·§çš„ view controllers çš„æŠ€æœ¯ã€‚æˆ‘ä»¬å¹¶ä¸æ˜¯æƒ³æŠŠè¿™äº›æŠ€æœ¯åº”ç”¨åˆ°æ¯ä¸€ä¸ªå¯èƒ½çš„è§’è½ï¼Œåªæ˜¯æˆ‘ä»¬æœ‰ä¸€ä¸ªç›®æ ‡ï¼š<strong>å†™å¯ç»´æŠ¤çš„ä»£ç ã€‚</strong>çŸ¥é“è¿™äº›æ¨¡å¼åï¼Œæˆ‘ä»¬å°±æ›´æœ‰å¯èƒ½æŠŠé‚£äº›ç¬¨é‡çš„ view controllers å˜å¾—æ›´æ•´æ´ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/07/MJExtensionâ€”â€”æ¨¡å‹è½¬æ¢æ¡†æ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/07/MJExtensionâ€”â€”æ¨¡å‹è½¬æ¢æ¡†æ¶/" class="post-title-link" itemprop="url">MJExtensionâ€”â€”æ¨¡å‹è½¬æ¢æ¡†æ¶</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-07 14:01:00" itemprop="dateCreated datePublished" datetime="2017-06-07T14:01:00+08:00">2017-06-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 01:33:09" itemprop="dateModified" datetime="2019-04-17T01:33:09+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-å¼€æºæ¡†æ¶/" itemprop="url" rel="index"><span itemprop="name">iOS å¼€æºæ¡†æ¶</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/07/MJExtensionâ€”â€”æ¨¡å‹è½¬æ¢æ¡†æ¶/" class="leancloud_visitors" data-flag-title="MJExtensionâ€”â€”æ¨¡å‹è½¬æ¢æ¡†æ¶">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>GitHubæºç :<a href="https://github.com/CoderMJLee/MJExtension" target="_blank" rel="noopener">MJExtension</a></li>
<li>star:6900+</li>
</ul>
<blockquote>
<pre><code>â­ï¸â­ï¸â­ï¸ 
</code></pre><p>ä»¥ä¸‹å†…å®¹æ¥æºäºå®˜æ–¹æºç ã€ README æ–‡æ¡£ã€æµ‹è¯• Demoæˆ–ä¸ªäººä½¿ç”¨æ€»ç»“ ï¼</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-add91c17711ff38a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Logo"></p>
<h1 id="MJExtension"><a href="#MJExtension" class="headerlink" title="MJExtension"></a>MJExtension</h1><ul>
<li>è½¬æ¢é€Ÿåº¦å¿«ã€ä½¿ç”¨ç®€å•æ–¹ä¾¿çš„å­—å…¸è½¬æ¨¡å‹æ¡†æ¶</li>
</ul>
<p>GitHubï¼š<a href="https://github.com/CoderMJLee" target="_blank" rel="noopener">CoderMJLee</a> ï½œ Blogï¼š<a href="http://www.cnblogs.com/mjios" target="_blank" rel="noopener">mjios(Chinese)</a> ï½œ PR is welcomeï¼Œor <a href="mailto:richermj123go@vip.qq.com" target="_blank" rel="noopener">feedback</a></p>
<h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><ul>
<li><a href="#Getting_Started">Getting Started ã€å¼€å§‹ä½¿ç”¨ã€‘</a><ul>
<li><a href="#Features">Features ã€èƒ½åšä»€ä¹ˆã€‘</a></li>
<li><a href="#Installation">Installation ã€å®‰è£…ã€‘</a></li>
</ul>
</li>
<li><a href="#Examples">Examples ã€ç¤ºä¾‹ã€‘</a><ul>
<li><a href="#JSON_Model">JSON -&gt; Model</a></li>
<li><a href="#JSONString_Model">JSONString -&gt; Model</a></li>
<li><a href="#Model_contains_model">Model contains model</a></li>
<li><a href="#Model_contains_model_array">Model contains model-array</a></li>
<li><a href="#Model_name_JSON_key_mapping">Model name - JSON key mapping</a></li>
<li><a href="#JSON_array_model_array">JSON array -&gt; model array</a></li>
<li><a href="#Model_JSON">Model -&gt; JSON</a></li>
<li><a href="#Model_array_JSON_array">Model array -&gt; JSON array</a></li>
<li><a href="#Core_Data">Core Data</a></li>
<li><a href="#Coding">Coding</a></li>
<li><a href="#Camel_underline">Camel -&gt; underline</a></li>
<li><a href="#NSString_NSDate">NSString -&gt; NSDate, nil -&gt; @â€â€</a></li>
<li><a href="#More_use_cases">More use cases</a></li>
</ul>
</li>
</ul>
<hr>
<h1 id="Getting-Startedã€å¼€å§‹ä½¿ç”¨ã€‘"><a href="#Getting-Startedã€å¼€å§‹ä½¿ç”¨ã€‘" class="headerlink" title="Getting Startedã€å¼€å§‹ä½¿ç”¨ã€‘"></a>Getting Startedã€å¼€å§‹ä½¿ç”¨ã€‘</h1><h2 id="Featuresã€èƒ½åšä»€ä¹ˆã€‘"><a href="#Featuresã€èƒ½åšä»€ä¹ˆã€‘" class="headerlink" title="Featuresã€èƒ½åšä»€ä¹ˆã€‘"></a>Featuresã€èƒ½åšä»€ä¹ˆã€‘</h2><ul>
<li>MJExtensionæ˜¯ä¸€å¥—å­—å…¸å’Œæ¨¡å‹ä¹‹é—´äº’ç›¸è½¬æ¢çš„è¶…è½»é‡çº§æ¡†æ¶</li>
</ul>
<ul>
<li><code>JSON</code> â†’ <code>Model</code>ã€<code>Core Data Model</code></li>
<li><code>JSONString</code> â†’ <code>Model</code>ã€<code>Core Data Model</code></li>
<li><code>Model</code>ã€<code>Core Data Model</code> â†’ <code>JSON</code></li>
<li><code>JSON Array</code> â†’ <code>Model Array</code>ã€<code>Core Data Model Array</code></li>
<li><code>JSONString</code> â†’ <code>Model Array</code>ã€<code>Core Data Model Array</code></li>
<li><code>Model Array</code>ã€<code>Core Data Model Array</code> â†’ <code>JSON Array</code></li>
<li>Coding all properties of model in one line code.<ul>
<li>åªéœ€è¦ä¸€è¡Œä»£ç ï¼Œå°±èƒ½å®ç°æ¨¡å‹çš„æ‰€æœ‰å±æ€§è¿›è¡ŒCodingï¼ˆå½’æ¡£å’Œè§£æ¡£ï¼‰</li>
</ul>
</li>
</ul>
<h2 id="Installationã€å®‰è£…ã€‘"><a href="#Installationã€å®‰è£…ã€‘" class="headerlink" title="Installationã€å®‰è£…ã€‘"></a>Installationã€å®‰è£…ã€‘</h2><h3 id="From-CocoaPodsã€ä½¿ç”¨CocoaPodsã€‘"><a href="#From-CocoaPodsã€ä½¿ç”¨CocoaPodsã€‘" class="headerlink" title="From CocoaPodsã€ä½¿ç”¨CocoaPodsã€‘"></a>From CocoaPodsã€ä½¿ç”¨CocoaPodsã€‘</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'MJExtension'</span></span><br></pre></td></tr></table></figure>
<h3 id="Manuallyã€æ‰‹åŠ¨å¯¼å…¥ã€‘"><a href="#Manuallyã€æ‰‹åŠ¨å¯¼å…¥ã€‘" class="headerlink" title="Manuallyã€æ‰‹åŠ¨å¯¼å…¥ã€‘"></a>Manuallyã€æ‰‹åŠ¨å¯¼å…¥ã€‘</h3><ul>
<li>Drag all source files under floder <code>MJExtension</code> to your project.ã€å°†<code>MJExtension</code>æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æºä»£ç æ‹½å…¥é¡¹ç›®ä¸­ã€‘</li>
<li>Import the main header fileï¼š<code>#import &quot;MJExtension.h&quot;</code>ã€å¯¼å…¥ä¸»å¤´æ–‡ä»¶ï¼š<code>#import &quot;MJExtension.h&quot;</code>ã€‘</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MJExtension.h</span><br><span class="line">MJConst.h               MJConst.m</span><br><span class="line">MJFoundation.h          MJFoundation.m</span><br><span class="line">MJProperty.h            MJProperty.m</span><br><span class="line">MJType.h                MJType.m</span><br><span class="line"><span class="built_in">NSObject</span>+MJCoding.h     <span class="built_in">NSObject</span>+MJCoding.m</span><br><span class="line"><span class="built_in">NSObject</span>+MJProperty.h   <span class="built_in">NSObject</span>+MJProperty.m</span><br><span class="line"><span class="built_in">NSObject</span>+MJKeyValue.h   <span class="built_in">NSObject</span>+MJKeyValue.m</span><br></pre></td></tr></table></figure>
<h1 id="Examplesã€ç¤ºä¾‹ã€‘"><a href="#Examplesã€ç¤ºä¾‹ã€‘" class="headerlink" title="Examplesã€ç¤ºä¾‹ã€‘"></a>Examplesã€ç¤ºä¾‹ã€‘</h1><h3 id="The-most-simple-JSON-â†’-Modelã€æœ€ç®€å•çš„å­—å…¸è½¬æ¨¡å‹ã€‘"><a href="#The-most-simple-JSON-â†’-Modelã€æœ€ç®€å•çš„å­—å…¸è½¬æ¨¡å‹ã€‘" class="headerlink" title="The most simple JSON â†’ Modelã€æœ€ç®€å•çš„å­—å…¸è½¬æ¨¡å‹ã€‘"></a>The most simple JSON â†’ Modelã€æœ€ç®€å•çš„å­—å…¸è½¬æ¨¡å‹ã€‘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">typedef enum &#123;</span><br><span class="line">    SexMale,</span><br><span class="line">    SexFemale</span><br><span class="line">&#125; Sex;</span><br><span class="line"></span><br><span class="line">@interface User : NSObject</span><br><span class="line">@property (copy, nonatomic) NSString *name;</span><br><span class="line">@property (copy, nonatomic) NSString *icon;</span><br><span class="line">@property (assign, nonatomic) unsigned int age;</span><br><span class="line">@property (copy, nonatomic) NSString *height;</span><br><span class="line">@property (strong, nonatomic) NSNumber *money;</span><br><span class="line">@property (assign, nonatomic) Sex sex;</span><br><span class="line">@property (assign, nonatomic, getter=isGay) BOOL gay;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">/***********************************************/</span><br><span class="line"></span><br><span class="line">NSDictionary *dict = @&#123;</span><br><span class="line">    @&quot;name&quot; : @&quot;Jack&quot;,</span><br><span class="line">    @&quot;icon&quot; : @&quot;lufy.png&quot;,</span><br><span class="line">    @&quot;age&quot; : @20,</span><br><span class="line">    @&quot;height&quot; : @&quot;1.55&quot;,</span><br><span class="line">    @&quot;money&quot; : @100.9,</span><br><span class="line">    @&quot;sex&quot; : @(SexFemale),</span><br><span class="line">    @&quot;gay&quot; : @&quot;true&quot;</span><br><span class="line">//   @&quot;gay&quot; : @&quot;1&quot;</span><br><span class="line">//   @&quot;gay&quot; : @&quot;NO&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// â‡ï¸ JSON â†’ Model</span><br><span class="line">User *user = [User mj_objectWithKeyValues:dict];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;name=%@, icon=%@, age=%zd, height=%@, money=%@, sex=%d, gay=%d&quot;, user.name, user.icon, user.age, user.height, user.money, user.sex, user.gay);</span><br><span class="line">// name=Jack, icon=lufy.png, age=20, height=1.550000, money=100.9, sex=1</span><br></pre></td></tr></table></figure>
<h3 id="JSONString-â†’-Modelã€JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹ã€‘"><a href="#JSONString-â†’-Modelã€JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹ã€‘" class="headerlink" title="JSONString â†’ Modelã€JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹ã€‘"></a>JSONString â†’ Modelã€JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.Define a JSONString</span></span><br><span class="line"><span class="built_in">NSString</span> *jsonString = <span class="string">@"&#123;\"name\":\"Jack\", \"icon\":\"lufy.png\", \"age\":20&#125;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.JSONString â†’ Model</span></span><br><span class="line">User *user = [User mj_objectWithKeyValues:jsonString];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.Print user's properties</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"name=%@, icon=%@, age=%d"</span>, user.name, user.icon, user.age);</span><br><span class="line"><span class="comment">// name=Jack, icon=lufy.png, age=20</span></span><br></pre></td></tr></table></figure>
<h3 id="Model-contains-modelã€æ¨¡å‹ä¸­åµŒå¥—æ¨¡å‹ã€‘"><a href="#Model-contains-modelã€æ¨¡å‹ä¸­åµŒå¥—æ¨¡å‹ã€‘" class="headerlink" title="Model contains modelã€æ¨¡å‹ä¸­åµŒå¥—æ¨¡å‹ã€‘"></a>Model contains modelã€æ¨¡å‹ä¸­åµŒå¥—æ¨¡å‹ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Status</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *text;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) User *user;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) Status *retweetedStatus;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;</span><br><span class="line">    <span class="string">@"text"</span> : <span class="string">@"Agree!Nice weather!"</span>,</span><br><span class="line">    <span class="string">@"user"</span> : @&#123;</span><br><span class="line">        <span class="string">@"name"</span> : <span class="string">@"Jack"</span>,</span><br><span class="line">        <span class="string">@"icon"</span> : <span class="string">@"lufy.png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">@"retweetedStatus"</span> : @&#123;</span><br><span class="line">        <span class="string">@"text"</span> : <span class="string">@"Nice weather!"</span>,</span><br><span class="line">        <span class="string">@"user"</span> : @&#123;</span><br><span class="line">            <span class="string">@"name"</span> : <span class="string">@"Rose"</span>,</span><br><span class="line">            <span class="string">@"icon"</span> : <span class="string">@"nami.png"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON â†’ Status</span></span><br><span class="line">Status *status = [Status mj_objectWithKeyValues:dict];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *text = status.text;</span><br><span class="line"><span class="built_in">NSString</span> *name = status.user.name;</span><br><span class="line"><span class="built_in">NSString</span> *icon = status.user.icon;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"text=%@, name=%@, icon=%@"</span>, text, name, icon);</span><br><span class="line"><span class="comment">// text=Agree!Nice weather!, name=Jack, icon=lufy.png</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *text2 = status.retweetedStatus.text;</span><br><span class="line"><span class="built_in">NSString</span> *name2 = status.retweetedStatus.user.name;</span><br><span class="line"><span class="built_in">NSString</span> *icon2 = status.retweetedStatus.user.icon;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"text2=%@, name2=%@, icon2=%@"</span>, text2, name2, icon2);</span><br><span class="line"><span class="comment">// text2=Nice weather!, name2=Rose, icon2=nami.png</span></span><br></pre></td></tr></table></figure>
<h3 id="Model-contains-model-arrayã€æ¨¡å‹ä¸­æœ‰ä¸ªæ•°ç»„å±æ€§ï¼Œæ•°ç»„é‡Œé¢åˆè¦è£…ç€å…¶ä»–æ¨¡å‹ã€‘"><a href="#Model-contains-model-arrayã€æ¨¡å‹ä¸­æœ‰ä¸ªæ•°ç»„å±æ€§ï¼Œæ•°ç»„é‡Œé¢åˆè¦è£…ç€å…¶ä»–æ¨¡å‹ã€‘" class="headerlink" title="Model contains model-arrayã€æ¨¡å‹ä¸­æœ‰ä¸ªæ•°ç»„å±æ€§ï¼Œæ•°ç»„é‡Œé¢åˆè¦è£…ç€å…¶ä»–æ¨¡å‹ã€‘"></a>Model contains model-arrayã€æ¨¡å‹ä¸­æœ‰ä¸ªæ•°ç»„å±æ€§ï¼Œæ•°ç»„é‡Œé¢åˆè¦è£…ç€å…¶ä»–æ¨¡å‹ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Ad</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *image;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *url;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">StatusResult</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="comment">/** Contatins status model */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *statuses;</span><br><span class="line"><span class="comment">/** Contatins ad model */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSArray</span> *ads;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSNumber</span> *totalNumber;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸ Tell MJExtension what type model will be contained in statuses and ads.</span></span><br><span class="line">[StatusResult mj_setupObjectClassInArray:^<span class="built_in">NSDictionary</span> *&#123;</span><br><span class="line">    <span class="keyword">return</span> @&#123;</span><br><span class="line">               <span class="string">@"statuses"</span> : <span class="string">@"Status"</span>,</span><br><span class="line">               <span class="comment">// @"statuses" : [Status class],</span></span><br><span class="line">               <span class="string">@"ads"</span> : <span class="string">@"Ad"</span></span><br><span class="line">               <span class="comment">// @"ads" : [Ad class]</span></span><br><span class="line">           &#125;;</span><br><span class="line">&#125;];</span><br><span class="line"><span class="comment">// Equals: StatusResult.m implements +mj_objectClassInArray method.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;</span><br><span class="line">    <span class="string">@"statuses"</span> : @[</span><br><span class="line">                      @&#123;</span><br><span class="line">                          <span class="string">@"text"</span> : <span class="string">@"Nice weather!"</span>,</span><br><span class="line">                          <span class="string">@"user"</span> : @&#123;</span><br><span class="line">                              <span class="string">@"name"</span> : <span class="string">@"Rose"</span>,</span><br><span class="line">                              <span class="string">@"icon"</span> : <span class="string">@"nami.png"</span></span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;,</span><br><span class="line">                      @&#123;</span><br><span class="line">                          <span class="string">@"text"</span> : <span class="string">@"Go camping tomorrow!"</span>,</span><br><span class="line">                          <span class="string">@"user"</span> : @&#123;</span><br><span class="line">                              <span class="string">@"name"</span> : <span class="string">@"Jack"</span>,</span><br><span class="line">                              <span class="string">@"icon"</span> : <span class="string">@"lufy.png"</span></span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;</span><br><span class="line">                  ],</span><br><span class="line">    <span class="string">@"ads"</span> : @[</span><br><span class="line">                 @&#123;</span><br><span class="line">                     <span class="string">@"image"</span> : <span class="string">@"ad01.png"</span>,</span><br><span class="line">                     <span class="string">@"url"</span> : <span class="string">@"http://www.ad01.com"</span></span><br><span class="line">                 &#125;,</span><br><span class="line">                 @&#123;</span><br><span class="line">                     <span class="string">@"image"</span> : <span class="string">@"ad02.png"</span>,</span><br><span class="line">                     <span class="string">@"url"</span> : <span class="string">@"http://www.ad02.com"</span></span><br><span class="line">                 &#125;</span><br><span class="line">             ],</span><br><span class="line">    <span class="string">@"totalNumber"</span> : <span class="string">@"2014"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸ JSON â†’ StatusResult</span></span><br><span class="line">StatusResult *result = [StatusResult mj_objectWithKeyValues:dict];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"totalNumber=%@"</span>, result.totalNumber);</span><br><span class="line"><span class="comment">// totalNumber=2014</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Printing</span></span><br><span class="line"><span class="keyword">for</span> (Status *status <span class="keyword">in</span> result.statuses) &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *text = status.text;</span><br><span class="line">    <span class="built_in">NSString</span> *name = status.user.name;</span><br><span class="line">    <span class="built_in">NSString</span> *icon = status.user.icon;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"text=%@, name=%@, icon=%@"</span>, text, name, icon);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// text=Nice weather!, name=Rose, icon=nami.png</span></span><br><span class="line"><span class="comment">// text=Go camping tomorrow!, name=Jack, icon=lufy.png</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Printing</span></span><br><span class="line"><span class="keyword">for</span> (Ad *ad <span class="keyword">in</span> result.ads) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"image=%@, url=%@"</span>, ad.image, ad.url);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// image=ad01.png, url=http://www.ad01.com</span></span><br><span class="line"><span class="comment">// image=ad02.png, url=http://www.ad02.com</span></span><br></pre></td></tr></table></figure>
<h3 id="Model-name-JSON-key-mappingã€æ¨¡å‹ä¸­çš„å±æ€§åå’Œå­—å…¸ä¸­çš„keyä¸ç›¸åŒ-æˆ–è€…éœ€è¦å¤šçº§æ˜ å°„-ã€‘"><a href="#Model-name-JSON-key-mappingã€æ¨¡å‹ä¸­çš„å±æ€§åå’Œå­—å…¸ä¸­çš„keyä¸ç›¸åŒ-æˆ–è€…éœ€è¦å¤šçº§æ˜ å°„-ã€‘" class="headerlink" title="Model name - JSON key mappingã€æ¨¡å‹ä¸­çš„å±æ€§åå’Œå­—å…¸ä¸­çš„keyä¸ç›¸åŒ(æˆ–è€…éœ€è¦å¤šçº§æ˜ å°„)ã€‘"></a>Model name - JSON key mappingã€æ¨¡å‹ä¸­çš„å±æ€§åå’Œå­—å…¸ä¸­çš„keyä¸ç›¸åŒ(æˆ–è€…éœ€è¦å¤šçº§æ˜ å°„)ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Bag</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>, <span class="keyword">nonatomic</span>) <span class="keyword">double</span> price;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Student</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *ID;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *desc;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *nowName;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *oldName;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *nameChangedTime;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) Bag *bag;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸ How to map</span></span><br><span class="line">[Student mj_setupReplacedKeyFromPropertyName:^<span class="built_in">NSDictionary</span> *&#123;</span><br><span class="line">    <span class="keyword">return</span> @&#123;</span><br><span class="line">               <span class="string">@"ID"</span> : <span class="string">@"id"</span>,</span><br><span class="line">               <span class="string">@"desc"</span> : <span class="string">@"desciption"</span>,</span><br><span class="line">               <span class="string">@"oldName"</span> : <span class="string">@"name.oldName"</span>,</span><br><span class="line">               <span class="string">@"nowName"</span> : <span class="string">@"name.newName"</span>,</span><br><span class="line">               <span class="string">@"nameChangedTime"</span> : <span class="string">@"name.info[1].nameChangedTime"</span>,</span><br><span class="line">               <span class="string">@"bag"</span> : <span class="string">@"other.bag"</span></span><br><span class="line">           &#125;;</span><br><span class="line">&#125;];</span><br><span class="line"><span class="comment">// Equals: Student.m implements +mj_replacedKeyFromPropertyName method.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;</span><br><span class="line">    <span class="string">@"id"</span> : <span class="string">@"20"</span>,</span><br><span class="line">    <span class="string">@"desciption"</span> : <span class="string">@"kids"</span>,</span><br><span class="line">    <span class="string">@"name"</span> : @&#123;</span><br><span class="line">        <span class="string">@"newName"</span> : <span class="string">@"lufy"</span>,</span><br><span class="line">        <span class="string">@"oldName"</span> : <span class="string">@"kitty"</span>,</span><br><span class="line">        <span class="string">@"info"</span> : @[</span><br><span class="line">        		 <span class="string">@"test-data"</span>,</span><br><span class="line">        		 @&#123;</span><br><span class="line">            	             <span class="string">@"nameChangedTime"</span> : <span class="string">@"2013-08"</span></span><br><span class="line">                         &#125;</span><br><span class="line">                  ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">@"other"</span> : @&#123;</span><br><span class="line">        <span class="string">@"bag"</span> : @&#123;</span><br><span class="line">            <span class="string">@"name"</span> : <span class="string">@"a red bag"</span>,</span><br><span class="line">            <span class="string">@"price"</span> : @<span class="number">100.7</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸ JSON â†’ Student</span></span><br><span class="line">Student *stu = [Student mj_objectWithKeyValues:dict];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Printing</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"ID=%@, desc=%@, oldName=%@, nowName=%@, nameChangedTime=%@"</span>,</span><br><span class="line">      stu.ID, stu.desc, stu.oldName, stu.nowName, stu.nameChangedTime);</span><br><span class="line"><span class="comment">// ID=20, desc=kids, oldName=kitty, nowName=lufy, nameChangedTime=2013-08</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"bagName=%@, bagPrice=%f"</span>, stu.bag.name, stu.bag.price);</span><br><span class="line"><span class="comment">// bagName=a red bag, bagPrice=100.700000</span></span><br></pre></td></tr></table></figure>
<h3 id="JSON-array-â†’-model-arrayã€å°†ä¸€ä¸ªå­—å…¸æ•°ç»„è½¬æˆæ¨¡å‹æ•°ç»„ã€‘"><a href="#JSON-array-â†’-model-arrayã€å°†ä¸€ä¸ªå­—å…¸æ•°ç»„è½¬æˆæ¨¡å‹æ•°ç»„ã€‘" class="headerlink" title="JSON array â†’ model arrayã€å°†ä¸€ä¸ªå­—å…¸æ•°ç»„è½¬æˆæ¨¡å‹æ•°ç»„ã€‘"></a>JSON array â†’ model arrayã€å°†ä¸€ä¸ªå­—å…¸æ•°ç»„è½¬æˆæ¨¡å‹æ•°ç»„ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *dictArray = @[</span><br><span class="line">                         @&#123;</span><br><span class="line">                             <span class="string">@"name"</span> : <span class="string">@"Jack"</span>,</span><br><span class="line">                             <span class="string">@"icon"</span> : <span class="string">@"lufy.png"</span></span><br><span class="line">                         &#125;,</span><br><span class="line">                         @&#123;</span><br><span class="line">                             <span class="string">@"name"</span> : <span class="string">@"Rose"</span>,</span><br><span class="line">                             <span class="string">@"icon"</span> : <span class="string">@"nami.png"</span></span><br><span class="line">                         &#125;</span><br><span class="line">                     ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸â‡ï¸ JSON array â†’ User array</span></span><br><span class="line"><span class="built_in">NSArray</span> *userArray = [User mj_objectArrayWithKeyValuesArray:dictArray];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Printing</span></span><br><span class="line"><span class="keyword">for</span> (User *user <span class="keyword">in</span> userArray) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"name=%@, icon=%@"</span>, user.name, user.icon);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// name=Jack, icon=lufy.png</span></span><br><span class="line"><span class="comment">// name=Rose, icon=nami.png</span></span><br></pre></td></tr></table></figure>
<h3 id="Model-â†’-JSONã€å°†ä¸€ä¸ªæ¨¡å‹è½¬æˆå­—å…¸ã€‘"><a href="#Model-â†’-JSONã€å°†ä¸€ä¸ªæ¨¡å‹è½¬æˆå­—å…¸ã€‘" class="headerlink" title="Model â†’ JSONã€å°†ä¸€ä¸ªæ¨¡å‹è½¬æˆå­—å…¸ã€‘"></a>Model â†’ JSONã€å°†ä¸€ä¸ªæ¨¡å‹è½¬æˆå­—å…¸ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// New model</span></span><br><span class="line">User *user = [[User alloc] init];</span><br><span class="line">user.name = <span class="string">@"Jack"</span>;</span><br><span class="line">user.icon = <span class="string">@"lufy.png"</span>;</span><br><span class="line"></span><br><span class="line">Status *status = [[Status alloc] init];</span><br><span class="line">status.user = user;</span><br><span class="line">status.text = <span class="string">@"Nice mood!"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸ Status â†’ JSON</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *statusDict = status.mj_keyValues;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, statusDict);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> &#123;</span></span><br><span class="line"><span class="comment"> text = "Nice mood!";</span></span><br><span class="line"><span class="comment"> user =     &#123;</span></span><br><span class="line"><span class="comment"> icon = "lufy.png";</span></span><br><span class="line"><span class="comment"> name = Jack;</span></span><br><span class="line"><span class="comment"> &#125;;</span></span><br><span class="line"><span class="comment"> &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// More complex situation</span></span><br><span class="line">Student *stu = [[Student alloc] init];</span><br><span class="line">stu.ID = <span class="string">@"123"</span>;</span><br><span class="line">stu.oldName = <span class="string">@"rose"</span>;</span><br><span class="line">stu.nowName = <span class="string">@"jack"</span>;</span><br><span class="line">stu.desc = <span class="string">@"handsome"</span>;</span><br><span class="line">stu.nameChangedTime = <span class="string">@"2018-09-08"</span>;</span><br><span class="line"></span><br><span class="line">Bag *bag = [[Bag alloc] init];</span><br><span class="line">bag.name = <span class="string">@"a red bag"</span>;</span><br><span class="line">bag.price = <span class="number">205</span>;</span><br><span class="line">stu.bag = bag;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSDictionary</span> *stuDict = stu.mj_keyValues;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, stuDict);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    ID = 123;</span></span><br><span class="line"><span class="comment">    bag =     &#123;</span></span><br><span class="line"><span class="comment">        name = "\U5c0f\U4e66\U5305";</span></span><br><span class="line"><span class="comment">        price = 205;</span></span><br><span class="line"><span class="comment">    &#125;;</span></span><br><span class="line"><span class="comment">    desc = handsome;</span></span><br><span class="line"><span class="comment">    nameChangedTime = "2018-09-08";</span></span><br><span class="line"><span class="comment">    nowName = jack;</span></span><br><span class="line"><span class="comment">    oldName = rose;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h3 id="Model-array-â†’-JSON-arrayã€å°†ä¸€ä¸ªæ¨¡å‹æ•°ç»„è½¬æˆå­—å…¸æ•°ç»„ã€‘"><a href="#Model-array-â†’-JSON-arrayã€å°†ä¸€ä¸ªæ¨¡å‹æ•°ç»„è½¬æˆå­—å…¸æ•°ç»„ã€‘" class="headerlink" title="Model array â†’ JSON arrayã€å°†ä¸€ä¸ªæ¨¡å‹æ•°ç»„è½¬æˆå­—å…¸æ•°ç»„ã€‘"></a>Model array â†’ JSON arrayã€å°†ä¸€ä¸ªæ¨¡å‹æ•°ç»„è½¬æˆå­—å…¸æ•°ç»„ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// New model array</span></span><br><span class="line">User *user1 = [[User alloc] init];</span><br><span class="line">user1.name = <span class="string">@"Jack"</span>;</span><br><span class="line">user1.icon = <span class="string">@"lufy.png"</span>;</span><br><span class="line"></span><br><span class="line">User *user2 = [[User alloc] init];</span><br><span class="line">user2.name = <span class="string">@"Rose"</span>;</span><br><span class="line">user2.icon = <span class="string">@"nami.png"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span> *userArray = @[user1, user2];</span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸ Model array â†’ JSON array</span></span><br><span class="line"><span class="built_in">NSArray</span> *dictArray = [User mj_keyValuesArrayWithObjectArray:userArray];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, dictArray);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> (</span></span><br><span class="line"><span class="comment"> &#123;</span></span><br><span class="line"><span class="comment"> icon = "lufy.png";</span></span><br><span class="line"><span class="comment"> name = Jack;</span></span><br><span class="line"><span class="comment"> &#125;,</span></span><br><span class="line"><span class="comment"> &#123;</span></span><br><span class="line"><span class="comment"> icon = "nami.png";</span></span><br><span class="line"><span class="comment"> name = Rose;</span></span><br><span class="line"><span class="comment"> &#125;</span></span><br><span class="line"><span class="comment"> )</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h3 id="Core-Data"><a href="#Core-Data" class="headerlink" title="Core Data"></a>Core Data</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;</span><br><span class="line">                         <span class="string">@"name"</span> : <span class="string">@"Jack"</span>,</span><br><span class="line">                         <span class="string">@"icon"</span> : <span class="string">@"lufy.png"</span>,</span><br><span class="line">                         <span class="string">@"age"</span> : @<span class="number">20</span>,</span><br><span class="line">                         <span class="string">@"height"</span> : @<span class="number">1.55</span>,</span><br><span class="line">                         <span class="string">@"money"</span> : <span class="string">@"100.9"</span>,</span><br><span class="line">                         <span class="string">@"sex"</span> : @(SexFemale),</span><br><span class="line">                         <span class="string">@"gay"</span> : <span class="string">@"true"</span></span><br><span class="line">                     &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸ This demo just provide simple steps</span></span><br><span class="line"><span class="built_in">NSManagedObjectContext</span> *context = <span class="literal">nil</span>;</span><br><span class="line">User *user = [User mj_objectWithKeyValues:dict context:context];</span><br><span class="line"></span><br><span class="line">[context save:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<h3 id="Coding"><a href="#Coding" class="headerlink" title="Coding"></a>Coding</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MJExtension.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Bag</span></span></span><br><span class="line"><span class="comment">// NSCoding Implementation</span></span><br><span class="line">MJExtensionCodingImplementation</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// â‡ï¸ what properties not to be coded</span></span><br><span class="line">[Bag mj_setupIgnoredCodingPropertyNames:^<span class="built_in">NSArray</span> *&#123;</span><br><span class="line">    <span class="keyword">return</span> @[<span class="string">@"name"</span>];</span><br><span class="line">&#125;];</span><br><span class="line"><span class="comment">// Equals: Bag.m implements +mj_ignoredCodingPropertyNames method.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Create model</span></span><br><span class="line">Bag *bag = [[Bag alloc] init];</span><br><span class="line">bag.name = <span class="string">@"Red bag"</span>;</span><br><span class="line">bag.price = <span class="number">200.8</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *file = [<span class="built_in">NSHomeDirectory</span>() stringByAppendingPathComponent:<span class="string">@"Desktop/bag.data"</span>];</span><br><span class="line"><span class="comment">// Encoding</span></span><br><span class="line">[<span class="built_in">NSKeyedArchiver</span> archiveRootObject:bag toFile:file];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Decoding</span></span><br><span class="line">Bag *decodedBag = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithFile:file];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"name=%@, price=%f"</span>, decodedBag.name, decodedBag.price);</span><br><span class="line"><span class="comment">// name=(null), price=200.800000</span></span><br></pre></td></tr></table></figure>
<h3 id="Camel-â†’-underlineã€ç»Ÿä¸€è½¬æ¢å±æ€§åï¼ˆæ¯”å¦‚é©¼å³°è½¬ä¸‹åˆ’çº¿ï¼‰ã€‘"><a href="#Camel-â†’-underlineã€ç»Ÿä¸€è½¬æ¢å±æ€§åï¼ˆæ¯”å¦‚é©¼å³°è½¬ä¸‹åˆ’çº¿ï¼‰ã€‘" class="headerlink" title="Camel â†’ underlineã€ç»Ÿä¸€è½¬æ¢å±æ€§åï¼ˆæ¯”å¦‚é©¼å³°è½¬ä¸‹åˆ’çº¿ï¼‰ã€‘"></a>Camel â†’ underlineã€ç»Ÿä¸€è½¬æ¢å±æ€§åï¼ˆæ¯”å¦‚é©¼å³°è½¬ä¸‹åˆ’çº¿ï¼‰ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dog</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MJExtension.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Dog</span></span></span><br><span class="line">+ (<span class="built_in">NSString</span> *)mj_replacedKeyFromPropertyName121:(<span class="built_in">NSString</span> *)propertyName</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// nickName -&gt; nick_name</span></span><br><span class="line">    <span class="keyword">return</span> [propertyName mj_underlineFromCamel];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// NSDictionary</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;</span><br><span class="line">                       <span class="string">@"nick_name"</span> : <span class="string">@"æ—ºè´¢"</span>,</span><br><span class="line">                       <span class="string">@"sale_price"</span> : <span class="string">@"10.5"</span>,</span><br><span class="line">                       <span class="string">@"run_speed"</span> : <span class="string">@"100.9"</span></span><br><span class="line">                       &#125;;</span><br><span class="line"><span class="comment">// â‡ï¸ NSDictionary -&gt; Dog</span></span><br><span class="line">Dog *dog = [Dog mj_objectWithKeyValues:dict];</span><br><span class="line"></span><br><span class="line"><span class="comment">// printing</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"nickName=%@, scalePrice=%f runSpeed=%f"</span>, dog.nickName, dog.salePrice, dog.runSpeed);</span><br></pre></td></tr></table></figure>
<h3 id="NSString-â†’-NSDate-nil-â†’-â€â€ã€è¿‡æ»¤å­—å…¸çš„å€¼ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²æ—¥æœŸå¤„ç†ä¸ºNSDateã€å­—ç¬¦ä¸²nilå¤„ç†ä¸º-â€â€ï¼‰ã€‘"><a href="#NSString-â†’-NSDate-nil-â†’-â€â€ã€è¿‡æ»¤å­—å…¸çš„å€¼ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²æ—¥æœŸå¤„ç†ä¸ºNSDateã€å­—ç¬¦ä¸²nilå¤„ç†ä¸º-â€â€ï¼‰ã€‘" class="headerlink" title="NSString â†’ NSDate, nil â†’ @â€â€ã€è¿‡æ»¤å­—å…¸çš„å€¼ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²æ—¥æœŸå¤„ç†ä¸ºNSDateã€å­—ç¬¦ä¸²nilå¤„ç†ä¸º@â€â€ï¼‰ã€‘"></a>NSString â†’ NSDate, nil â†’ @â€â€ã€è¿‡æ»¤å­—å…¸çš„å€¼ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²æ—¥æœŸå¤„ç†ä¸ºNSDateã€å­—ç¬¦ä¸²nilå¤„ç†ä¸º@â€â€ï¼‰ã€‘</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Book</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MJExtension.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Book</span></span></span><br><span class="line">- (<span class="keyword">id</span>)mj_newValueFromOldValue:(<span class="keyword">id</span>)oldValue property:(MJProperty *)property</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([property.name isEqualToString:<span class="string">@"publisher"</span>]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (oldValue == <span class="literal">nil</span>) <span class="keyword">return</span> <span class="string">@""</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (property.type.typeClass == [<span class="built_in">NSDate</span> <span class="keyword">class</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSDateFormatter</span> *fmt = [[<span class="built_in">NSDateFormatter</span> alloc] init];</span><br><span class="line">        fmt.dateFormat = <span class="string">@"yyyy-MM-dd"</span>;</span><br><span class="line">        <span class="keyword">return</span> [fmt dateFromString:oldValue];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// NSDictionary</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;</span><br><span class="line">                       <span class="string">@"name"</span> : <span class="string">@"5åˆ†é’Ÿçªç ´iOSå¼€å‘"</span>,</span><br><span class="line">                       <span class="string">@"publishedTime"</span> : <span class="string">@"2011-09-10"</span></span><br><span class="line">                       &#125;;</span><br><span class="line"><span class="comment">// NSDictionary â†’ Book</span></span><br><span class="line">Book *book = [Book mj_objectWithKeyValues:dict];</span><br><span class="line"></span><br><span class="line"><span class="comment">// printing</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"name=%@, publisher=%@, publishedTime=%@"</span>, book.name, book.publisher, book.publishedTime);</span><br></pre></td></tr></table></figure>
<h3 id="More-use-casesã€æ›´å¤šç”¨æ³•ã€‘"><a href="#More-use-casesã€æ›´å¤šç”¨æ³•ã€‘" class="headerlink" title="More use casesã€æ›´å¤šç”¨æ³•ã€‘"></a>More use casesã€æ›´å¤šç”¨æ³•ã€‘</h3><ul>
<li>Please reference to <code>NSObject+MJKeyValue.h</code> and <code>NSObject+MJCoding.h</code></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/07/ã€ŠEffective Objective-C 2.0ã€‹1.ç†Ÿæ‚‰ Objectice-C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/07/ã€ŠEffective Objective-C 2.0ã€‹1.ç†Ÿæ‚‰ Objectice-C/" class="post-title-link" itemprop="url">ã€ŠEffective Objective-C 2.0ã€‹1.ç†Ÿæ‚‰ Objectice-C</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-07 12:03:00" itemprop="dateCreated datePublished" datetime="2017-06-07T12:03:00+08:00">2017-06-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 00:44:20" itemprop="dateModified" datetime="2019-04-18T00:44:20+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ã€ŠEffective-Objective-C-2-0ã€‹/" itemprop="url" rel="index"><span itemprop="name">ã€ŠEffective Objective-C 2.0ã€‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/07/ã€ŠEffective Objective-C 2.0ã€‹1.ç†Ÿæ‚‰ Objectice-C/" class="leancloud_visitors" data-flag-title="ã€ŠEffective Objective-C 2.0ã€‹1.ç†Ÿæ‚‰ Objectice-C">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <p><img src="http://upload-images.jianshu.io/upload_images/2648731-75376d7d3815cd54.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/06/07/ã€ŠEffective Objective-C 2.0ã€‹1.ç†Ÿæ‚‰ Objectice-C/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/06/05/ã€ŠEffective Objective-C 2.0ã€‹ç›®å½•/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/05/ã€ŠEffective Objective-C 2.0ã€‹ç›®å½•/" class="post-title-link" itemprop="url">ã€ŠEffective Objective-C 2.0ã€‹ç›®å½•</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-06-05 16:27:00" itemprop="dateCreated datePublished" datetime="2017-06-05T16:27:00+08:00">2017-06-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 00:42:52" itemprop="dateModified" datetime="2019-04-18T00:42:52+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ã€ŠEffective-Objective-C-2-0ã€‹/" itemprop="url" rel="index"><span itemprop="name">ã€ŠEffective Objective-C 2.0ã€‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/06/05/ã€ŠEffective Objective-C 2.0ã€‹ç›®å½•/" class="leancloud_visitors" data-flag-title="ã€ŠEffective Objective-C 2.0ã€‹ç›®å½•">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="ã€ŠEffective-Objective-C-2-0-ç¼–å†™é«˜è´¨é‡iOSä¸OS-Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•-ã€‹"><a href="#ã€ŠEffective-Objective-C-2-0-ç¼–å†™é«˜è´¨é‡iOSä¸OS-Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•-ã€‹" class="headerlink" title="ã€ŠEffective Objective-C 2.0  ç¼–å†™é«˜è´¨é‡iOSä¸OS Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³• ã€‹"></a>ã€ŠEffective Objective-C 2.0  ç¼–å†™é«˜è´¨é‡iOSä¸OS Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³• ã€‹</h2><p><a href="https://book.douban.com/subject/25829244/" target="_blank" rel="noopener">ğŸ”— ä¹¦æœ¬é“¾æ¥</a></p>
<h3 id="ä¸€ã€ç†Ÿæ‚‰-Objectice-C"><a href="#ä¸€ã€ç†Ÿæ‚‰-Objectice-C" class="headerlink" title="ä¸€ã€ç†Ÿæ‚‰ Objectice-C"></a><a href="https://www.jianshu.com/p/9429036dfaf7" target="_blank" rel="noopener">ä¸€ã€ç†Ÿæ‚‰ Objectice-C</a></h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-75376d7d3815cd54.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="äºŒã€å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ"><a href="#äºŒã€å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ" class="headerlink" title="äºŒã€å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ"></a><a href="https://www.jianshu.com/p/4b86fdd1b276" target="_blank" rel="noopener">äºŒã€å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ</a></h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-30062a72b4270bc7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="ä¸‰ã€æ¥å£ä¸-API-è®¾è®¡"><a href="#ä¸‰ã€æ¥å£ä¸-API-è®¾è®¡" class="headerlink" title="ä¸‰ã€æ¥å£ä¸ API è®¾è®¡"></a><a href="https://www.jianshu.com/p/8cac3aa0dd18" target="_blank" rel="noopener">ä¸‰ã€æ¥å£ä¸ API è®¾è®¡</a></h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-b51b9bc68621d04e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="å››ã€åè®®ä¸åˆ†ç±»"><a href="#å››ã€åè®®ä¸åˆ†ç±»" class="headerlink" title="å››ã€åè®®ä¸åˆ†ç±»"></a><a href="https://www.jianshu.com/p/45bcac5402ce" target="_blank" rel="noopener">å››ã€åè®®ä¸åˆ†ç±»</a></h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-6096cbfd905b1eb0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="äº”ã€å†…å­˜ç®¡ç†"><a href="#äº”ã€å†…å­˜ç®¡ç†" class="headerlink" title="äº”ã€å†…å­˜ç®¡ç†"></a><a href="https://www.jianshu.com/p/a393c63cf761" target="_blank" rel="noopener">äº”ã€å†…å­˜ç®¡ç†</a></h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-bc415805a22122ac.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="å…­ã€å—ä¸å¤§ä¸­æ¢æ´¾å‘"><a href="#å…­ã€å—ä¸å¤§ä¸­æ¢æ´¾å‘" class="headerlink" title="å…­ã€å—ä¸å¤§ä¸­æ¢æ´¾å‘"></a><a href="https://www.jianshu.com/p/67492063fd49" target="_blank" rel="noopener">å…­ã€å—ä¸å¤§ä¸­æ¢æ´¾å‘</a></h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-87bda0c1063653a9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="ä¸ƒã€ç³»ç»Ÿæ¡†æ¶"><a href="#ä¸ƒã€ç³»ç»Ÿæ¡†æ¶" class="headerlink" title="ä¸ƒã€ç³»ç»Ÿæ¡†æ¶"></a><a href="https://www.jianshu.com/p/e74f6c771205" target="_blank" rel="noopener">ä¸ƒã€ç³»ç»Ÿæ¡†æ¶</a></h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-7dcb0ad568b4fb8b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/18/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/20/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg" alt="ç‹¬æœ¨èˆŸçš„æœ¨">
            
              <p class="site-author-name" itemprop="name">ç‹¬æœ¨èˆŸçš„æœ¨</p>
              <div class="site-description motion-element" itemprop="description">æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">310</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">54</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ç‹¬æœ¨èˆŸçš„æœ¨</span>

  

  
</div>


  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/19/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz',
                'X-LC-Key': 'brOnU8mOQvSjpipJvdKUAIbU',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  


  <!-- red heart -->
  <script type="text/javascript" src="/js/src/love.js"></script>
  
</body>
</html>
