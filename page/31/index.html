<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="有时候阳光很好 有时候阳光很暗">
<meta name="keywords" content="独木舟的木">
<meta property="og:type" content="website">
<meta property="og:title" content="独木舟的木">
<meta property="og:url" content="https://andy0570.com/page/31/index.html">
<meta property="og:site_name" content="独木舟的木">
<meta property="og:description" content="有时候阳光很好 有时候阳光很暗">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="独木舟的木">
<meta name="twitter:description" content="有时候阳光很好 有时候阳光很暗">



  <link rel="alternate" href="/atom.xml" title="独木舟的木" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/31/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>独木舟的木</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">独木舟的木</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">39</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">314</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/23/iOS 编程：icon和启动图尺寸/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/23/iOS 编程：icon和启动图尺寸/" class="post-title-link" itemprop="url">iOS 编程：icon和启动图尺寸</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-23 14:33:00" itemprop="dateCreated datePublished" datetime="2016-08-23T14:33:00+08:00">2016-08-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-17 17:23:15" itemprop="dateModified" datetime="2019-04-17T17:23:15+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/23/iOS 编程：icon和启动图尺寸/" class="leancloud_visitors" data-flag-title="iOS 编程：icon和启动图尺寸">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>Retina显示屏拥有很高的分辨率——其中4英寸屏幕是640像素×1136像素，3.5英寸屏幕是640像素×960像素（之前的屏幕分辨率是320像素×480像素）。</p>
<p>对于矢量图像，不用做任何处理就能够在两种设备上有最好的显示效果。</p>
<p>如果应用是通过Core Graphics函数绘图的，那么画出的图像在不同的设备上会有不同的显示效果。Core Graphics以点为单位描述线、曲线和文字等。对于非Retina显示屏，一个点是一个像素。对于Retina显示屏，一个点是2像素×2像素。</p>
<p>开发者需要为高分辨率的图片文件加上后缀名@2×。</p>
<h4 id="加载画面尺寸"><a href="#加载画面尺寸" class="headerlink" title="加载画面尺寸"></a>加载画面尺寸</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-bf4d81ba91cc856e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="推荐阅读："><a href="#推荐阅读：" class="headerlink" title="推荐阅读："></a>推荐阅读：</h3><p><a href="http://www.cnblogs.com/shaoting/p/4941634.html" target="_blank" rel="noopener">iOS开发：icon和启动图尺寸</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/19/iOS 编程：用 Core Graphics 画各种图形/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/19/iOS 编程：用 Core Graphics 画各种图形/" class="post-title-link" itemprop="url">iOS 编程：用 Core Graphics 画各种图形</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-19 10:18:00" itemprop="dateCreated datePublished" datetime="2016-08-19T10:18:00+08:00">2016-08-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-17 17:24:35" itemprop="dateModified" datetime="2019-04-17T17:24:35+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/19/iOS 编程：用 Core Graphics 画各种图形/" class="leancloud_visitors" data-flag-title="iOS 编程：用 Core Graphics 画各种图形">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-3dcdf1527bdf692f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2016-08-25 下午5.06.58.png"> </p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>无论绘制JPEG、PDF还是视图的图层，都是由 <strong>Core Graphics</strong> 框架完成的。</li>
<li><strong>Core Graphics</strong> 中最重要的“对象”是图形上下文（graphics context）,图形上下文是 <strong>CGContextRef</strong> 的“对象”，负责存储绘画状态（例如画笔颜色和线条粗细）和绘制内容所处的内存空间。</li>
</ul>
<blockquote>
</blockquote>
<p>注：<br> 带有 <strong>Ref</strong> 后缀的类型是 <strong>Core Graphics</strong> 中用来模拟面向对象机制的C结构。<br>带有 <strong>Ref</strong> 后缀类型的对象可能具有指向其他 <strong>Core Graphics</strong> “对象”的强引用指针，并成为这些“对象”的拥有者。但是ARC无法识别这类强引用和“对象”所有权，必须在使用完成之后手动释放。<br>规则是：如果使用名称中带有create 或者 copy 的函数创建了一个 <strong>Core Graphics</strong> “对象”，就必须调用对应的Release函数并传入该对象的指针。</p>
<h5 id="drawRect"><a href="#drawRect" class="headerlink" title="drawRect:"></a>drawRect:</h5><ul>
<li>视图的 <code>drawRect：</code>方法在执行之前，系统首先为视图的图层创建一个图形上下文，然后为绘画状态设置一些默认参数。</li>
<li><code>drawRect：</code>方法开始执行时，随着图形上下文不断执行绘画操作，图层上的内容也会随之改变。</li>
<li><code>drawRect：</code>方法执行完毕后，系统会将图层与其他图层一起组合完成完整的图像并显示在屏幕上。</li>
</ul>
<p>视图会根据 <code>drawRect：</code>方法将自己绘制到图层上，UIView 的子类可以覆盖 <code>drawRect：</code>方法，完成自定义的绘图任务。</p>
<hr>
<h2 id="画圆"><a href="#画圆" class="headerlink" title="画圆"></a>画圆</h2><p>使用 <strong>CGContext</strong></p>
<h3 id="边框圆"><a href="#边框圆" class="headerlink" title="边框圆"></a>边框圆</h3><pre><code>//一个不透明的Quartz 2D绘画环境，相当于一个画布
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextSetRGBStrokeColor(context, 1, 0, 0, 1);//画笔的颜色

CGContextSetLineWidth(context, 1.0);//线宽

CGContextAddArc(context,
                100, 20, 15, 0, M_PI * 2.0, 0);//添加圆

CGContextDrawPath(context, kCGPathStroke);//绘制路径
</code></pre><p>​    </p>
<h3 id="边框圆（方法与上类似，待修改完善）"><a href="#边框圆（方法与上类似，待修改完善）" class="headerlink" title="边框圆（方法与上类似，待修改完善）"></a>边框圆（方法与上类似，待修改完善）</h3><pre><code>CGContextSetRGBStrokeColor(context, 1, 0, 0, 1);

CGMutablePathRef path = CGPathCreateMutable();

//创建用于转移坐标的transform
CGAffineTransform trandform =CGAffineTransformMakeTranslation(80, 40);

CGPathAddArc(path, &amp;trandform, 80, 40, 25, 0, M_PI * 2.0, YES);

CGContextAddPath(context, path);

CGContextDrawPath(context, kCGPathStroke);

CGPathRelease(path);
</code></pre><h3 id="填充圆，无边框"><a href="#填充圆，无边框" class="headerlink" title="填充圆，无边框"></a>填充圆，无边框</h3><pre><code>CGContextAddArc(context, 150, 30, 30, 0, M_PI * 2.0, 0);//添加一个圆

CGContextDrawPath(context, kCGPathFill);//仅填充
</code></pre><h3 id="画边框圆，并填充圆"><a href="#画边框圆，并填充圆" class="headerlink" title="画边框圆，并填充圆"></a>画边框圆，并填充圆</h3><pre><code>UIColor *myColor = [UIColor colorWithRed:1 green:0 blue:0 alpha:1];

CGContextSetFillColorWithColor(context, myColor.CGColor);//填充颜色

CGContextSetLineWidth(context, 3.0);//线宽

CGContextAddArc(context, 250, 40, 40, 0, M_PI * 2.0, 0);//添加一个圆

CGContextDrawPath(context, kCGPathFillStroke);//绘制路径并填充
</code></pre><h3 id="使用-UIBezierPath（贝塞尔曲线）绘制圆形"><a href="#使用-UIBezierPath（贝塞尔曲线）绘制圆形" class="headerlink" title="使用 UIBezierPath（贝塞尔曲线）绘制圆形"></a>使用 UIBezierPath（贝塞尔曲线）绘制圆形</h3><ul>
<li><strong>UIBezierPath</strong> 和 <strong>UIColor</strong> 的所有绘图功能都可以通过直接调用 <strong>Core Graphics</strong> 函数完成。</li>
<li><strong>UIBezierPath</strong> 类，其实是将 <strong>Core Graphics</strong>代码封装在了一系列方法中，以便开发者调用，降低了绘图的难度。</li>
<li>但是有些功能只能使用 <strong>Core Graphics</strong> 完成，如：绘制渐变。</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置圆心    </span></span><br><span class="line"><span class="built_in">CGPoint</span> centre = <span class="built_in">CGPointMake</span>(<span class="number">50</span>, <span class="number">60</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 设置半径   </span></span><br><span class="line"><span class="keyword">float</span> radius = <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  UIBezierPath 用来绘制直线或曲线，从而组成各种形状   </span></span><br><span class="line"><span class="built_in">UIBezierPath</span> *bezierPath = [[<span class="built_in">UIBezierPath</span> alloc]init];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义路径：以中心点为圆心、radious的值为半径定义一个0到M_PI*2.0弧度的路径（整圆)</span></span><br><span class="line">[bezierPath addArcWithCenter:centre</span><br><span class="line">                          radius:radius</span><br><span class="line">                      startAngle:<span class="number">0.0</span></span><br><span class="line">                        endAngle:PI * <span class="number">2.0</span></span><br><span class="line">                       clockwise:<span class="literal">YES</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条宽度</span></span><br><span class="line">bezierPath.lineWidth = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条颜色</span></span><br><span class="line">[[<span class="built_in">UIColor</span> lightGrayColor] setStroke];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制路径</span></span><br><span class="line">[bezierPath stroke];</span><br></pre></td></tr></table></figure>
<h5 id="绘制同心圆"><a href="#绘制同心圆" class="headerlink" title="绘制同心圆"></a>绘制同心圆</h5><pre><code>//获取当前画板边界
CGRect bounds=self.bounds;

//根据bounds计算中心点
CGPoint center;
center.x = bounds.origin.x + bounds.size.width / 2.0;
center.y = bounds.origin.y + bounds.size.height / 2.0;

//使最外层圆形成为视图的外接圆
//使用视图的对角线作为最外层圆形的直径
float maxRadius = hypot(bounds.size.width, bounds.size.height)/ 2.0;

UIBezierPath *path = [[UIBezierPath alloc] init];

for (float currentRadius = maxRadius;
     currentRadius&gt;0;
     currentRadius -=20)
{
    //每次绘制新圆前，抬笔，重置起始点
    [path moveToPoint:CGPointMake(center.x +currentRadius, center.y)];

    [path addArcWithCenter:center
                    radius:currentRadius
                startAngle:0.0
                  endAngle:M_PI * 2.0
                 clockwise:YES];
}

//设置线条宽度为10点
path.lineWidth = 10;

//设置绘制颜色为浅灰色
[[UIColor lightGrayColor] setStroke];

//绘制路径
[path stroke];
</code></pre><hr>
<h3 id="画线及弧线"><a href="#画线及弧线" class="headerlink" title="画线及弧线"></a>画线及弧线</h3><h5 id="画线"><a href="#画线" class="headerlink" title="画线"></a>画线</h5><pre><code>CGPoint point[3];
point[0] = CGPointMake(100, 120);
point[1] = CGPointMake(130, 120);
point[2] = CGPointMake(120, 100);

//CGContextAddLines(&lt;#CGContextRef  _Nullable c#&gt;, &lt;#const CGPoint * _Nullable points#&gt;, &lt;#size_t count#&gt;)// （context画布，坐标数组，坐标数）
CGContextAddLines(context, point, 3);//添加线

CGContextDrawPath(context, kCGPathStroke);//根据坐标绘制路径
</code></pre><h5 id="画笑脸弧线"><a href="#画笑脸弧线" class="headerlink" title="画笑脸弧线"></a>画笑脸弧线</h5><pre><code>//左眼
CGContextSetRGBStrokeColor(context, 0, 0, 1, 1);//改变画笔颜色

CGContextMoveToPoint(context, 140, 120);//开始坐标p1

//CGContextAddArcToPoint(context, &lt;#CGFloat x1#&gt;, &lt;#CGFloat y1#&gt;, &lt;#CGFloat x2#&gt;, &lt;#CGFloat y2#&gt;, &lt;#CGFloat radius#&gt;)
//开始坐标p1与（x1,y1）相连,（x1,y1）与（x2,y2）相连
CGContextAddArcToPoint(context, 150, 110, 160, 120, 20);

CGContextStrokePath(context);

//右眼
CGContextMoveToPoint(context, 180, 120);
CGContextAddArcToPoint(context, 190, 110, 200, 120, 20);
CGContextStrokePath(context);

//嘴巴
CGContextMoveToPoint(context, 160, 150);
CGContextAddArcToPoint(context, 170, 160, 180, 150, 20);
CGContextStrokePath(context);
</code></pre><hr>
<h3 id="画矩形"><a href="#画矩形" class="headerlink" title="画矩形"></a>画矩形</h3><h5 id="画矩形框"><a href="#画矩形框" class="headerlink" title="画矩形框"></a>画矩形框</h5><pre><code>CGContextStrokeRect(context, CGRectMake(100, 200, 50, 20));
</code></pre><h5 id="画填充块"><a href="#画填充块" class="headerlink" title="画填充块"></a>画填充块</h5><pre><code>CGContextFillRect(context, CGRectMake(160, 200, 50, 20));
</code></pre><h5 id="画矩形，并填充颜色"><a href="#画矩形，并填充颜色" class="headerlink" title="画矩形，并填充颜色"></a>画矩形，并填充颜色</h5><pre><code>UIColor *myRectColor = [UIColor blueColor];
CGContextSetFillColorWithColor(context, myRectColor.CGColor);//填充颜色

UIColor *myRectFrameColor = [UIColor redColor];
CGContextSetStrokeColorWithColor(context, myRectFrameColor.CGColor);//线框颜色

CGContextAddRect(context, CGRectMake(100, 230, 100, 50));//画框
CGContextSetLineWidth(context, 2.0);//线宽
CGContextDrawPath(context, kCGPathFillStroke);//绘画路径
</code></pre><h5 id="画矩形，并填充渐变色"><a href="#画矩形，并填充渐变色" class="headerlink" title="画矩形，并填充渐变色"></a>画矩形，并填充渐变色</h5><pre><code>CGContextSaveGState(UIGraphicsGetCurrentContext());

//设置渐变
CGFloat locations [2] ={0.0,1.0};
CGFloat components[8] ={1.0,0.0,0.0,1.0,    //起始颜色为红色
    0.0,1.0,0.0,1.0};   //终止颜色为黄色

//色彩范围容器
CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();

//渐变属性：颜色空间、颜色、位置、有效数量
//CGGradientCreateWithColorComponents:创建包含渐变的CGGradientRef对象
CGGradientRef gradient = CGGradientCreateWithColorComponents(colorspace, components, locations, 2);

//画矩形
CGContextMoveToPoint(context, 250, 230);
CGContextAddLineToPoint(context, 350, 230);
CGContextAddLineToPoint(context, 350, 280);
CGContextAddLineToPoint(context, 250, 280);
CGContextClip(context);//裁剪路径

//控制渐变的方向和形状
CGPoint startPoint = CGPointMake(250,230);
CGPoint endPoint = CGPointMake(350,280);

//绘制线性渐变
CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, kCGGradientDrawsAfterEndLocation);

CGGradientRelease(gradient);
CGColorSpaceRelease(colorspace);

//恢复Graphical Context图形上下文
CGContextRestoreGState(UIGraphicsGetCurrentContext());
</code></pre><hr>
<h3 id="画扇形和椭圆"><a href="#画扇形和椭圆" class="headerlink" title="画扇形和椭圆"></a>画扇形和椭圆</h3><h5 id="画扇形就是画圆，只不过设置角度的大小，形成一个扇形"><a href="#画扇形就是画圆，只不过设置角度的大小，形成一个扇形" class="headerlink" title="画扇形就是画圆，只不过设置角度的大小，形成一个扇形"></a>画扇形就是画圆，只不过设置角度的大小，形成一个扇形</h5><pre><code>UIColor *color1 = [UIColor colorWithRed:227 green:237 blue:205 alpha:1];
CGContextSetFillColorWithColor(context, color1.CGColor);//填充颜色

//以10为半径围绕圆形画指定角度的扇形
CGContextMoveToPoint(context, 40, 380);
CGContextAddArc(context, 40, 380, 40, -60 * M_PI /180, - 120 * M_PI /180, 1);
CGContextClosePath(context);//路径结束标志

CGContextDrawPath(context, kCGPathFillStroke);//绘制路径
</code></pre><hr>
<h5 id="画椭圆"><a href="#画椭圆" class="headerlink" title="画椭圆"></a>画椭圆</h5><pre><code>CGContextAddEllipseInRect(context, CGRectMake(100, 340, 40, 20));

CGContextDrawPath(context, kCGPathFillStroke);
</code></pre><hr>
<h3 id="画三角形"><a href="#画三角形" class="headerlink" title="画三角形"></a>画三角形</h3><pre><code>//只要三个点就行，跟画一条线方式一样，把三点连起来
CGPoint triangle[3];//坐标数组
triangle[0] = CGPointMake(60, 430);
triangle[1] = CGPointMake(20, 470);
triangle[2] = CGPointMake(80, 480);

CGContextAddLines(context, triangle, 3);//添加线
CGContextClosePath(context);//封闭路径

UIColor *fillcolor = [UIColor brownColor];
CGContextSetFillColorWithColor(context, fillcolor.CGColor);//填充色

CGContextDrawPath(context, kCGPathFillStroke);//根据坐标绘制路径并填充
</code></pre><h3 id="绘制三角形"><a href="#绘制三角形" class="headerlink" title="绘制三角形"></a>绘制三角形</h3><pre><code>//获得当前画板
CGContextRef context = UIGraphicsGetCurrentContext();

CGRect bounds = self.bounds;

//标记
CGContextBeginPath(context);

//设置起点
CGContextMoveToPoint(context,bounds.size.width / 2.0,bounds.size.height /2.0+70);
CGContextAddLineToPoint(context, bounds.size.width / 2.0 - 60, bounds.size.height / 2.0 +120);
CGContextAddLineToPoint(context, bounds.size.width / 2.0 + 60, bounds.size.height / 2.0 +120);
//路径结束标志
CGContextClosePath(context);

//设置边框颜色
[[UIColor grayColor] setStroke];
//绘制路径
CGContextDrawPath(context, kCGPathStroke);
</code></pre><hr>
<h3 id="画圆角矩形"><a href="#画圆角矩形" class="headerlink" title="画圆角矩形"></a>画圆角矩形</h3><pre><code>float fw = 160;
float fh = 500;

CGContextMoveToPoint(context, fw+20, fh);//开始坐标，右边开始

//圆弧与(x1,y1)(x2,y2)的直线相切
//CGContextAddArcToPoint(&lt;#CGContextRef  _Nullable c#&gt;, 
                                &lt;#CGFloat x1#&gt;, 
                                &lt;#CGFloat y1#&gt;, 
                                &lt;#CGFloat x2#&gt;, 
                                &lt;#CGFloat y2#&gt;, 
                                &lt;#CGFloat radius#&gt;); 

CGContextAddArcToPoint(context, fw, fh, fw, fh+20, 10);//左上角角度
CGContextAddArcToPoint(context, fw, 600, fw+20, 600, 10);//左下角角度
CGContextAddArcToPoint(context, 280, 600, 280, 580, 10);//右下角
CGContextAddArcToPoint(context,280, fh, 260, fh, 10);//右上角
CGContextClosePath(context);//封闭路径
CGContextDrawPath(context, kCGPathStroke);//根据坐标绘制路径
</code></pre><hr>
<h3 id="画贝塞尔曲线"><a href="#画贝塞尔曲线" class="headerlink" title="画贝塞尔曲线"></a>画贝塞尔曲线</h3><h5 id="二次曲线"><a href="#二次曲线" class="headerlink" title="二次曲线"></a>二次曲线</h5><pre><code>CGContextMoveToPoint(context, 90, 630);//设置path的起点

//设置贝塞尔曲线的控制点坐标(cpx,cpy)和终点坐标(x,y)
//CGContextAddQuadCurveToPoint(&lt;#CGContextRef  _Nullable c#&gt;, &lt;#CGFloat cpx#&gt;, &lt;#CGFloat cpy#&gt;, &lt;#CGFloat x#&gt;, &lt;#CGFloat y#&gt;);
CGContextAddQuadCurveToPoint(context, 90, 720, 150, 630);

CGContextStrokePath(context);
</code></pre><h5 id="三次曲线函数"><a href="#三次曲线函数" class="headerlink" title="三次曲线函数"></a>三次曲线函数</h5><pre><code>CGContextMoveToPoint(context, 180, 630);//设置path起点

//CGContextAddCurveToPoint(&lt;#CGContextRef  _Nullable c#&gt;, &lt;#CGFloat cp1x#&gt;, &lt;#CGFloat cp1y#&gt;, &lt;#CGFloat cp2x#&gt;, &lt;#CGFloat cp2y#&gt;, &lt;#CGFloat x#&gt;, &lt;#CGFloat y#&gt;)
CGContextAddCurveToPoint(context, 225, 570, 225, 690, 270, 630);
CGContextStrokePath(context);
</code></pre><hr>
<h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><pre><code>UIImage *myImage =[UIImage imageNamed:@&quot;monk.jpg&quot;];
[myImage drawInRect:CGRectMake(80, 680, 80, 56)];

//保持图片大小在point点开始画图
[myImage drawAtPoint:CGPointMake(0, 0)];

//使图片上下颠倒
CGContextDrawImage(context, CGRectMake(200, 680, 80, 56), myImage.CGImage);

//平铺图    
CGContextDrawTiledImage(context, CGRectMake(&lt;#CGFloat x#&gt;, &lt;#CGFloat y#&gt;, &lt;#CGFloat width#&gt;, &lt;#CGFloat height#&gt;), &lt;#CGImageRef  _Nullable image#&gt;);
</code></pre><hr>
<h3 id="为图片添加阴影"><a href="#为图片添加阴影" class="headerlink" title="为图片添加阴影"></a>为图片添加阴影</h3><ul>
<li>绘制阴影之前，需要将阴影效果添加到一个图形上下文中，之后在该图形上下文中绘制的所有不透明图片都会带有阴影效果。</li>
<li>复写父类 <strong>UIView</strong> 的 <code>drawRect:</code> 方法，绘制自定义图形：</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 保存绘图状态</span></span><br><span class="line"><span class="built_in">CGContextSaveGState</span>(<span class="built_in">UIGraphicsGetCurrentContext</span>());</span><br><span class="line">   </span><br><span class="line"><span class="comment">// 添加阴影：设置阴影偏移量、模糊指数</span></span><br><span class="line"><span class="built_in">CGContextSetShadow</span>(<span class="built_in">UIGraphicsGetCurrentContext</span>(), <span class="built_in">CGSizeMake</span>(<span class="number">4</span>, <span class="number">7</span>), <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建UIImage对象</span></span><br><span class="line"><span class="built_in">UIImage</span> *logoImage2 = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"logo.png"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将图像绘制到视图</span></span><br><span class="line"><span class="built_in">CGRect</span> logoBounds = <span class="built_in">CGRectMake</span>(bounds.size.width/<span class="number">2.0</span><span class="number">-100</span>, bounds.size.height/<span class="number">2.0</span><span class="number">-140</span>, <span class="number">200</span>, <span class="number">280</span>);</span><br><span class="line">[logoImage2 drawInRect:logoBounds];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 恢复绘图状态</span></span><br><span class="line"><span class="built_in">CGContextRestoreGState</span>(<span class="built_in">UIGraphicsGetCurrentContext</span>());</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//设置渐变</span></span><br><span class="line">   <span class="built_in">CGContextSaveGState</span>(<span class="built_in">UIGraphicsGetCurrentContext</span>());</span><br><span class="line">   </span><br><span class="line">   <span class="built_in">CGFloat</span> locations [<span class="number">2</span>] =&#123;<span class="number">0.0</span>,<span class="number">1.0</span>&#125;;</span><br><span class="line">   <span class="built_in">CGFloat</span> components[<span class="number">8</span>] =&#123;<span class="number">1.0</span>,<span class="number">0.5</span>,<span class="number">0.0</span>,<span class="number">1.0</span>,    <span class="comment">//起始颜色为红色</span></span><br><span class="line">       <span class="number">0.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>&#125;;   <span class="comment">//终止颜色为黄色</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">//色彩范围容器</span></span><br><span class="line">   <span class="built_in">CGColorSpaceRef</span> colorspace = <span class="built_in">CGColorSpaceCreateDeviceRGB</span>();</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//渐变属性：颜色空间、颜色、位置、有效数量</span></span><br><span class="line">   <span class="comment">//CGGradientCreateWithColorComponents:创建包含渐变的CGGradientRef对象</span></span><br><span class="line">   <span class="built_in">CGGradientRef</span> gradient = <span class="built_in">CGGradientCreateWithColorComponents</span>(colorspace, components, locations, <span class="number">2</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="built_in">CGPoint</span> startPoint = <span class="built_in">CGPointMake</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">   <span class="built_in">CGPoint</span> endPoint = <span class="built_in">CGPointMake</span>(bounds.size.width,bounds.size.height);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//绘制线性渐变</span></span><br><span class="line">   <span class="built_in">CGContextDrawLinearGradient</span>(<span class="built_in">UIGraphicsGetCurrentContext</span>(), gradient, startPoint, endPoint, <span class="number">0</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="built_in">CGGradientRelease</span>(gradient);</span><br><span class="line">   <span class="built_in">CGColorSpaceRelease</span>(colorspace);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//恢复Graphical Context图形上下文</span></span><br><span class="line">   <span class="built_in">CGContextRestoreGState</span>(<span class="built_in">UIGraphicsGetCurrentContext</span>());</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置表头视图背景渐变</span></span><br><span class="line">- (<span class="keyword">void</span>)setTableHeaderViewBackgroundGradient &#123;</span><br><span class="line">    <span class="comment">// 创建 CAGradientLayer 对象</span></span><br><span class="line">    <span class="built_in">CAGradientLayer</span> *gradient = [<span class="built_in">CAGradientLayer</span> layer];</span><br><span class="line">    <span class="comment">// 设置 CAGradientLayer 对象的 frame</span></span><br><span class="line">    gradient.frame = <span class="keyword">self</span>.tableHeaderView.frame;</span><br><span class="line">    <span class="comment">// 创建渐变色数组，需要转换为 CGColor 颜色</span></span><br><span class="line">    gradient.colors = @[ (<span class="keyword">id</span>)[<span class="built_in">UIColor</span> colorWithRed:<span class="number">62</span> /<span class="number">255.0</span>f</span><br><span class="line">                                             green:<span class="number">145</span>/<span class="number">255.0</span>f</span><br><span class="line">                                              blue:<span class="number">255</span>/<span class="number">255.0</span>f</span><br><span class="line">                                             alpha:<span class="number">1.0</span>].CGColor,</span><br><span class="line">                         (<span class="keyword">id</span>)[<span class="built_in">UIColor</span> colorWithRed:<span class="number">73</span> /<span class="number">255.0</span></span><br><span class="line">                                             green:<span class="number">196</span>/<span class="number">255.0</span></span><br><span class="line">                                              blue:<span class="number">255</span>/<span class="number">255.0</span></span><br><span class="line">                                             alpha:<span class="number">1</span>].CGColor];</span><br><span class="line">    <span class="comment">// 设置三种颜色变化点，取值范围 0.0~1.0</span></span><br><span class="line">    gradient.locations = @[@(<span class="number">0.1</span>f),@(<span class="number">1.0</span>f)];</span><br><span class="line">    <span class="comment">// 设置渐变颜色方向</span></span><br><span class="line">    gradient.startPoint = <span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    gradient.endPoint = <span class="built_in">CGPointMake</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 添加渐变到 UIView 上</span></span><br><span class="line">    [<span class="keyword">self</span>.tableHeaderView.layer insertSublayer:gradient atIndex:<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="在-UIView-子类对象上画一条线"><a href="#在-UIView-子类对象上画一条线" class="headerlink" title="在 UIView 子类对象上画一条线"></a>在 UIView 子类对象上画一条线</h3><p>覆盖子类 <code>drawRect:</code>方法：<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在用户名和密码之间添加线</span></span><br><span class="line">- (<span class="keyword">void</span>)drawRect:(<span class="built_in">CGRect</span>)rect &#123;</span><br><span class="line">    <span class="comment">// 获得当前画板</span></span><br><span class="line">    <span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();</span><br><span class="line">    <span class="comment">// 设置线宽</span></span><br><span class="line">    <span class="built_in">CGContextSetLineWidth</span>(context, <span class="number">0.2</span>);</span><br><span class="line">    <span class="comment">// 标记</span></span><br><span class="line">    <span class="built_in">CGContextBeginPath</span>(context);</span><br><span class="line">    <span class="comment">// 路径起点</span></span><br><span class="line">    <span class="built_in">CGContextMoveToPoint</span>(context, <span class="number">10</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="comment">// 路径终点</span></span><br><span class="line">    <span class="built_in">CGContextAddLineToPoint</span>(context, <span class="keyword">self</span>.frame.size.width - <span class="number">10</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="comment">// 路径结束标志</span></span><br><span class="line">    <span class="built_in">CGContextClosePath</span>(context);</span><br><span class="line">    <span class="comment">// 设置画线颜色</span></span><br><span class="line">    [[<span class="built_in">UIColor</span> grayColor] setStroke];</span><br><span class="line">    <span class="comment">// 绘制路径</span></span><br><span class="line">    <span class="built_in">CGContextStrokePath</span>(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="CAShapeLayer"><a href="#CAShapeLayer" class="headerlink" title="CAShapeLayer"></a>CAShapeLayer</h3><blockquote>
<p>摘自：<a href="http://bihongbo.com/2016/01/03/memoryGhostdrawRect/" target="_blank" rel="noopener">内存恶鬼drawRect</a> </p>
</blockquote>
<p><strong>CAShapeLayer</strong> 是一个通过<strong>矢量图形</strong>而不是 <code>bitmap</code> 来绘制的图层子类。用 <code>CGPath</code> 来定义想要绘制的图形，<strong>CAShapeLayer</strong> 会自动渲染。它可以完美替代我们的直接使用 <strong>Core Graphics</strong> 绘制 <code>layer</code>，对比之下使用<strong>CAShapeLayer</strong> 有以下优点：</p>
<ul>
<li>渲染快速。<strong>CAShapeLayer</strong> 使用了硬件加速，绘制同一图形会比用 Core Graphics 快很多。</li>
<li>高效使用内存。一个 <strong>CAShapeLayer</strong> 不需要像普通 CALayer 一样创建一个寄宿图形，所以无论有多大，都不会占用太多的内存。</li>
<li>不会被图层边界剪裁掉。</li>
<li>不会出现像素化。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CAShapeLayer *brownRectLayer = [CAShapeLayer layer];</span><br><span class="line">brownRectLayer.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);</span><br><span class="line">UIBezierPath *path = [UIBezierPath bezierPathWithRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];</span><br><span class="line">brownRectLayer.path = path.CGPath;</span><br><span class="line">brownRectLayer.fillColor = [UIColor brownColor].CGColor;</span><br><span class="line">[self.view.layer addSublayer:brownRectLayer];</span><br><span class="line"></span><br><span class="line">CAShapeLayer *whiteRectLayer = [CAShapeLayer layer];</span><br><span class="line">whiteRectLayer.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);</span><br><span class="line">UIBezierPath *path1 = [UIBezierPath bezierPathWithRect:CGRectMake(self.view.frame.size.width / 2 - 25, self.view.frame.size.height / 2 - 25, 50, 50)];</span><br><span class="line">whiteRectLayer.path = path1.CGPath;</span><br><span class="line">whiteRectLayer.fillColor = [UIColor whiteColor].CGColor;</span><br><span class="line">[self.view.layer addSublayer:whiteRectLayer];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-8c1cf2356ae2e4e0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://blog.csdn.net/rhljiayou/article/details/9919713" target="_blank" rel="noopener">IOS用CGContextRef画各种图形</a></li>
<li><a href="http://www.jianshu.com/p/8c2bda98ad6e" target="_blank" rel="noopener">Core Graphics-绘图使用介绍</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/18/iOS 编程：UILabel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/18/iOS 编程：UILabel/" class="post-title-link" itemprop="url">iOS 编程：UILabel</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-18 17:59:00" itemprop="dateCreated datePublished" datetime="2016-08-18T17:59:00+08:00">2016-08-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:30:07" itemprop="dateModified" datetime="2019-04-18T00:30:07+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/18/iOS 编程：UILabel/" class="leancloud_visitors" data-flag-title="iOS 编程：UILabel">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p><strong>UILabel</strong> 显示一行或多行只读文本的视图，通常与其他控件一起使用以描述其预期目的。</p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><h3 id="Core-attributes-核心属性"><a href="#Core-attributes-核心属性" class="headerlink" title="Core attributes 核心属性"></a>Core attributes 核心属性</h3><p>Text（ <code>text</code>、<code>attributedText</code> ）、<code>textColor</code>、<code>font</code>、<code>textAligment</code>、Lines（ <code>numberOfLines</code> ）、Behavior（  <code>enabled</code>、<code>highlighted</code> ）。</p>
<ul>
<li><p><code>font</code> ：默认字体为：system font 17 plain</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 通常的几种设置方法</span><br><span class="line">label.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label.font = [UIFont boldSystemFontOfSize:20];</span><br><span class="line">label.font = [UIFont italicSystemFontOfSize:20];</span><br><span class="line">label.font = [UIFont fontWithName:@&quot;Arial&quot; size:20]; // PS：字体名可以打开「字体册」应用查找</span><br><span class="line">label.font = [UIFont systemFontOfSize:20 weight:UIFontWeightUltraLight];</span><br></pre></td></tr></table></figure>
<p>系统字体参考：<a href="https://blog.csdn.net/u013943420/article/details/82776026" target="_blank" rel="noopener">iOS 查看系统所有字体 (带效果图)</a></p>
<p>以下为字体大小为20 号时的显示情况：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-3f8468cceb702616.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
</ul>
<ul>
<li><p><code>textAligment</code> ：文本对齐方式，默认设置为 <code>NSTextAlignmentNatural</code>，实际测试默认为左对齐，即<code>NSTextAlignmentLeft</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    /* Values for NSTextAlignment */</span><br><span class="line">    typedef NS_ENUM(NSInteger, NSTextAlignment) &#123;</span><br><span class="line">        NSTextAlignmentLeft      = 0,    // 左对齐</span><br><span class="line">#if TARGET_OS_iPhone</span><br><span class="line">        NSTextAlignmentCenter    = 1,    // 居中</span><br><span class="line">        NSTextAlignmentRight     = 2,    // 右对齐</span><br><span class="line">#else /* !TARGET_OS_iPhone */</span><br><span class="line">        NSTextAlignmentRight     = 1,    // 右对齐</span><br><span class="line">        NSTextAlignmentCenter    = 2,    // 居中</span><br><span class="line">#endif</span><br><span class="line">        NSTextAlignmentJustified = 3,    // Fully-justified. The last line in a paragraph is natural-aligned.</span><br><span class="line">        NSTextAlignmentNatural   = 4,    // Indicates the default alignment for script</span><br><span class="line">    &#125; NS_ENUM_AVAILABLE_IOS(6_0);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><code>numberOfLines</code>：默认为1行。如果设置为 0，则代表不限制行数。</p>
</li>
<li><p><code>enabled</code> ：此属性仅确定标签的绘制方式。 禁用时文字有些暗淡，表示它处于非活动状态。 此属性默认设置为YES。</p>
<p> 如图所示：上方为 <code>enabled = NO</code>,下方为  <code>enabled = YES</code>。</p>
<p> <img src="http://upload-images.jianshu.io/upload_images/2648731-591635bd3ba14397.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
</ul>
<ul>
<li><p><code>highlighted</code>: 高亮属性，该属性用于当 UILabel 作为其他控件的子视图时，作为按下状态时的属性。</p>
<blockquote>
<p>the ‘highlight’ property is used by subclasses for such things as pressed states. it’s useful to make it part of the base class as a user property.</p>
</blockquote>
</li>
<li><p><code>userInteractionEnabled</code>: 是否能与用户交互？</p>
</li>
</ul>
<h3 id="Spacing-attributes-间距属性"><a href="#Spacing-attributes-间距属性" class="headerlink" title="Spacing attributes 间距属性"></a>Spacing attributes 间距属性</h3><p>Baseline ( <code>baselineAdjustment</code> )、LineBreaks （ <code>lineBreakMode</code>）、Autoshrink （ <code>minimumScaleFactor</code>、<code>allowsDefaultTighteningForTruncation</code> ）</p>
<ul>
<li><p><code>baselineAdjustment</code>  ：文本基线对齐方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 控制文本的基线位置，只有文本的行数为1时有效</span><br><span class="line">// adjustsFontSizeToFitWidth = YES 并且文本需要缩小时才会起作用。</span><br><span class="line">typedef NS_ENUM(NSInteger, UIBaselineAdjustment) &#123;</span><br><span class="line">    UIBaselineAdjustmentAlignBaselines = 0, // default. used when shrinking text to position based on the original baseline     </span><br><span class="line">    UIBaselineAdjustmentAlignCenters,       // 文本中线与label中线对齐</span><br><span class="line">    UIBaselineAdjustmentNone,               // 文本最低端与label中线对齐</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>​      从左至右分别为：0、1、2 三种情况：</p>
<p>​      <img src="http://upload-images.jianshu.io/upload_images/2648731-8080621c80879a87.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ul>
<li><p><code>lineBreakMode</code>：超出 label 边界的文字截取方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, NSLineBreakMode) &#123;</span><br><span class="line">    NSLineBreakByWordWrapping = 0,  // 默认，以单词为边界 &quot;my word&quot;</span><br><span class="line">    NSLineBreakByCharWrapping,		// 以字符为边界 &quot;my wor&quot;</span><br><span class="line">    NSLineBreakByClipping,		    // 到边界为止，碰到边界就剪辑</span><br><span class="line">    NSLineBreakByTruncatingHead,	// 省略开头: &quot;...wxyz&quot;</span><br><span class="line">    NSLineBreakByTruncatingTail,	// 省略结尾: &quot;abcd...&quot;</span><br><span class="line">    NSLineBreakByTruncatingMiddle	// 省略中间:  &quot;ab...yz&quot;,多行时作用于最后一行</span><br><span class="line">&#125; NS_ENUM_AVAILABLE(10_0, 6_0);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Advanced-appearance-attributes-高级外观属性"><a href="#Advanced-appearance-attributes-高级外观属性" class="headerlink" title="Advanced appearance attributes 高级外观属性"></a>Advanced appearance attributes 高级外观属性</h3><p><code>highlightedTextColor</code>、<code>shadowColor</code>、<code>shadowOffset</code></p>
<h2 id="使用-UILabel"><a href="#使用-UILabel" class="headerlink" title="使用 UILabel"></a>使用 UILabel</h2><h3 id="通常的使用方式"><a href="#通常的使用方式" class="headerlink" title="通常的使用方式"></a>通常的使用方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 创建 UILabel 对象</span><br><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line">label.frame = CGRectMake(15, 100, 125, 24);</span><br><span class="line">label.tag = 5;</span><br><span class="line">label.text = @&quot;Hello World！&quot;;</span><br><span class="line">label.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label.textColor = [UIColor blueColor];</span><br><span class="line">label.backgroundColor = [UIColor lightGrayColor];</span><br><span class="line">label.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line">label.numberOfLines = 0;</span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-417f7e1b641cd040.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="设置自动缩小文本字体以适应-label-宽度"><a href="#设置自动缩小文本字体以适应-label-宽度" class="headerlink" title="设置自动缩小文本字体以适应 label 宽度"></a>设置自动缩小文本字体以适应 label 宽度</h3><ul>
<li><code>adjustsFontSizeToFitWidth</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(15, 150, 80, 35)];</span><br><span class="line">label2.text = @&quot;Hello World！&quot;;</span><br><span class="line">label2.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label2.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label2.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line"></span><br><span class="line">// 当 Label 的宽度小于完整字符串宽度时，缩小文本字体以适应宽度</span><br><span class="line">label2.adjustsFontSizeToFitWidth = YES;</span><br><span class="line"></span><br><span class="line">// 当 adjustsFontSizeToFitWidth = YES 时，如果文本 font 要缩小时,</span><br><span class="line">// 可以设置 baselineAdjustment来控制文本的基线位置，只有文本行数为1时有效。</span><br><span class="line">label2.baselineAdjustment = UIBaselineAdjustmentAlignCenters;</span><br><span class="line">label2.numberOfLines = 1; // 默认为1，可以省略</span><br><span class="line"></span><br><span class="line">// 字体最小比例因子</span><br><span class="line">// 当文本字体缩小时，缩放比例 &gt;= minimumScaleFactor</span><br><span class="line">label2.minimumScaleFactor = 0.5;</span><br><span class="line"></span><br><span class="line">[self.view addSubview:label2];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-21fbbd3f02cd87bd.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="如何根据字符串长度设置-label-的frame-？"><a href="#如何根据字符串长度设置-label-的frame-？" class="headerlink" title="如何根据字符串长度设置 label 的frame ？"></a>如何根据字符串长度设置 label 的<code>frame</code> ？</h3><p>根据字符串长度计算出 <code>CGSize</code>，然后赋值给 label 的<code>frame</code>：</p>
<p>计算字符串长度有2个可用的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (CGSize)sizeWithAttributes:(nullable NSDictionary&lt;NSString *, id&gt; *)attrs NS_AVAILABLE(10_0, 7_0);</span><br><span class="line"></span><br><span class="line">- (CGRect)boundingRectWithSize:(CGSize)size options:(NSStringDrawingOptions)options attributes:(nullable NSDictionary&lt;NSString *, id&gt; *)attributes context:(nullable NSStringDrawingContext *)context NS_AVAILABLE(10_11, 7_0);</span><br></pre></td></tr></table></figure>
<h4 id="方法一示例代码："><a href="#方法一示例代码：" class="headerlink" title="方法一示例代码："></a>方法一示例代码：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 需要显示的字符串</span><br><span class="line">NSString *string = @&quot;Hello World！&quot;;</span><br><span class="line">// 字符串在  UILabel 上显示时所使用的字体</span><br><span class="line">UIFont *font = [UIFont systemFontOfSize:20];</span><br><span class="line">// 计算20号字体下，该字符串的宽度和高度</span><br><span class="line">CGSize stringSize = [string sizeWithAttributes:@&#123;NSFontAttributeName:font&#125;];</span><br><span class="line">NSLog(@&quot;(%f,%f)&quot;,stringSize.width,stringSize.height); // (123.651484,23.867188)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>⚠️ </p>
<p>需要注意的是，该方法返回的 <code>CGSize</code> 是行数为1的情况下，计算出来的 Size。当它超过屏幕的宽度（<code>[UIScreen mainScreen].bounds.size.width</code>）时，还会存在文本显示不完全的问题。</p>
<p>因此，该方法仅适用于短文本，还有一种情况是做跑马灯效果时会用到这种方法。</p>
</blockquote>
<h4 id="方法二示例代码1："><a href="#方法二示例代码1：" class="headerlink" title="方法二示例代码1："></a>方法二示例代码1：</h4><p>相对于上者，此方法需要传入一个 <code>CGSize</code> 参数来限制最大宽高尺寸，可以处理多行文本情况。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)resizeUILabelWidth:(UILabel *)label &#123;</span><br><span class="line">    label.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line"></span><br><span class="line">    CGRect <span class="built_in">rect</span> = label.frame;</span><br><span class="line">    NSString *<span class="built_in">str</span> = label.<span class="built_in">text</span>;</span><br><span class="line">    UIFont *font = label.font;</span><br><span class="line">    CGSize <span class="built_in">size</span> = CGSizeMake(<span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">width</span>, <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">height</span>);</span><br><span class="line">    NSDictionary *attributes = @&#123;NSFontAttributeName:font&#125;;</span><br><span class="line">    <span class="comment">// 计算大小</span></span><br><span class="line">    CGRect labelSize = [<span class="built_in">str</span> boundingRectWithSize:<span class="built_in">size</span></span><br><span class="line">                                         options:NSStringDrawingUsesLineFragmentOrigin</span><br><span class="line">                                      attributes:attributes</span><br><span class="line">                                         context:nil];</span><br><span class="line">    <span class="comment">// 调整frame</span></span><br><span class="line">    <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">width</span> = labelSize.<span class="built_in">size</span>.<span class="built_in">width</span>;</span><br><span class="line">    <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">height</span> = labelSize.<span class="built_in">size</span>.<span class="built_in">height</span>;</span><br><span class="line">    label.frame = <span class="built_in">rect</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="方法二示例代码2："><a href="#方法二示例代码2：" class="headerlink" title="方法二示例代码2："></a>方法二示例代码2：</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">CGSize</span>)sizeForFont:(<span class="built_in">UIFont</span> *)font size:(<span class="built_in">CGSize</span>)size mode:(<span class="built_in">NSLineBreakMode</span>)lineBreakMode &#123;</span><br><span class="line">    <span class="built_in">CGSize</span> result;</span><br><span class="line">    <span class="keyword">if</span> (!font) font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">12</span>];</span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> respondsToSelector:<span class="keyword">@selector</span>(boundingRectWithSize:options:attributes:context:)]) &#123;</span><br><span class="line">        <span class="built_in">NSMutableDictionary</span> *attr = [<span class="built_in">NSMutableDictionary</span> new];</span><br><span class="line">        attr[<span class="built_in">NSFontAttributeName</span>] = font;</span><br><span class="line">        <span class="keyword">if</span> (lineBreakMode != <span class="built_in">NSLineBreakByWordWrapping</span>) &#123;</span><br><span class="line">            <span class="built_in">NSMutableParagraphStyle</span> *paragraphStyle = [<span class="built_in">NSMutableParagraphStyle</span> new];</span><br><span class="line">            paragraphStyle.lineBreakMode = lineBreakMode;</span><br><span class="line">            attr[<span class="built_in">NSParagraphStyleAttributeName</span>] = paragraphStyle;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">CGRect</span> rect = [<span class="keyword">self</span> boundingRectWithSize:size</span><br><span class="line">                                         options:<span class="built_in">NSStringDrawingUsesLineFragmentOrigin</span> | <span class="built_in">NSStringDrawingUsesFontLeading</span></span><br><span class="line">                                      attributes:attr context:<span class="literal">nil</span>];</span><br><span class="line">        result = rect.size;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="meta">#pragma clang diagnostic push</span></span><br><span class="line"><span class="meta">#pragma clang diagnostic ignored <span class="meta-string">"-Wdeprecated-declarations"</span></span></span><br><span class="line">        result = [<span class="keyword">self</span> sizeWithFont:font constrainedToSize:size lineBreakMode:lineBreakMode];</span><br><span class="line"><span class="meta">#pragma clang diagnostic pop</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上述方法摘自 <a href="https://github.com/ibireme/YYKit" target="_blank" rel="noopener">YYKit</a> :NSString+YYAdd<br>该类中有三个计算字符串大小的方法：</p>
<ul>
<li>-(CGSize)sizeForFont:(UIFont *)font size:(CGSize)size mode:(NSLineBreakMode)lineBreakMode;</li>
<li>-(CGFloat)widthForFont:(UIFont *)font;</li>
<li>-(CGFloat)heightForFont:(UIFont *)font width:(CGFloat)width;</li>
</ul>
</blockquote>
<h3 id="根据文本内容调整UILabel对象的大小"><a href="#根据文本内容调整UILabel对象的大小" class="headerlink" title="根据文本内容调整UILabel对象的大小"></a>根据文本内容调整UILabel对象的大小</h3><p><strong>UIView</strong> 中的两个方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (CGSize)sizeThatFits:(CGSize)size;     </span><br><span class="line">// return &apos;best&apos; size to fit given size. does not actually resize view. Default is return existing view size</span><br><span class="line">// 返回“最佳”大小以适应给定的大小,默认返回已经存在的视图 size</span><br><span class="line"></span><br><span class="line">- (void)sizeToFit;                       </span><br><span class="line">// calls sizeThatFits: with current view bounds and changes bounds size.</span><br><span class="line">// 调用这个方法会改变当前 view 的 bounds.size</span><br></pre></td></tr></table></figure>
<h4 id="sizeToFit-代码示例一："><a href="#sizeToFit-代码示例一：" class="headerlink" title="sizeToFit 代码示例一："></a><code>sizeToFit</code> 代码示例一：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 代码示例三：label 大小自适应文本</span><br><span class="line">UILabel *label3 = [[UILabel alloc] init];</span><br><span class="line">label3.frame = CGRectMake(15, 150, 125, 24);</span><br><span class="line">label3.text = @&quot;Hello iOS! Hello World！&quot;;</span><br><span class="line">label3.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label3.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label3.textColor = [UIColor blueColor];</span><br><span class="line">label3.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">label3.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line"></span><br><span class="line">// 设置 sizeToFit</span><br><span class="line">[label3 sizeToFit];</span><br><span class="line">label3.numberOfLines = 0;</span><br><span class="line">[self.view addSubview:label3];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-25f1387c1b76ed74.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="sizeToFit-代码示例二："><a href="#sizeToFit-代码示例二：" class="headerlink" title="sizeToFit 代码示例二："></a><code>sizeToFit</code> 代码示例二：</h4><p>当文本非常长的情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UILabel *label3 = [[UILabel alloc] init];</span><br><span class="line">label3.frame = CGRectMake(15, 150, 125, 24);</span><br><span class="line">label3.text = @&quot;透过覆盖着我的夜幕  黑暗层层无底 感谢万能的上苍 赐给我不可征服的灵魂 就算被地狱牢牢抓住 我不会畏縮 也不会哭叫 任凭命运百般作弄 我头破血流但不低头 在这充满愤怒和眼泪的土地之上 恐怖阴影阴森的逼近 不过,即使岁月不停恐吓 亦将发现我毫不畏惧 无论大门何等狭窄 无论承受多么深重的责罚 我是我命运的主宰 我是我灵魂的统帅&quot;;</span><br><span class="line">label3.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label3.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label3.textColor = [UIColor blueColor];</span><br><span class="line">label3.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">label3.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line"></span><br><span class="line">[label3 sizeToFit];</span><br><span class="line">label3.numberOfLines = 0;</span><br><span class="line">[self.view addSubview:label3];</span><br></pre></td></tr></table></figure>
<p>测试发现，当文本太长显示不完全时，<code>sizeToFit</code> 并不会自动换行。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-fbfd4769dcada102.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id><a href="#" class="headerlink" title=" "></a> </h3><h4 id="sizeThatFits-代码示例一："><a href="#sizeThatFits-代码示例一：" class="headerlink" title="sizeThatFits: 代码示例一："></a><code>sizeThatFits:</code> 代码示例一：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">UILabel *label3 = [[UILabel alloc] init];</span><br><span class="line">label3.frame = CGRectMake(15, 150, 125, 24);</span><br><span class="line">label3.text = @&quot;透过覆盖着我的夜幕  黑暗层层无底 感谢万能的上苍 赐给我不可征服的灵魂 就算被地狱牢牢抓住 我不会畏縮 也不会哭叫 任凭命运百般作弄 我头破血流但不低头 在这充满愤怒和眼泪的土地之上 恐怖阴影阴森的逼近 不过,即使岁月不停恐吓 亦将发现我毫不畏惧 无论大门何等狭窄 无论承受多么深重的责罚 我是我命运的主宰 我是我灵魂的统帅&quot;;</span><br><span class="line">label3.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label3.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label3.textColor = [UIColor blueColor];</span><br><span class="line">label3.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">label3.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line">label3.numberOfLines = 0;</span><br><span class="line"></span><br><span class="line">// 限定 label 的宽度和高度，让 label 在此范围内自适应</span><br><span class="line">CGSize size = [label3 sizeThatFits:CGSizeMake([UIScreen mainScreen].bounds.size.width - 15*2, MAXFLOAT)];</span><br><span class="line">label3.frame = CGRectMake(15, 150, size.width, size.height);</span><br><span class="line"></span><br><span class="line">[self.view addSubview:label3];</span><br></pre></td></tr></table></figure>
<p>🎉🎉🎉  你看，它做到了，真棒！</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-0bc50fa9fd5d6c9b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="sizeThatFits-代码示例二："><a href="#sizeThatFits-代码示例二：" class="headerlink" title="sizeThatFits: 代码示例二："></a><code>sizeThatFits:</code> 代码示例二：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 初始化标签对象</span><br><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line">// 给标签对象设置一段较长的文本内容</span><br><span class="line">label.text = @&quot;The appearance of labels is configurable, and they can display attributed strings, allowing you to customize the appearance of substrings within a label. You can add labels to your interface programmatically or by using Interface Builder.&quot;;</span><br><span class="line">// 设置标签文字的颜色</span><br><span class="line">label.textColor = [UIColor flatSkyBlueColor];</span><br><span class="line">// 设置标签文字的对齐方式</span><br><span class="line">label.textAlignment = NSTextAlignmentLeft;</span><br><span class="line">// 设置标签文字的换行方式为以空格为界，保留整个单词</span><br><span class="line">label.lineBreakMode = NSLineBreakByWordWrapping;</span><br><span class="line">// 设置标签不限制行数</span><br><span class="line">label.numberOfLines = 0;</span><br><span class="line">// 设置标签的背景颜色</span><br><span class="line">label.backgroundColor = [UIColor lightGrayColor];</span><br><span class="line">// 限定 label 的宽度和高度，让 label 在此范围内自适应</span><br><span class="line">CGSize size = [label sizeThatFits:CGSizeMake([UIScreen mainScreen].bounds.size.width - 15*2, MAXFLOAT)];</span><br><span class="line">label.frame = CGRectMake(15, 150, size.width, size.height);</span><br><span class="line">// 将标签对象，添加到当前视图控制器的根视图</span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-15ec805152d3e6a8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="实例模仿："><a href="#实例模仿：" class="headerlink" title="实例模仿："></a>实例模仿：</h3><p>参考淘票票的 TableViewCell：</p>
<ul>
<li>样式一：影城卡、卡、惠；</li>
<li>样式二：小食、巨幕厅；</li>
<li>样式三：25.8 元起</li>
<li>样式四：3DIMAX tag</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-22f288b22f9e2e9e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="设置圆角"><a href="#设置圆角" class="headerlink" title="设置圆角"></a>设置圆角</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line">label.frame = CGRectMake(15, 100, 55, 25);</span><br><span class="line">label.text = @&quot;影城卡&quot;;</span><br><span class="line">label.font = [UIFont boldSystemFontOfSize:15];</span><br><span class="line">label.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label.textColor = [UIColor whiteColor];</span><br><span class="line">label.backgroundColor = HexColor(@&quot;#62C067&quot;);</span><br><span class="line"></span><br><span class="line">// 设置圆角（老方法）</span><br><span class="line">label.layer.cornerRadius = 3;</span><br><span class="line">label.layer.masksToBounds = YES;</span><br><span class="line"></span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p>201712更新：优化设置(参考<a href="http://www.cocoachina.com/ios/20171204/21407.html" target="_blank" rel="noopener">iOS 常用组件-高效切圆角方法总结</a>)：<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UILabel *<span class="keyword">label</span><span class="bash"> = [[UILabel alloc] init];</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">frame = CGRectMake(15, 100, 55, 25);</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">text = @<span class="string">"影城卡"</span>;</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">font = [UIFont boldSystemFontOfSize:15];</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">textAlignment = NSTextAlignmentCenter;</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">textColor = [UIColor whiteColor];</span></span><br><span class="line"></span><br><span class="line">// 💡💡💡优化设置圆角（推荐方法）💡💡💡</span><br><span class="line">// 设置 layer 的背景颜色,这样就可以避免离屏渲染问题</span><br><span class="line"><span class="keyword">label</span>.<span class="bash">layer.backgroundColor = UIColorHex(62C067).CGColor; </span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">layer.cornerRadius = 3;</span></span><br><span class="line"></span><br><span class="line">[self.view addSubview:<span class="keyword">label</span><span class="bash">];</span></span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b1b3782f400ed7da.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="设置圆角和边框"><a href="#设置圆角和边框" class="headerlink" title="设置圆角和边框"></a>设置圆角和边框</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 创建 UILabel 对象</span><br><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line">label.frame = CGRectMake(15, 100, 54, 25);</span><br><span class="line">label.text = @&quot;小食&quot;;</span><br><span class="line">label.font = [UIFont systemFontOfSize:15];</span><br><span class="line">label.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label.textColor = [UIColor flatSkyBlueColor];</span><br><span class="line">// 设置圆角</span><br><span class="line">label.layer.cornerRadius = 12;</span><br><span class="line">label.layer.masksToBounds = YES;</span><br><span class="line">// 设置边框</span><br><span class="line">label.layer.borderWidth = 1.0;</span><br><span class="line">label.layer.borderColor = [UIColor flatSkyBlueColor].CGColor;</span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b32be9eaf2bdd7bc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="设置-attributedText"><a href="#设置-attributedText" class="headerlink" title="设置 attributedText"></a>设置 <code>attributedText</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 创建 UILabel 对象</span><br><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line"></span><br><span class="line">// 设置 attributedText</span><br><span class="line">NSString *string = @&quot;25.8元起&quot;;</span><br><span class="line">NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:string];</span><br><span class="line">UIFont *font = [UIFont systemFontOfSize:15];</span><br><span class="line">NSDictionary *attributes1 = @&#123;</span><br><span class="line">                             NSForegroundColorAttributeName:HexColor(@&quot;#FF4359&quot;),</span><br><span class="line">                             NSFontAttributeName:font</span><br><span class="line">                             &#125;;</span><br><span class="line">[attributedString setAttributes:attributes1 range:NSMakeRange(0, 4)];</span><br><span class="line"></span><br><span class="line">NSDictionary *attributes2 = @&#123;</span><br><span class="line">                              NSForegroundColorAttributeName:HexColor(@&quot;#7E7B93&quot;),</span><br><span class="line">                              NSFontAttributeName:font</span><br><span class="line">                              &#125;;</span><br><span class="line">[attributedString setAttributes:attributes2 range:NSMakeRange(4, 2)];</span><br><span class="line">label.attributedText = attributedString;</span><br><span class="line"></span><br><span class="line">// 限定 label 的宽度和高度，让 label 在此范围内自适应</span><br><span class="line">CGSize size = [label sizeThatFits:CGSizeMake([UIScreen mainScreen].bounds.size.width - 15*2, MAXFLOAT)];</span><br><span class="line">label.frame = CGRectMake(15, 150, size.width, size.height);</span><br><span class="line"></span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-bb87fd515de5a85a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="设置标题-Tag"><a href="#设置标题-Tag" class="headerlink" title="设置标题 Tag"></a>设置标题 Tag</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-32bc1a8021691468.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">- (void)<span class="keyword">add3DIMAXTag </span>&#123;</span><br><span class="line"></span><br><span class="line">    UIView *tag = [[UIView alloc] initWithFrame:CGRectMake((MaxX(self.titleLabel)+<span class="number">6</span>), MinY(self.titleLabel)+<span class="number">2</span>, <span class="number">45</span>, <span class="number">13</span>)]<span class="comment">;</span></span><br><span class="line">    tag.<span class="keyword">backgroundColor </span>= COLOR_RGB(<span class="number">185</span>, <span class="number">183</span>, <span class="number">197</span>)<span class="comment">;</span></span><br><span class="line">    tag.layer.<span class="keyword">borderWidth </span>= <span class="number">1</span><span class="comment">;</span></span><br><span class="line">    tag.layer.<span class="keyword">borderColor </span>= COLOR_RGB(<span class="number">185</span>, <span class="number">183</span>, <span class="number">197</span>).CGColor<span class="comment">;</span></span><br><span class="line">    tag.layer.cornerRadius = <span class="number">2</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    UILabel *leftPart = [[UILabel alloc] initWithFrame:CGRectMake(<span class="number">0</span>, <span class="number">0</span>, <span class="number">15</span>, <span class="number">13</span>)]<span class="comment">;</span></span><br><span class="line">    leftPart.layer.<span class="keyword">borderWidth </span>= <span class="number">1</span><span class="comment">;</span></span><br><span class="line">    leftPart.layer.<span class="keyword">borderColor </span>= COLOR_RGB(<span class="number">185</span>, <span class="number">183</span>, <span class="number">197</span>).CGColor<span class="comment">;</span></span><br><span class="line">    leftPart.layer.cornerRadius = <span class="number">2</span><span class="comment">;</span></span><br><span class="line">    leftPart.<span class="keyword">backgroundColor </span>= [UIColor clearColor]<span class="comment">;</span></span><br><span class="line">    leftPart<span class="meta">.text</span> = @<span class="string">"3D"</span><span class="comment">;</span></span><br><span class="line">    leftPart.textAlignment = NSTextAlignmentCenter<span class="comment">;</span></span><br><span class="line">    leftPart.textColor = [UIColor whiteColor]<span class="comment">;</span></span><br><span class="line">    leftPart.font = [UIFont systemFontOfSize:<span class="number">6</span>]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    UILabel *rightPart = [[UILabel alloc] initWithFrame:CGRectMake(<span class="number">17</span>, <span class="number">0</span>, <span class="number">28</span>, <span class="number">13</span>)]<span class="comment">;</span></span><br><span class="line">    rightPart.<span class="keyword">backgroundColor </span>= [UIColor whiteColor]<span class="comment">;</span></span><br><span class="line">    rightPart<span class="meta">.text</span> = @<span class="string">"IMAX"</span><span class="comment">;</span></span><br><span class="line">    rightPart.textAlignment = NSTextAlignmentCenter<span class="comment">;</span></span><br><span class="line">    rightPart.textColor = COLOR_RGB(<span class="number">185</span>, <span class="number">183</span>, <span class="number">197</span>)<span class="comment">;</span></span><br><span class="line">    rightPart.font = [UIFont systemFontOfSize:<span class="number">6</span>]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [tag <span class="keyword">addSubview:leftPart];</span></span><br><span class="line"><span class="keyword"> </span>   [tag <span class="keyword">addSubview:rightPart];</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword"> </span>   [self.contentView <span class="keyword">addSubview:tag];</span></span><br><span class="line"><span class="keyword">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="设置阴影："><a href="#设置阴影：" class="headerlink" title="设置阴影："></a>设置阴影：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 设置阴影颜色</span><br><span class="line">label.shadowColor = [UIColor flatBlueColor];</span><br><span class="line"></span><br><span class="line">// 设置阴影偏移量，默认为 CGSizeMake(0, -1) ——向上偏移</span><br><span class="line">// CGSize 宽度控制这阴影横向的位移，高度控制着纵向的位移。</span><br><span class="line">label.shadowOffset = CGSizeMake(1.5, 1.5);</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-a7b47474c2a414a5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="分散对齐标题文字"><a href="#分散对齐标题文字" class="headerlink" title="分散对齐标题文字"></a>分散对齐标题文字</h3><p>为 <strong>UILabel</strong> 添加一个 Category 类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;UILabel+ChangeRightAndLeftAlignment.h&quot;</span><br><span class="line">#import &lt;CoreText/CoreText.h&gt;</span><br><span class="line"></span><br><span class="line">@implementation UILabel (ChangeRightAndLeftAlignment)</span><br><span class="line"></span><br><span class="line">- (void)hql_changeRightAndLeftAlignment:(CGFloat)labelWidth &#123;</span><br><span class="line">    // 计算文本占据的宽度</span><br><span class="line">    CGSize testSize = [self.text boundingRectWithSize:CGSizeMake(labelWidth, MAXFLOAT) options:NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingTruncatesLastVisibleLine| NSStringDrawingUsesFontLeading attributes:@&#123;NSFontAttributeName :self.font&#125; context:nil].size;</span><br><span class="line">    </span><br><span class="line">    // 文本之间的距离 = （Label的宽度 - 文本宽度）/ （文字个数 - 1）</span><br><span class="line">    CGFloat margin = (labelWidth - testSize.width)/(self.text.length - 1);</span><br><span class="line">    NSNumber *number = [NSNumber numberWithFloat:margin];</span><br><span class="line">    NSMutableAttributedString *attribute = [[NSMutableAttributedString alloc] initWithString:self.text];</span><br><span class="line">    </span><br><span class="line">    // 字间距 :NSKernAttributeName</span><br><span class="line">    [attribute addAttribute: NSKernAttributeName value:number range:NSMakeRange(0, self.text.length - 1 )];</span><br><span class="line">    self.attributedText = attribute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>💡Tips: 如果标题文字末尾带冒号(：)，而你想让【最后一个字】和【冒号】之间不要有空格 那么上面的代码中 <code>self.text.length - 1</code> 这两处应修改为<code>self.text.length - 2</code> ，这样就可以排除最后一个间距了。</p>
</blockquote>
<p>效果：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-f91a55417a5ba990.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="给文字添加描边效果"><a href="#给文字添加描边效果" class="headerlink" title="给文字添加描边效果"></a>给文字添加描边效果</h3><p>UILabel 自定义文本样式，在文件夹上点击右键，弹出右键菜单，选择添加新文件选项,创建一个以UILabel为父类的子类。</p>
<p><strong>NewUILabel.h</strong> 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 演示给标签文字，添加描边效果</span><br><span class="line"> </span><br><span class="line"> 在文件夹上点击右键，弹出右键菜单，选择添加新文件选项,创建一个以UILabel为父类的子类</span><br><span class="line"> */</span><br><span class="line">@interface NewUILabel : UILabel</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>NewUILabel.m</strong> 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;NewUILabel.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation NewUILabel</span><br><span class="line"></span><br><span class="line">// 首先重载父类的绘图方法，这样就可以从底层自定义标签</span><br><span class="line">// 如果你需要执行自定义绘图，只需要覆盖 drawRect：方法</span><br><span class="line">// 一个空的实现在动画过程中会影响性能。</span><br><span class="line">- (void)drawRect:(CGRect)rect &#123;</span><br><span class="line">    // 获取图形的上下文</span><br><span class="line">    CGContextRef c = UIGraphicsGetCurrentContext();</span><br><span class="line">    // 设置在上下文中，文字的渲染模式为描边模式</span><br><span class="line">    CGContextSetTextDrawingMode(c, kCGTextStroke);</span><br><span class="line">    </span><br><span class="line">    // 设置文字描边的边框宽度</span><br><span class="line">    CGContextSetLineWidth(c, 2.0);</span><br><span class="line">    // 设置文字描边顶点连接方式</span><br><span class="line">    CGContextSetLineJoin(c, kCGLineJoinRound);</span><br><span class="line">    // 设置文字的描边颜色：白色</span><br><span class="line">    self.textColor = [UIColor whiteColor];</span><br><span class="line">    // 将文字的描边，绘制在指定区域内</span><br><span class="line">    [super drawTextInRect:rect];</span><br><span class="line">    </span><br><span class="line">    // 设置上下文文字渲染模式为填充</span><br><span class="line">    CGContextSetTextDrawingMode(c, kCGTextFill);</span><br><span class="line">    // 创建一个颜色为黑色的颜色对象</span><br><span class="line">    UIColor *textColor = [UIColor blackColor];</span><br><span class="line">    // 设置文字颜色为黑色</span><br><span class="line">    self.textColor = textColor;</span><br><span class="line">    // 将文字的填充，绘制在指定区域内</span><br><span class="line">    [super drawRect:rect];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p> 调用：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 初始化一个自定义标签对象，并指定其位置和尺寸</span><br><span class="line">CGRect labelFrame = CGRectMake(100, 100, 150, 60);</span><br><span class="line">NewUILabel *label = [[NewUILabel alloc] initWithFrame:labelFrame];</span><br><span class="line">// 设置标签对象的文本内容</span><br><span class="line">label.text = @&quot;Apple&quot;;</span><br><span class="line">// 设置文字的字体和大小</span><br><span class="line">label.font = [UIFont fontWithName:@&quot;Arial&quot; size:48];</span><br><span class="line">// 将标签对象，添加到当前视图控制器的根视图</span><br><span class="line">[self.view addSubview:label];</span><br><span class="line"></span><br><span class="line">self.view.backgroundColor = [UIColor purpleColor];;</span><br></pre></td></tr></table></figure>
<p>效果：</p>
<p>  <img src="http://upload-images.jianshu.io/upload_images/2648731-bd561e8c256ec619.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="添加自定义字体包"><a href="#添加自定义字体包" class="headerlink" title="添加自定义字体包"></a>添加自定义字体包</h3><p>如果系统提供的标准字体无法满足需求，也可以添加自定义字体包，步骤：</p>
<ol>
<li>拖拽所需要的 .ttf 格式文件的字体（字体查询：<a href="https://fonts.google.com）到项目中，如果你的字体包文件是" target="_blank" rel="noopener">https://fonts.google.com）到项目中，如果你的字体包文件是</a> .otf 格式的，也可以去<a href="https://www.fontsquirrel.com/tools/webfont-generator" target="_blank" rel="noopener">这个网站</a>上进行转换，先上传 .otf 格式文件，再转换为 TrueType 类型并下载：<blockquote>
<p>Tips：下载的字体可能三种后缀格式，分别为：ttc/ttf/otf：</p>
<ol>
<li>TTC 是几个 TTF 合成的字型，例如包含粗体、细体两种字型，TTF 就只有一种字型。</li>
<li>TTF 是 apple 和微软共同推出的字体文件格式，只有一种字型。</li>
<li>OTF 是 TTF 的升级版，支持更高级特性的字体。 </li>
</ol>
<p>💡据说 iOS 9 支持了 .otf 格式字体，你可以试试看。</p>
</blockquote>
</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-fbb25c49bd840647.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ol start="2">
<li><p>配置 Info.plist 文件，添加 <strong>Fonts provided by application</strong> 数组字段，将需要的字体包文件名（***.ttf）作为value 添加到该数组中：<br><img src="http://upload-images.jianshu.io/upload_images/2648731-90e3eeb6385b4f9a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
<li><p>将字体文件添加编译，设置 <strong>TARGETS -&gt; Build Phases -&gt; Copy Bundle Resources</strong> 添加 ***.ttf 字体文件：<br><img src="http://upload-images.jianshu.io/upload_images/2648731-87672ee006a62d92.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
</ol>
<ol start="4">
<li>使用：</li>
</ol>
<pre><code>UILabel *label = [[UILabel alloc] init];
label.text = @&quot;Stay Hungry,Stay Foolish.&quot;;
label.font = [UIFont fontWithName:@&quot;Sacramento-Regular&quot; size:32.0f];
[label sizeToFit];
label.center = self.view.center;
[self.view addSubview:label];
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/2648731-f27afec30ac0ca3e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ol start="5">
<li>如果以上步骤均设置无误，字体效果出不来，可能是 <code>[UIFont fontWithName:@&quot;&quot; size:];</code> 方法中的字体名设置不正确（💡因为字体名和字体包的文件名不一定相等！！！），所以你可以用以下方法遍历打印一下字体名看看：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[familyNames enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</span><br><span class="line">    NSLog(@&quot;familyNames: %@&quot;,(NSString *)obj);</span><br><span class="line">    NSArray *fontNames = [UIFont fontNamesForFamilyName:(NSString *)obj];</span><br><span class="line">    [fontNames enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</span><br><span class="line">        NSLog(@&quot;\tfontNames: %@&quot;, (NSString *)obj);</span><br><span class="line">    &#125;];</span><br><span class="line">    NSLog(@&quot;--------------------------&quot;);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>​    </p>
<h3 id="附-不同苹方字体San-Francisco的Label尺寸"><a href="#附-不同苹方字体San-Francisco的Label尺寸" class="headerlink" title="附:不同苹方字体San Francisco的Label尺寸"></a>附:不同苹方字体San Francisco的Label尺寸</h3><p>测试字体：<code>[UIFont systemFontOfSize:font weight:UIFontWeightRegular]</code></p>
<p>测试方法：<code>sizeThatFits:</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">Font</th>
<th style="text-align:center">width</th>
<th style="text-align:center">height</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">9.5</td>
<td style="text-align:center">11</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">10.5</td>
<td style="text-align:center">12</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">12.5</td>
<td style="text-align:center">14.5</td>
</tr>
<tr>
<td style="text-align:center">14</td>
<td style="text-align:center">14.5</td>
<td style="text-align:center">17</td>
</tr>
<tr>
<td style="text-align:center">15</td>
<td style="text-align:center">15.5</td>
<td style="text-align:center">18</td>
</tr>
<tr>
<td style="text-align:center">16</td>
<td style="text-align:center">16.5</td>
<td style="text-align:center">19.5</td>
</tr>
<tr>
<td style="text-align:center">17</td>
<td style="text-align:center">17.5</td>
<td style="text-align:center">20.5</td>
</tr>
<tr>
<td style="text-align:center">18</td>
<td style="text-align:center">18.5</td>
<td style="text-align:center">21.5</td>
</tr>
<tr>
<td style="text-align:center">19</td>
<td style="text-align:center">19.5</td>
<td style="text-align:center">23</td>
</tr>
<tr>
<td style="text-align:center">20</td>
<td style="text-align:center">20.5</td>
<td style="text-align:center">24</td>
</tr>
<tr>
<td style="text-align:center">30</td>
<td style="text-align:center">30.5</td>
<td style="text-align:center">36</td>
</tr>
</tbody>
</table>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><a href="http://colachan.com/post/3463" target="_blank" rel="noopener">苹果旧金山字体的秘密 @可乐橙</a></li>
<li><a href="http://colachan.com/post/3552" target="_blank" rel="noopener">表单设计:一页只做一件事 @可乐橙</a></li>
<li><a href="http://colachan.com/post/3529" target="_blank" rel="noopener">表单设计优化 @可乐橙</a></li>
<li><a href="http://www.jianshu.com/p/4a3aad22f356" target="_blank" rel="noopener">写一个iOS复杂表单的正确姿势</a><br> <img src="http://upload-images.jianshu.io/upload_images/988593-c5a11178cace2ad4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300" alt></li>
<li><a href="http://www.jianshu.com/p/962ab0cd9bce" target="_blank" rel="noopener">UILabel使用总结</a></li>
<li><a href="https://www.jianshu.com/p/f8a3400836b5" target="_blank" rel="noopener">iOS 常用组件-高效切圆角方法总结</a></li>
<li><a href="https://www.jianshu.com/p/b7f04f2a09d4" target="_blank" rel="noopener">iOS App 导入自定义字体</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/18/《iOS编程（第四版）》Demo6：HQLHypnoNerd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/18/《iOS编程（第四版）》Demo6：HQLHypnoNerd/" class="post-title-link" itemprop="url">《iOS编程（第四版）》Demo6：HQLHypnoNerd</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-18 17:56:00" itemprop="dateCreated datePublished" datetime="2016-08-18T17:56:00+08:00">2016-08-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-17 17:25:35" itemprop="dateModified" datetime="2019-04-17T17:25:35+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/18/《iOS编程（第四版）》Demo6：HQLHypnoNerd/" class="leancloud_visitors" data-flag-title="《iOS编程（第四版）》Demo6：HQLHypnoNerd">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h1 id="HQLHypnoNerd"><a href="#HQLHypnoNerd" class="headerlink" title="HQLHypnoNerd"></a>HQLHypnoNerd</h1><p>这是参照 <strong>《iOS编程（第四版）》</strong> 第6、7章写的非常杂乱的 Demo 笔记，</p>
<ul>
<li><a href="https://github.com/Andy0570/HQLHypnoNerd" target="_blank" rel="noopener">GitHub源码</a></li>
</ul>
<h1 id="窗口、视图控制器、添加视图、访问视图"><a href="#窗口、视图控制器、添加视图、访问视图" class="headerlink" title="窗口、视图控制器、添加视图、访问视图"></a>窗口、视图控制器、添加视图、访问视图</h1><h2 id="main-与UIApplication"><a href="#main-与UIApplication" class="headerlink" title="main() 与UIApplication"></a>main() 与UIApplication</h2><p>用 Objective-C 语言编写的程序的执行入口与C语言相同，都是 main() 函数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int main(int argc, char * argv[]) &#123;</span><br><span class="line">    @autoreleasepool &#123;</span><br><span class="line">        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="UIApplicationMain-函数"><a href="#UIApplicationMain-函数" class="headerlink" title="UIApplicationMain 函数:"></a><strong>UIApplicationMain</strong> 函数:</h3><ul>
<li><p>1️⃣ 创建一个 <strong>UIApplication</strong> 对象（每个iOS应用都有且只有一个该对象）。</p>
<p>作用:维护运行循环。</p>
</li>
<li><p>2️⃣ <strong>UIApplicationMain</strong> 函数还会创建某个指定类的对象，并将其设置为 <strong>UIApplication</strong> 对象的 delegate，该对象的类是由 <strong>UIApplicationMain</strong> 函数得最后一个实参指定的，该实参的类型是 <strong>NSString</strong> 对象，代表的某个类的类名。</p>
<ul>
<li>所以以上代码块中，<strong>UIApplicationMain</strong> 会创建一个 <strong>AppDelegate</strong> 对象，并将其设置为 <strong>UIApplication</strong> 对象的 delegate。</li>
<li>在应用启动运行循环并开始接收事件前，UIApplication对象会向其委托发送一个特定的消息（<code>didFinishLaunchingWithOptions:</code>）完成相应的初始化工作，该方法只会在应用启动完毕后调用一次。</li>
</ul>
</li>
</ul>
<p>初始化方法实现在 <strong>AppDelegate.m</strong> 文件中： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</span><br></pre></td></tr></table></figure>
<h2 id="UIWindow"><a href="#UIWindow" class="headerlink" title="UIWindow"></a>UIWindow</h2><p>见 <a href="http://www.jianshu.com/p/92d077d82d0f" target="_blank" rel="noopener">UIWindow</a></p>
<h2 id="视图控制器"><a href="#视图控制器" class="headerlink" title="视图控制器"></a>视图控制器</h2><ul>
<li><p>视图控制器是 <strong>UIViewController</strong> 类或其子类的对象。每个视图控制器都负责管理一个视图层次结构，包括视图层次结构中的视图并处理相关用户事件，以及将整个视图层次结构添加到应用窗口。</p>
</li>
<li><p><strong>根视图控制器</strong><br> <strong>UIWindow</strong> 对象提供了一个方法将视图控制器的视图层次结构加入应用窗口：<code>setRootViewController</code>,当程序将某个视图控制器设置为 <strong>UIWindow</strong> 对象的 rootViewControl 时，<strong>UIWindow</strong> 对象会将该视图控制器的view作为子视图加入窗口，此外，还会自动调整view的大小，将其设置为与窗口的大小相同。<code>rootViewControl</code> 的 view 需要在应用启动完毕之后就显示，所以 <strong>UIWindow</strong> 对象会在设置完<code>rootViewControl</code> 后立刻加载其 view 。</p>
</li>
<li><p><strong>根视图控制器创建步骤：</strong></p>
<ol>
<li>创建 <strong>UIViewController</strong> 的子类<br><code>@interface myViewController : UIViewController</code></li>
<li>在 <strong>AppDelegate.h</strong> 中声明属性<br><code>@property (strong,nonatomic) UIViewController *viewController;</code></li>
<li>在 <strong>AppDelegate.m</strong> 中实现初始化</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 方法一：</span><br><span class="line">// 设置根视图控制器</span><br><span class="line">BNRMyViewController *mvc = [[BNRyViewController alloc]init]; </span><br><span class="line">self.window.rootViewController = mvc;</span><br><span class="line"></span><br><span class="line">// 方法二：</span><br><span class="line">// 获取指向 NSbundle 对象的指针，该 NSBundle 对象代表应用程序的主程序包</span><br><span class="line">// mainBundle 主程序包对应于文件系统中项目的根目录</span><br><span class="line">NSBundle *appBundle = [NSBundle mainBundle];</span><br><span class="line">// 告诉初始化方法在 appBundle 中查找 HQLReminderViewController.xib 文件</span><br><span class="line">self.viewController = [[myViewController alloc] initWithNibName:@&quot;HQLReminderViewController&quot; bundle: appBundle];</span><br><span class="line">//将 viewController 作为 window 的根视图控制器</span><br><span class="line">self.window.rootViewController =self.viewController;</span><br></pre></td></tr></table></figure>
<p>上述方法二中对【对象是通过 XIB 文件创建的根视图控制器】设置同样可使用方法一实现，即：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HQLReminderViewController *rvc = [[HQLReminderViewController alloc] init];</span><br><span class="line">self.window.rootViewController = rvc;</span><br></pre></td></tr></table></figure></p>
<p>为什么向一个需要使用 NIB 文件的视图控制器发送 <code>init</code> 消息也能成功加载对应的视图？</p>
<p><strong>原因</strong>：</p>
<ul>
<li><code>initWithNibName：bundle：</code> 是 <strong>UIViewController</strong> 的指定初始化方法。</li>
<li>向视图控制器发送 <code>init</code> 消息会调用指定初始化方法  <code>initWithNibName：bundle：</code> 并为两个参数都传入nil。</li>
<li>即使向一个需要使用 NIB 文件的视图控制器发送 <code>init</code> 消息，<strong>UIViewControl</strong> 对象仍然会在应用程序中查找和当前 <code>UIViewControl</code> 子类同名的 XIB 文件。</li>
<li>⚠️ 因此建议为 【<strong>UIViewController</strong> 子类】和【该子类需要载入的NIB文件】取相同的名称，这样当视图控制器需要加载视图时，会自动载入正确的XIB文件。    </li>
</ul>
<h3 id="lazy-loading-延迟加载视图"><a href="#lazy-loading-延迟加载视图" class="headerlink" title="lazy loading 延迟加载视图"></a>lazy loading 延迟加载视图</h3><ul>
<li>视图控制器不会在其被创建出来的那一刻马上创建并载入相应的视图，只有当应用需要将某个视图控制器的视图显示到屏幕上时，相应的视图控制器才会创建其视图。</li>
<li>也就是说，视图控制器刚被创建时，其 <code>view</code> 属性会被初始化为 <strong>nil</strong>。之后，当应用需要将视图控制器的视图显示到屏幕上时，如果 <code>view</code> 属性是 <strong>nil</strong>,就会自动调用 <code>loadview</code> 方法。</li>
<li>⚠️ 为了实现视图延迟加载，<code>在initWithNibName：bundle：</code>中不应该访问 <code>view</code> 或 <code>View</code> 的任何子视图。凡是和 <code>view</code>或 <code>view</code>的子视图有关的代码，都应该在 <code>viewDidLoad</code> 方法中实现，避免加载不需要在屏幕上显示的视图。</li>
<li>视图控制器可以通过两种方式创建视图层次结构<ul>
<li>代码方式：覆盖 <strong>UIViewController</strong> 中的 <code>loadView</code> 方法</li>
<li>文件方式：使用 interface builder 创建一个 NIB 文件，然后加入所需的视图层次结构，最后视图控制器会在运行时加载由该 NIB 文件编译而成的 XIB 文件。</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> - (void)loadView &#123;  </span><br><span class="line"></span><br><span class="line">//创建一个 HQLHypnosisView 对象</span><br><span class="line">HQLHypnosisView *backgroundView = [[HQLHypnosisView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];</span><br><span class="line">self.view = backgroundView;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>上述代码中，将 HQLHypnosisView 对象赋值给视图控制器的 <code>view</code> 属性。</p>
</li>
<li><p><code>view</code> 属性继承自 <strong>UIViewControl</strong> :</p>
<p>   <code>@property(null_resettable, nonatomic,strong) UIView *view;</code><br>   如果视图还没有被设置，那么get方法会首先调用自身的 loadView 方法，如果重写了 setter 或 getter 方法，子类必须调用父类。</p>
</li>
</ul>
<h3 id="运行循环和重绘视图"><a href="#运行循环和重绘视图" class="headerlink" title="运行循环和重绘视图"></a>运行循环和重绘视图</h3><ul>
<li>iOS 应用启动时会开始一个运行循环（run loop）。运行循环的工作是监听事件，当事件发生时运行循环会为相应的事件找到合适的处理方法（类似于单片机中的中断处理机制）,只有当调用的处理方法都执行完毕时，控制权才会再次回到运行循环。</li>
<li>当应用将控制权交回给运行循环时，运行循环首先会检查是否有等待重绘的视图（即在当前循环收到 <code>setNeedsDisplay</code> 消息的视图），然后向所有等待重绘的视图发送  <code>drawRect</code>  消息，最后视图层次结构中所有视图的图层再次组合成一幅完整的图像并绘制到屏幕上。</li>
<li>iOS 做了两方面来保证用户界面的流畅性<ol>
<li>不重绘显示的内容没有改变的视图；</li>
<li>在每次事件处理周期（event handing cycle）中只发送一次 <code>drawRect:</code> 消息。iOS 会在运行循环的最后阶段集中处理所有需要重绘的视图。</li>
</ol>
</li>
</ul>
<h2 id="UIView"><a href="#UIView" class="headerlink" title="UIView"></a>UIView</h2><h3 id="添加视图"><a href="#添加视图" class="headerlink" title="添加视图"></a>添加视图</h3><p><strong>frame</strong>:用于确定与视图层次结构中其他视图的相对位置，从而将自己的图层与其他视图的图层正确组合屏幕上的图像。<br><strong>bounds</strong>:用于确定绘制区域，避免将自己绘制到图层边界之外。<br><strong>frame </strong>是从父视图的坐标系统来看的，而 <strong>bounds</strong> 是从本身的坐标系统来看的.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-6b0e6cf74b47e40a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="frame与bounds的区别"></p>
<p>视图的相关结构：<br>Core Graphics( CG )</p>
<ul>
<li><p><strong>CGPoint</strong>：2D空间中的位置坐标,（x,y）<br>  生成函数：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* **CGSize**：某个对象的尺寸：width、height</span><br><span class="line">   生成函数：```CGSizeMake(width,height)</span><br></pre></td></tr></table></figure></p>
</li>
<li><p><strong>CGRect</strong>：位置和尺寸：origin 和 size<br> 生成函数：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">//创建一个CGRect结构</span><br><span class="line">//CGRect firstFrame = CGRectMake(160, 240, 100, 150);</span><br><span class="line"></span><br><span class="line">CGRect firstFrame = self.window.bounds;</span><br><span class="line"></span><br><span class="line">//创建HQLHypnosisView对象</span><br><span class="line">HQLHypnosisView *firstView = [[HQLHypnosisView alloc] initWithFrame:firstFrame];</span><br><span class="line"></span><br><span class="line">//设置HQLHypnosisView背景色</span><br><span class="line">firstView.backgroundColor = [UIColor greenColor];</span><br><span class="line"></span><br><span class="line">//将HQLHypnosisView对象加入UIWindow对象</span><br><span class="line">[self.window addSubview:firstView];</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<p>也可以在 <strong>HQLHypnosisView.m</strong> 中复写 <strong>initWithFrame:</strong> 方法设置 HQLHypnosisView 背景色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">self =[super initWithFrame:frame];</span><br><span class="line">if (self) &#123;</span><br><span class="line">    //设置HQLHyponsisView对象的背景颜色为透明</span><br><span class="line">    self.backgroundColor = [UIColor clearColor];</span><br><span class="line">	&#125;</span><br><span class="line">return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="视图层次的嵌套"><a href="#视图层次的嵌套" class="headerlink" title="视图层次的嵌套"></a>视图层次的嵌套</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HQLHypnosisView *secondView = [[HQLHypnosisView alloc] <span class="string">initWithFrame:</span>secondFrame];</span><br><span class="line">secondView.backgroundColor = [UIColor blueColor];</span><br><span class="line"></span><br><span class="line"><span class="comment">//将 secondView 添加到 window 上</span></span><br><span class="line">[self.window <span class="string">addSubview:</span>secondView];</span><br><span class="line"></span><br><span class="line"><span class="comment">//视图层次嵌套</span></span><br><span class="line"><span class="comment">//视图的frame所代表的位置是相对于其父视角的</span></span><br><span class="line"><span class="comment">//将 secondView 添加到 firstview 上</span></span><br><span class="line">[firstView <span class="string">addSubview:</span>secondView];</span><br></pre></td></tr></table></figure>
<h3 id="访问视图"><a href="#访问视图" class="headerlink" title="访问视图"></a>访问视图</h3><p>通常情况下，在用户看到创建的视图之前需要对它们做一些额外的初始化工作。<br>两种访问NIB文件视图的方法：</p>
<ul>
<li><code>-viewDidLoad:</code> 该方法会在视图控制器加载完视图之后被调用，此时视图控制器中所有视图属性都已经指向了正确的视图对象。</li>
<li><code>-viewWillAppear:</code>该方法会在视图控制器的 view 添加到应用窗口之前被调用。<br><strong>区别：</strong> ⚠️ <strong>如果只需要在应用启动后设置一次视图对象，就选择 <code>viewDidLoad</code>；如果用户每次看到视图控制器的 view 时都需要对其进行设置，则选择 <code>viewWillAppear</code>。</strong></li>
<li><p>相反，<code>viewWillDisappear:</code> 和 <code>viewDidDisappear</code>方法会在每次视图控制器的 view 从屏幕上消失时被调用。</p>
</li>
<li><p><a href="http://www.cnblogs.com/mjios/archive/2013/02/26/2933667.html" target="_blank" rel="noopener">loadView、viewDidLoad及viewDidUnload的关系</a></p>
</li>
</ul>
<h3 id="设置启动页面延时"><a href="#设置启动页面延时" class="headerlink" title="设置启动页面延时"></a>设置启动页面延时</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//延时3秒</span><br><span class="line">[NSThread sleepForTimeInterval:3.0];</span><br></pre></td></tr></table></figure>
<h1 id="运动效果"><a href="#运动效果" class="headerlink" title="运动效果"></a>运动效果</h1><p>iOS 设备内嵌了许多功能强大的传感器，例如加速传感器，磁场传感器和三轴陀螺仪等。应用可以通过这些传感器了解设备的速度、方向和角度，并实现有用的功能。</p>
<p>例如，应用可以根据设备的方向自动将界面调整为横排模式或竖排模式。从iOS 7开始，Apple 引入了一些新API，可以轻松为应用添加一种通过感应器实现的视差（parallax）效果。</p>
<p>在 <strong>HQLHyponViewController.m</strong> 中修改<code>drawHyponticMessage:</code>方法，为 <strong>UILabel</strong> 对象分别添加水平方向和垂直方向的视差效果，使 <strong>UILabel</strong> 对象的中心点坐标在每个方向上最多移动25点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">//在屏幕随机位置绘制20个UILabel对象</span><br><span class="line">- (void)drawHypnoticMessage:(NSString *)message &#123;</span><br><span class="line"></span><br><span class="line">for (int i =0; i&lt;20; i++) &#123;</span><br><span class="line">    UILabel *messageLabel = [[UILabel alloc] init];</span><br><span class="line">    //设置UILabel对象的文字和颜色</span><br><span class="line">    messageLabel.backgroundColor = [UIColor clearColor];</span><br><span class="line">    messageLabel.textColor = [UIColor whiteColor];</span><br><span class="line">    messageLabel.text = message;</span><br><span class="line">    //根据需要显示的文字调整UILabel对象的大小</span><br><span class="line">    [messageLabel sizeToFit];</span><br><span class="line">    </span><br><span class="line">    //获取随机x坐标</span><br><span class="line">    //使UILabel对象的宽度不超出HQLHyponsisViewController的view的宽度</span><br><span class="line">    int width = (int)(self.view.bounds.size.width - messageLabel.bounds.size.width);</span><br><span class="line">    int x = arc4random() % width;</span><br><span class="line">    </span><br><span class="line">    //获取随机y坐标</span><br><span class="line">    //使UILabel对象的高度不超出HQLHyponsisViewController的view的高度</span><br><span class="line">    int height = (int)(self.view.bounds.size.width - messageLabel.bounds.size.height);</span><br><span class="line">    int y =184 + arc4random() % height;</span><br><span class="line">    </span><br><span class="line">    //设置UILabel对象的frame</span><br><span class="line">    CGRect frame = messageLabel.frame;</span><br><span class="line">    frame.origin = CGPointMake(x, y);</span><br><span class="line">    messageLabel.frame = frame;</span><br><span class="line">    </span><br><span class="line">    //将UILabel对象添加到HQLHyponsisViewController的view中</span><br><span class="line">    [self.view addSubview:messageLabel];</span><br><span class="line">    </span><br><span class="line">    //运行效果:水平方向和垂直方向的视差效果</span><br><span class="line">  	//设置UILabel 对象的中心点坐标在每个方向上最多移动25点</span><br><span class="line">    UIInterpolatingMotionEffect *motionEffect;</span><br><span class="line">    motionEffect = [[UIInterpolatingMotionEffect alloc] initWithKeyPath:@&quot;center.x&quot; type:UIInterpolatingMotionEffectTypeTiltAlongHorizontalAxis];</span><br><span class="line">    motionEffect.minimumRelativeValue = @(-25);</span><br><span class="line">    motionEffect.maximumRelativeValue = @(25);</span><br><span class="line">    [messageLabel addMotionEffect:motionEffect];</span><br><span class="line">    </span><br><span class="line">    motionEffect = [[UIInterpolatingMotionEffect alloc] initWithKeyPath:@&quot;center.y&quot; type:UIInterpolatingMotionEffectTypeTiltAlongVerticalAxis];</span><br><span class="line">    motionEffect.minimumRelativeValue = @(-25);</span><br><span class="line">    motionEffect.maximumRelativeValue = @(25);</span><br><span class="line">    [messageLabel addMotionEffect:motionEffect];  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="LocalNotification（本地通知）"><a href="#LocalNotification（本地通知）" class="headerlink" title="LocalNotification（本地通知）"></a>LocalNotification（本地通知）</h1><p><strong>本地通知</strong>（local notification）用于向用户提示一条消息，即使应用没有运行，用户也可以收到本地通知。<br>应用还可以通过后台服务器实现推送通知（push notification）.有关推送通知的技术细节请参考Apple的Local and Push Notification Programming Guide（本地通知和推送通知编程指南）。<br>Demo:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-5bd235356d1e2922.gif?imageMogr2/auto-orient/strip" alt="locolNotification.gif"></p>
<p>实现本地通知方法代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)addReminder:(id)sender &#123;</span><br><span class="line">    </span><br><span class="line">    NSDate *date = self.datePicker.date;</span><br><span class="line">    NSLog(@&quot;Setting a reminder for %@&quot;,date);</span><br><span class="line">    </span><br><span class="line">    if ([UIApplication instancesRespondToSelector:@selector(registerUserNotificationSettings:)])&#123;</span><br><span class="line">        </span><br><span class="line">        [[UIApplication sharedApplication] registerUserNotificationSettings:[UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeAlert|UIUserNotificationTypeBadge|UIUserNotificationTypeSound categories:nil]];</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 创建 UILocalNotification 对象</span><br><span class="line">    UILocalNotification *note = [[UILocalNotification alloc] init];</span><br><span class="line">    // 设置显示内容</span><br><span class="line">    note.alertBody = @&quot;Hypnotize me!&quot;;</span><br><span class="line">    // 设置提醒时间</span><br><span class="line">    note.fireDate = date;</span><br><span class="line">    </span><br><span class="line">    // 使用 scheduleLocalNotification: 方法注册通知</span><br><span class="line">    [[UIApplication sharedApplication] scheduleLocalNotification:note];</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;addReminder run over&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UITabBarController"><a href="#UITabBarController" class="headerlink" title="UITabBarController"></a>UITabBarController</h1><p>参考： <a href="http://www.jianshu.com/p/33d3300afd91" target="_blank" rel="noopener">UITabBarController（标签栏）</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="http://www.jianshu.com/p/2e8ef223efef" target="_blank" rel="noopener">天才第一步，从UIWindow谈起 @吴白</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/18/《iOS编程（第四版）》Demo1：Quiz/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/18/《iOS编程（第四版）》Demo1：Quiz/" class="post-title-link" itemprop="url">《iOS编程（第四版）》Demo1：Quiz</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-18 17:08:00" itemprop="dateCreated datePublished" datetime="2016-08-18T17:08:00+08:00">2016-08-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-17 17:26:08" itemprop="dateModified" datetime="2019-04-17T17:26:08+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/18/《iOS编程（第四版）》Demo1：Quiz/" class="leancloud_visitors" data-flag-title="《iOS编程（第四版）》Demo1：Quiz">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>《iOS编程》Demo应用：Quiz</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-dac10288198f7605.gif?imageMogr2/auto-orient/strip" alt="Quiz应用"></p>
<p> 功能：在视图中显示一个问题，用户点击视图下方的按钮，可以显示相应的答案，用户点击上方的按钮，则会显示一个新的问题   </p>
<h1 id="第1章-第一个简单的iOS应用"><a href="#第1章-第一个简单的iOS应用" class="headerlink" title="第1章 第一个简单的iOS应用"></a>第1章 第一个简单的iOS应用</h1><h2 id="1-1-创建Xcode项目"><a href="#1-1-创建Xcode项目" class="headerlink" title="1.1 创建Xcode项目"></a>1.1 创建Xcode项目</h2><ul>
<li>位于工作空间窗口左侧的是导航面板区域（navigator area），负责显示各种不同的导航面板。</li>
<li>项目导航面板（project navigator）：显示项目中的文件。</li>
<li>项目导航面板中的组只用来整理文件，与文件系统无关。</li>
<li>一个类（class）表示一种对象（object）。iOS开发是面向对象的，每个iOS应用都可以看成是由一系列协同工作的对象构成的。</li>
</ul>
<h2 id="1-2-模型-视图-控制器"><a href="#1-2-模型-视图-控制器" class="headerlink" title="1.2 模型-视图-控制器"></a>1.2 模型-视图-控制器</h2><p><strong>MVC设计模式</strong>的含义：应用创建的任何一个对象，其类型必定是模型对象、视图对象或者控制器对象三种类型中的一个。</p>
<ul>
<li>【视图对象】是用户可以看见的对象，用来构建用户界面。</li>
<li>【模型对象】负责存储数据，与用户界面无关。通常情况下，【模型对象】表示真实世界中与用户相关的事物。</li>
<li>【控制器对象】扮演“管家”的角色，它用于控制【视图对象】为用户呈现的内容，以及负责确保【视图对象】和【模型对象】的数据保持一致。</li>
</ul>
<blockquote>
<p>⚠️  【模型对象】和【视图对象】之间没有直接产生联系，而是由【控制器对象】负责彼此间的消息发送和数据传递。</p>
</blockquote>
<h2 id="1-3-设计Quiz"><a href="#1-3-设计Quiz" class="headerlink" title="1.3 设计Quiz"></a>1.3 设计Quiz</h2><p>开发中需要使用的对象：</p>
<ul>
<li>四个视图对象：<strong>UILabel</strong> 和 <strong>UIButton</strong>；</li>
<li>两个控制器对象：<strong>AppDelegate</strong>、<strong>QuizViewControl</strong>的对象各一个；</li>
<li>两个模型对象：<strong>NSArray</strong> 的对象两个；</li>
</ul>
<h2 id="1-4-创建视图控制器"><a href="#1-4-创建视图控制器" class="headerlink" title="1.4 创建视图控制器"></a>1.4 创建视图控制器</h2><h2 id="1-5-创建界面"><a href="#1-5-创建界面" class="headerlink" title="1.5 创建界面"></a>1.5 创建界面</h2><ul>
<li><p>Xcode 会使用 Interface Builder （界面创建工具）打开 XIB 文件。Interface Builder 是一种可视化编辑器，可以用拖动对象的方式创建图形用户界面。</p>
</li>
<li><p>XIB 的全称就是 XML Interface Builder。</p>
</li>
</ul>
<h3 id="创建视图对象"><a href="#创建视图对象" class="headerlink" title="创建视图对象"></a>创建视图对象</h3><h3 id="NIB文件"><a href="#NIB文件" class="headerlink" title="NIB文件"></a>NIB文件</h3><p>构建项目时，所有XIB文件都会被编译成NIB文件（NIB文件体积更小，更容易解析），然后Xcode会将NIB文件拷贝至应用的程序包（bundle）中。</p>
<h2 id="1-6-创建关联"><a href="#1-6-创建关联" class="headerlink" title="1.6 创建关联"></a>1.6 创建关联</h2><p>在 Interface Builder中可以创建两种关联</p>
<ul>
<li><strong>插座变量</strong>（outlets）:指向对象的指针；</li>
<li><strong>动作</strong>（actions）：一种方法，在视图对象和用户发生交互时被调用。</li>
</ul>
<h3 id="设置插座变量"><a href="#设置插座变量" class="headerlink" title="设置插座变量"></a>设置插座变量</h3><h2 id="1-7-创建模型对象"><a href="#1-7-创建模型对象" class="headerlink" title="1.7 创建模型对象"></a>1.7 创建模型对象</h2><p><a href="https://github.com/Andy0570/QUIZ.git" target="_blank" rel="noopener">gitHub下载</a></p>
<h3 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h3><ul>
<li><a href="http://www.infoq.com/cn/articles/rethinking-mvc-mvvm" target="_blank" rel="noopener">被误解的MVC和被神化的MVVM</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_Foundation框架/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_Foundation框架/" class="post-title-link" itemprop="url">Objective-C_Foundation框架</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:36:47" itemprop="dateModified" datetime="2019-04-18T00:36:47+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_Foundation框架/" class="leancloud_visitors" data-flag-title="Objective-C_Foundation框架">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="Foundation框架"><a href="#Foundation框架" class="headerlink" title="Foundation框架"></a>Foundation框架</h3><ul>
<li><strong>框架</strong>是由许多类、方法、函数组成的一个类库。以便于开发者更方便的开发程序。</li>
<li>许多框架的集合构成了<strong>SDK（开发工具包）</strong>。</li>
<li><strong>Foundation</strong>是OC语言的基础类库。此框架中的类都以 “NS” 为前缀,便于与其他类区分开。</li>
<li><strong>UIKit框架</strong>是UI界面的基础库<br>Foundation中的大部分类都提供了两种方式创建对象:<ul>
<li>alloc创建：<code>NSNumber *number1 = [[NSNumber alloc] initWithInt:100];</code></li>
<li>类方法创建：<code>NSNumber *number2 = [NSNumber numberWithInt:100];</code> </li>
</ul>
</li>
</ul>
<h3 id="NSObject类、延迟调用"><a href="#NSObject类、延迟调用" class="headerlink" title="NSObject类、延迟调用"></a>NSObject类、延迟调用</h3><p><strong>NSObject</strong>类是一切类的根类(基类),它是没有父类,它是所有对象的“生命”方法,也是了对象生终的“终结”。</p>
<h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><ul>
<li>比较两个指针是否指向同一个对象(指针是否指向同一个内存区域)<br>  <code>- (BOOL)isEqual:(id)object;</code></li>
<li>调用一个方法<br>  <code>- (id)performSelector:(SEL)aSelector;</code></li>
<li>调用一个方法,并且传递一个参数<br>  <code>- (id)performSelector:(SEL)aSelector withObject:(id)object;</code></li>
<li>调用一个方法,并且传递2个参数<br>  <code>- (id)performSelector:(SEL)aSelector withObject:(id)object1 withObject:(id)object2;</code></li>
<li>某一个对象是否派生或属于某一类<br>  <code>- (BOOL)isKindOfClass:(Class)aClass;</code></li>
<li>某一个对象是否属于某类<br>  <code>- (BOOL)isMemberOfClass:(Class)aClass;</code></li>
<li>某对象是否响应指定的方法<br>  <code>- (BOOL)respondsToSelector:(SEL)aSelector;</code></li>
<li><p>返回指定对象的父类和本类<br>  <code>- (Class)superclass;  - (Class)class;</code></p>
<p>  例：假设 demo1 是一个私有方法（在 .m 文件中实现，但在 .h 文件中没有声明的方法）</p>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//创建了一个方法选择器，封装demo1方法   </span></span><br><span class="line">	SEL selector1 = <span class="meta">@selector</span>(demo1);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//在performSelector方法中调用selector1方法选择器，也就是demo1</span></span><br><span class="line">   [<span class="keyword">super</span> <span class="string">performSelector:</span>selector1];</span><br><span class="line">	[self <span class="string">performSelector:</span>selector1];  <span class="comment">//同上</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//perform调用带1个参数的方法，@"hello"传给了demo2:的形参</span></span><br><span class="line">    [self <span class="string">performSelector:</span><span class="meta">@selector</span>(<span class="string">demo2:</span>)</span><br><span class="line"><span class="symbol">               withObject:</span>@<span class="string">"hello"</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用带2个参数的方法</span></span><br><span class="line">	[self <span class="string">performSelector:</span>(SEL)</span><br><span class="line"><span class="symbol">	              withObject:</span>(id)</span><br><span class="line"><span class="symbol">	               withObject:</span>(id)];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//延迟调用</span></span><br><span class="line">    [self demo1];  <span class="comment">//没有延迟，立马调用demo1方法</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//延迟调用demo1，但是代码执行到此处时，不会停在此处3秒钟</span></span><br><span class="line">    [self <span class="string">performSelector:</span><span class="meta">@selector</span>(demo1) <span class="string">withObject:</span>nil <span class="string">afterDelay:</span><span class="number">3.0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>//让程序保持运行状态
[[NSRunLoop currentRunLoop] run];
</code></pre><hr>
<h4 id="NSString"><a href="#NSString" class="headerlink" title="NSString"></a>NSString</h4><ul>
<li><a href="http://www.jianshu.com/p/c4eadf54cd25" target="_blank" rel="noopener">第16章——NSString</a></li>
</ul>
<hr>
<h4 id="NSMutableString"><a href="#NSMutableString" class="headerlink" title="NSMutableString"></a>NSMutableString</h4><ul>
<li><a href="http://www.jianshu.com/p/b628c48be542" target="_blank" rel="noopener">第16章——NSMutableString</a></li>
</ul>
<hr>
<h4 id="NSArray"><a href="#NSArray" class="headerlink" title="NSArray"></a>NSArray</h4><ul>
<li><a href="http://www.jianshu.com/p/aaa89e070f84" target="_blank" rel="noopener">第17章——NSArray</a></li>
</ul>
<hr>
<h4 id="NSMutableArray"><a href="#NSMutableArray" class="headerlink" title="NSMutableArray"></a>NSMutableArray</h4><ul>
<li><a href="http://www.jianshu.com/p/64443aecc4dd" target="_blank" rel="noopener">第17章——NSMutableArray</a></li>
</ul>
<hr>
<h4 id="Collection-类"><a href="#Collection-类" class="headerlink" title="Collection 类"></a>Collection 类</h4><ul>
<li><a href="http://www.jianshu.com/p/d84d570fe6a9" target="_blank" rel="noopener">第24章——Collection 类</a></li>
</ul>
<hr>
<h4 id="NSNumber"><a href="#NSNumber" class="headerlink" title="NSNumber"></a>NSNumber</h4><ul>
<li><a href="http://www.jianshu.com/p/6fa0926dd478" target="_blank" rel="noopener">NSNumber</a></li>
</ul>
<hr>
<h4 id="NSValue"><a href="#NSValue" class="headerlink" title="NSValue"></a>NSValue</h4><ul>
<li><a href="http://www.jianshu.com/p/928502aba37a" target="_blank" rel="noopener">NSValue</a></li>
</ul>
<hr>
<h4 id="NSNull"><a href="#NSNull" class="headerlink" title="NSNull"></a>NSNull</h4><p>我们之前提到,不能在集合(collection) 中存储nil值,因为字典和数组中nil都有特殊的含义,但有时候你确实需要存储一个表示“什么都没有”的值。那就用 <strong>NSNull</strong> 代替,表示什么都不是,什么都没有。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [zhangsan,lisi,  ,zhaoliu];</span></span><br><span class="line">NSNull *<span class="keyword">null</span> = [NSNull <span class="keyword">null</span>];</span><br><span class="line">NSArray *<span class="keyword">array</span> = @[@<span class="string">"zhagnsan"</span>,@<span class="string">"lisi"</span>,<span class="keyword">null</span>,@<span class="string">"zhaoliu"</span>];</span><br></pre></td></tr></table></figure>
<h5 id="线上的一个实际例子："><a href="#线上的一个实际例子：" class="headerlink" title="线上的一个实际例子："></a>线上的一个实际例子：</h5><p>本意：如果用户已经成功登录，就获取存储在磁盘上的用户名：<br> <code>NSDictionary *dictionary = @{@&quot;username&quot;:_username};</code><br>实际生产环境中，发生了这样的情况：判断用户已经登录成功，但是无法获取用户名导致应用crash。<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">attachDatas:</span></span><br><span class="line"><span class="symbol">Exception:</span>&#123;</span><br><span class="line">    Name = NSInvalidArgumentException<span class="comment">;</span></span><br><span class="line">    Reason = <span class="string">"*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0]"</span><span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最初的修复方法是，判断为nil,就传入一个空字符串： @””：<br><code>NSDictionary *dictionary = @{@&quot;username&quot;:_username?:@&quot;&quot;};</code><br>规范的方法是传入一个空对象：<br> <code>NSDictionary *dictionary = @{@&quot;username&quot;:_username?:[NSNull null]};</code><br>参考：<a href="http://nshipster.cn/nil/" target="_blank" rel="noopener">nshipster: nil / Nil / NULL / NSNull</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_KVO、KVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_KVO、KVC/" class="post-title-link" itemprop="url">Objective-C_KVO、KVC</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:38:21" itemprop="dateModified" datetime="2019-04-18T00:38:21+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_KVO、KVC/" class="leancloud_visitors" data-flag-title="Objective-C_KVO、KVC">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="KVC"><a href="#KVC" class="headerlink" title="KVC"></a>KVC</h2><h3 id="键值编码的基本概念"><a href="#键值编码的基本概念" class="headerlink" title="键值编码的基本概念"></a>键值编码的基本概念</h3><ol>
<li><strong>KVC</strong> 是 <strong>KeyValue Coding</strong> 的简称，它是一种可以直接通过字符串的名字(key)来访问属性的机制。使用该机制不需要调用存取方法和变量实例就可访问对象属性。本质上讲，键-值编码定义了你的程序存取方法需要实现的样式及方法签名。</li>
<li>在应用程序中实现键-值编码兼容性是一项重要的设计原则。存取方法可以加<br>强合适的数据封装，而键-值编码方法在多数情况下可简化程序代码。</li>
<li>键-值编码方法在 Objective-C 非标准协议（类目）<strong>NSKeyValueCoding</strong>中被声明，默认的实现方法由 <strong>NSObject</strong> 提供，所以凡是继承自 <strong>NSObject</strong> 的类都具备 KVC 功能。</li>
<li>键-值编码支持带有对象值的属性，同时也支持纯数值类型和结构。非对象参<br>数和返回类型会被识别并自动封装/解封。</li>
</ol>
<h3 id="设置和访问"><a href="#设置和访问" class="headerlink" title="设置和访问"></a>设置和访问</h3><ul>
<li>键/值编码中的基本调用包括 <code>-valueForKey：</code> 和 <code>-setValue：forkey：</code> 这两个<br>方法，它们以字符串的形式向对象发送消息，字符串是我们关注属性的关键。</li>
</ul>
<p>示例1：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">BNRAppliance *a = [[BNRAppliance alloc] init];</span><br><span class="line"></span><br><span class="line">[a <span class="string">setProductName:</span>@<span class="string">"Washing Machine"</span>];</span><br><span class="line"><span class="comment">// 使用 KVC 重写以上代码</span></span><br><span class="line"> [a <span class="string">setValue:</span>@<span class="string">"Washing Machine"</span> <span class="string">forKey:</span>@<span class="string">"productName"</span>];</span><br><span class="line">        </span><br><span class="line">[a <span class="string">setVoltage:</span><span class="number">240</span>];</span><br><span class="line"><span class="comment">// 使用 KVC 重写以上代码</span></span><br><span class="line">[a <span class="string">setValue:</span>[NSNumber <span class="string">numberWithInt:</span><span class="number">240</span>] <span class="string">forKey:</span>@<span class="string">"voltage"</span>];</span><br><span class="line">        </span><br><span class="line"> NSLog(@<span class="string">"a is %@"</span>,a);</span><br><span class="line"> <span class="comment">// 使用 KVC 重写以上代码</span></span><br><span class="line"> NSLog(@<span class="string">"the product name is %@"</span>,[a <span class="string">valueForKey:</span>@<span class="string">"productName"</span>]);</span><br></pre></td></tr></table></figure></p>
<p>示例2：<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Person *<span class="keyword">jack </span>= [[Person alloc] init]<span class="comment">;</span></span><br><span class="line">NSMutableString *name = [[NSMutableString alloc] initWithFormat:@<span class="string">"jack"</span>]<span class="comment">;</span></span><br><span class="line">[<span class="keyword">jack </span>setValue:name forKey:@<span class="string">"name"</span>]<span class="comment">;</span></span><br><span class="line">NSLog(@<span class="string">"jack name : %@"</span>, [<span class="keyword">jack </span>valueForKey:@<span class="string">"name"</span>])<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>使用KVC，编译器会查找是否存在 <strong>setter</strong>、<strong>getter</strong> 方法，如果不存在，它将在内部查找名为 <strong>_key</strong> 或 <strong>key</strong> 的实例变量。通过 KVC，可以获取不存在<strong>getter</strong>方法的对象值，无需通过对象指针直接访问。</li>
<li>KVC 能够在没有存取方法的情况下直接存取实例变量。</li>
<li>⚠️非对象类型：当我们通过 <code>setValue：forKey：</code> 设置对象的值，或通过<br><code>valueForKey</code> 来获取对象的值时，如果对象的实例变量为基本数据类型（<strong>char、int、float、BOOL</strong>）时，我们需要使用 <strong>NSNumber</strong> 对象对数据进行 <strong>封装</strong>。</li>
</ul>
<h3 id="key路径"><a href="#key路径" class="headerlink" title="key路径"></a>key路径</h3><ul>
<li>除了通过键设置值外，键/值编码还支持指定路径，像文件系统一样。用“点”<br>号隔开。</li>
<li>使用 key path 可以一次性遍历复杂的对象表。</li>
<li>注意顺序，第一个想要遍历的对象放在第一个。</li>
</ul>
<p>示例：<br><code>BNRDepartment. manager</code> 指向 <code>BNREmployee. emergencyContact</code> 指向 <code>BNRPerson. phoneNumber</code></p>
<pre><code>BNRDepartment *sales = ...;
BNREmployee *sickEmployee = [sales valueForKey:@&quot;manager&quot;];
BNRPerson *personToCall = [sickEmployee valueForKey:@&quot;emergencyContact&quot;];
[personToCall setValue:@&quot;555-606-0842&quot; forKey:@&quot;phoneNumber&quot;];

// 使用 Key路径 重写以上代码
BNRDepartment *sales = ...;
[personToCall setValue:@&quot;555-606-0842&quot;
            forKeyPath:@&quot;manager.emergencyContact.phoneNumber&quot;];
</code></pre><h3 id="一对多的关系"><a href="#一对多的关系" class="headerlink" title="一对多的关系"></a>一对多的关系</h3><ul>
<li>如果向 <strong>NSArray</strong> 请求一个键值，它实际上会查询数组中的每个对象来查找这个<br>键值，然后将查询结果打包到另一个数组中并返回给你。</li>
</ul>
<pre><code>NSArray *booksArray = [NSArray arrayWithObjects:book1, book2, nil];
[book1 release];
[book2 release];
[book setValue:booksArray forKey:@&quot;relativeBooks&quot;];
NSLog(@&quot;books 2: %@&quot;, [book valueForKeyPath:@&quot;relativeBooks.price&quot;]);
</code></pre><h3 id="实现简单的运算"><a href="#实现简单的运算" class="headerlink" title="实现简单的运算"></a>实现简单的运算</h3><pre><code>NSString *count = [book valueForKeyPath:@&quot;relativeBooks.@count&quot;];
NSLog(@&quot;count : %@&quot;, count);
NSString *sum = [book valueForKeyPath:@&quot;relativeBooks.@sum._price&quot;];
NSLog(@&quot;sum : %@&quot;, sum);
NSString *avg = [book valueForKeyPath:@&quot;relativeBooks.@avg._price&quot;];
NSLog(@&quot;avg : %@&quot;, avg);
NSString *min = [book valueForKeyPath:@&quot;relativeBooks.@min._price&quot;];
NSLog(@&quot;min : %@&quot;, min);
NSString *max = [book valueForKeyPath:@&quot;relativeBooks.@max._price&quot;];
NSLog(@&quot;max : %@&quot;, max);
</code></pre><h2 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ol>
<li><strong>Key Value Observing</strong>，直译为：基于键值的观察者。它提供一种机制，当指定的对象的属性被修改后，则对象就会接受到通知。简单的说就是每次指定的被观察对象的属性被修改后，KVO就会自动通知相应的观察者了。</li>
<li>与 <strong>NSNotification</strong>不同，键-值观察中并没有所谓的中心对象来为所有观察者提供变化通知。取而代之地，当有变化发生时，通知被直接发送至处于观察状态的对象。<strong>NSObject</strong> 提供这种基础的键-值观察实现方法。   </li>
<li>你可以观察任意对象属性，包括简单属性，对一或是对多关系。对多关系的观察者将会被告知发生变化的类型-也就是任意发生变化的对象。</li>
<li>键-值观察为所有对象提供自动观察兼容性。你可以通过禁用自动观察通知并<br>实现手动通知来筛选通知。</li>
</ol>
<h3 id="注册观察者"><a href="#注册观察者" class="headerlink" title="注册观察者"></a>注册观察者</h3><p>为了正确接收属性的变更通知，观察对象必须首先发送一个<br><code>addObserver:forKeyPath:options:context:</code>消息至被观察对象，用以传送观察<br>对象和需要观察的属性的关键路径，以便与其注册。选项参数指定了发送变更通知时提供给观察者的信息。 使用<code>NSKeyValueObservingOptionOld</code>选项可以将<br>初始对象值 以变更字典中的一个项的形式提供给观察者。指定<br><code>NSKeyValueObservingOptionNew</code>选项可以将新的值以一个项的形式 添加至<br>变更字典。你可以使用逐位“|”这两个常量来指定接收上述两种类型的值。<br>示例：</p>
<pre><code>BNRLogger *logger = [[BNRLogger alloc] init];
__unused NSTimer *timer =
            [NSTimer scheduledTimerWithTimeInterval:2.0
                                             target:logger
                                           selector:@selector(updateLastTime:)
                                           userInfo:nil
                                            repeats:YES];

BNRObserver *observer = [[BNRObserver alloc] init];
// 无论 lastTime 何时发生变化，都要通知我它改变的新值以及改变之前的旧值
[logger addObserver:observer
         forKeyPath:@&quot;lastTime&quot;
            options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld
            context:nil];

[[NSRunLoop mainRunLoop] run];
</code></pre><h3 id="接受变更后通知"><a href="#接受变更后通知" class="headerlink" title="接受变更后通知"></a>接受变更后通知</h3><ul>
<li>当对象的一个被观察属性发生变动时，观察者收到一个<br><code>observeValueForKeyPath:ofObject:change:context:</code>消息。所有观察者都必须<br>实现这一方法。触发观察通知的对象和键路径、包含变更细节的字典，以及观察者<br>注册时提交的上下文指针均被提交给观察者，<code>context</code>可以为任意类型参数。<br>示例：</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)observeValueForKeyPath:(<span class="built_in">NSString</span> *)keyPath</span><br><span class="line">                      ofObject:(<span class="keyword">id</span>)object</span><br><span class="line">                        change:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSKeyValueChangeKey</span>,<span class="keyword">id</span>&gt; *)change</span><br><span class="line">                       context:(<span class="keyword">void</span> *)context &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *oldValue = [change objectForKey:<span class="built_in">NSKeyValueChangeOldKey</span>];</span><br><span class="line">    <span class="built_in">NSString</span> *newValue = [change objectForKey:<span class="built_in">NSKeyValueChangeNewKey</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Observed:%@ of %@ was changed from %@ to %@"</span>,</span><br><span class="line">          keyPath,object,oldValue,newValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="移除观察者身份"><a href="#移除观察者身份" class="headerlink" title="移除观察者身份"></a>移除观察者身份</h3><ul>
<li>你可以发送一条指定观察方对象和键路径的<code>removeObserver:forKeyPath:</code><br>消息至被观察的对象，来移除一个键-值观察者。（当我们达到目的时）<br>示例：</li>
</ul>
<pre><code>[child removeObserver:self forKeyPath:@&quot;key&quot;];
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_异常处理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_异常处理/" class="post-title-link" itemprop="url">Objective-C_异常处理</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:36:42" itemprop="dateModified" datetime="2019-04-18T00:36:42+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_异常处理/" class="leancloud_visitors" data-flag-title="Objective-C_异常处理">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><hr>
<p><strong>异常</strong>：当程序执行时，发生的某种特殊状况,打断了正常的运转流程。</p>
<ul>
<li>Objective-C 的异常处理语法与Java和C++类似。通过使用 <strong>NSException</strong>, <strong>NSError</strong> 以及自定义的异常处理类来处理这些异常。</li>
<li>Objective-C 对异常的支持包括四个编译器指令: <strong>@try</strong>、<strong>@catch</strong>、<strong>@throw</strong> 以及 <strong>@finally</strong>。使用规则:              </li>
<li>如果这句或这部分代码有可能出现问题,就把它放在<code>@try{}</code>中.</li>
<li><code>@catch</code> 捕获异常,出现了问题后,会执行到这里,然后你就可以对错误进行另外的处理,比如记录日志或者提醒用户哪错了。</li>
<li><code>@finally</code> 无论是否会抛出异常,这个块中的代码都会执行。 </li>
<li><code>@throw</code>指令允许你抛出自己的异常。可以使用该指令抛出特定的异常。</li>
</ul>
<p><strong>异常分类:</strong></p>
<ol>
<li>数组越界;</li>
<li>不能识别的方法选择器;</li>
<li>野指针调用：指针指向销毁的对象;</li>
</ol>
<p>示例：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@try</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @try 块中写有可能出错的代码段</span></span><br><span class="line">    <span class="built_in">NSArray</span> *array = [<span class="built_in">NSArray</span> array];</span><br><span class="line">    [array objectAtIndex:<span class="number">1</span>];  <span class="comment">//数组越界</span></span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">@catch</span> (<span class="built_in">NSException</span> *exception) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @catch 块内处理异常代码</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"捕获到异常：%@%@"</span>,exception.name, exception.reason);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">@finally</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//可选项，不管是否出现异常，都会执行此代码段</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"始终执行的代码！"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Hello, World!"</span>);</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>Demo[17328:3652315] 捕获到异常：NSRangeException*** -[__NSArray0 objectAtIndex:]: index 1 beyond bounds for empty NSArray<br>Demo[17328:3652315] 始终执行的代码！<br>Demo[17328:3652315] Hello, World!</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_方法调用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_方法调用/" class="post-title-link" itemprop="url">Objective-C_方法调用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:36:04" itemprop="dateModified" datetime="2019-04-18T00:36:04+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_方法调用/" class="leancloud_visitors" data-flag-title="Objective-C_方法调用">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="方法调用"><a href="#方法调用" class="headerlink" title="方法调用"></a>方法调用</h3><p>OC语言中采用特定的语言调用类或者实例(对象)的方法称为<strong>发送消息</strong>或<strong>方法调用</strong>。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法调用格式：[对象 方法名];</span></span><br><span class="line">[<span class="meta">Person1 shopping</span>];   </span><br><span class="line"><span class="comment">// 调用带参数的方法 </span></span><br><span class="line">[<span class="meta">Person2 goshopping:200.0</span>];</span><br></pre></td></tr></table></figure></p>
<h3 id="set、get方法"><a href="#set、get方法" class="headerlink" title="set、get方法"></a>set、get方法</h3><p>set、get方法用来访问和修改对象里面的属性值。</p>
<ul>
<li>set方法是对某一个属性设值。</li>
<li>get方法是获取某一个属性值。<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.定义设置器方法   </span></span><br><span class="line"><span class="comment">//年龄的设置器方法：给对象的年龄设置的   </span></span><br><span class="line">-(<span class="keyword">void</span>)<span class="string">setAge:</span>(NSInteger)age;   </span><br><span class="line">-(<span class="keyword">void</span>)<span class="string">setName:</span>(NSString *)name;   </span><br><span class="line">-(<span class="keyword">void</span>)<span class="string">setWeight:</span>(<span class="keyword">float</span>)weight;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.定义多个参数的设置器方法   </span></span><br><span class="line"><span class="comment">//方法名：setName:setAge:setweight:   </span></span><br><span class="line">-(<span class="keyword">void</span>)<span class="string">setAge:</span>(NSInteger)age   <span class="string">setName:</span>(NSString *)name   <span class="string">setWeight:</span>(<span class="keyword">float</span>)weight;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.定义访问器方法   </span></span><br><span class="line"><span class="comment">//访问器方法：用于访问对象的属性值   </span></span><br><span class="line"><span class="comment">//OC里的命名规范:get方法名不需要加get前缀   </span></span><br><span class="line">-(NSInteger)age;   </span><br><span class="line">-(NSString *)name;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><p>在类的外部如：<em>main.m</em> 文件中想要给对象设置属性，要通过调用相应的设置器方法<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式：[对象 方法名]</span></span><br><span class="line"><span class="comment">// set 方法</span></span><br><span class="line">[Person setAge:<span class="number">34</span>];   </span><br><span class="line">[Person setName:<span class="string">@"张三"</span>];   </span><br><span class="line">[Person setWeight:<span class="number">80</span>];&lt;br /&gt;    </span><br><span class="line"></span><br><span class="line"><span class="comment">// get 方法  </span></span><br><span class="line"><span class="comment">// 用age变量接收调用的方法返回值   </span></span><br><span class="line"><span class="built_in">NSInteger</span> age = [Person age ];   </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"person的年龄：%ld"</span>,age);   </span><br><span class="line"><span class="built_in">NSString</span> *name = [Person name];   </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"person的名字：%@"</span>,name);   </span><br><span class="line">    </span><br><span class="line"><span class="comment">// 点语法</span></span><br><span class="line"><span class="comment">//点语法只能调用 set 和 get 方法</span></span><br><span class="line">Person.age = <span class="number">34</span>;   <span class="comment">//等效于 [Person setAge:34]; </span></span><br><span class="line"><span class="built_in">NSInteger</span> age = Person.age; <span class="comment">//等效于 NSInteger age = [Person age ];</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>字符串<br>  OC中字符串都是以@开头的,比如@<code>&quot;Hello&quot;</code>是OC中的字符串。</li>
<li>控制台打印<br>   C语言中使用<code>printf(&quot;Hello&quot;)</code>打印字符串, OC中使用NSLog函数打印字符串:<code>NSLog(@&quot;Hello&quot;)</code>;</li>
<li>把一个对象使用%@打印，实际上是调用了此对象的description，然后取的此方法的返回值打印。   <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,book);     </span><br><span class="line"><span class="comment">//与下面的方法等价       </span></span><br><span class="line"><span class="built_in">NSString</span> *desc = [book description];        </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,desc);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="初始化方法"><a href="#初始化方法" class="headerlink" title="初始化方法"></a>初始化方法</h3><ul>
<li>对象必须先创建,然后初始化,才能使用。如：<code>NSObject *object = [[NSObject alloc] init];</code>；</li>
<li>OC中的对象通过指针来声明。如：<code>Person *p</code> ；</li>
<li>初始化方法，是创建对象alloc之后调用，并且只能调用一次；</li>
<li>方法名必须以init开头；</li>
<li>返回值类型是id类型；<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义初始化方法，将姓名传入   </span></span><br><span class="line"><span class="selector-tag">-</span> (id)<span class="selector-tag">initWithName</span><span class="selector-pseudo">:(NSString</span> *)<span class="selector-tag">name</span>;</span><br><span class="line"><span class="comment">//多个参数的初始化方法的定义   </span></span><br><span class="line"><span class="selector-tag">-</span> (id)<span class="selector-tag">initWithName</span><span class="selector-pseudo">:(NSString</span> *)<span class="selector-tag">name</span> <span class="selector-tag">WithAge</span><span class="selector-pseudo">:(NSInteger)age</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="自定义初始化方法的实现"><a href="#自定义初始化方法的实现" class="headerlink" title="自定义初始化方法的实现"></a>自定义初始化方法的实现</h4><p>在<strong>init方法</strong>中,若要父类完成所需的一次性初始化,需要调用<code>[super init]</code>,init方法返回的值,描述了被初始化的对象。<br>将<code>[super init]</code>的结果赋给<code>self</code>是<strong>Objective-C</strong>的标准惯例,这么做是为了防止父类在初始化过程中返回的对象不同于原先创建的对象。</p>
<pre><code>- (id)initWithName:(NSString *)name{
//使用super可以调用父类中定义的方法
self = [super init];
if (self) {
    //赋值
    _name = name;
} 
return self;
</code></pre><p>}</p>
<p>####调用初始化方法</p>
<pre><code>Person *p1 = [[Person alloc] init];
Person *p2 = [[Person alloc] initWithName:@&quot;jack&quot;];
Person *p3 = [[Person alloc] initWithName:@&quot;Tom&quot; WithAge:22];
</code></pre><p><strong>initWithCString</strong>: c语言的字符串转换成OC的字符串<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *outputValue = [[<span class="built_in">NSString</span> alloc] initWithCString:inputValue encoding: <span class="built_in">NSUTF8StringEncoding</span>];</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_面向对象—封装、继承、多态/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_面向对象—封装、继承、多态/" class="post-title-link" itemprop="url">Objective-C_面向对象—封装、继承、多态</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:36:36" itemprop="dateModified" datetime="2019-04-18T00:36:36+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_面向对象—封装、继承、多态/" class="leancloud_visitors" data-flag-title="Objective-C_面向对象—封装、继承、多态">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="面向对象的三大特征"><a href="#面向对象的三大特征" class="headerlink" title="面向对象的三大特征:"></a>面向对象的三大特征:</h3><ol>
<li>封装 (Encapsulation) </li>
<li>继承 (Inheritance)</li>
<li>多态 (Polymorphism)</li>
</ol>
<h3 id="封装、权限修饰符（-public、-private、-protected）"><a href="#封装、权限修饰符（-public、-private、-protected）" class="headerlink" title="封装、权限修饰符（@public、@private、@protected）"></a>封装、权限修饰符（@public、@private、@protected）</h3><ul>
<li>隐藏属性、方法或者实现细节的过程称之为<strong>封装</strong>。   </li>
<li><strong>权限修饰符</strong>用来修饰<strong>实例变量</strong>,用来控制实例变量的访问权限。</li>
<li>在语法上，不存在私有<strong>方法</strong>。但约定：在 .m 文件中实现，但在 .h 文件中没有声明的方法称之为<strong>私有方法</strong>。</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Car</span> : <span class="title">NSObject</span> </span>&#123;</span><br><span class="line"><span class="comment">/*    属性的封装</span></span><br><span class="line"><span class="comment"> *   1.使类的属性不让外部直接访问</span></span><br><span class="line"><span class="comment"> */</span>  <span class="number">2.</span>外部使用这个类时，不需要关心这个类具有哪些属性</span><br><span class="line">   </span><br><span class="line"><span class="comment">//@public 修饰的成员变量，外部可以直接访问</span></span><br><span class="line"><span class="comment">//不建议直接使用，因为破坏了属性的封装性</span></span><br><span class="line"><span class="keyword">@public</span></span><br><span class="line">   <span class="built_in">NSString</span> *_name;    <span class="comment">//名称</span></span><br><span class="line">   <span class="built_in">NSString</span> *_color;   <span class="comment">//颜色</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@private 是私有属性，只能在类的内部访问</span></span><br><span class="line"><span class="comment">// 子类不能访问private修饰的属性</span></span><br><span class="line"><span class="keyword">@private</span></span><br><span class="line">   <span class="keyword">float</span> width;    <span class="comment">//车宽</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@protected 受保护的属性，</span></span><br><span class="line"><span class="comment">//类的内部，子类都可以访问，类的外部不能访问</span></span><br><span class="line"><span class="keyword">@protected</span>  <span class="comment">//默认的修饰</span></span><br><span class="line">   <span class="keyword">float</span> _capcity; <span class="comment">//耗油量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@package</span>  <span class="comment">//修饰的变量只能在当前所在的框架中访问</span></span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*方法的封装</span></span><br><span class="line"><span class="comment">1.对功能实现的细节隐藏于封装</span></span><br><span class="line"><span class="comment">2.保护属性</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">- (<span class="keyword">void</span>)run;</span><br><span class="line"></span><br><span class="line"><span class="comment">//封装还可以保护属性值的有效性</span></span><br><span class="line">- (<span class="keyword">void</span>)setCapicity:(<span class="keyword">float</span>)capicity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<pre><code>//.m 文件实现中
//调用方法时可以对属性值的有效性进行判断
- (void)setCapicity:(float)capicity{
if (capicity &lt; 0) {
    //给出错误处理
    return 0;
}
_capcity = capicity;
}
</code></pre><p>​    </p>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><ul>
<li>子类具有父类的一般特性（包括属性和行为），以及自身特殊的特性。</li>
<li>定义一个通用的类,它有基本的实例变量。子类可以继承了该类,就可以拥有这些实例变量。子类也可以定义自己的实例变量。</li>
<li>被继承的类叫<strong>超类</strong>或<strong>父类</strong>(<strong>superclass</strong>),继承超类的类叫<strong>子类</strong>或<strong>派生类</strong>(s<strong>ubclass</strong>)。</li>
<li>OC中继承的语法规则为: <code>@interface 子类 :父类</code></li>
<li>子类自动继承父类的属性和方法</li>
<li>OC语言的类都是<strong>单继承</strong>，即一个子类只能有一个父类。</li>
<li>（<em>多继承即一个子类可以有多个父类，它继承了多个父类的特性</em>）</li>
</ul>
<p><strong>父类：</strong></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@interface</span> <span class="string">ClassA :</span> NSObject</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> x;</span><br><span class="line">&#125; </span><br><span class="line">- (<span class="keyword">void</span>) run; </span><br><span class="line"><span class="meta">@end</span></span><br></pre></td></tr></table></figure>
<p><strong>子类：</strong></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@interface</span> <span class="string">ClassB :</span> ClassA  </span><br><span class="line">- (<span class="keyword">void</span>) printVar;</span><br><span class="line"><span class="meta">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h3><ul>
<li>通过方法重写，子类可以改变从父类继承的行为。</li>
<li>被重写的方法定义必须与父类中的方法完全一样。</li>
<li>方法重写必须满足两个条件1.必须要有继承关系；2.重写方法的方法名、参数列表必须都一致；<br>例如：重写 init 初始化方法。</li>
</ul>
<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><ul>
<li>多态是指同一种类型,具有多种表现形态。</li>
<li>多态的条件：1.必须存在继承关系。2.子类重写父类的方法。3.父类声明的变量指向子类对象。</li>
</ul>
<ul>
<li><strong>多态</strong>能够使来自不同类的对象定义相同名称的方法（不同的类可以有相同的方法名）。</li>
<li><strong>动态类型</strong>能使程序直到执行时才确定对象所属的类。</li>
<li><strong>动态绑定</strong>能使程序直到执行时才确定实际要调用的对象方法。<blockquote>
<p>Objective-C 系统总是跟踪对象所属的类:<br>含义：先判定对象所属的类，然后在运行时确定需要动态调用的方法，而不是在编译的时候。</p>
</blockquote>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-842d1057e0081625.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h3 id="isKindOfClass-amp-isMemberOfClass"><a href="#isKindOfClass-amp-isMemberOfClass" class="headerlink" title="isKindOfClass:&amp;isMemberOfClass:"></a><code>isKindOfClass:</code>&amp;<code>isMemberOfClass:</code></h3><ul>
<li><code>isKindOfClass:</code>确定一个对象是否是一个类的成员,或者是派生自该类的成员。</li>
<li><code>isMemberOfClass:</code>确定一个对象是否是当前类的成员。</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/30/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><span class="page-number current">31</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/32/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg" alt="独木舟的木">
            
              <p class="site-author-name" itemprop="name">独木舟的木</p>
              <div class="site-description motion-element" itemprop="description">有时候阳光很好 有时候阳光很暗</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">314</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">38</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">独木舟的木</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/31/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz',
                'X-LC-Key': 'brOnU8mOQvSjpipJvdKUAIbU',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  


  <!-- red heart -->
  <script type="text/javascript" src="/js/src/love.js"></script>
  
</body>
</html>
