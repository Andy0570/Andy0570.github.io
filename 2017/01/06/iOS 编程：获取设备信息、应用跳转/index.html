<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="google-site-verification" content="wioXOS3Gv2wXUpJ3sLtfZ4ft6YJYKNLLWSw6QoZTFYM">
  <meta name="msvalidate.01" content="C96491A81239C517A50597C54EE53CD1">
  <meta name="baidu-site-verification" content="pfEqqWwotH">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">
  <link rel="stylesheet" href="//unpkg.com/pace-js@1/themes/blue/pace-theme-minimal.css">
  <script src="//unpkg.com/pace-js@1/pace.min.js"></script>

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"andy0570.com","root":"/","scheme":"Gemini","version":"8.0.0-rc.5","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":"mac","bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null,"activeClass":"valine"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"algolia":{"appID":"0E2AON8EZF","apiKey":"22fbefd84c8343239f5c04365b9728de","indexName":"MyBlogPlatform","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"path":"search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="iOS 编程：获取设备信息、应用跳转">
<meta property="og:url" content="https://andy0570.com/2017/01/06/iOS%20%E7%BC%96%E7%A8%8B%EF%BC%9A%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF%E3%80%81%E5%BA%94%E7%94%A8%E8%B7%B3%E8%BD%AC/index.html">
<meta property="og:site_name" content="独木舟的木">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073511.jpg">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073513.jpg">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073520.jpg">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073522.gif">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073527.png">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073530.jpg">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073541.jpg">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073549.jpg">
<meta property="og:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073556.jpg">
<meta property="article:published_time" content="2017-01-06T02:19:00.000Z">
<meta property="article:modified_time" content="2019-05-01T13:37:33.000Z">
<meta property="article:author" content="独木舟的木">
<meta property="article:tag" content="iOS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073511.jpg">

<link rel="canonical" href="https://andy0570.com/2017/01/06/iOS%20%E7%BC%96%E7%A8%8B%EF%BC%9A%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF%E3%80%81%E5%BA%94%E7%94%A8%E8%B7%B3%E8%BD%AC/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>iOS 编程：获取设备信息、应用跳转 | 独木舟的木</title>
  


  <script data-pjax>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="独木舟的木" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <main class="main">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">独木舟的木</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">iOS Developer</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">14</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">36</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">310</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF"><span class="nav-number">1.</span> <span class="nav-text">1. 获取设备相关信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%E7%AC%A6UUID"><span class="nav-number">2.</span> <span class="nav-text">2. 获取设备唯一标识符 UUID</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%85%B3%E4%BA%8EAPP%E4%BB%8E%E8%AE%BE%E5%A4%87%E4%B8%8A%E5%8D%B8%E8%BD%BD%E5%90%8E%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85%E5%BC%95%E8%B5%B7UUID%E5%80%BC%E6%94%B9%E5%8F%98%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">2.1.</span> <span class="nav-text">1. 关于 APP 从设备上卸载后重新安装引起 UUID 值改变的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%B3%BB%E7%BB%9F%E5%8D%87%E7%BA%A7%E3%80%81%E8%BF%98%E5%8E%9F%E6%88%96%E8%80%85%E5%88%B7%E6%9C%BA%E4%BC%9A%E5%AF%BC%E8%87%B4UUID%E5%8F%98%E5%8C%96%E5%90%97%EF%BC%9F"><span class="nav-number">2.2.</span> <span class="nav-text">2. 系统升级、还原或者刷机会导致 UUID 变化吗？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E4%B8%BA%E7%B3%BB%E7%BB%9F%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%9A%8F%E6%9C%BA%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="nav-number">3.</span> <span class="nav-text">3. 为系统创建一个随机标识符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E5%B1%8F%E5%B9%95%E5%88%86%E8%BE%A8%E7%8E%87%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="nav-number">4.</span> <span class="nav-text">4. 获取当前屏幕分辨率的信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E8%8E%B7%E5%8F%96%E8%BF%90%E8%90%A5%E5%95%86%E4%BF%A1%E6%81%AF"><span class="nav-number">5.</span> <span class="nav-text">5. 获取运营商信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.</span> <span class="nav-text">6. 获取当前网络类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E4%BF%A1%E5%8F%B7%E5%BC%BA%E5%BC%B1"><span class="nav-number">7.</span> <span class="nav-text">7. 获取当前信号强弱</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E6%92%AD%E6%94%BE%E7%B3%BB%E7%BB%9F%E5%A3%B0%E9%9F%B3%E3%80%81%E6%8F%90%E9%86%92%E5%A3%B0%E9%9F%B3%E5%92%8C%E6%8C%AF%E5%8A%A8%E8%AE%BE%E5%A4%87"><span class="nav-number">8.</span> <span class="nav-text">8. 播放系统声音、提醒声音和振动设备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E8%8E%B7%E5%8F%96%E7%94%B5%E6%B1%A0%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF"><span class="nav-number">9.</span> <span class="nav-text">9. 获取电池相关信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E8%8E%B7%E5%8F%96APP%E7%9B%B8%E5%85%B3%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="nav-number">10.</span> <span class="nav-text">10. 获取 APP 相关的信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87IP%E5%9C%B0%E5%9D%80"><span class="nav-number">11.</span> <span class="nav-text">11. 获取设备 IP 地址</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A5%BD%E4%BA%86%EF%BC%8C%E8%BF%99%E6%98%AF%E4%B8%80%E6%AE%B5%E4%BF%9D%E5%AD%98%E4%B8%8B%E6%9D%A5%E7%9A%84%E6%9C%89%E4%BD%9C%E7%94%A8%E4%BD%86%E6%98%AF%E6%B2%A1%E6%9C%89%E5%BF%85%E8%A6%81%E5%86%99%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="nav-number">11.1.</span> <span class="nav-text">好了，这是一段保存下来的有作用但是没有必要写的代码：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-APP%E4%B8%AD%E6%89%93%E5%BC%80%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5"><span class="nav-number">12.</span> <span class="nav-text">12. APP 中打开一个网页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-APP%E4%B8%AD%E6%89%93%E5%BC%80%E5%8F%A6%E4%B8%80%E4%B8%AAAPP"><span class="nav-number">13.</span> <span class="nav-text">13. APP 中打开另一个 APP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-App-Store-%E5%BA%94%E7%94%A8%E5%88%86%E4%BA%AB%E9%93%BE%E6%8E%A5"><span class="nav-number">14.</span> <span class="nav-text">14. App Store 应用分享链接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-iOS-%E5%BA%94%E7%94%A8%E5%86%85%E8%B7%B3%E8%BD%AC%E5%88%B0-App-Store"><span class="nav-number">15.</span> <span class="nav-text">15. iOS 应用内跳转到 App Store</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E8%B7%B3%E8%BD%AC%E5%88%B0%E3%80%8C%E5%BA%94%E7%94%A8%E8%AF%A6%E6%83%85%E3%80%8D%E9%A1%B5%E9%9D%A2"><span class="nav-number">15.1.</span> <span class="nav-text">一、跳转到「应用详情」页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E8%B7%B3%E8%BD%AC%E5%88%B0%E3%80%8C%E8%AF%84%E8%AE%BA%E3%80%8D%E9%A1%B5%E9%9D%A2"><span class="nav-number">15.2.</span> <span class="nav-text">二、跳转到「评论」页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E8%B7%B3%E8%BD%AC%E5%88%B0%E3%80%8C%E6%92%B0%E5%86%99%E8%AF%84%E8%AE%BA%E3%80%8D%E9%A1%B5%E9%9D%A2"><span class="nav-number">15.3.</span> <span class="nav-text">三、跳转到「撰写评论」页面</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-%E5%BA%94%E7%94%A8%E5%86%85%E8%B7%B3%E8%BD%AC%E5%88%B0%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE"><span class="nav-number">16.</span> <span class="nav-text">16. 应用内跳转到系统设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E6%8F%90%E7%A4%BA"><span class="nav-number">17.</span> <span class="nav-text">17. 版本更新提示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">17.1.</span> <span class="nav-text">参考</span></a></li></ol></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="独木舟的木"
      src="https://static01.imgkr.com/temp/88aab3c08a3f43f5a14f21c6c357c816.JPG">
  <p class="site-author-name" itemprop="name">独木舟的木</p>
  <div class="site-description" itemprop="description">生若直木，不语斧凿。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">310</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FuZHkwNTcw" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Andy0570"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy83MjY1NDAwL2FuZHkwNTcw" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;7265400&#x2F;andy0570"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vdS84NGM1ZmFkYzdjMTg=" title="简书 → https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;84c5fadc7c18"><i class="heartbeat fa-fw"></i>简书</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOmFuZHl3aG1AMTYzLmNvbQ==" title="E-Mail → mailto:andywhm@163.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></span>
  </div>



      </section>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </header>

      
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div id="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner">
        

        <div class="content post posts-expand">
          

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/01/06/iOS%20%E7%BC%96%E7%A8%8B%EF%BC%9A%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF%E3%80%81%E5%BA%94%E7%94%A8%E8%B7%B3%E8%BD%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://static01.imgkr.com/temp/88aab3c08a3f43f5a14f21c6c357c816.JPG">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="生若直木，不语斧凿。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          iOS 编程：获取设备信息、应用跳转
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-06 10:19:00" itemprop="dateCreated datePublished" datetime="2017-01-06T10:19:00+08:00">2017-01-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-01 21:37:33" itemprop="dateModified" datetime="2019-05-01T21:37:33+08:00">2019-05-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/06/iOS%20%E7%BC%96%E7%A8%8B%EF%BC%9A%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF%E3%80%81%E5%BA%94%E7%94%A8%E8%B7%B3%E8%BD%AC/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/06/iOS%20%E7%BC%96%E7%A8%8B%EF%BC%9A%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF%E3%80%81%E5%BA%94%E7%94%A8%E8%B7%B3%E8%BD%AC/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>27k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>25 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073511.jpg" alt="Photo by [Wesley Tingey](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073508.jpg) on [Unsplash](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073509.jpg)"></p>
<a id="more"></a>



<h2 id="1-获取设备相关信息"><a href="#1-获取设备相关信息" class="headerlink" title="1.获取设备相关信息"></a>1. 获取设备相关信息</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">UIDevice *device = [[UIDevice alloc] init];  </span><br><span class="line">NSString *name = device.name;                   // 获取设备所有者的名称  </span><br><span class="line">NSString *model = device.model;                 // 获取设备的型号  </span><br><span class="line">NSString *type = device.localizedModel;         // 获取本地化版本  </span><br><span class="line">NSString *systemName = device.systemName;       // 获取当前运行的系统  </span><br><span class="line">NSString *systemVersion = device.systemVersion; // 获取当前系统的版本</span><br></pre></td></tr></tbody></table></figure>
<p>同上</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 获取设备所有者的名称——"My iPhone"</span><br><span class="line">NSString * name = [[UIDevice currentDevice] name];</span><br><span class="line"></span><br><span class="line">// 获取设备的型号——@"iPhone"</span><br><span class="line">NSString * model = [[UIDevice currentDevice] model];</span><br><span class="line"></span><br><span class="line">// //获取本地化版本</span><br><span class="line">NSString * localizedModel = [[UIDevice currentDevice] localizedModel];</span><br><span class="line"></span><br><span class="line">// 获取当前运行的系统名称——@"iOS"</span><br><span class="line">NSString * systemName = [[UIDevice currentDevice] systemName];</span><br><span class="line"></span><br><span class="line">// //获取当前系统的版本——@"10.0"、@"11.3.1"</span><br><span class="line">NSString * systemVersion = [[UIDevice currentDevice] systemVersion];</span><br></pre></td></tr></tbody></table></figure>
<p><strong>注：</strong></p>
<blockquote>
<p>上面获取设备型号的方法 <code>NSString * model = [[UIDevice currentDevice] model]; </code>只能获取 @”iPhone” ，想要获取到具体型号（例如 @”iPhone 6s Plus”、@”iPhone 7 (CDMA)”）需要使用下面这个方法：</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">// 1.需要先导入包</span><br><span class="line">#import &lt;sys/utsname.h&gt;</span><br><span class="line"></span><br><span class="line">// 2.获取方法</span><br><span class="line">// 获取设备名称</span><br><span class="line">- (NSString *)deviceModel {</span><br><span class="line">    struct utsname systemInfo;</span><br><span class="line">    uname(&amp;systemInfo);</span><br><span class="line">    NSString *deviceModel = [NSString stringWithCString:systemInfo.machine</span><br><span class="line">                                               encoding:NSUTF8StringEncoding];</span><br><span class="line">    </span><br><span class="line">    // 模拟器</span><br><span class="line">    if ([deviceModel isEqualToString:@"i386"])         return @"Simulator";</span><br><span class="line">    if ([deviceModel isEqualToString:@"x86_64"])       return @"Simulator";</span><br><span class="line">    </span><br><span class="line">    // iPhone 系列</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone1,1"])    return @"iPhone 1G";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone1,2"])    return @"iPhone 3G";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone2,1"])    return @"iPhone 3GS";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone3,1"])    return @"iPhone 4 (GSM)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone3,2"])    return @"Verizon iPhone 4";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone3,3"])    return @"iPhone 4 (CDMA/Verizon/Sprint)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone5,1"])    return @"iPhone 5";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone5,2"])    return @"iPhone 5";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone5,3"])    return @"iPhone 5C";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone5,4"])    return @"iPhone 5C";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone6,1"])    return @"iPhone 5S";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone6,2"])    return @"iPhone 5S";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone7,1"])    return @"iPhone 6 Plus";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone7,2"])    return @"iPhone 6";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone8,1"])    return @"iPhone 6s";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone8,2"])    return @"iPhone 6s Plus";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone8,4"])    return @"iPhone SE";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone9,1"])    return @"iPhone 7 (CDMA)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone9,3"])    return @"iPhone 7 (GSM)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone9,2"])    return @"iPhone 7 Plus (CDMA)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone9,4"])    return @"iPhone 7 Plus (GSM)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone10,1"])    return @"iPhone 8 (CDMA)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone10,4"])    return @"iPhone 8 (GSM)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone10,2"])    return @"iPhone 8 Plus (CDMA)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone10,5"])    return @"iPhone 8 Plus (GSM)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone10,3"])    return @"iPhone X (CDMA)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPhone10,6"])    return @"iPhone X (GSM)";</span><br><span class="line">    </span><br><span class="line">    // iPod 系列</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPod1,1"])      return @"iPod Touch 1G";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPod2,1"])      return @"iPod Touch 2G";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPod3,1"])      return @"iPod Touch 3G";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPod4,1"])      return @"iPod Touch 4G";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPod5,1"])      return @"iPod Touch 5G";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPod7,1"])      return @"iPod Touch 6G";</span><br><span class="line">    </span><br><span class="line">    // iPad 系列</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad1,1"])      return @"iPad";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad1,2"])      return @"iPad 3G";</span><br><span class="line">    </span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad2,1"])      return @"iPad 2 (WiFi)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad2,2"])      return @"iPad 2 (GSM)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad2,3"])      return @"iPad 2 (CDMA)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad2,4"])      return @"iPad 2 (32nm)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad2,5"])      return @"iPad Mini (WiFi)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad2,6"])      return @"iPad Mini (GSM)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad2,7"])      return @"iPad Mini (CDMA)";</span><br><span class="line">    </span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad3,1"])      return @"iPad 3(WiFi)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad3,2"])      return @"iPad 3(CDMA)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad3,3"])      return @"iPad 3(4G)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad3,4"])      return @"iPad 4 (WiFi)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad3,5"])      return @"iPad 4 (4G)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad3,6"])      return @"iPad 4 (CDMA)";</span><br><span class="line">    </span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,1"])      return @"iPad Air";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,2"])      return @"iPad Air";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,3"])      return @"iPad Air";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,4"])      return @"iPad Mini 2";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,5"])      return @"iPad Mini 2";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,6"])      return @"iPad Mini 2";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,7"])      return @"iPad Mini 3";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,8"])      return @"iPad Mini 3";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad4,9"])      return @"iPad Mini 3";</span><br><span class="line">    </span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad5,1"])      return @"iPad Mini 4";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad5,2"])      return @"iPad Mini 4";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad5,3"])      return @"iPad Air 2";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad5,4"])      return @"iPad Air 2";</span><br><span class="line">    </span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad6,3"])      return @"iPad PRO (12.9)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad6,4"])      return @"iPad PRO (12.9)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad6,7"])      return @"iPad PRO (9.7)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad6,8"])      return @"iPad PRO (9.7)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad6,11"])      return @"iPad 5";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad6,12"])      return @"iPad 5";</span><br><span class="line">    </span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad7,1"])      return @"iPad PRO 2 (12.9)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad7,2"])      return @"iPad PRO 2 (12.9)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad7,3"])      return @"iPad PRO (10.5)";</span><br><span class="line">    if ([deviceModel isEqualToString:@"iPad7,4"])      return @"iPad PRO (10.5)";</span><br><span class="line">    </span><br><span class="line">    return deviceModel;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 3.使用方法</span><br><span class="line">// 获取移动设备名称</span><br><span class="line">NSString *deviceModel = [self deviceModelName];</span><br></pre></td></tr></tbody></table></figure>
<p>具体型号和设备名称参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cudGhlaXBob25ld2lraS5jb20vd2lraS9Nb2RlbHM=">https://www.theiphonewiki.com/wiki/Models<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="2-获取设备唯一标识符UUID"><a href="#2-获取设备唯一标识符UUID" class="headerlink" title="2.获取设备唯一标识符UUID"></a>2. 获取设备唯一标识符 UUID</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString *UUIDString = [[[UIDevice currentDevice] identifierForVendor] UUIDString];  </span><br></pre></td></tr></tbody></table></figure>

<p><strong>注：</strong></p>
<blockquote>
<p>这个唯一标识符 UUID 也有点问题，在 iOS 系统升级或者 APP 卸载后重新安装，可能会产生获取到的 UUID 是不同的问题。</p>
</blockquote>
<p>科普文： <span class="exturl" data-url="aHR0cDovL3d3dy5za3lmb3gub3JnL2lvcy11dWlkLXVkaWQta2V5Y2hhaW4uaHRtbA==">iOS 开发之获取设备唯一标识符<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="1-关于APP从设备上卸载后重新安装引起UUID值改变的问题"><a href="#1-关于APP从设备上卸载后重新安装引起UUID值改变的问题" class="headerlink" title="1.关于APP从设备上卸载后重新安装引起UUID值改变的问题"></a>1. 关于 APP 从设备上卸载后重新安装引起 UUID 值改变的问题</h3><ul>
<li><p><span class="exturl" data-url="aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MDc1MzI0Ni9pb3MtdXVpZC1kaWZmZXJlbnQtZm9yLXNhbWUtYXBwLWRlcGVuZGluZy1pZi1pbnN0YWxsZWQtdGhyb3VnaC14Y29kZS1vci10ZXN0ZmxpZw==">stackoverflow 社区中的相关讨论<i class="fa fa-external-link-alt"></i></span>：其中有一条：在 iOS 设备上安装应用程序（或同一供应商的其他应用程序）时，此属性中的值保持不变。 当用户从设备中删除该供应商的所有应用程序，然后重新安装一个或多个应用程序时，该值会更改。</p>
</li>
<li><p>在<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL3JlZmVyZW5jZS91aWtpdC91aWRldmljZS8xNjIwMDU5LWlkZW50aWZpZXJmb3J2ZW5kb3I="> Apple API Reference：UIDevice——identifierForVendor<i class="fa fa-external-link-alt"></i></span>中也可以找到这样一段描述：</p>
<blockquote>
<p>The value in this property remains the same while the app (or another app from the same vendor) is installed on the iOS device. The value changes when the user deletes all of that vendor’s apps from the device and subsequently reinstalls one or more of them. The value can also change when installing test builds using Xcode or when installing an app on a device using ad-hoc distribution. Therefore, if your app stores the value of this property anywhere, you should gracefully handle situations where the identifier changes.<br>翻译：在 iOS 设备上安装应用程序（或同一供应商的其他应用程序）时，此属性中的值保持不变。 当用户从设备中删除该供应商的所有应用程序，然后重新安装一个或多个应用程序时，该值会更改。 使用 Xcode 安装测试版本时或使用 ad-hoc 分发在设备上安装应用程序时，该值也可能更改。 因此，如果您的应用程序要在任何位置存储此属性的值，您应该适当地处理标识符会改变的情况。</p>
</blockquote>
</li>
<li><p>如果用 <strong>keychain</strong>（钥匙串）来保存 UUID 这个方法：<br><strong>keychain</strong> 顾名思义，是钥匙串的意思，是苹果公司 Mac OS 中的密码管理系统。当使用 UUID 来作为设备的唯一标识时，获取到 UUID 后，如果用 <strong>NSUserDefaults</strong> 存储，当程序（这里指某一供应商在该设备上的所有应用程序）被卸载后重装时，再获得的 UUID 和之前就不同了。使用 <strong>keychain</strong> 存储可以保证 APP 被卸载重装时，UUID 不会被删除，还是保存在系统的钥匙串中。所以我们可以将 UUID 存储到 <strong>keychain</strong> 里面，需要用到的时候从 <strong>keychain</strong> 中去取，这样可以保证 UUID 的唯一性。但当刷机或者升级系统后，UUID 还是会改变的。<br>该方法可参考的资料：</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NvZmZlcy9TQU1LZXljaGFpbg==">SAMKeychain<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wLzM3ODk5ZTc2N2Y1Yg==">iOS 如何获取设备的唯一标识（UUID）@若锦<i class="fa fa-external-link-alt"></i></span> ：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3d4endvcmsvR2V0RGV2aWNlVVVJRA==">Demo:GitHub<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wLzU3MjgzM2VmYWFjNA==">iOS 获取 UUID，并使用 keychain 存储 @wooke<i class="fa fa-external-link-alt"></i></span></li>
</ul>
</li>
<li><p><span class="exturl" data-url="aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTg3ODU2MC9ob3ctdG8tcHJlc2VydmUtaWRlbnRpZmllcmZvcnZlbmRvci1pbi1pb3MtYWZ0ZXItdW5pbnN0YWxsaW5nLWlvcy1hcHAtb24tZGV2aWNl">stackoverflow 社区中<i class="fa fa-external-link-alt"></i></span>有人讨论到，如果开启了 iCloud 同步功能（synchronisation ），KeyChain（钥匙串）就会被同步，所有同步的设备也将获得相同的 UUID。</p>
</li>
</ul>
<h3 id="2-系统升级、还原或者刷机会导致UUID变化吗？"><a href="#2-系统升级、还原或者刷机会导致UUID变化吗？" class="headerlink" title="2.系统升级、还原或者刷机会导致UUID变化吗？"></a>2. 系统升级、还原或者刷机会导致 UUID 变化吗？</h3><p>目前我得到的答案是：用户还原设备或刷机会导致 <strong>KeyChain</strong>（钥匙串）数据被删除。系统升级还不知道，没有测过。<br>stackoverflow 上的讨论：<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/41651936/if-users-upgrade-ios-system-will-the-uuid-saved-in-keychain-also-been-changed-or"><span class="exturl" data-url="aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MTY1MTkzNi9pZi11c2Vycy11cGdyYWRlLWlvcy1zeXN0ZW0td2lsbC10aGUtdXVpZC1zYXZlZC1pbi1rZXljaGFpbi1hbHNvLWJlZW4tY2hhbmdlZC1vcg==">If users upgrade iOS system,will the UUID saved in keyChain also been changed or deleted?<i class="fa fa-external-link-alt"></i></span></a><br>如果你有答案或有相关的解决方法，不妨留言吧。</p>
<ul>
<li>还有一种方法是：使用设备的 mac 地址结合 bundle 标识符生成一个新的散列的唯一标识符。<br><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dla2l0ei9VSURldmljZS13aXRoLVVuaXF1ZUlkZW50aWZpZXItZm9yLWlPUy01">UIDevice-with-UniqueIdentifier-for-iOS-5<i class="fa fa-external-link-alt"></i></span>, 但是该文档的第一行描述 <code>NOTE: this is not going to work under iOS 7</code> 看来这个方法估计也是不能用的。</li>
<li>参考:<span class="exturl" data-url="aHR0cDovL3d3dy5za3lmb3gub3JnL2lvcy11dWlkLXVkaWQta2V5Y2hhaW4uaHRtbA==">iOS 开发之获取设备唯一标识符<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="3-为系统创建一个随机标识符"><a href="#3-为系统创建一个随机标识符" class="headerlink" title="3.为系统创建一个随机标识符"></a>3. 为系统创建一个随机标识符</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(NSString*) createUUID  {  </span><br><span class="line">    NSString *id = [[NSUserDefaults standardUserDefaults] objectForKey:@"UUID"];    //获取标识为"UUID"的值  </span><br><span class="line">    if(id == nil)  </span><br><span class="line">    {  </span><br><span class="line">        if([[[UIDevice currentDevice] systemVersion] floatValue] &gt; 6.0)  </span><br><span class="line">        {  </span><br><span class="line">            NSString *identifierNumber = [[NSUUID UUID] UUIDString];                //ios 6.0 之后可以使用的api  </span><br><span class="line">            [[NSUserDefaults standardUserDefaults] setObject:identifierNumber forKey:@"UUID"];  //保存为UUID  </span><br><span class="line">            [[NSUserDefaults standardUserDefaults] synchronize];  </span><br><span class="line">        }  </span><br><span class="line">        else{  </span><br><span class="line">            CFUUIDRef uuid = CFUUIDCreate(NULL);  </span><br><span class="line">            CFStringRef uuidString = CFUUIDCreateString(NULL, uuid);                    //ios6.0之前使用的api  </span><br><span class="line">            NSString *identifierNumber = [NSString stringWithFormat:@"%@", uuidString];  </span><br><span class="line">            [[NSUserDefaults standardUserDefaults] setObject:identifierNumber forKey:@"UUID"];  </span><br><span class="line">            [[NSUserDefaults standardUserDefaults] synchronize];  </span><br><span class="line">            CFRelease(uuidString);  </span><br><span class="line">            CFRelease(uuid);  </span><br><span class="line">        }  </span><br><span class="line">        return [[NSUserDefaults standardUserDefaults] objectForKey@"UUID"];  </span><br><span class="line">    }  </span><br><span class="line">    return id;  </span><br><span class="line">}  </span><br></pre></td></tr></tbody></table></figure>
<h2 id="4-获取当前屏幕分辨率的信息"><a href="#4-获取当前屏幕分辨率的信息" class="headerlink" title="4. 获取当前屏幕分辨率的信息"></a>4. 获取当前屏幕分辨率的信息</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CGRect rect = [[UIScreen mainScreen] bounds];  </span><br><span class="line">CGFloat scale = [[UIScreen mainScreen].scale];  </span><br><span class="line">CGFloat width = rect.size.width * scale;  </span><br><span class="line">CGFloat height = rect.size.height * scale; </span><br></pre></td></tr></tbody></table></figure>

<h2 id="5-获取运营商信息"><a href="#5-获取运营商信息" class="headerlink" title="5. 获取运营商信息"></a>5. 获取运营商信息</h2><ul>
<li><p>需要先导入头文件</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;CoreTelephony/CTCarrier.h&gt;  </span><br><span class="line">#import &lt;CoreTelephony/CTTelephonyNetworkInfo.h&gt;  </span><br></pre></td></tr></tbody></table></figure></li>
<li><p>创建对象</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CCTelephonyNetworkInfo *info = [[CTTelephonyNetworkInfo alloc] init];  </span><br></pre></td></tr></tbody></table></figure></li>
<li><p>获取运行商的名称</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CTCarrier *carrier = [info subscriberCellularProvider];  </span><br><span class="line">NSString *mCarrier = [NSString stringWithFormat:@"%@",[carrier carrierName]];  </span><br></pre></td></tr></tbody></table></figure>

</li>
</ul>
<h2 id="6-获取当前网络类型"><a href="#6-获取当前网络类型" class="headerlink" title="6.获取当前网络类型"></a>6. 获取当前网络类型</h2><p>iOS 7 之后可以按照以下方式获取。方便而且类型多</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString *mConnectType = [[NSString alloc] initWithFormat:@"%@",info.currentRadioAccessTechnology];</span><br></pre></td></tr></tbody></table></figure>
<p>类型有以下：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CTRadioAccessTechnologyGPRS         //介于2G和3G之间，也叫2.5G ,过度技术    </span><br><span class="line">CTRadioAccessTechnologyEdge         //EDGE为GPRS到第三代移动通信的过渡，EDGE俗称2.75G   </span><br><span class="line">CTRadioAccessTechnologyWCDMA           </span><br><span class="line">CTRadioAccessTechnologyHSDPA           //亦称为3.5G(3?G)  </span><br><span class="line">CTRadioAccessTechnologyHSUPA           //3G到4G的过度技术  </span><br><span class="line">CTRadioAccessTechnologyCDMA1x          //3G      </span><br><span class="line">CTRadioAccessTechnologyCDMAEVDORev0    //3G标准  </span><br><span class="line">CTRadioAccessTechnologyCDMAEVDORevA    </span><br><span class="line">CTRadioAccessTechnologyCDMAEVDORevB    </span><br><span class="line">CTRadioAccessTechnologyeHRPD        //电信使用的一种3G到4G的演进技术， 3.75G       </span><br><span class="line">CTRadioAccessTechnologyLTE          //接近4G   </span><br></pre></td></tr></tbody></table></figure>
<p><strong>注：</strong></p>
<blockquote>
<p>如果你使用<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FGTmV0d29ya2luZy9BRk5ldHdvcmtpbmc="> AFNetworking<i class="fa fa-external-link-alt"></i></span>框架的话，该框架中有一个检测网络状态的方法:</p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark 网络状态监测</span><br><span class="line">- (void)initNetworkReachabilityManager {</span><br><span class="line">    AFNetworkReachabilityManager *networkReachabilityManager = [AFNetworkReachabilityManager sharedManager];</span><br><span class="line">    [networkReachabilityManager setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) {</span><br><span class="line">        switch (status) {</span><br><span class="line">            case AFNetworkReachabilityStatusUnknown:</span><br><span class="line">                NSLog(@"网络状态检测：未知");</span><br><span class="line">                break;</span><br><span class="line">            case AFNetworkReachabilityStatusNotReachable:</span><br><span class="line">                NSLog(@"网络状态检测：没有网络");</span><br><span class="line">                break;</span><br><span class="line">            case AFNetworkReachabilityStatusReachableViaWWAN:</span><br><span class="line">                NSLog(@"网络状态检测：3G网络");</span><br><span class="line">                break;</span><br><span class="line">            case AFNetworkReachabilityStatusReachableViaWiFi:</span><br><span class="line">                NSLog(@"网络状态检测：WiFi");</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        }</span><br><span class="line">    }];</span><br><span class="line">    // 开启</span><br><span class="line">    [networkReachabilityManager startMonitoring];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>封装了这个方法以后在 <strong>viewController.m</strong> 的 <code>- (void)viewDidLoad</code> 方法中调用：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 检测网络状态</span><br><span class="line">[self checkServerState];</span><br></pre></td></tr></tbody></table></figure>

<h2 id="7-获取当前信号强弱"><a href="#7-获取当前信号强弱" class="headerlink" title="7. 获取当前信号强弱"></a>7. 获取当前信号强弱</h2><p>这个貌似没有给出官方的 api，但是网上有人说可以用私有的 api 实现，但是通不过 appStore 的审核，方法如下：<br>利用 linux 下动态库显式调用 api 的函数。先包含头文件 <code>#import &lt;dlfcn.h&gt; </code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(int) getSignalLevel  {  </span><br><span class="line">//获取库句柄</span><br><span class="line">voidvoid *libHandle = dlopen("/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony",RTLD_LAZY); </span><br><span class="line">//定义一个与将要获取的函数匹配的函数指针 </span><br><span class="line">int (*CTGetSignalStrength)(); </span><br><span class="line">//获取指定名称的函数  </span><br><span class="line">CTGetSignalStrength = (int(*)())dlsym(libHandle,"CTGetSignalStrength");   </span><br><span class="line">  </span><br><span class="line">if(CTGetSignalStrength == NULL)  </span><br><span class="line">    return -1;  </span><br><span class="line">else{  </span><br><span class="line">    int level = CTGetSignalStrength();  </span><br><span class="line">    dlclose(libHandle); //切记关闭库  </span><br><span class="line">    return level  </span><br><span class="line">    }  </span><br><span class="line">}  </span><br></pre></td></tr></tbody></table></figure>

<h2 id="8-播放系统声音、提醒声音和振动设备"><a href="#8-播放系统声音、提醒声音和振动设备" class="headerlink" title="8. 播放系统声音、提醒声音和振动设备"></a>8. 播放系统声音、提醒声音和振动设备</h2><ol>
<li>需要加入 <code>AudioToolbox.framework</code> 框架</li>
<li>然后导入头文件<br> <code>#import &lt;AudioToolbox/AudioToolbox.h&gt;</code>    </li>
<li>在需要震动的地方添加代码：</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 播放系统声音</span><br><span class="line">AudioServicesPlaySystemSound(1005);</span><br><span class="line"></span><br><span class="line">// 播放提醒声音</span><br><span class="line">AudioServicesPlayAlertSound(1006);</span><br><span class="line"></span><br><span class="line">// 执行震动</span><br><span class="line">AudioServicesPlaySystemSound ( kSystemSoundID_Vibrate) ;  </span><br></pre></td></tr></tbody></table></figure>
<p>但是貌似这个执行震动不支持传入震动时间和模式，自己去控制吧。<br>附：声音文件列表参考：<span class="exturl" data-url="aHR0cDovL2lwaG9uZWRldndpa2kubmV0L2luZGV4LnBocC9BdWRpb1NlcnZpY2Vz">wiki: AudioServices<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="9-获取电池相关信息"><a href="#9-获取电池相关信息" class="headerlink" title="9. 获取电池相关信息"></a>9. 获取电池相关信息</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">@implementation BatterMonitor  </span><br><span class="line">//获取电池当前的状态，共有4种状态  </span><br><span class="line">-(NSString*) getBatteryState {    </span><br><span class="line">    UIDevice *device = [UIDevice currentDevice];    </span><br><span class="line">    if (device.batteryState == UIDeviceBatteryStateUnknown) {    </span><br><span class="line">        return @"UnKnow";    </span><br><span class="line">    }else if (device.batteryState == UIDeviceBatteryStateUnplugged){    </span><br><span class="line">        return @"Unplugged";    </span><br><span class="line">    }else if (device.batteryState == UIDeviceBatteryStateCharging){    </span><br><span class="line">        return @"Charging";    </span><br><span class="line">    }else if (device.batteryState == UIDeviceBatteryStateFull){    </span><br><span class="line">        return @"Full";    </span><br><span class="line">    }  </span><br><span class="line">    return nil;   </span><br><span class="line">}</span><br><span class="line">   </span><br><span class="line">//获取电量的等级，0.00~1.00  </span><br><span class="line">-(float) getBatteryLevel {    </span><br><span class="line">    return [UIDevice currentDevice].batteryLevel;  </span><br><span class="line">}   </span><br><span class="line">  </span><br><span class="line">-(void) getBatteryInfo  {  </span><br><span class="line">    NSString *state = getBatteryState();  </span><br><span class="line">    float level = getBatteryLevel()*100.0;  </span><br><span class="line">    //yourControlFunc(state, level);  //写自己要实现的获取电量信息后怎么处理  </span><br><span class="line">}  </span><br><span class="line">  </span><br><span class="line">//打开对电量和电池状态的监控，类似定时器的功能  </span><br><span class="line">-(void) didLoad  {  </span><br><span class="line">    [[UIDevice currentDevice] setBatteryMonitoringEnable:YES];  </span><br><span class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getBatteryInfo:) name:UIDeviceBatteryStateDidChangeNotification object:nil];  </span><br><span class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getBatteryInfo:) name:UIDeviceBatteryLevelDidChangeNotification object:nil];  </span><br><span class="line">    [NSTimer scheduledTimerWithTimeInterval:0.5f target:self selector:@selector(getBatteryInfo:) userInfo:nil repeats:YES];  </span><br><span class="line">}  </span><br><span class="line">@end  </span><br></pre></td></tr></tbody></table></figure>

<h2 id="10-获取APP相关的信息"><a href="#10-获取APP相关的信息" class="headerlink" title="10. 获取APP相关的信息"></a>10. 获取 APP 相关的信息</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">NSDictionary *infoDic = [[NSBundle mainBundle] infoDictionary];</span><br><span class="line"></span><br><span class="line">// 获取当前APP版本号，本地程序版本号</span><br><span class="line">NSString *appVersion = [infoDic objectForKey:@"CFBundleShortVersionString"];</span><br><span class="line"></span><br><span class="line">// 获取App的build版本</span><br><span class="line">NSString *appBuildVersion = [infoDic objectForKey:@"CFBundleVersion"];</span><br><span class="line"></span><br><span class="line">// 获取App的名称</span><br><span class="line">NSString *appName = [infoDic objectForKey:@"CFBundleDisplayName"];</span><br><span class="line"></span><br><span class="line">// ******************************</span><br><span class="line">// 以下四个获取方法摘自 YYCategories：</span><br><span class="line">- (NSString *)appBundleName {</span><br><span class="line">    return [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleName"];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (NSString *)appBundleID {</span><br><span class="line">    return [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleIdentifier"];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (NSString *)appVersion {</span><br><span class="line">    return [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleShortVersionString"];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (NSString *)appBuildVersion {</span><br><span class="line">    return [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="11-获取设备IP地址"><a href="#11-获取设备IP地址" class="headerlink" title="11. 获取设备IP地址"></a>11. 获取设备 IP 地址</h2><p>某天服务器端的同学跑来说想获取并记录移动端的 IP 地址，非要在每一个请求 Dictionary 里再多放一个 IP 地址，于是 Internet 上找到了这个解决方法，<code>(NSDictionary *)getIPAddresses</code> 可以返回一个 Dictionary, 里面记录着有关 IP 地址的所有信息：</p>
<p><strong>Simulator</strong> 的 Log：<br><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073513.jpg" alt="模拟器"></p>
<hr>
<p><strong>iPhone</strong> 的 Log<br><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073520.jpg" alt="真机"></p>
<p>可以再通过：<br><code>NSString *IP = [dict objectForKey:@"en0/ipv4"];</code> 来取得所需的 IP 地址，问题就在于 <strong>Simulator</strong> 中对应 IP 地址的 <strong>Key</strong> 和 <strong>iPhone</strong> 中对应 IP 地址的 <strong>Key</strong> 是不同的，正在纠结的时候 Leader 说获得 IP 地址完全没有必要让移动端的额外给，服务器本身是有方法获得这个 IP 地址的。。。吭哧吭哧忙活了半天原来咱白干了，好吧，删代码。。。等一下，先保存下吧！</p>
<h3 id="好了，这是一段保存下来的有作用但是没有必要写的代码："><a href="#好了，这是一段保存下来的有作用但是没有必要写的代码：" class="headerlink" title="好了，这是一段保存下来的有作用但是没有必要写的代码："></a>好了，这是一段保存下来的有作用但是没有必要写的代码：</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">// 需要导入的包</span><br><span class="line">#import "HQLGetIPAddress.h"</span><br><span class="line">#import &lt;ifaddrs.h&gt;</span><br><span class="line">#import &lt;arpa/inet.h&gt;</span><br><span class="line">#import &lt;net/if.h&gt;</span><br><span class="line"></span><br><span class="line">// 宏定义</span><br><span class="line">#define IOS_CELLULAR    @"pdp_ip0"</span><br><span class="line">#define IOS_WIFI        @"en0"</span><br><span class="line">//#define IOS_VPN       @"utun0"</span><br><span class="line">#define IP_ADDR_IPv4    @"ipv4"</span><br><span class="line">#define IP_ADDR_IPv6    @"ipv6"</span><br><span class="line"></span><br><span class="line">#pragma mark - 获取设备当前网络IP地址</span><br><span class="line"></span><br><span class="line">- (NSString *)getIPAddress:(BOOL)preferIPv4</span><br><span class="line">{</span><br><span class="line">    NSArray *searchArray = preferIPv4 ?</span><br><span class="line">    @[ /*IOS_VPN @"/" IP_ADDR_IPv4, IOS_VPN @"/" IP_ADDR_IPv6,*/ IOS_WIFI @"/" IP_ADDR_IPv4, IOS_WIFI @"/" IP_ADDR_IPv6, IOS_CELLULAR @"/" IP_ADDR_IPv4, IOS_CELLULAR @"/" IP_ADDR_IPv6 ] :</span><br><span class="line">    @[ /*IOS_VPN @"/" IP_ADDR_IPv6, IOS_VPN @"/" IP_ADDR_IPv4,*/ IOS_WIFI @"/" IP_ADDR_IPv6, IOS_WIFI @"/" IP_ADDR_IPv4, IOS_CELLULAR @"/" IP_ADDR_IPv6, IOS_CELLULAR @"/" IP_ADDR_IPv4 ] ;</span><br><span class="line">    </span><br><span class="line">    NSDictionary *addresses = [self getIPAddresses];</span><br><span class="line">    NSLog(@"addresses: %@", addresses);</span><br><span class="line">    </span><br><span class="line">    __block NSString *address;</span><br><span class="line">    [searchArray enumerateObjectsUsingBlock:^(NSString *key, NSUInteger idx, BOOL *stop)</span><br><span class="line">     {</span><br><span class="line">         address = addresses[key];</span><br><span class="line">         if(address) *stop = YES;</span><br><span class="line">     } ];</span><br><span class="line">    return address ? address : @"0.0.0.0";</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">//获取所有相关IP信息</span><br><span class="line">- (NSDictionary *)getIPAddresses</span><br><span class="line">{</span><br><span class="line">    NSMutableDictionary *addresses = [NSMutableDictionary dictionaryWithCapacity:8];</span><br><span class="line">    </span><br><span class="line">    // retrieve the current interfaces - returns 0 on success</span><br><span class="line">    struct ifaddrs *interfaces;</span><br><span class="line">    if(!getifaddrs(&amp;interfaces)) {</span><br><span class="line">        // Loop through linked list of interfaces</span><br><span class="line">        struct ifaddrs *interface;</span><br><span class="line">        for(interface=interfaces; interface; interface=interface-&gt;ifa_next) {</span><br><span class="line">            if(!(interface-&gt;ifa_flags &amp; IFF_UP) /* || (interface-&gt;ifa_flags &amp; IFF_LOOPBACK) */ ) {</span><br><span class="line">                continue; // deeply nested code harder to read</span><br><span class="line">            }</span><br><span class="line">            const struct sockaddr_in *addr = (const struct sockaddr_in*)interface-&gt;ifa_addr;</span><br><span class="line">            char addrBuf[ MAX(INET_ADDRSTRLEN, INET6_ADDRSTRLEN) ];</span><br><span class="line">            if(addr &amp;&amp; (addr-&gt;sin_family==AF_INET || addr-&gt;sin_family==AF_INET6)) {</span><br><span class="line">                NSString *name = [NSString stringWithUTF8String:interface-&gt;ifa_name];</span><br><span class="line">                NSString *type;</span><br><span class="line">                if(addr-&gt;sin_family == AF_INET) {</span><br><span class="line">                    if(inet_ntop(AF_INET, &amp;addr-&gt;sin_addr, addrBuf, INET_ADDRSTRLEN)) {</span><br><span class="line">                        type = IP_ADDR_IPv4;</span><br><span class="line">                    }</span><br><span class="line">                } else {</span><br><span class="line">                    const struct sockaddr_in6 *addr6 = (const struct sockaddr_in6*)interface-&gt;ifa_addr;</span><br><span class="line">                    if(inet_ntop(AF_INET6, &amp;addr6-&gt;sin6_addr, addrBuf, INET6_ADDRSTRLEN)) {</span><br><span class="line">                        type = IP_ADDR_IPv6;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                if(type) {</span><br><span class="line">                    NSString *key = [NSString stringWithFormat:@"%@/%@", name, type];</span><br><span class="line">                    addresses[key] = [NSString stringWithUTF8String:addrBuf];</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        // Free memory</span><br><span class="line">        freeifaddrs(interfaces);</span><br><span class="line">    }</span><br><span class="line">    return [addresses count] ? addresses : nil;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="12-APP中打开一个网页"><a href="#12-APP中打开一个网页" class="headerlink" title="12. APP中打开一个网页"></a>12. APP 中打开一个网页</h2><p>这个比较简单，直接用提供的接口 openURL 即可。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// APP中打开一个网页</span><br><span class="line">NSURL *url= [NSURL URLWithString:@"https://www.apple.com"];</span><br><span class="line">if ([[UIApplication sharedApplication] canOpenURL:url]) {</span><br><span class="line">    if (@available(iOS 10.0, *)) {</span><br><span class="line">        [[UIApplication sharedApplication] openURL:url options:@{} completionHandler:^(BOOL success) {</span><br><span class="line">            if (success) {</span><br><span class="line">                // 打开网页成功...</span><br><span class="line">            } else {</span><br><span class="line">                // 打开网页失败...</span><br><span class="line">            }</span><br><span class="line">        }];</span><br><span class="line">    } else {</span><br><span class="line">        [[UIApplication sharedApplication] openURL:url];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="13-APP中打开另一个APP"><a href="#13-APP中打开另一个APP" class="headerlink" title="13. APP中打开另一个APP"></a>13. APP 中打开另一个 APP</h2><p>打开另一个 app 还是可以通过 openURL 来实现。但是要分两种情况。第一种是启动内置的应用，一般的电话，浏览器，短信和邮件可以直接调用并添加参数，譬如： </p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://10086"]];  </span><br><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"mailto://devprograms@apple.com"]];  </span><br><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"sms://10086"]];  </span><br></pre></td></tr></tbody></table></figure>
<p>第二种情况是要打开自己开发的 app，这种情况则要为将要打开的 app 注册一个 URL 协议。这个可以在项目的文件 info.plist 中注册。主要操作为：</p>
<ul>
<li><p>Step1. 右键，选择 “Add Row”</p>
</li>
<li><p>Step2. Key 值选择 “URL types”</p>
</li>
<li><p>Step3. 打开 “Item 0″, 然后为该 key 增加一个 URL identifier。可以是任何值，但建议用 “反域名”(例如 “com.fcplayer.testHello”)。</p>
</li>
<li><p>Step4. 在 “Item 0” 下再加一行。</p>
</li>
<li><p>Step5. 选择 “URL Schemes” 作为 Key。</p>
</li>
<li><p>Step6. 输入你的 URL 协议名 (例如 “testHello://” 应写做 “testHello”)。如果有必要，你可以在这里加入多个协议。</p>
</li>
</ul>
<p>其实在打开的时候只需要 <strong>URL Schemes</strong> 即可，<strong>URL identifier</strong> 是可选项。如果需要传送参数，可以在 URL Schemes:// 添加你的参数，格式和网页开发的传递参数差不多。（又或者 URL Schemes://URL identifier@添加的参数）关键是要和接收参数方定义好处理的方式。然后在需要打开的地方添加代码：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSString *url = @"URL Schemes的路径"  </span><br><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];</span><br></pre></td></tr></tbody></table></figure>
<p>推荐阅读：<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9hMTg5NWM3NjY0MDA=">LSApplicationQueriesSchemes– 关于 info.plist 第三方登录 添加 URL Schemes 白名单<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="14-App-Store-应用分享链接"><a href="#14-App-Store-应用分享链接" class="headerlink" title="14. App Store 应用分享链接"></a>14. App Store 应用分享链接</h2><p>应用分享链接获取方法：</p>
<ol>
<li>打开 <strong>「iTunes」</strong>应用；</li>
<li>进入  App Store； </li>
<li>🔍搜索并找到你的应用；</li>
<li>鼠标右击应用 ICON 图标并拷贝链接；</li>
</ol>
<p><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073522.gif"></p>
<p>以「支付宝」为例：<span class="exturl" data-url="aHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL2NuL2FwcC8lRTYlOTQlQUYlRTQlQkIlOTglRTUlQUUlOUQtJUU4JUFFJUE5JUU3JTk0JTlGJUU2JUI0JUJCJUU2JTlCJUI0JUU3JUFFJTgwJUU1JThEJTk1L2lkMzMzMjA2Mjg5P210PTg=">https://itunes.apple.com/cn/app/ 支付宝 - 让生活更简单 /id333206289?mt=8<i class="fa fa-external-link-alt"></i></span></p>
<p>然后就可以把这个链接<span class="exturl" data-url="aHR0cHM6Ly9jbGkuaW0vdXJsP2IzODlkMDkwMGM1ODk0ZTU1YTY4Mjk4MDg0NTU1Mzg0">生成二维码<i class="fa fa-external-link-alt"></i></span>，扫一扫下载：<br><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073527.png"><br>图片来源：<span class="exturl" data-url="aHR0cHM6Ly9waXhhYmF5LmNvbS96aC9xci0lRTclQTAlODEtJUU2JTg5JUFCJUU2JThGJThGJUU0JUJCJUFBLSVFNiU5RCVBMSVFNyVBMCU4MS0lRTYlOUQlQTElRTclQTAlODElRTYlODklQUIlRTYlOEYlOEYlRTUlOTklQTgtJUU3JTlGJUE5JUU5JTk4JUI1JUU3JUEwJTgxLSVFNiU5OSVCQSVFOCU4MyVCRCVFNiU4OSU4QiVFNiU5QyVCQS0lRTglQUYlQkItMTU2NzE3Lw==">pixabay<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="15-iOS-应用内跳转到-App-Store"><a href="#15-iOS-应用内跳转到-App-Store" class="headerlink" title="15. iOS 应用内跳转到 App Store"></a>15. iOS 应用内跳转到 App Store</h2><p>APP ID 通过类型常量定义好：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static NSString * const APPID = @"333206289";</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>APP ID 去哪儿找，怎么设置？</p>
<p>在 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RldmVsb3Av">iTunes Connect<i class="fa fa-external-link-alt"></i></span> 中新建 APP 后，系统会默认分配一个 ID 给你。忘记的话也可以在应用分享链接的 URL 中提取。</p>
</blockquote>
<p><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073530.jpg"></p>
<h3 id="一、跳转到「应用详情」页面"><a href="#一、跳转到「应用详情」页面" class="headerlink" title="一、跳转到「应用详情」页面"></a>一、跳转到「应用详情」页面</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">NSString *urlStr = [NSString stringWithFormat:@"itms-apps://itunes.apple.com/app/id%@", APPID];</span><br><span class="line">NSURL *url = [NSURL URLWithString:urlStr];</span><br><span class="line">// 跳转之前判断是否可以打开URL</span><br><span class="line">if ([[UIApplication sharedApplication] canOpenURL:url]) {</span><br><span class="line">    if (@available(iOS 10.0, *)) {</span><br><span class="line">        // iOS 10.0 之后使用此方法</span><br><span class="line">        [[UIApplication sharedApplication] openURL:url options:@{} completionHandler:nil];</span><br><span class="line">    }else {</span><br><span class="line">        // iOS 10.0 之前使用此方法</span><br><span class="line">        [[UIApplication sharedApplication] openURL:url];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="二、跳转到「评论」页面"><a href="#二、跳转到「评论」页面" class="headerlink" title="二、跳转到「评论」页面"></a>二、跳转到「评论」页面</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">NSString *urlStr = [NSString stringWithFormat:@"itms-apps://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&amp;id=%@&amp;pageNumber=0&amp;sortOrdering=2&amp;mt=8", APPID];</span><br><span class="line">NSURL *url = [NSURL URLWithString:urlStr];</span><br><span class="line">if ([[UIApplication sharedApplication] canOpenURL:url]) {</span><br><span class="line">    if (@available(iOS 10.0, *)) {</span><br><span class="line">        [[UIApplication sharedApplication] openURL:url options:@{} completionHandler:nil];</span><br><span class="line">    }else {</span><br><span class="line">        [[UIApplication sharedApplication] openURL:url];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="三、跳转到「撰写评论」页面"><a href="#三、跳转到「撰写评论」页面" class="headerlink" title="三、跳转到「撰写评论」页面"></a>三、跳转到「撰写评论」页面</h3><p>前两种方法网上已经分享泛滥了，而这个跳转方法很特别哦。</p>
<blockquote>
<p>💡💡💡区别：</p>
<p>上面的方法只可以跳转到 App Store 中应用的评论页面，如果用户要评分，步骤是：</p>
<ol>
<li>首先跳转到评论页面；</li>
<li>点击「撰写评论」按钮，开始评分。</li>
</ol>
<p>而这个方法更深入，它可以打开撰写评论页面，用户去评分的步骤是：</p>
<ol>
<li>直接跳转到「撰写评论」页面评分。</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// iOS11 之后，以下链接已失效</span><br><span class="line">NSString *urlStr = [NSString stringWithFormat:@"itms-apps://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&amp;id=%@&amp;action=write-review",APPID];</span><br><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlStr]]</span><br><span class="line"></span><br><span class="line">// 今天没事点了点App里的评论功能，发现显示“无法连接到App Store”，修复更换的URL如下（更新时间：2018年3月16日） </span><br><span class="line">NSString *urlStr = [NSString stringWithFormat:@"itms-apps://itunes.apple.com/cn/app/id%@?mt=8&amp;action=write-review",APPID];</span><br><span class="line">NSURL *url = [NSURL URLWithString:urlStr];</span><br><span class="line">if ([[UIApplication sharedApplication] canOpenURL:url]) {</span><br><span class="line">    if (@available(iOS 10.0, *)) {</span><br><span class="line">        [[UIApplication sharedApplication] openURL:url options:@{} completionHandler:nil];</span><br><span class="line">    }else {</span><br><span class="line">        [[UIApplication sharedApplication] openURL:url];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>注意到这两个 URL 地址是不同的，以「微信」示例：</p>
<ul>
<li>评论页面 URL：<span class="exturl" data-url="aHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL1dlYk9iamVjdHMvTVpTdG9yZS53b2Evd2Evdmlld0NvbnRlbnRzVXNlclJldmlld3M/dHlwZT1QdXJwbGUrU29mdHdhcmUmYW1wO2lkPTQxNDQ3ODEyNCZhbXA7cGFnZU51bWJlcj0wJmFtcDtzb3J0T3JkZXJpbmc9MiZhbXA7bXQ9OA==">https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&amp;id=414478124&amp;pageNumber=0&amp;sortOrdering=2&amp;mt=8<i class="fa fa-external-link-alt"></i></span></li>
<li>撰写批评 URL（已失效）：<del><span class="exturl" data-url="aHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL1dlYk9iamVjdHMvTVpTdG9yZS53b2Evd2Evdmlld0NvbnRlbnRzVXNlclJldmlld3M/dHlwZT1QdXJwbGUrU29mdHdhcmUmYW1wO2lkPTQxNDQ3ODEyNCZhbXA7YWN0aW9uPXdyaXRlLXJldmlldw==">https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&amp;id=414478124&amp;action=write-review<i class="fa fa-external-link-alt"></i></span></del></li>
<li>2018，新的撰写批评 URL：<br>itms-apps://itunes.apple.com/cn/app/id414478124?mt=8&amp;action=write-review<br>参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9hZTQ3ZTFjZDkwNTg=">iOS 11 适配之跳转 App Store 评论<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<p>「微信」的去评分跳转到 App Store 就是这个效果：</p>
<p><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073541.jpg"></p>
<h2 id="16-应用内跳转到系统设置"><a href="#16-应用内跳转到系统设置" class="headerlink" title="16. 应用内跳转到系统设置"></a>16. 应用内跳转到系统设置</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 跳转到系统设置中本应用设置下，iOS 8.0 之后有效</span><br><span class="line">if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"8.0")) {</span><br><span class="line">    </span><br><span class="line">    NSURL *url = [NSURL URLWithString:UIApplicationOpenSettingsURLString];</span><br><span class="line">    // 跳转之前先判断是否能打开URL</span><br><span class="line">    if ([[UIApplication sharedApplication] canOpenURL:url]) {</span><br><span class="line">        if (@available(iOS 10.0, *)) {</span><br><span class="line">            [[UIApplication sharedApplication] openURL:url options:@{} completionHandler:nil];</span><br><span class="line">        } else {</span><br><span class="line">            [[UIApplication sharedApplication] openURL:url];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="17-版本更新提示"><a href="#17-版本更新提示" class="headerlink" title="17. 版本更新提示"></a>17. 版本更新提示</h2><p>需求：每当新版本发布时，首页弹窗提示。<br>流程图：<br><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073549.jpg" alt="image"></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">// 检查版本更新</span><br><span class="line">- (void)requestVersionFromAppStore {</span><br><span class="line">    // 使用 YTKNetwork 发起 POST 请求</span><br><span class="line">    // URL：https://itunes.apple.com/cn/lookup?id=836500024</span><br><span class="line">    HQLURL_Check_Version *api = [[HQLURL_Check_Version alloc] init];</span><br><span class="line">    [api startWithCompletionBlockWithSuccess:^(__kindof YTKBaseRequest * _Nonnull request) {</span><br><span class="line">        // App Store 版本号</span><br><span class="line">        NSString *version = [(NSDictionary *)[(NSArray *)request.responseObject[@"results"] lastObject] objectForKey:@"version"];</span><br><span class="line">        [self checkVersionUpdate:version];</span><br><span class="line">        </span><br><span class="line">    } failure:^(__kindof YTKBaseRequest * _Nonnull request) {</span><br><span class="line">        // error...</span><br><span class="line">    }];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (void)checkVersionUpdate:(NSString *)version {</span><br><span class="line">    // App Store 版本号</span><br><span class="line">    NSString *formatAppStoreVersion = [version stringByReplacingOccurrencesOfString:@"." withString:@""];</span><br><span class="line">    </span><br><span class="line">    // 本地程序版本号</span><br><span class="line">    NSString *localVersion = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"];</span><br><span class="line">    NSString *formatLocalVersion = [localVersion stringByReplacingOccurrencesOfString:@"." withString:@""];</span><br><span class="line">    </span><br><span class="line">    BOOL shouldUpdate = [formatAppStoreVersion unsignedIntValue] &gt; [formatLocalVersion unsignedIntValue];</span><br><span class="line">    if (!shouldUpdate) {</span><br><span class="line">        return;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // 弹窗提示，使用 SCLAlertView-Objective-C 框架</span><br><span class="line">    SCLAlertView *alert = [[SCLAlertView alloc] initWithNewWindow];</span><br><span class="line">    alert.horizontalButtons = YES;</span><br><span class="line">    alert.shouldDismissOnTapOutside = YES;</span><br><span class="line">    </span><br><span class="line">    // 拒绝按钮</span><br><span class="line">    SCLButton *button = [alert addButton:@"残忍拒绝" actionBlock:nil];</span><br><span class="line">    button.buttonFormatBlock = ^NSDictionary *{</span><br><span class="line">        NSMutableDictionary *buttonConfig = [[NSMutableDictionary alloc] init];</span><br><span class="line">        buttonConfig[@"backgroundColor"] = [UIColor whiteColor];</span><br><span class="line">        buttonConfig[@"textColor"] = HexColor(@"0x2866BF");</span><br><span class="line">        return buttonConfig;</span><br><span class="line">    };</span><br><span class="line">    </span><br><span class="line">    // 下载按钮</span><br><span class="line">    [alert addButton:@"前往下载" actionBlock:^{</span><br><span class="line">        NSString *urlStr = [NSString stringWithFormat:@"itms-apps://itunes.apple.com/app/id836500024"];</span><br><span class="line">        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlStr]];</span><br><span class="line">    }];</span><br><span class="line">    [alert showInfo:self title:@"发现新版本" subTitle:@"您有新的版本可供下载" closeButtonTitle:nil duration:0.0f];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>效果：<br><img data-src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073556.jpg" alt="image"></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5jb2NvYWNoaW5hLmNvbS8=">iOS 如何获取设备的各种信息 @ymwm<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZGVjYWplcy9hcnRpY2xlL2RldGFpbHMvNDE4MDc5Nzc=">iOS 开发 - 获取设备名称<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wLzBkODRlNjg1MmM1YQ==">iOS 获取设备型号和 App 版本号等信息（OC＋Swift）<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wLzM3ODk5ZTc2N2Y1Yg==">iOS 如何获取设备的唯一标识（UUID）<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wLzU3MjgzM2VmYWFjNA==">iOS 获取 UUID，并使用 keychain 存储 @wooke<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbHVvc2hlbmdraW0vYXJ0aWNsZS9kZXRhaWxzLzUxMTM1MDYz">iOS 获取设备 IP 地址 @月光下的夜曲<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5jbmJsb2dzLmNvbS9nYW94aWFvbml1L3AvNTQ4MjYyMy5odG1s">iOS 开发：获取设备 IP 地址 @高晓牛<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wL2IyMzAxNmJiOTdhZg==">史上最全的 iOS 各种设备信息获取总结 (iPhone8/iPhone X 已更新)<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTExOTc1MDkvaG93LXRvLWdldC1kZXZpY2UtbWFrZS1hbmQtbW9kZWwtb24taW9z">How to get device make and model on iOS? @stackoverflow<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3BkYWRiLm5ldC9pbmRleC5waHA/bT1kZXZpY2UmaWQ9MjIxNCZjPWFwcGxlX2lwYWRfd2lmaV9hMTIxOV82NGdiX19hcHBsZV9pcGFkXzEsMQ==">http://pdadb.net<i class="fa fa-external-link-alt"></i></span></li>
</ul>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>独木舟的木
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://andy0570.com/2017/01/06/iOS%20%E7%BC%96%E7%A8%8B%EF%BC%9A%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF%E3%80%81%E5%BA%94%E7%94%A8%E8%B7%B3%E8%BD%AC/" title="iOS 编程：获取设备信息、应用跳转">https://andy0570.com/2017/01/06/iOS 编程：获取设备信息、应用跳转/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/iOS/" rel="tag"># iOS</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2016/12/23/iOS%20%E7%BC%96%E7%A8%8B%EF%BC%9A%E5%8F%AF%E5%B1%95%E5%BC%80%E6%8A%98%E5%8F%A0%E7%9A%84TableViewDemo/" rel="prev" title="iOS 编程：可展开折叠的 TableViewDemo">
      <i class="fa fa-chevron-left"></i> iOS 编程：可展开折叠的 TableViewDemo
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/01/09/iOS%20%E7%BC%96%E7%A8%8B%EF%BC%9AAES%20%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/" rel="next" title="iOS 编程：AES 加密算法">
      iOS 编程：AES 加密算法 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



        </div>
        
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">独木舟的木</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">2.1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">31:21</span>
</div>
  <div class="powered-by">由 <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl theme-link" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZw==">NexT.Gemini</span> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/next-theme/pjax@0/pjax.min.js"></script>
  <script src="//unpkg.com/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="//unpkg.com/lozad@1/dist/lozad.min.js"></script>
  <script src="//unpkg.com/pangu@4/dist/browser/pangu.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  
  <script data-pjax>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="//unpkg.com/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//unpkg.com/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>












<script data-pjax>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//unpkg.com/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.init({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    }, '.mermaid');
  }, window.mermaid);
}
</script>


    <div class="pjax">
  

  


<script>
NexT.utils.loadComments('#valine-comments', () => {
  NexT.utils.getScript('//unpkg.com/valine@1/dist/Valine.min.js', () => {
    new Valine(Object.assign({
      el  : '#valine-comments',
      path: location.pathname,
    }, {"enable":true,"appId":"S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz","appKey":"brOnU8mOQvSjpipJvdKUAIbU","placeholder":"写下你的评论...","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"language":"zh-cn","visitor":false,"comment_count":true,"recordIP":true,"serverURLs":null,"enableQQ":true,"requiredFields":[]}
    ));
  }, window.Valine);
});
</script>

    </div>
</body>
</html>
