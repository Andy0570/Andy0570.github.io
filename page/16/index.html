<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
<meta name="keywords" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:type" content="website">
<meta property="og:title" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:url" content="https://andy0570.com/page/16/index.html">
<meta property="og:site_name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta name="twitter:description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">



  <link rel="alternate" href="/atom.xml" title="ç‹¬æœ¨èˆŸçš„æœ¨" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/16/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>ç‹¬æœ¨èˆŸçš„æœ¨</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ç‹¬æœ¨èˆŸçš„æœ¨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾<span class="badge">57</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£<span class="badge">312</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>å…³äº</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>æœç´¢</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/05/Mac æˆªå±åº”ç”¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/05/Mac æˆªå±åº”ç”¨/" class="post-title-link" itemprop="url">Mac æˆªå±åº”ç”¨</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-05 11:00:00" itemprop="dateCreated datePublished" datetime="2017-09-05T11:00:00+08:00">2017-09-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:15:35" itemprop="dateModified" datetime="2019-04-18T01:15:35+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å¼€å‘å·¥å…·-Macåº”ç”¨/" itemprop="url" rel="index"><span itemprop="name">å¼€å‘å·¥å…·&Macåº”ç”¨</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/05/Mac æˆªå±åº”ç”¨/" class="leancloud_visitors" data-flag-title="Mac æˆªå±åº”ç”¨">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <h2 id="ç³»ç»Ÿæˆªå±"><a href="#ç³»ç»Ÿæˆªå±" class="headerlink" title="ç³»ç»Ÿæˆªå±"></a>ç³»ç»Ÿæˆªå±</h2><p><img src="http://upload-images.jianshu.io/upload_images/2648731-5b36aee64aa0fbfd.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/09/05/Mac æˆªå±åº”ç”¨/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/04/å¤©å¤©å“å°iOS7ç”œç‚¹ Day3ï¼šBackground Fetch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/04/å¤©å¤©å“å°iOS7ç”œç‚¹ Day3ï¼šBackground Fetch/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day3ï¼šBackground Fetch</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-04 10:03:00" itemprop="dateCreated datePublished" datetime="2017-09-04T10:03:00+08:00">2017-09-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 15:11:46" itemprop="dateModified" datetime="2019-04-17T15:11:46+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/04/å¤©å¤©å“å°iOS7ç”œç‚¹ Day3ï¼šBackground Fetch/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day3ï¼šBackground Fetch">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>åå°æå–ç‰¹æ€§ï¼šiOS å¯ä»¥æ ¹æ® App çš„ä½¿ç”¨æƒ…å†µè‡ªåŠ¨æ›´æ–°å†…å®¹ï¼Œä¸ç®¡appæ˜¯å¦æ­£åœ¨è¿è¡Œã€‚</p>
</blockquote>
<p>åå°æå–åŠŸèƒ½å¯ä»¥è®©ä½ çš„ç¨‹åºç”¨æˆ·ä½“éªŒæ•ˆæœæ›´åŠ çš„å¥½ï¼Œå¦‚æœä½ çš„åº”ç”¨æ˜¯åŸºäºäº’è”ç½‘æ•°æ®æ›´æ–°ï¼Œé‚£ä¹ˆè¿™éå¸¸ç®€å•çš„æ–¹æ³•ï¼Œè®©åº”ç”¨ç¨‹åºæ—¶åˆ»è·å¾—æœ€æ–°çš„ä¿¡æ¯ã€‚</p>
<h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/06/ios7-day-by-day-day1-nsurlsession/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 1 :: NSURLSession</a></li>
</ul>
<h3 id="Enabling-background-fetch-å¼€å¯åå°æå–åŠŸèƒ½"><a href="#Enabling-background-fetch-å¼€å¯åå°æå–åŠŸèƒ½" class="headerlink" title="Enabling background fetch - å¼€å¯åå°æå–åŠŸèƒ½"></a>Enabling background fetch - å¼€å¯åå°æå–åŠŸèƒ½</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-a0ae905e1631ed12.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="æŒ‡å®šåå°æå–åŠŸèƒ½è¿è¡Œçš„é¢‘ç‡"><a href="#æŒ‡å®šåå°æå–åŠŸèƒ½è¿è¡Œçš„é¢‘ç‡" class="headerlink" title="æŒ‡å®šåå°æå–åŠŸèƒ½è¿è¡Œçš„é¢‘ç‡"></a>æŒ‡å®šåå°æå–åŠŸèƒ½è¿è¡Œçš„é¢‘ç‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</span><br><span class="line">    // æŒ‡å®šåå°æå–åŠŸèƒ½è¿è¡Œçš„é¢‘ç‡</span><br><span class="line">    [[UIApplication sharedApplication] setMinimumBackgroundFetchInterval:UIApplicationBackgroundFetchIntervalMinimum];</span><br><span class="line">    </span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åå°æå–åŠŸèƒ½éœ€è¦å®ç°çš„ä»£ç†åè®®"><a href="#åå°æå–åŠŸèƒ½éœ€è¦å®ç°çš„ä»£ç†åè®®" class="headerlink" title="åå°æå–åŠŸèƒ½éœ€è¦å®ç°çš„ä»£ç†åè®®"></a>åå°æå–åŠŸèƒ½éœ€è¦å®ç°çš„ä»£ç†åè®®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// application:performFetchWithCompletionHandler:</span><br><span class="line">- (void)application:(UIApplication *)application performFetchWithCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler</span><br><span class="line">&#123;</span><br><span class="line">    // å¾—åˆ°è¦æ›´æ–°çš„è§†å›¾æ§åˆ¶å™¨</span><br><span class="line">    SCViewController *vc = (SCViewController *)self.window.rootViewController;</span><br><span class="line">    // Insert status updates and pass in the completion handler block</span><br><span class="line">    // æ›´æ–°çŠ¶æ€ï¼Œå¹¶å›ä¼ æ›´æ–°å®Œæˆåçš„å¤„ç†ç¨‹åº</span><br><span class="line">    NSUInteger numberInserted = [vc insertStatusObjectsForFetchWithCompletionHandler:completionHandler];</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    // åˆ† iOS ç‰ˆæœ¬ï¼Œè®¾ç½® applicationIconBadgeNumber</span><br><span class="line">    float version = [[[UIDevice currentDevice] systemVersion] floatValue];</span><br><span class="line">    </span><br><span class="line">    if (version &gt;= 8.0) &#123;</span><br><span class="line">        UIUserNotificationSettings *settings = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeBadge categories:nil];</span><br><span class="line">        // æ³¨å†Œç”¨æˆ·é€šçŸ¥ï¼š</span><br><span class="line">        [[UIApplication sharedApplication] registerUserNotificationSettings:settings];</span><br><span class="line">        // æ³¨å†Œæ¶ˆæ¯æ¨é€ï¼š</span><br><span class="line">        [application registerForRemoteNotifications];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // åº”ç”¨ç¨‹åºå³ä¸Šè§’æ•°å­—</span><br><span class="line">    [UIApplication sharedApplication].applicationIconBadgeNumber += numberInserted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Testing-æµ‹è¯•"><a href="#Testing-æµ‹è¯•" class="headerlink" title="Testing - æµ‹è¯•"></a>Testing - æµ‹è¯•</h3><p>éœ€è¦æµ‹è¯•ä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li>App currently runing in background - appå½“å‰åœ¨åå°è¿è¡Œ</li>
<li>App currently in terminated state - appå½“å‰å·²ç»ç»ˆæ­¢è¿›ç¨‹</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/03/å¤©å¤©å“å°iOS7ç”œç‚¹ Day2ï¼šAsset Catalog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/03/å¤©å¤©å“å°iOS7ç”œç‚¹ Day2ï¼šAsset Catalog/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day2ï¼šAsset Catalog</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-03 16:02:00" itemprop="dateCreated datePublished" datetime="2017-09-03T16:02:00+08:00">2017-09-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 15:23:38" itemprop="dateModified" datetime="2019-04-17T15:23:38+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/03/å¤©å¤©å“å°iOS7ç”œç‚¹ Day2ï¼šAsset Catalog/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day2ï¼šAsset Catalog">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>Asset Catalogs (èµ„äº§åˆ†ç±»)ï¼Œå®ƒå¯ä»¥ç®¡ç†ç‰©ç†å›¾åƒæ–‡ä»¶å’Œè¿™äº›æ–‡ä»¶çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
</blockquote>
<h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/06/ios7-day-by-day-day1-nsurlsession/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 1 :: NSURLSession</a></li>
<li><a href="[https://zhuanlan.zhihu.com/p/34474502](https://zhuanlan.zhihu.com/p/34474502">çŸ¥ä¹ä¸“æ ï¼šiOS æ¸©ä¹ ä¹‹è·¯ â€ Bundle â€œ</a><br>)</li>
</ul>
<h3 id="Asset-Catalog-èµ„äº§åˆ†ç±»"><a href="#Asset-Catalog-èµ„äº§åˆ†ç±»" class="headerlink" title="Asset Catalog - èµ„äº§åˆ†ç±»"></a>Asset Catalog - èµ„äº§åˆ†ç±»</h3><ul>
<li>èµ„äº§åˆ†ç±»ç›®å½•ç”±ä¸€äº›å›¾åƒçš„é›†åˆã€appå›¾æ ‡å’Œappå¯åŠ¨é¡µæ„æˆã€‚</li>
<li>æ–°å»ºå·¥ç¨‹æ—¶ï¼ŒXcode ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåä¸º <code>Assets.xcassets</code> çš„æ–‡ä»¶å¤¹ã€‚</li>
<li><strong>Asset catalogs</strong> æ˜¯å­˜åœ¨åœ¨ç¡¬ç›˜ä¸Šé¢çš„ä¸€ä¸ªç›®å½•ï¼Œç”±Xcodeè¿›è¡Œç®¡ç†ã€‚å®ƒä»¥ç‰¹å®šçš„æ–¹å¼è¿›è¡Œæ–‡ä»¶çš„æ’åˆ—ï¼ŒåŒ…å«ä¸€ä¸ªjsonæ–‡ä»¶å­˜å‚¨ç›®å½•ç›¸å…³è”çš„å…ƒæ•°æ®:</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-150af677a9501486.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="App-icons-and-launch-images"><a href="#App-icons-and-launch-images" class="headerlink" title="App icons and launch images"></a>App icons and launch images</h3><p><strong>Asset catalog</strong>(èµ„äº§åˆ†ç±»)é»˜è®¤è‡ªåŠ¨åˆ›å»ºï¼Œåä¸º<code>Assets.xcassets</code>,åŒ…å«<code>AppIcon</code>çš„å…¥å£ã€‚æä¾›äº†æ„å»ºåº”ç”¨çš„æ‰€æœ‰éœ€è¦çš„å›¾æ ‡çš„å°ºå¯¸ï¼š</p>
<p><code>LaunchImage</code> ç›®å½•éœ€è¦è‡ªå·±åˆ›å»ºï¼š<strong>é¼ æ ‡å³å‡»</strong> â€”â€” <strong>App Icons &amp; Launch Images</strong> â€”â€” <strong>New iOS Launch Image</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-9e6e5f0f4a2bd48e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="Custom-imagesets-è‡ªå®šä¹‰å›¾åƒé›†"><a href="#Custom-imagesets-è‡ªå®šä¹‰å›¾åƒé›†" class="headerlink" title="Custom imagesets - è‡ªå®šä¹‰å›¾åƒé›†"></a>Custom imagesets - è‡ªå®šä¹‰å›¾åƒé›†</h3><p>å’Œæ ‡å‡†çš„é›†åˆä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>asset catalogs</code> æ¥ç®¡ç†ä½ è‡ªå·±çš„å›¾ç‰‡ï¼Œå›¾ç‰‡éƒ½æ˜¯åŒ…å«åœ¨<code>ImageSet</code>ä¸­çš„ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ç®¡ç†å¯¹åº”çš„retinaå’Œéretinaå›¾åƒã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-c45211ef7b702134.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ä½¿ç”¨æ–¹æ³•ï¼š<code>UIImage:imageNamed:</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UIImage *image = [UIImage imageNamed:@&quot;Australia&quot;];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ğŸ’¡ åŠ è½½å›¾ç‰‡è¿˜æ¶‰åŠåˆ°ç¼“å­˜é—®é¢˜ï¼Œå‚è€ƒä¹‹å‰å†™çš„æ–‡ç« ï¼š</p>
<p><a href="http://www.jianshu.com/p/9d858f073863" target="_blank" rel="noopener">UIImage ä½¿ç”¨Tips</a></p>
</blockquote>
<h3 id="Slicing-images-åˆ‡ç‰‡å›¾åƒ"><a href="#Slicing-images-åˆ‡ç‰‡å›¾åƒ" class="headerlink" title="Slicing images - åˆ‡ç‰‡å›¾åƒ"></a>Slicing images - åˆ‡ç‰‡å›¾åƒ</h3><p>Asset catalogs çš„å¦å¤–ä¸€ä¸ªä¸»è¦çš„ç‰¹æ€§å°±æ˜¯èƒ½å¤Ÿè®©å›¾åƒè¿›è¡Œåˆ‡ç‰‡å·¥ä½œï¼Œè‡ªä»iOS2å¼€å§‹ç¨‹åºå°±èƒ½å¤Ÿä½¿ç”¨åˆ‡ç‰‡çš„å›¾åƒäº†ï¼Œä½†æ˜¯Xcodeä¸­çš„è¿™ä¸ªæ–°ç‰¹æ€§ä¼šå˜å¾—éå¸¸çš„ç®€å•ã€‚</p>
<p>ä½¿ç”¨åˆ‡ç‰‡å˜æ¢å›¾åƒï¼Œæ˜¯åˆ›å»ºè™šæ‹Ÿçš„å…ƒç´ åŸºæœ¬çš„æŠ€æœ¯ã€‚ä¾‹å¦‚æŒ‰é’®ï¼Œéœ€è¦æ‹‰ä¼¸è¿™ä¸ªæŒ‰é’®å›¾ç‰‡çš„å¤§å°è¾¾åˆ°ä¸€ä¸ªæ–°çš„å¤§å°ï¼Œå¹¶ä¸”è¦è®¾ç½®è¾¹ç¼˜ä¸è¢«æ‹‰ä¼¸ï¼Œåªæ‹‰ä¼¸ä¸­é—´çš„éƒ¨åˆ†ã€‚</p>
<p>åœ¨ Asset catalog ä¸­å°±å¯ä»¥ä½¿ç”¨Xcodeæä¾›çš„åŠŸèƒ½è¿›è¡Œåˆ‡ç‰‡æ“ä½œäº†ï¼Œå¼€å¯åˆ‡ç‰‡åŠŸèƒ½ï¼Œåªéœ€è¦ç‚¹å‡»<code>Show Slicing</code>æŒ‰é’®,ä½ å¯ä»¥é€‰æ‹©æ°´å¹³ã€ç«–ç›´æˆ–è€…ä¸¤è€…éƒ½æ‹‰ä¼¸çš„æ–¹å¼,å¦‚æœä½ é€‰æ‹©ä¹‹åï¼Œå›¾åƒå°†ä¼šé‡æ–°åŠ è½½å¹¶ä¸”ä¸Šé¢ä¼šå‡ºç°æ‹‰ä¼¸è¾…åŠ©çº¿ï¼Œä½ å¯ä»¥é€šè¿‡æ‹–æ‹½è¾…åŠ©çº¿ï¼Œæ¥å®ç°è‡ªå·±éœ€è¦æ‹‰ä¼¸çš„æ•ˆæœã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-5c9dbd1c1d1cb5fc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ä½¿ç”¨è¿™äº›åˆ‡ç‰‡å›¾åƒç¼–ç¨‹éå¸¸çš„ç®€å•ï¼Œå’Œä¹‹å‰ä¸€æ ·åˆ›å»ºä¸€ä¸ª<code>UIImage</code>å¯¹è±¡ï¼Œç„¶åå½“ä½ è°ƒæ•´<code>UIImageView</code>çš„å¤§å°ï¼Œå†…éƒ¨çš„imageå°±ä¼šè‡ªåŠ¨æ ¹æ®åˆ‡ç‰‡çš„å›¾åƒæ¥å˜æ¢å¤§å°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UIImage *btnImage = [UIImage imageNamed:@&quot;ButtonSlice&quot;];</span><br><span class="line"></span><br><span class="line">// Let&apos;s make 2</span><br><span class="line">UIImageView *iv = [[UIImageView alloc] initWithImage:btnImage];</span><br><span class="line">iv.bounds = CGRectMake(0, 0, 150, CGRectGetHeight(iv.bounds));</span><br><span class="line">iv.center = CGPointMake(CGRectGetWidth(self.view.bounds) / 2, 300);</span><br><span class="line">[self.view addSubview:iv];</span><br><span class="line"></span><br><span class="line">// And a stretched version</span><br><span class="line">iv = [[UIImageView alloc] initWithImage:btnImage];</span><br><span class="line">iv.bounds = CGRectMake(0, 0, 300, CGRectGetHeight(iv.bounds));</span><br><span class="line">iv.center = CGPointMake(CGRectGetWidth(self.view.bounds) / 2, 350);</span><br><span class="line">[self.view addSubview:iv];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-8432361523807bac.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="æ­¥éª¤è¯¦è§£ï¼š"><a href="#æ­¥éª¤è¯¦è§£ï¼š" class="headerlink" title="æ­¥éª¤è¯¦è§£ï¼š"></a>æ­¥éª¤è¯¦è§£ï¼š</h4><ol>
<li>ç‚¹å‡»<code>Show Slicing</code> æŒ‰é’®ï¼Ÿ</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-cd88e8678434b63e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ol start="2">
<li><p>é€‰æ‹©æ‹‰ä¼¸æ¨¡å¼ï¼š</p>
<p>æ”¯æŒä¸‰ç§æ¨¡å¼ï¼šæ°´å¹³æ‹‰ä¼¸ã€æ°´å¹³å’Œå‚ç›´åŒæ—¶æ‹‰ä¼¸ã€å‚ç›´æ‹‰ä¼¸ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-f1909fb40c77e4ef.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
<li><p>è®¾ç½®æ‹‰ä¼¸å¥æŸ„ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b85d5761d488b606.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
<li><p>ä»£ç æ·»åŠ å›¾ç‰‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UIImage *image = [UIImage imageNamed:@&quot;bird&quot;];</span><br><span class="line"></span><br><span class="line">// default</span><br><span class="line">UIImageView *imageView = [[UIImageView alloc] initWithImage:image];</span><br><span class="line">imageView.bounds = CGRectMake(0, 0, 50, 37.5);</span><br><span class="line">imageView.center = CGPointMake(CGRectGetWidth(self.view.bounds) / 2, 300);</span><br><span class="line">[self.view addSubview:imageView];</span><br><span class="line"></span><br><span class="line">// stretch</span><br><span class="line">UIImageView *stretchImgView = [[UIImageView alloc] initWithImage:image];</span><br><span class="line">stretchImgView.bounds = CGRectMake(0, 0, 100, 75);</span><br><span class="line">stretchImgView.center = CGPointMake(CGRectGetWidth(self.view.bounds) / 2, 400);</span><br><span class="line">[self.view addSubview:stretchImgView];</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ•ˆæœï¼šç”¨ã€å¡«å……éƒ¨åˆ†ã€‘å»è¦†ç›–ã€å¯æ‰©å±•éƒ¨åˆ†ã€‘</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-015b0aee4eea6dde.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
</ol>
<h3 id="ImageOptim-è¶…å¥½ç”¨çš„å›¾åƒå‹ç¼©å·¥å…·"><a href="#ImageOptim-è¶…å¥½ç”¨çš„å›¾åƒå‹ç¼©å·¥å…·" class="headerlink" title="ImageOptim - è¶…å¥½ç”¨çš„å›¾åƒå‹ç¼©å·¥å…·"></a>ImageOptim - è¶…å¥½ç”¨çš„å›¾åƒå‹ç¼©å·¥å…·</h3><p><a href="https://imageoptim.com/mac" target="_blank" rel="noopener">ImageOptim</a> æ˜¯ä¸€ä¸ªå…è´¹çš„å›¾åƒå‹ç¼©å·¥å…·ã€‚iOS å·¥ç¨‹é»˜è®¤ä½¿ç”¨ pngcrush å‘½ä»¤æ¥å‹ç¼©æ•°æ®ï¼Œä¸è¿‡å…¶å‹ç¼©æ¯”ç‡ä¸æ˜¯å¾ˆé«˜ã€‚è€Œä½¿ç”¨ <strong>ImageOptim</strong> å¯ä»¥è¾¾åˆ°æœ€å¤§çš„å›¾ç‰‡å‹ç¼©æ•ˆæœã€‚</p>
<p>å®ç°åŸç†ï¼šä½¿ç”¨å„ç§å¼€æºçš„å›¾åƒå‹ç¼©å·¥å…·ï¼Œç„¶åå–å‹ç¼©æ•ˆæœæœ€å¥½çš„é‚£ä¸€ä¸ªã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼šåœ¨ Finder ä¸­æ‰“å¼€å›¾ç‰‡æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œå°†å›¾ç‰‡æ‹–æ‹½è¿› <strong>ImageOptim</strong> ç•Œé¢ä¸­å³å¯ã€‚</p>
<p>å…¶ä»–å›¾åƒå‹ç¼©å·¥å…·ï¼š</p>
<ul>
<li><a href="http://optimizilla.com/zh/" target="_blank" rel="noopener">Optimizilla</a> â€”â€”åœ¨çº¿å›¾åƒä¼˜åŒ–å‹ç¼©å™¨</li>
</ul>
<h3 id="é™„å½•ï¼š"><a href="#é™„å½•ï¼š" class="headerlink" title="é™„å½•ï¼š"></a>é™„å½•ï¼š</h3><p>æ‘˜è‡ªå®˜æ–¹äººæœºäº¤äº’æŒ‡å—ï¼š<a href="https://developer.apple.com/ios/human-interface-guidelines/#//apple_ref/doc/uid/TP40006556-CH27-SW1" target="_blank" rel="noopener">iOS Human Interface Guidelines</a></p>
<h4 id="å›¾ç‰‡å¤§å°å’Œåˆ†è¾¨ç‡ï¼ˆImage-Size-and-Resolutionï¼‰"><a href="#å›¾ç‰‡å¤§å°å’Œåˆ†è¾¨ç‡ï¼ˆImage-Size-and-Resolutionï¼‰" class="headerlink" title="å›¾ç‰‡å¤§å°å’Œåˆ†è¾¨ç‡ï¼ˆImage Size and Resolutionï¼‰"></a>å›¾ç‰‡å¤§å°å’Œåˆ†è¾¨ç‡ï¼ˆImage Size and Resolutionï¼‰</h4><table>
<thead>
<tr>
<th>è®¾å¤‡</th>
<th>æ¯”ä¾‹ç³»æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>iPhone 7 Plus and iPhone 6s Plus</strong></td>
<td>@3x</td>
</tr>
<tr>
<td><strong>å…¶ä½™é«˜åˆ†è¾¨ç‡çš„ iOS è®¾å¤‡</strong></td>
<td>@2x</td>
</tr>
</tbody>
</table>
<h5 id="App-Icon"><a href="#App-Icon" class="headerlink" title="App Icon"></a>App Icon</h5><table>
<thead>
<tr>
<th>è®¾å¤‡æˆ–çŠ¶å†µ</th>
<th>å›¾æ ‡å¤§å°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>iPhone</strong></td>
<td>180px Ã— 180px (60pt Ã— 60pt @3x)</td>
</tr>
<tr>
<td></td>
<td>120px Ã— 120px (60pt Ã— 60pt @2x)</td>
</tr>
<tr>
<td><strong>iPad Pro</strong></td>
<td>167px Ã— 167px (83.5pt Ã— 83.5pt @2x)</td>
</tr>
<tr>
<td><strong>iPad, iPad mini</strong></td>
<td>152px Ã— 152px (76pt Ã— 76pt @2x)</td>
</tr>
<tr>
<td><strong>App Store</strong></td>
<td>1024px Ã— 1024px</td>
</tr>
</tbody>
</table>
<h5 id="Spotlight-Settings-and-Notification-Icons"><a href="#Spotlight-Settings-and-Notification-Icons" class="headerlink" title="Spotlight, Settings, and Notification Icons"></a>Spotlight, Settings, and Notification Icons</h5><h5 id="Spotlight"><a href="#Spotlight" class="headerlink" title="Spotlight"></a>Spotlight</h5><table>
<thead>
<tr>
<th>è®¾å¤‡</th>
<th>Spotlight å›¾æ ‡å¤§å°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>iPhone</strong></td>
<td>120px Ã— 120px (40pt Ã— 40pt @3x)</td>
</tr>
<tr>
<td></td>
<td>80px Ã— 80px (40pt Ã— 40pt @2x)</td>
</tr>
<tr>
<td><strong>iPad Pro, iPad, iPad mini</strong></td>
<td>80px Ã— 80px (40pt Ã— 40pt @2x)</td>
</tr>
</tbody>
</table>
<hr>
<h5 id="Settings"><a href="#Settings" class="headerlink" title="Settings"></a>Settings</h5><table>
<thead>
<tr>
<th>è®¾å¤‡</th>
<th>Settings å›¾æ ‡å¤§å°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>iPhone</strong></td>
<td>87px Ã— 87px (29pt Ã— 29pt @3x)</td>
</tr>
<tr>
<td></td>
<td>58px Ã— 58px (29pt Ã— 29pt @2x)</td>
</tr>
<tr>
<td><strong>iPad Pro, iPad, iPad mini</strong></td>
<td>58px Ã— 58px (29pt Ã— 29pt @2x)</td>
</tr>
</tbody>
</table>
<hr>
<h5 id="Notification"><a href="#Notification" class="headerlink" title="Notification"></a>Notification</h5><table>
<thead>
<tr>
<th>è®¾å¤‡</th>
<th>Notification å›¾æ ‡å¤§å°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>iPhone</strong></td>
<td>60px Ã— 60px (20pt Ã— 20pt @3x)</td>
</tr>
<tr>
<td></td>
<td>40px Ã— 40px (20pt Ã— 20pt @2x)</td>
</tr>
<tr>
<td><strong>iPad Pro, iPad, iPad mini</strong></td>
<td>40px Ã— 40px (20pt Ã— 20pt @2x)</td>
</tr>
</tbody>
</table>
<h5 id="è‡ªå®šä¹‰å›¾æ ‡å¤§å°"><a href="#è‡ªå®šä¹‰å›¾æ ‡å¤§å°" class="headerlink" title="è‡ªå®šä¹‰å›¾æ ‡å¤§å°"></a>è‡ªå®šä¹‰å›¾æ ‡å¤§å°</h5><table>
<thead>
<tr>
<th></th>
<th>å¯¼èˆªæ å’Œå·¥å…·æ å›¾æ ‡å°ºå¯¸</th>
<th>æ ‡ç­¾æ å›¾æ ‡å°ºå¯¸</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¨è</td>
<td>75px Ã— 75px (25pt Ã— 25pt @3x)</td>
<td>75px Ã— 75px (25pt Ã— 25pt @3x)</td>
</tr>
<tr>
<td></td>
<td>50px Ã— 50px (25pt Ã— 25pt @2x)</td>
<td>50px Ã— 50px (25pt Ã— 25pt @2x)</td>
</tr>
<tr>
<td>æœ€å¤§</td>
<td>83px Ã— 83px (27.67pt Ã— 27.67pt @3x)</td>
<td>144px Ã— 96px (48pt Ã— 32pt @3x)</td>
</tr>
<tr>
<td></td>
<td>56px Ã— 56px (28pt Ã— 28pt @2x)</td>
<td>96px Ã— 64px (48pt Ã— 32pt @2x)</td>
</tr>
</tbody>
</table>
<h4 id="å¯åŠ¨ç”»é¢ï¼ˆLaunch-Screenï¼‰"><a href="#å¯åŠ¨ç”»é¢ï¼ˆLaunch-Screenï¼‰" class="headerlink" title="å¯åŠ¨ç”»é¢ï¼ˆLaunch Screenï¼‰"></a>å¯åŠ¨ç”»é¢ï¼ˆLaunch Screenï¼‰</h4><h5 id="é™æ€å¯åŠ¨ç”»é¢å›¾ç‰‡"><a href="#é™æ€å¯åŠ¨ç”»é¢å›¾ç‰‡" class="headerlink" title="é™æ€å¯åŠ¨ç”»é¢å›¾ç‰‡"></a>é™æ€å¯åŠ¨ç”»é¢å›¾ç‰‡</h5><table>
<thead>
<tr>
<th>è®¾å¤‡</th>
<th>Portrait size</th>
<th>Landscape size</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>iPhone 7 Plus, iPhone 6s Plus</strong></td>
<td>1242px Ã— 2208px</td>
<td>2208px Ã— 1242px</td>
</tr>
<tr>
<td><strong>iPhone 7, iPhone 6s</strong></td>
<td>750px Ã— 1334px</td>
<td>1334px Ã— 750px</td>
</tr>
<tr>
<td><strong>iPhone SE</strong></td>
<td>640px Ã— 1136px</td>
<td>1136px Ã— 640px</td>
</tr>
<tr>
<td><strong>12.9-inch iPad Pro</strong></td>
<td>2048px Ã— 2732px</td>
<td>2732px Ã— 2048px</td>
</tr>
<tr>
<td><strong>9.7-inch iPad Pro, iPad Air 2, iPad mini 4, iPad mini 2</strong></td>
<td>1536px Ã— 2048px</td>
<td>2048px Ã— 1536px</td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/01/å¤©å¤©å“å°iOS7ç”œç‚¹ Day1ï¼šNSURLSession/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/01/å¤©å¤©å“å°iOS7ç”œç‚¹ Day1ï¼šNSURLSession/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day1ï¼šNSURLSession</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-01 15:26:00" itemprop="dateCreated datePublished" datetime="2017-09-01T15:26:00+08:00">2017-09-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 15:24:47" itemprop="dateModified" datetime="2019-04-17T15:24:47+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/01/å¤©å¤©å“å°iOS7ç”œç‚¹ Day1ï¼šNSURLSession/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day1ï¼šNSURLSession">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>ä¸ <strong>NSURLSession</strong> API ç›¸å…³çš„å†…å®¹ã€‚</p>
<h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/06/ios7-day-by-day-day1-nsurlsession/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 1 :: NSURLSession</a></li>
</ul>
<h3 id="NSURLSessionConfiguration"><a href="#NSURLSessionConfiguration" class="headerlink" title="NSURLSessionConfiguration"></a>NSURLSessionConfiguration</h3><p>åˆ›å»º <strong>NSURLSessionConfiguration</strong> å¯¹è±¡çš„ä¸‰ç§æ–¹å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// é»˜è®¤ä¼šè¯é…ç½®</span><br><span class="line">NSURLSessionConfiguration *defaultConfig = [NSURLSessionConfiguration defaultSessionConfiguration];</span><br><span class="line"></span><br><span class="line">// çŸ­æš‚ä¼šè¯é…ç½®,æ— ç¼“å­˜(caches),cookies,è¯ä¹¦(credentials)</span><br><span class="line">NSURLSessionConfiguration *ephemeralConfig = [NSURLSessionConfiguration ephemeralSessionConfiguration];</span><br><span class="line"></span><br><span class="line">// åå°ä¼šè¯é…ç½®</span><br><span class="line">NSURLSessionConfiguration *backgroundConfig = [NSURLSessionConfiguration backgroundSessionConfigurationWithIdentifier:@&quot;com.Apple.BackgroundDownload.BackgroundSession&quot;];</span><br></pre></td></tr></table></figure>
<h3 id="NSURLSession"><a href="#NSURLSession" class="headerlink" title="NSURLSession"></a>NSURLSession</h3><p>åˆ›å»º <strong>NSURLSession</strong> å¯¹è±¡çš„ä¸‰ç§æ–¹å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 1. å•ä¾‹ç±»ä¼šè¯,ä¾¿æ·åˆ›å»ºæ–¹æ³•</span><br><span class="line">NSURLSession *sharedSession = [NSURLSession sharedSession];</span><br><span class="line"></span><br><span class="line">// 2. sessionWithConfiguration:</span><br><span class="line">// ä¸€èˆ¬ç”¨ Block å¤„ç†æœåŠ¡å™¨å›è°ƒæ—¶ä½¿ç”¨</span><br><span class="line">// é»˜è®¤ä¼šè¯</span><br><span class="line">NSURLSession *defaultSession = [NSURLSession sessionWithConfiguration:defaultConfig];</span><br><span class="line">// çŸ­æš‚ä¼šè¯</span><br><span class="line">NSURLSession *ephemeralSesson = [NSURLSession sessionWithConfiguration:ephemeralConfig];</span><br><span class="line">// åå°ä¼šè¯</span><br><span class="line">NSURLSession *backgroundSession = [NSURLSession sessionWithConfiguration:backgroundConfig];</span><br><span class="line"></span><br><span class="line">// 3. sessionWithConfiguration:delegate:delegateQueue:</span><br><span class="line">// éœ€è¦å®ç°å§”æ‰˜åè®®æˆ–è€…æŒ‡å®šçº¿ç¨‹çš„åˆ›å»ºæ–¹æ³•</span><br><span class="line">NSOperationQueue *operationQueue = [NSOperationQueue mainQueue];</span><br><span class="line">// é»˜è®¤ä¼šè¯</span><br><span class="line">NSURLSession *defalutSession1 = [NSURLSession sessionWithConfiguration:defaultConfig delegate:self delegateQueue:operationQueue];</span><br><span class="line">// çŸ­æš‚ä¼šè¯</span><br><span class="line">NSURLSession *ephemeralSesson1 = [NSURLSession sessionWithConfiguration:ephemeralConfig delegate:self delegateQueue:operationQueue];</span><br><span class="line">// åå°ä¼šè¯</span><br><span class="line">NSURLSession *backgroundSession1 = [NSURLSession sessionWithConfiguration:backgroundConfig delegate:self delegateQueue:operationQueue];</span><br></pre></td></tr></table></figure>
<h4 id="NSURLSessionTask"><a href="#NSURLSessionTask" class="headerlink" title="NSURLSessionTask"></a>NSURLSessionTask</h4><p>âš ï¸ åˆ›å»º <strong>NSURLSessionTask</strong> å¯¹è±¡æœ‰å››ç§ç§æ–¹å¼ï¼š</p>
<blockquote>
<ol>
<li>æ•°æ®ä»»åŠ¡(NSURLSessionDataTask)</li>
<li>ä¸Šä¼ ä»»åŠ¡(NSURLSessionUploadTask)</li>
<li>ä¸‹è½½ä»»åŠ¡(NSURLSessionDownloadTask)</li>
<li>æµä»»åŠ¡ï¼ˆNSURLSessionStreamTaskï¼‰ï¼šWWDC2015æ–°å¢ï¼Œæä¾› TCP/IP è¿æ¥æ¥å£ã€‚</li>
</ol>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-7c60b3982ce6f2c8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="NSURLSessionDelegate-å§”æ‰˜åè®®"><a href="#NSURLSessionDelegate-å§”æ‰˜åè®®" class="headerlink" title="NSURLSessionDelegate å§”æ‰˜åè®®"></a>NSURLSessionDelegate å§”æ‰˜åè®®</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-5845fcbe4e8a35c5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ç¤ºä¾‹ Demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br></pre></td><td class="code"><pre><span class="line">// *************************************************</span><br><span class="line">// SCViewController.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface SCViewController : UIViewController</span><br><span class="line"></span><br><span class="line">@property (strong, nonatomic) NSURLSessionDownloadTask *resumableTask;   // å¯æ¢å¤ä»»åŠ¡</span><br><span class="line">@property (strong, nonatomic) NSURLSessionDownloadTask *backgroundTask;  // åå°ä»»åŠ¡</span><br><span class="line"></span><br><span class="line">@property (strong, nonatomic, readonly) NSURLSession *backgroundSession; // åå°ä¼šè¯</span><br><span class="line"></span><br><span class="line">@property (weak, nonatomic) IBOutlet UIImageView *imageView;</span><br><span class="line">@property (weak, nonatomic) IBOutlet UIProgressView *progressIndicator;</span><br><span class="line">@property (strong, nonatomic) IBOutletCollection(UIBarButtonItem) NSArray *startButtons;</span><br><span class="line"></span><br><span class="line">- (IBAction)startCancellable:(id)sender;  // å¼€å§‹ä»»åŠ¡</span><br><span class="line">- (IBAction)cancelCancellable:(id)sender; // å–æ¶ˆä»»åŠ¡</span><br><span class="line">- (IBAction)startResumable:(id)sender;    // æ¢å¤ä»»åŠ¡</span><br><span class="line">- (IBAction)startBackground:(id)sender;   // åå°ä»»åŠ¡</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// *************************************************</span><br><span class="line">// SCViewController.m</span><br><span class="line">#import &quot;SCViewController.h&quot;</span><br><span class="line">#import &quot;SCAppDelegate.h&quot;</span><br><span class="line"></span><br><span class="line">@interface SCViewController () &lt;NSURLSessionDownloadDelegate&gt; &#123;</span><br><span class="line">    NSURLSessionDownloadTask *cancellableTask; // å¯å–æ¶ˆä»»åŠ¡</span><br><span class="line">    NSURLSession *inProcessSession; // ç§æœ‰ä¼šè¯</span><br><span class="line">    NSData *partialDownload; // åå°ä¸‹è½½ä¸´æ—¶æ•°æ®</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation SCViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line">- (void)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">	// ä» nib æ–‡ä»¶åŠ è½½è§†å›¾åï¼Œè¿›è¡Œé¢å¤–çš„åˆå§‹åŒ–å·¥ä½œ</span><br><span class="line">    self.progressIndicator.hidden = YES;</span><br><span class="line">    self.progressIndicator.progress = 0;</span><br><span class="line">    </span><br><span class="line">    // Make sure that we&apos;ve attached to the background session</span><br><span class="line">    self.backgroundSession.sessionDescription = @&quot;Background session&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Custom Accessors</span><br><span class="line">// åå°ä¼šè¯ï¼Œå•ä¾‹ç±»</span><br><span class="line">- (NSURLSession *)backgroundSession</span><br><span class="line">&#123;</span><br><span class="line">    static NSURLSession *backgroundSession = nil;</span><br><span class="line">    static dispatch_once_t onceToken;</span><br><span class="line">    dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">        NSURLSessionConfiguration *config = [NSURLSessionConfiguration backgroundSessionConfigurationWithIdentifier:@&quot;com.shinobicontrols.BackgroundDownload.BackgroundSession&quot;];</span><br><span class="line">        backgroundSession = [NSURLSession sessionWithConfiguration:config</span><br><span class="line">                                                          delegate:self</span><br><span class="line">                                                     delegateQueue:nil];</span><br><span class="line">    &#125;);</span><br><span class="line">    return backgroundSession;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - IBActions</span><br><span class="line">// å¼€å§‹ä»»åŠ¡</span><br><span class="line">- (IBAction)startCancellable:(id)sender &#123;</span><br><span class="line">    if (!cancellableTask) &#123;</span><br><span class="line">        if(!inProcessSession) &#123;</span><br><span class="line">            // åˆ›å»ºé»˜è®¤ä¼šè¯</span><br><span class="line">            NSURLSessionConfiguration *sessionConfig = [NSURLSessionConfiguration defaultSessionConfiguration];</span><br><span class="line">            inProcessSession = [NSURLSession sessionWithConfiguration:sessionConfig</span><br><span class="line">                                                             delegate:self</span><br><span class="line">                                                        delegateQueue:nil];</span><br><span class="line">            inProcessSession.sessionDescription = @&quot;in-process NSURLSession&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // Image CreativeCommons courtesy of flickr.com/charliematters</span><br><span class="line">        NSString *url = @&quot;http://farm6.staticflickr.com/5505/9824098016_0e28a047c2_b_d.jpg&quot;;</span><br><span class="line">        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];</span><br><span class="line">        </span><br><span class="line">        // åˆ›å»ºå¯å–æ¶ˆä»»åŠ¡</span><br><span class="line">        cancellableTask = [inProcessSession downloadTaskWithRequest:request];</span><br><span class="line">        </span><br><span class="line">        [self setDownloadButtonsAsEnabled:NO];</span><br><span class="line">        self.imageView.hidden = YES;</span><br><span class="line">        </span><br><span class="line">        // å¼€å¯ä¸‹è½½ä»»åŠ¡</span><br><span class="line">        [cancellableTask resume];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å–æ¶ˆä»»åŠ¡</span><br><span class="line">- (IBAction)cancelCancellable:(id)sender &#123;</span><br><span class="line">    if(cancellableTask) &#123;</span><br><span class="line">        // 1. å¯å–æ¶ˆä»»åŠ¡</span><br><span class="line">        [cancellableTask cancel];</span><br><span class="line">        cancellableTask = nil;</span><br><span class="line">    &#125; else if(self.resumableTask) &#123;</span><br><span class="line">        // 2. å¯æ¢å¤ä»»åŠ¡</span><br><span class="line">        [self.resumableTask cancelByProducingResumeData:^(NSData *resumeData) &#123;</span><br><span class="line">            // â‡ï¸ ç¼“å­˜å·²ä¸‹è½½æ•°æ®</span><br><span class="line">            partialDownload = resumeData;</span><br><span class="line">            self.resumableTask = nil;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125; else if(self.backgroundTask) &#123;</span><br><span class="line">        // 3. åå°ä»»åŠ¡</span><br><span class="line">        [self.backgroundTask cancel];</span><br><span class="line">        self.backgroundTask = nil;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¢å¤ä»»åŠ¡</span><br><span class="line">- (IBAction)startResumable:(id)sender &#123;</span><br><span class="line">    if(!self.resumableTask) &#123;</span><br><span class="line">        if(!inProcessSession) &#123;</span><br><span class="line">            // åˆ›å»ºé»˜è®¤ä¼šè¯</span><br><span class="line">            NSURLSessionConfiguration *sessionConfig = [NSURLSessionConfiguration defaultSessionConfiguration];</span><br><span class="line">            inProcessSession = [NSURLSession sessionWithConfiguration:sessionConfig delegate:self delegateQueue:nil];</span><br><span class="line">            inProcessSession.sessionDescription = @&quot;in-process NSURLSession&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        if(partialDownload) &#123;</span><br><span class="line">            // 1. å¦‚æœå­˜åœ¨ç¼“å­˜æ•°æ®ï¼Œç»§ç»­ä¸‹è½½æ­¤ä»»åŠ¡</span><br><span class="line">            self.resumableTask = [inProcessSession downloadTaskWithResumeData:partialDownload];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // 2. å¦‚æœä¸å­˜åœ¨ç¼“å­˜ï¼Œæ–°å»ºå¯æ¢å¤ä»»åŠ¡</span><br><span class="line">            // Image CreativeCommons courtesy of flickr.com/charliematters</span><br><span class="line">            NSString *url = @&quot;http://farm3.staticflickr.com/2846/9823925914_78cd653ac9_b_d.jpg&quot;;</span><br><span class="line">            NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];</span><br><span class="line">            // åˆ›å»ºå¯æ¢å¤ä»»åŠ¡</span><br><span class="line">            self.resumableTask = [inProcessSession downloadTaskWithRequest:request];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        [self setDownloadButtonsAsEnabled:NO];</span><br><span class="line">        self.imageView.hidden = YES;</span><br><span class="line">        </span><br><span class="line">        // å¼€å¯ä¸‹è½½ä»»åŠ¡</span><br><span class="line">        [self.resumableTask resume];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¼€å§‹åå°ä»»åŠ¡</span><br><span class="line">- (IBAction)startBackground:(id)sender &#123;</span><br><span class="line">    // Image CreativeCommons courtesy of flickr.com/charliematters</span><br><span class="line">    NSString *url = @&quot;http://farm3.staticflickr.com/2831/9823890176_82b4165653_b_d.jpg&quot;;</span><br><span class="line">    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];</span><br><span class="line">    </span><br><span class="line">    // self.backgroundSession æ˜¯å•ä¾‹å¯¹è±¡</span><br><span class="line">    self.backgroundTask = [self.backgroundSession downloadTaskWithRequest:request];</span><br><span class="line">    </span><br><span class="line">    [self setDownloadButtonsAsEnabled:NO];</span><br><span class="line">    self.imageView.hidden = YES;</span><br><span class="line">    </span><br><span class="line">    // å¼€å¯ä¸‹è½½ä»»åŠ¡</span><br><span class="line">    [self.backgroundTask resume];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Private</span><br><span class="line">- (void)setDownloadButtonsAsEnabled:(BOOL)enabled</span><br><span class="line">&#123;</span><br><span class="line">    // æ›´æ–°æŒ‰é’® enable çŠ¶æ€</span><br><span class="line">    for(UIBarButtonItem *btn in self.startButtons) &#123;</span><br><span class="line">        btn.enabled = enabled;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - NSURLSessionDownloadDelegate</span><br><span class="line"></span><br><span class="line">// è¿½è¸ªä¸‹è½½ä»»åŠ¡è¿›åº¦ï¼Œæ›´æ–°è¿›åº¦æ¡</span><br><span class="line">- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite</span><br><span class="line">&#123;</span><br><span class="line">    double currentProgress = totalBytesWritten / (double)totalBytesExpectedToWrite;</span><br><span class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        self.progressIndicator.hidden = NO;</span><br><span class="line">        self.progressIndicator.progress = currentProgress;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¢å¤ä¸‹è½½åè°ƒç”¨</span><br><span class="line">- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didResumeAtOffset:(int64_t)fileOffset expectedTotalBytes:(int64_t)expectedTotalBytes</span><br><span class="line">&#123;</span><br><span class="line">    // Leave this for now</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä¸‹è½½ä»»åŠ¡æˆåŠŸåè°ƒç”¨</span><br><span class="line">- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didFinishDownloadingToURL:(NSURL *)location</span><br><span class="line">&#123;</span><br><span class="line">    // We&apos;ve successfully finished the download. Let&apos;s save the file</span><br><span class="line">    // ä¿å­˜åˆ°æ–‡ä»¶</span><br><span class="line">    NSFileManager *fileManager = [NSFileManager defaultManager];</span><br><span class="line">    </span><br><span class="line">    NSArray *URLs = [fileManager URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask];</span><br><span class="line">    NSURL *documentsDirectory = URLs[0];</span><br><span class="line">    </span><br><span class="line">    NSURL *destinationPath = [documentsDirectory URLByAppendingPathComponent:[location lastPathComponent]];</span><br><span class="line">    NSError *error;</span><br><span class="line">    </span><br><span class="line">    // å…ˆåˆ é™¤æ–‡ä»¶ä¸­å·²ç»å­˜åœ¨çš„ä»»ä½•æ–‡ä»¶</span><br><span class="line">    [fileManager removeItemAtURL:destinationPath error:NULL];</span><br><span class="line">    BOOL success = [fileManager copyItemAtURL:location toURL:destinationPath error:&amp;error];</span><br><span class="line">    </span><br><span class="line">    if (success) &#123;</span><br><span class="line">        // ä¿å­˜åˆ°æ–‡ä»¶åï¼Œæ›´æ–°ä¸»çº¿ç¨‹ UI</span><br><span class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">            UIImage *image = [UIImage imageWithContentsOfFile:[destinationPath path]];</span><br><span class="line">            self.imageView.image = image;</span><br><span class="line">            self.imageView.contentMode = UIViewContentModeScaleAspectFill;</span><br><span class="line">            self.imageView.hidden = NO;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        NSLog(@&quot;Couldn&apos;t copy the downloaded file&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // â‡ï¸ ä¼šè¯ç½®ç©ºï¼Œè§£é™¤å¾ªç¯å¼•ç”¨</span><br><span class="line">    if(downloadTask == cancellableTask) &#123;</span><br><span class="line">        cancellableTask = nil;</span><br><span class="line">    &#125; else if (downloadTask == self.resumableTask) &#123;</span><br><span class="line">        self.resumableTask = nil;</span><br><span class="line">        partialDownload = nil;</span><br><span class="line">    &#125; else if (session == self.backgroundSession) &#123;</span><br><span class="line">        // åå°ä¼šè¯</span><br><span class="line">        self.backgroundTask = nil;</span><br><span class="line">        // Get hold of the app delegate</span><br><span class="line">        SCAppDelegate *appDelegate = (SCAppDelegate *)[[UIApplication sharedApplication] delegate];</span><br><span class="line">        if(appDelegate.backgroundURLSessionCompletionHandler) &#123;</span><br><span class="line">            // Need to copy the completion handler</span><br><span class="line">            void (^handler)() = appDelegate.backgroundURLSessionCompletionHandler;</span><br><span class="line">            appDelegate.backgroundURLSessionCompletionHandler = nil;</span><br><span class="line">            handler();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - NSURLSessionTaskDelegate</span><br><span class="line">// æ¯ä¸€ä¸ªä»»åŠ¡ç»“æŸçš„æ—¶å€™æ‰§è¡Œ-NSURLSessionDelegate,ä¸ç®¡ä»»åŠ¡æ˜¯ä¸æ˜¯æ­£å¸¸ç»“æŸ:</span><br><span class="line">- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error &#123;</span><br><span class="line">    // ä¸»çº¿ç¨‹æ›´æ–° UI</span><br><span class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        self.progressIndicator.hidden = YES;</span><br><span class="line">        [self setDownloadButtonsAsEnabled:YES];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>å¼€å¯åå°ä¸‹è½½ä»»åŠ¡æ—¶ï¼Œå³ä½¿å…³é—­äº†åº”ç”¨ç¨‹åºï¼Œè¿™ä¸ªä¸‹è½½ä»»åŠ¡ä¾ç„¶åœ¨åå°è¿è¡Œã€‚</p>
<p>å½“è¿™ä¸ªä¸‹è½½ä»»åŠ¡å®Œæˆåï¼ŒiOSå°†ä¼šé‡æ–°å¯åŠ¨appæ¥è®©ä»»åŠ¡çŸ¥é“ï¼Œå¯¹è¿™ä¸ªæˆ‘ä»¬ä¸å¿…æ”¾åœ¨å¿ƒä¸Šã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨appçš„ä»£ç†ä¸­è°ƒç”¨ä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (void)application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier completionHandler:(void (^)())completionHandler</span><br><span class="line">&#123;</span><br><span class="line">    self.backgroundURLSessionCompletionHandler = completionHandler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-26ce50a3e3637801.gif?imageMogr2/auto-orient/strip" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/01/å¤©å¤©å“å°iOS7ç”œç‚¹ Day0ï¼šUIKit Dynamics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/01/å¤©å¤©å“å°iOS7ç”œç‚¹ Day0ï¼šUIKit Dynamics/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day0ï¼šUIKit Dynamics</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-01 11:08:00" itemprop="dateCreated datePublished" datetime="2017-09-01T11:08:00+08:00">2017-09-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 15:25:46" itemprop="dateModified" datetime="2019-04-17T15:25:46+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/01/å¤©å¤©å“å°iOS7ç”œç‚¹ Day0ï¼šUIKit Dynamics/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day0ï¼šUIKit Dynamics">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p><strong>UIKit Dyanmics</strong> æ˜¯ <strong>UIKit</strong> ä¸‹çš„ä¸€ä¸ªäºŒç»´çš„ç‰©ç†å¼•æ“ã€‚</p>
<h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/archives/page/4/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 0 :: UIKit Dynamics</a></li>
</ul>
<h3 id="å…³é”®çš„å‡ ä¸ªç±»"><a href="#å…³é”®çš„å‡ ä¸ªç±»" class="headerlink" title="å…³é”®çš„å‡ ä¸ªç±»:"></a>å…³é”®çš„å‡ ä¸ªç±»:</h3><h4 id="UIDynamicBehavior-æ¨¡æ‹Ÿå¯¹è±¡çš„è¡Œä¸º"><a href="#UIDynamicBehavior-æ¨¡æ‹Ÿå¯¹è±¡çš„è¡Œä¸º" class="headerlink" title="UIDynamicBehavior æ¨¡æ‹Ÿå¯¹è±¡çš„è¡Œä¸º"></a>UIDynamicBehavior æ¨¡æ‹Ÿå¯¹è±¡çš„è¡Œä¸º</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-2e35531f5b99135f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="UIDynamicAnimator-ç‰©ç†å¼•æ“"><a href="#UIDynamicAnimator-ç‰©ç†å¼•æ“" class="headerlink" title="UIDynamicAnimator ç‰©ç†å¼•æ“"></a>UIDynamicAnimator ç‰©ç†å¼•æ“</h4><p><strong>UIDynamicAnimator</strong> è‡ªå·±å¯ä»¥æ ¹æ®ä¸åŒçš„è¡Œä¸ºæ¥è®¡ç®—ä¸åŒå¯¹è±¡é—´çš„ç›¸äº’å½±å“ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-085e701454c319f3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>ä½¿ç”¨æ–¹æ³•æ€»ç»“ï¼š</p>
<ol>
<li>ç”¨ <strong>UIDynamicBehavior</strong> çš„å­ç±»å¯¹è±¡è®¾ç½®ä¸åŒç‰©ä½“å„è‡ªçš„è¡Œä¸ºæˆ–è€…å®ƒä»¬é€šç”¨çš„è¡Œä¸ºï¼Œç„¶åå°†å®ƒä»¬æ·»åŠ åˆ° <strong>UIDynamicBehavior</strong> å®ä¾‹å¯¹è±¡ä¸Šï¼Œ</li>
<li>å°† <strong>UIDynamicBehavior</strong> å®ä¾‹å¯¹è±¡æ·»åŠ åˆ° <strong>UIDynamicAnimator</strong> ç‰©ç†å¼•æ“ä¸Šã€‚</li>
</ol>
<h3 id="Demoæºç ï¼šç‰›é¡¿æ‘†é’Ÿ"><a href="#Demoæºç ï¼šç‰›é¡¿æ‘†é’Ÿ" class="headerlink" title="Demoæºç ï¼šç‰›é¡¿æ‘†é’Ÿ"></a>Demoæºç ï¼šç‰›é¡¿æ‘†é’Ÿ</h3><p>è¯¥ Demo æ„å»ºä¸€ä¸ªç‰›é¡¿æ‘†é’Ÿæ¨¡æ‹Ÿé‡åŠ›å®éªŒã€‚<br><img src="http://upload-images.jianshu.io/upload_images/2648731-ebc9eb7b16f37eab.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="SCBallBearingView"><a href="#SCBallBearingView" class="headerlink" title="SCBallBearingView"></a>SCBallBearingView</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// **********************************************</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> åœ†å½¢é’Ÿæ‘†çƒæ¨¡å‹</span><br><span class="line"> */</span><br><span class="line">@interface SCBallBearingView : UIView</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// **********************************************</span><br><span class="line">#import &quot;SCBallBearingView.h&quot;</span><br><span class="line">@import QuartzCore;</span><br><span class="line"></span><br><span class="line">@implementation SCBallBearingView</span><br><span class="line"></span><br><span class="line">- (id)initWithFrame:(CGRect)frame</span><br><span class="line">&#123;</span><br><span class="line">    self = [super initWithFrame:frame];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        // åˆå§‹åŒ–ä»£ç </span><br><span class="line">        self.backgroundColor = [UIColor lightGrayColor];</span><br><span class="line">        self.layer.cornerRadius = MIN(CGRectGetHeight(frame), CGRectGetWidth(frame)) / 2.0;</span><br><span class="line">        self.layer.borderColor = [UIColor grayColor].CGColor;</span><br><span class="line">        self.layer.borderWidth = 2;</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h4 id="â‡ï¸-SCNewtonsCradleView"><a href="#â‡ï¸-SCNewtonsCradleView" class="headerlink" title="â‡ï¸ SCNewtonsCradleView"></a>â‡ï¸ SCNewtonsCradleView</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line">// **********************************************</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface SCNewtonsCradleView : UIView</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// **********************************************</span><br><span class="line">#import &quot;SCNewtonsCradleView.h&quot;</span><br><span class="line">#import &quot;SCBallBearingView.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation SCNewtonsCradleView &#123;</span><br><span class="line">    NSArray *_ballBearings;             // é’Ÿæ‘†çƒå®¹å™¨</span><br><span class="line">    UIDynamicAnimator *_animator;       // ç”¨äºæ§åˆ¶è¡Œä¸ºçš„ç‰©ç†å¼•æ“</span><br><span class="line">    UIPushBehavior *_userDragBehavior;  // æ‰‹åŠ¿çš„çº¿æ€§åŠ›é‡</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (id)initWithFrame:(CGRect)frame</span><br><span class="line">&#123;</span><br><span class="line">    self = [super initWithFrame:frame];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        // åˆå§‹åŒ–ä»£ç </span><br><span class="line">        [self createBallBearings];</span><br><span class="line">        [self applyDynamicBehaviors];</span><br><span class="line">        </span><br><span class="line">        // åˆå§‹åŒ–æ—¶æ–½åŠ æ¨åŠ›è®©é’Ÿæ‘†çƒæ‘‡æ‘†</span><br><span class="line">        _userDragBehavior = [[UIPushBehavior alloc] initWithItems:@[_ballBearings[0]] mode:UIPushBehaviorModeInstantaneous];</span><br><span class="line">        _userDragBehavior.pushDirection = CGVectorMake(-0.5, 0);</span><br><span class="line">        [_animator addBehavior:_userDragBehavior];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 1.åˆ›å»º5ä¸ªé’Ÿæ‘†çƒ</span><br><span class="line">- (void)createBallBearings</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableArray *bbArray = [NSMutableArray array];</span><br><span class="line">    NSUInteger numberBalls = 5;</span><br><span class="line">    CGFloat ballSize = CGRectGetWidth(self.bounds) / (3.0 * (numberBalls - 1));</span><br><span class="line">    </span><br><span class="line">    for (NSUInteger i=0; i&lt;numberBalls; i++) &#123;</span><br><span class="line">        // é’Ÿæ‘†çƒéœ€è¦è®¾ç½®å¾—è¶³å¤Ÿå°ï¼Œä½¿å®ƒä»¬ä¹‹é—´é™æ€æ‘†æ”¾æ—¶ä»ç•™æœ‰é—´éš™ã€‚</span><br><span class="line">        SCBallBearingView *bb = [[SCBallBearingView alloc] initWithFrame:CGRectMake(0, 0, ballSize - 1, ballSize - 1)];</span><br><span class="line">        </span><br><span class="line">        // æŠŠæ¯ä¸ªé’Ÿæ‘†çƒæ”¾åˆ°åˆé€‚çš„ä½ç½®</span><br><span class="line">        CGFloat x = CGRectGetWidth(self.bounds) / 3.0 + i * ballSize;</span><br><span class="line">        CGFloat y = CGRectGetHeight(self.bounds) / 2.0;</span><br><span class="line">        bb.center = CGPointMake(x, y);</span><br><span class="line">        </span><br><span class="line">        // ä¸ºæ¯ä¸ªé’Ÿæ‘†çƒæ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿æ“ä½œï¼Œè¿™æ ·å¯ä»¥é€šè¿‡æ‰‹åŠ¿æ¥æ‘†å¼„é’Ÿæ‘†çƒæ¨¡å‹:</span><br><span class="line">        UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handleBallBearingPan:)];</span><br><span class="line">        [bb addGestureRecognizer:gesture];</span><br><span class="line">        </span><br><span class="line">        // æŠŠé’Ÿæ‘†çƒæ·»åŠ è¿›æ•°ç»„ä¸­ï¼Œå¹¶æ·»åŠ ä¸ºå½“å‰é¡µé¢å­è§†å›¾</span><br><span class="line">        [bbArray addObject:bb];</span><br><span class="line">        [self addSubview:bb];</span><br><span class="line">    &#125;</span><br><span class="line">    _ballBearings = [NSArray arrayWithArray:bbArray];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIDynamics utility methods</span><br><span class="line">// 2.æ·»åŠ åŠ¨åŠ›è¡Œä¸º</span><br><span class="line">- (void)applyDynamicBehaviors</span><br><span class="line">&#123;</span><br><span class="line">    // åˆ›å»ºä¸€ä¸ªå¤åˆçš„è¡Œä¸ºé›†åˆ UIDynamicBehavior (å¯ä»¥åŒ…å«å¾ˆå¤šåŸºæœ¬è¡Œä¸º)</span><br><span class="line">    UIDynamicBehavior *behavior = [[UIDynamicBehavior alloc] init];</span><br><span class="line">    </span><br><span class="line">    // å°†æ¯ä¸ªçƒè½´æ‰¿å®‰è£…åˆ°å…¶æ¢è½´ç‚¹</span><br><span class="line">    for(id&lt;UIDynamicItem&gt; ballBearing in _ballBearings)</span><br><span class="line">    &#123;</span><br><span class="line">        // 2.1 ä¸ºæ¯ä¸ªé’Ÿæ‘†çƒæ·»åŠ è¿ç»“ç‰©è¡Œä¸º</span><br><span class="line">        UIDynamicBehavior *attachmentBehavior = [self createAttachmentBehaviorForBallBearing:ballBearing];</span><br><span class="line">        [behavior addChildBehavior:attachmentBehavior];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 2.2 æ·»åŠ é‡åŠ›è¡Œä¸º</span><br><span class="line">    [behavior addChildBehavior:[self createGravityBehaviorForObjects:_ballBearings]];</span><br><span class="line">    </span><br><span class="line">    // 2.3 æ·»åŠ ç¢°æ’è¡Œä¸º</span><br><span class="line">    [behavior addChildBehavior:[self createCollisionBehaviorForObjects:_ballBearings]];</span><br><span class="line">    </span><br><span class="line">    // 2.4 æŒ‡å®šç¢°æ’çš„å¼¹æ€§</span><br><span class="line">    // ä½¿ç”¨ UIDynamicItemBehavior æ¥æŒ‡å®šç¢°æ’çš„å¼¹æ€§ã€‚</span><br><span class="line">    // dynamic item è¡Œä¸ºä¹Ÿå¯ä»¥è®¾ç½®çº¿æ€§å’Œè§’é€Ÿåº¦ï¼ŒæŠŠå®ƒä»¬æ·»åŠ åˆ°æ‰‹åŠ¿æ“ä½œä¸Šé¢æ˜¯ååˆ†æœ‰ç”¨çš„ã€‚</span><br><span class="line">    UIDynamicItemBehavior *itemBehavior = [[UIDynamicItemBehavior alloc] initWithItems:_ballBearings];</span><br><span class="line">    // è®¾ç½®äº†å…¶ä»–çš„å±æ€§</span><br><span class="line">    itemBehavior.elasticity = 1.0;    // å¼¹æ€§</span><br><span class="line">    itemBehavior.allowsRotation = NO; // rotation(æ—‹è½¬),è¿è¡Œæ—‹è½¬æ—¶ï¼Œå¯ä»¥æŒ‡å®šè§’é˜»åŠ›</span><br><span class="line">    itemBehavior.resistance = 2.f;    // resistance(é˜»å°¼ï¼Œç©ºæ°”äº§ç”Ÿçš„é˜»å°¼)</span><br><span class="line">    [behavior addChildBehavior:itemBehavior];</span><br><span class="line">    </span><br><span class="line">    // 2.5 åˆ›å»ºç‰©ç†å¼•æ“åŠ¨ç”»</span><br><span class="line">    // åˆ›å»ºç‰©ç†å¼•æ“æ¥æ§åˆ¶è¿™äº›è¡Œä¸ºï¼Œæ‰€ä»¥æˆ‘ä»¬å®šäº†ä¸€ä¸ªç±»çš„å…¨å±€å˜é‡(iVar):UIDynamicAnimator *_animator;</span><br><span class="line">    // UIDynamicAnimatorä»£è¡¨äº†æ¨¡æ‹ŸåŠ¨æ€ç³»ç»Ÿçš„ç‰©ç†å¼•æ“ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åˆ›å»ºäº†å®ƒï¼Œå¹¶ä¸”æŒ‡å®šäº†å®ƒå‚ç…§çš„view(æ—¢æŒ‡å®šå®‡å®™ç©ºé—´),ä¹Ÿæ·»åŠ äº†æˆ‘ä»¬åˆ›å»ºçš„è¡Œä¸º.</span><br><span class="line">    _animator = [[UIDynamicAnimator alloc] initWithReferenceView:self];</span><br><span class="line">    // Add the composite behavior</span><br><span class="line">    [_animator addBehavior:behavior];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// è¿ç»“ç‰©çš„è¡Œä¸º(attachment behavior)éœ€è¦æ·»åŠ åˆ°é’Ÿæ‘†çƒä¸Šé¢ï¼Œå®ƒä»£è¡¨äº†ç»³å­å¯¹å®ƒçš„ç‰µå¼•ä½œç”¨:</span><br><span class="line">- (UIDynamicBehavior *)createAttachmentBehaviorForBallBearing:(id&lt;UIDynamicItem&gt;)ballBearing</span><br><span class="line">&#123;</span><br><span class="line">    // UIAttachmentBehavior å®ä¾‹ä¼´éšä¸€ä¸ªåŠ¨æ€çš„å¯¹è±¡(ä¸€ä¸ªé”šç‚¹æˆ–è€…å¦å¤–çš„å¯¹è±¡),å®ƒä»¬æœ‰å…·ä½“çš„å±æ€§æ¥æ§åˆ¶ç»³å­å¯¹å®ƒçš„è¡Œä¸º - å…·ä½“å°±æ˜¯å®ƒçš„é¢‘ç¹æ€§ã€é˜»å°¼å’Œé•¿åº¦ã€‚é»˜è®¤çš„è®¾ç½®å°±æ˜¯ä¸€ä¸ªå®Œå…¨åˆšæ€§çš„è¿æ¥ç‰©(æ²¡æœ‰ä»»ä½•é•¿åº¦ä¼¸ç¼©å¼¹æ€§çš„ç‰©ä½“),åˆšæ€§çš„è¿æ¥ç‰©æ­£æ˜¯æˆ‘ä»¬çš„é’Ÿæ‘†çƒæ‰€éœ€è¦çš„ã€‚</span><br><span class="line">    </span><br><span class="line">    CGPoint anchor = ballBearing.center;</span><br><span class="line">    // é”šç‚¹åœ¨é’Ÿæ‘†çƒçš„æ­£ä¸Šæ–¹</span><br><span class="line">    anchor.y -= CGRectGetHeight(self.bounds) / 4.0;</span><br><span class="line">    </span><br><span class="line">    // åœ¨ç„ç‚¹ä¸Šæ–¹ç”»ä¸€ä¸ªç›’å­. è¿™ä¸æ˜¯è¡Œä¸ºçš„ä¸€éƒ¨åˆ†ï¼Œåªæ˜¯ä¸ºäº†è§†è§‰ä¸Šå¾ˆå¥½çœ‹</span><br><span class="line">    UIView *blueBox = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)];</span><br><span class="line">    blueBox.backgroundColor = [UIColor blueColor];</span><br><span class="line">    blueBox.center = anchor;</span><br><span class="line">    [self addSubview:blueBox];</span><br><span class="line">    </span><br><span class="line">    // 2.1 åˆ›å»ºè¿ç»“ç‰©è¡Œä¸º</span><br><span class="line">    UIAttachmentBehavior *behavior = [[UIAttachmentBehavior alloc] initWithItem:ballBearing</span><br><span class="line">                                                               attachedToAnchor:anchor];</span><br><span class="line">    return behavior;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIDynamicBehavior *)createGravityBehaviorForObjects:(NSArray *)objects</span><br><span class="line">&#123;</span><br><span class="line">    // 2.2 åˆ›å»ºé‡åŠ›è¡Œä¸º</span><br><span class="line">    // UIGravityBehavior ä»£è¡¨äº†å¯¹è±¡æœ¬èº«å’Œåœ°çƒä¹‹é—´çš„é‡åŠ›å¸å¼•åŠ›ï¼Œå®ƒæœ‰ä¸€äº›å±æ€§å…è®¸ä½ è®¾ç½®çŸ¢é‡çš„ä¸‡æœ‰å¼•åŠ›(å°±æ˜¯é‡åŠ›ç³»æ•°magnitudeå’Œæ–¹å‘direction),æˆ‘ä»¬è¿™é‡Œå¢åŠ äº†é‡åŠ›ç³»æ•°ï¼Œä½†æ˜¯ä¿æŒé‡åŠ›çš„æ–¹å‘åœ¨yè½´ä¸Šé¢ã€‚</span><br><span class="line">    UIGravityBehavior *gravity = [[UIGravityBehavior alloc] initWithItems:objects];</span><br><span class="line">    gravity.magnitude = 10; // è®¾ç½®é‡åŠ›ç³»æ•°</span><br><span class="line">    return gravity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIDynamicBehavior *)createCollisionBehaviorForObjects:(NSArray *)objects</span><br><span class="line">&#123;</span><br><span class="line">    // 2.3 åˆ›å»ºç¢°æ’è¡Œä¸º</span><br><span class="line">    // å°†ç¢°æ’è¡Œä¸ºä½œç”¨åœ¨æ¨¡æ‹Ÿç³»ç»Ÿä¸­çš„æ‰€æœ‰å¯¹è±¡ä¸Šé¢ã€‚</span><br><span class="line">    // ç¢°æ’è¡Œä¸ºè¿˜å¯ä»¥ç”¨äºæ¨¡å‹å¯¹è±¡è¾¾åˆ°è¾¹ç•Œå¦‚è§†å›¾è¾¹ç•Œ,æˆ–ä»»æ„çš„è´å¡å°”æ›²çº¿è·¯å¾„çš„ç•Œé™ã€‚</span><br><span class="line">    return [[UICollisionBehavior alloc] initWithItems:objects];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIGestureRecognizer target method</span><br><span class="line">// å®ç°æ‰‹åŠ¿çš„å…·ä½“è¡Œä¸º</span><br><span class="line">// UIPushBehavior ä»£è¡¨ä¸€ä¸ªç®€å•çš„çº¿æ€§åŠ›é‡ä½œç”¨äºå¯¹è±¡ä¸Šé¢ã€‚å½“åŠ›æ¶ˆå¤±çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å›æ”¶ä½œç”¨åœ¨é’Ÿæ‘†çƒä¸Šé¢çš„åŠ›,æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±»å…¨å±€å˜é‡(iVar) UIPushBehavior *_userDragBehvior,è¿™ä¸ªå˜é‡å¯æ˜¯åœ¨æ‰‹åŠ¿è§¦å‘å¼€å§‹çš„æ—¶å€™èµ‹å€¼ï¼Œéœ€è¦è®°å¾—æŠŠè¿™ä¸ªè¡Œä¸ºæ·»åŠ åˆ°dynamics animatorä¸­ï¼Œ æˆ‘ä»¬åŠ›çš„å¤§å°ä¸æ°´å¹³ä½ç§»æˆæ­£æ¯”ï¼Œ ä¸ºäº†è®©é’Ÿæ‘†çƒæ‘‡æ‘†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰‹åŠ¿ç»“æŸçš„æ—¶å€™åˆ é™¤æ‰pushè¡Œä¸ºã€‚</span><br><span class="line"></span><br><span class="line">- (void)handleBallBearingPan:(UIPanGestureRecognizer *)recognizer</span><br><span class="line">&#123;</span><br><span class="line">    // æ‹–åŠ¨æ‰‹åŠ¿è§¦å‘æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ‹–åŠ¨åŠ›</span><br><span class="line">    if (recognizer.state == UIGestureRecognizerStateBegan) &#123;</span><br><span class="line">        if(_userDragBehavior) &#123;</span><br><span class="line">            [_animator removeBehavior:_userDragBehavior];</span><br><span class="line">        &#125;</span><br><span class="line">        // å°† UIPushBehavior å¯¹è±¡æ·»åŠ åˆ° UIDynamicAnimator ç‰©ç†å¼•æ“ä¸Š</span><br><span class="line">        _userDragBehavior = [[UIPushBehavior alloc] initWithItems:@[recognizer.view] mode:UIPushBehaviorModeContinuous];</span><br><span class="line">        [_animator addBehavior:_userDragBehavior];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // è®¾ç½®åŠ›çš„å¤§å°,ä¸æ°´å¹³ä½ç§»æˆæ­£æ¯”</span><br><span class="line">    _userDragBehavior.pushDirection = CGVectorMake([recognizer translationInView:self].x / 10.f, 0);</span><br><span class="line">    </span><br><span class="line">    // æ‹–åŠ¨æ‰‹åŠ¿ç»“æŸæ—¶ï¼Œå›æ”¶ä½œç”¨åœ¨é’Ÿæ‘†çƒä¸Šé¢çš„åŠ›</span><br><span class="line">    if (recognizer.state == UIGestureRecognizerStateEnded) &#123;</span><br><span class="line">        [_animator removeBehavior:_userDragBehavior];</span><br><span class="line">        _userDragBehavior = nil;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†ç‰›é¡¿é’Ÿæ‘†çƒè§†å›¾æ·»åŠ åˆ°ä¸»é¡µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">	// Do any additional setup after loading the view, typically from a nib.</span><br><span class="line">    _newtonsCradle = [[SCNewtonsCradleView alloc] initWithFrame:self.view.bounds];</span><br><span class="line">    [self.view addSubview:_newtonsCradle];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŠ¨ç”»æ•ˆæœ"><a href="#åŠ¨ç”»æ•ˆæœ" class="headerlink" title="åŠ¨ç”»æ•ˆæœ"></a>åŠ¨ç”»æ•ˆæœ</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-18a1ff155672b720.gif?imageMogr2/auto-orient/strip" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/08/22/ã€ŠEffective Objective-C 2.0ã€‹2.å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/22/ã€ŠEffective Objective-C 2.0ã€‹2.å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ/" class="post-title-link" itemprop="url">ã€ŠEffective Objective-C 2.0ã€‹2.å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-08-22 14:10:00" itemprop="dateCreated datePublished" datetime="2017-08-22T14:10:00+08:00">2017-08-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 00:45:03" itemprop="dateModified" datetime="2019-04-18T00:45:03+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ã€ŠEffective-Objective-C-2-0ã€‹/" itemprop="url" rel="index"><span itemprop="name">ã€ŠEffective Objective-C 2.0ã€‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/08/22/ã€ŠEffective Objective-C 2.0ã€‹2.å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ/" class="leancloud_visitors" data-flag-title="ã€ŠEffective Objective-C 2.0ã€‹2.å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <p><img src="http://upload-images.jianshu.io/upload_images/2648731-30062a72b4270bc7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/08/22/ã€ŠEffective Objective-C 2.0ã€‹2.å¯¹è±¡ã€æ¶ˆæ¯ã€è¿è¡ŒæœŸ/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/08/21/ã€ŠEffective Objective-C 2.0ã€‹7.ç³»ç»Ÿæ¡†æ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/21/ã€ŠEffective Objective-C 2.0ã€‹7.ç³»ç»Ÿæ¡†æ¶/" class="post-title-link" itemprop="url">ã€ŠEffective Objective-C 2.0ã€‹7.ç³»ç»Ÿæ¡†æ¶</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-08-21 10:56:00" itemprop="dateCreated datePublished" datetime="2017-08-21T10:56:00+08:00">2017-08-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 00:48:19" itemprop="dateModified" datetime="2019-04-18T00:48:19+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ã€ŠEffective-Objective-C-2-0ã€‹/" itemprop="url" rel="index"><span itemprop="name">ã€ŠEffective Objective-C 2.0ã€‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/08/21/ã€ŠEffective Objective-C 2.0ã€‹7.ç³»ç»Ÿæ¡†æ¶/" class="leancloud_visitors" data-flag-title="ã€ŠEffective Objective-C 2.0ã€‹7.ç³»ç»Ÿæ¡†æ¶">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <p><img src="http://upload-images.jianshu.io/upload_images/2648731-7dcb0ad568b4fb8b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/08/21/ã€ŠEffective Objective-C 2.0ã€‹7.ç³»ç»Ÿæ¡†æ¶/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/08/20/ã€ŠEffective Objective-C 2.0ã€‹6.å—ä¸å¤§ä¸­æ¢æ´¾å‘/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/20/ã€ŠEffective Objective-C 2.0ã€‹6.å—ä¸å¤§ä¸­æ¢æ´¾å‘/" class="post-title-link" itemprop="url">ã€ŠEffective Objective-C 2.0ã€‹6.å—ä¸å¤§ä¸­æ¢æ´¾å‘</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-08-20 15:36:00" itemprop="dateCreated datePublished" datetime="2017-08-20T15:36:00+08:00">2017-08-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 00:47:39" itemprop="dateModified" datetime="2019-04-18T00:47:39+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ã€ŠEffective-Objective-C-2-0ã€‹/" itemprop="url" rel="index"><span itemprop="name">ã€ŠEffective Objective-C 2.0ã€‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/08/20/ã€ŠEffective Objective-C 2.0ã€‹6.å—ä¸å¤§ä¸­æ¢æ´¾å‘/" class="leancloud_visitors" data-flag-title="ã€ŠEffective Objective-C 2.0ã€‹6.å—ä¸å¤§ä¸­æ¢æ´¾å‘">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <p><img src="http://upload-images.jianshu.io/upload_images/2648731-87bda0c1063653a9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/08/20/ã€ŠEffective Objective-C 2.0ã€‹6.å—ä¸å¤§ä¸­æ¢æ´¾å‘/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/08/17/ã€ŠEffective Objective-C 2.0ã€‹5.å†…å­˜ç®¡ç†/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/17/ã€ŠEffective Objective-C 2.0ã€‹5.å†…å­˜ç®¡ç†/" class="post-title-link" itemprop="url">ã€ŠEffective Objective-C 2.0ã€‹5.å†…å­˜ç®¡ç†</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-08-17 13:19:00" itemprop="dateCreated datePublished" datetime="2017-08-17T13:19:00+08:00">2017-08-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 00:47:00" itemprop="dateModified" datetime="2019-04-18T00:47:00+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ã€ŠEffective-Objective-C-2-0ã€‹/" itemprop="url" rel="index"><span itemprop="name">ã€ŠEffective Objective-C 2.0ã€‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/08/17/ã€ŠEffective Objective-C 2.0ã€‹5.å†…å­˜ç®¡ç†/" class="leancloud_visitors" data-flag-title="ã€ŠEffective Objective-C 2.0ã€‹5.å†…å­˜ç®¡ç†">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <p><img src="http://upload-images.jianshu.io/upload_images/2648731-bc415805a22122ac.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/08/17/ã€ŠEffective Objective-C 2.0ã€‹5.å†…å­˜ç®¡ç†/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/08/15/ã€ŠEffective Objective-C 2.0ã€‹4.åè®®ä¸åˆ†ç±»/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/15/ã€ŠEffective Objective-C 2.0ã€‹4.åè®®ä¸åˆ†ç±»/" class="post-title-link" itemprop="url">ã€ŠEffective Objective-C 2.0ã€‹4.åè®®ä¸åˆ†ç±»</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-08-15 16:54:00" itemprop="dateCreated datePublished" datetime="2017-08-15T16:54:00+08:00">2017-08-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 00:46:28" itemprop="dateModified" datetime="2019-04-18T00:46:28+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ã€ŠEffective-Objective-C-2-0ã€‹/" itemprop="url" rel="index"><span itemprop="name">ã€ŠEffective Objective-C 2.0ã€‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/08/15/ã€ŠEffective Objective-C 2.0ã€‹4.åè®®ä¸åˆ†ç±»/" class="leancloud_visitors" data-flag-title="ã€ŠEffective Objective-C 2.0ã€‹4.åè®®ä¸åˆ†ç±»">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <p><img src="http://upload-images.jianshu.io/upload_images/2648731-6096cbfd905b1eb0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/08/15/ã€ŠEffective Objective-C 2.0ã€‹4.åè®®ä¸åˆ†ç±»/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/15/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/17/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg" alt="ç‹¬æœ¨èˆŸçš„æœ¨">
            
              <p class="site-author-name" itemprop="name">ç‹¬æœ¨èˆŸçš„æœ¨</p>
              <div class="site-description motion-element" itemprop="description">æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">312</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">54</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ç‹¬æœ¨èˆŸçš„æœ¨</span>

  

  
</div>


  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/16/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz',
                'X-LC-Key': 'brOnU8mOQvSjpipJvdKUAIbU',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  


  <!-- red heart -->
  <script type="text/javascript" src="/js/src/love.js"></script>
  
</body>
</html>
