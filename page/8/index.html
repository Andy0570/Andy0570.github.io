<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="有时候阳光很好 有时候阳光很暗">
<meta name="keywords" content="独木舟的木">
<meta property="og:type" content="website">
<meta property="og:title" content="独木舟的木">
<meta property="og:url" content="https://andy0570.com/page/8/index.html">
<meta property="og:site_name" content="独木舟的木">
<meta property="og:description" content="有时候阳光很好 有时候阳光很暗">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="独木舟的木">
<meta name="twitter:description" content="有时候阳光很好 有时候阳光很暗">



  <link rel="alternate" href="/atom.xml" title="独木舟的木" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/8/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>独木舟的木</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">独木舟的木</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">39</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">314</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/10/06/JavaScript 编程：3.变量、作用域和内存/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/06/JavaScript 编程：3.变量、作用域和内存/" class="post-title-link" itemprop="url">JavaScript 编程：3.变量、作用域和内存</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-06 03:31:00" itemprop="dateCreated datePublished" datetime="2018-10-06T03:31:00+08:00">2018-10-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 14:52:02" itemprop="dateModified" datetime="2019-04-18T14:52:02+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/06/JavaScript 编程：3.变量、作用域和内存/" class="leancloud_visitors" data-flag-title="JavaScript 编程：3.变量、作用域和内存">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>变量：JavaScript 变量<strong>松散类型</strong>的本质，决定了它只是在特定时间用于保存特定值的一个名字而已。</p>
<h2 id="基本类型和引用类型"><a href="#基本类型和引用类型" class="headerlink" title="基本类型和引用类型"></a>基本类型和引用类型</h2><p>ECMAScript 变量的两种数据类型：</p>
<ol>
<li><strong>基本类型</strong>；</li>
<li><strong>引用类型</strong>；</li>
</ol>
<table>
<thead>
<tr>
<th>数据类型</th>
<th style="text-align:left">基本类型</th>
<th>引用类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>含义</td>
<td style="text-align:left">简单的数据段，5种基本数据类型：Undefined、Null、Boolean、Number、String。</td>
<td>可能由多个值构成的对象。</td>
</tr>
<tr>
<td>访问方式</td>
<td style="text-align:left">按值访问，可以操作保存在变量中的实际的值。</td>
<td>按引用访问，不能直接操作对象的内存空间。</td>
</tr>
<tr>
<td>保存区域</td>
<td style="text-align:left">栈内存</td>
<td>堆内存</td>
</tr>
<tr>
<td>复制</td>
<td style="text-align:left">开辟新的内存空间</td>
<td>两个指针引用同一个对象</td>
</tr>
</tbody>
</table>
<h3 id="动态的属性"><a href="#动态的属性" class="headerlink" title="动态的属性"></a>动态的属性</h3><ul>
<li>引用类型：可以为其添加属性和方法，也可以改变和删除其属性和方法。</li>
<li>基本类型：不能给基本类型的值添加属性。</li>
</ul>
<h3 id="复制变量值"><a href="#复制变量值" class="headerlink" title="复制变量值"></a>复制变量值</h3><p>从一个变量向另一个变量复制<strong>基本类型</strong>的值，会在变量对象上创建一个新值，然后把该值复制到为新变量分配的位置上。</p>
<p>从一个变量向另一个变量复制<strong>引用类型</strong>的值，同样也会将存储在变量对象中的值复制一份放到为新变量分配的空间中。不同的是，这个值的副本实际上是一个指针，而这个指针指向存储在堆中的一个对象。复制操作结束后，两个变量实际上将引用同一个对象。因此，改变其中一个变量，就会影响另一个变量。</p>
<ul>
<li>基本类型：会开辟新的内存，两个值互不影响。</li>
<li>引用类型：指针，指向存储在堆中的同一个对象。</li>
</ul>
<h3 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h3><ul>
<li><p>ECMAScript 中所有函数的参数都是<strong>按值传递</strong>的。</p>
</li>
<li><p>在向参数传递<strong>基本类型</strong>的值时，被传递的值会被复制给一个局部变量(即命名参数，或者用ECMAScript 的概念来说，就是 arguments 对象中的一个元素)。</p>
</li>
<li><p>在向参数传递<strong>引用类型</strong>的值时，会把这个值在内存中的地址复制给一个局部变量，因此这个局部变量的变化会反映在函数的外部。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本类型传递参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTen</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    num += <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> result = addTen(count);</span><br><span class="line"><span class="built_in">console</span>.log(count); <span class="comment">// 20,没有变化。</span></span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 30</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="检测类型"><a href="#检测类型" class="headerlink" title="检测类型"></a>检测类型</h3><ul>
<li><code>typeof</code> 操作符，检测一个值是哪种基本数据类型；</li>
<li><code>instancehof</code>，引用类型-true，基本类型-false。</li>
</ul>
<blockquote>
<p>💡💡💡</p>
<p>typeof 操作符是确定一个变量是字符串、数值、布尔值，还是 undefined 的最佳工具。</p>
</blockquote>
<h3 id="执行环境"><a href="#执行环境" class="headerlink" title="执行环境"></a>执行环境</h3><ul>
<li>全局执行环境；</li>
<li>函数执行环境；</li>
<li>全局环境只能访问在全局环境中定义的变量和函数，而不能直接访问局部环境中的任何数据; </li>
<li>内部环境可以通过作用域链访问所有的外部环境，但外部环境不能访问内部环境中的任何变量和函数。这些环境之间的联系是线性、有次序的。每个环境都可以向上搜索作用域链，以查询变量和函数名;但任何环境都不能通过向下搜索作用域链而进入另一个执行环境。</li>
</ul>
<h3 id="延长作用域链"><a href="#延长作用域链" class="headerlink" title="延长作用域链"></a>延长作用域链</h3><p>在作用域链的前端临时增加一个变量对象，该变量对象会在代码执行后被移除。</p>
<p>当执行流进入下列任何一个语句时，作用域链就会得到加长:</p>
<ul>
<li>try-catch 语句的 catch 块；</li>
<li>with 语句。</li>
</ul>
<h3 id="没有块级作用域-amp-作用域链"><a href="#没有块级作用域-amp-作用域链" class="headerlink" title="没有块级作用域 &amp; 作用域链"></a>没有块级作用域 &amp; 作用域链</h3><p>在 JavaScript 中，if 语句中的变量声明会将变量添加到当前的执行环境中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> color = <span class="string">"blue"</span>; <span class="comment">// 变量会被添加到当前执行环境。</span></span><br><span class="line">&#125; <span class="comment">// if语句结束后，变量不会被销毁。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// if&#123;&#125; 外部依然可以访问到内部声明的变量</span></span><br><span class="line">alert(color); <span class="comment">// "blue"</span></span><br></pre></td></tr></table></figure>
<h3 id="垃圾收集"><a href="#垃圾收集" class="headerlink" title="垃圾收集"></a>垃圾收集</h3><p>JavaScript 具有自动垃圾收集机制，也就是说，执行环境会负责管理代码执行过程中使用的内存。</p>
<p>原理：找出不再继续使用的变量，释放其占用的内存。</p>
<ul>
<li>标记清除：进入环境-离开环境；给当前不使用的值加上标记，然后再回收其内存。</li>
<li>引用记数；循环引用问题。</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/10/03/JavaScript 编程：2.基本概念/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/03/JavaScript 编程：2.基本概念/" class="post-title-link" itemprop="url">JavaScript 编程：2.基本概念</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-03 15:11:00" itemprop="dateCreated datePublished" datetime="2018-10-03T15:11:00+08:00">2018-10-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 14:51:36" itemprop="dateModified" datetime="2019-04-18T14:51:36+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/10/03/JavaScript 编程：2.基本概念/" class="leancloud_visitors" data-flag-title="JavaScript 编程：2.基本概念">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h1 id="3-基本概念"><a href="#3-基本概念" class="headerlink" title="3. 基本概念"></a>3. 基本概念</h1><ul>
<li>ECMAScript 中的一切（变量、函数名和操作符）都区分大小写。</li>
<li>最佳实践：ECMAScript 标识符采用驼峰大小写格式。</li>
<li>JavaScript 语句结尾的分号（;）不是必须的，但是建议任何时候都不要省略它。</li>
</ul>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><h3 id="单行注视"><a href="#单行注视" class="headerlink" title="单行注视"></a>单行注视</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单行注视</span></span><br></pre></td></tr></table></figure>
<h3 id="块级注视"><a href="#块级注视" class="headerlink" title="块级注视"></a>块级注视</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 这是一个多行</span></span><br><span class="line"><span class="comment"> * （块级）注释</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h2 id="严格模式，-quot-use-strict-quot"><a href="#严格模式，-quot-use-strict-quot" class="headerlink" title="严格模式，&quot;use strict&quot;"></a>严格模式，<code>&quot;use strict&quot;</code></h2><p>在严格模式中，ECMAScript 3 中一些不确定的行为将得到处理，而且对某些不安全的操作也会抛出错误。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.整个脚本启用严格模式，在文件顶部添加：</span></span><br><span class="line"><span class="meta">"use strict"</span> </span><br><span class="line"><span class="comment">// 该语法是一个编译指示</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.函数体内启用严格模式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    "use strict"</span>;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="关键字和保留字"><a href="#关键字和保留字" class="headerlink" title="关键字和保留字"></a>关键字和保留字</h2><ul>
<li>不要使用关键字和保留字作为标识符、属性名或者函数名。</li>
</ul>
<p>关键字：</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">case</span></span><br><span class="line"><span class="keyword">catch</span></span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="keyword">default</span></span><br><span class="line"><span class="keyword">delete</span></span><br><span class="line"><span class="keyword">debugger</span> (第 <span class="number">5</span> 版新增)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line"><span class="keyword">for</span></span><br><span class="line"><span class="keyword">function</span></span><br><span class="line"><span class="keyword">if</span></span><br><span class="line"><span class="keyword">in</span></span><br><span class="line"><span class="keyword">instanceof</span></span><br><span class="line"><span class="keyword">new</span></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="keyword">switch</span></span><br><span class="line"><span class="keyword">this</span></span><br><span class="line"><span class="keyword">throw</span></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line"><span class="keyword">typeof</span></span><br><span class="line"><span class="keyword">var</span></span><br><span class="line"><span class="literal">void</span></span><br><span class="line"><span class="keyword">while</span></span><br><span class="line"><span class="keyword">with</span></span><br></pre></td></tr></table></figure>
<p>保留字：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span></span><br><span class="line"><span class="keyword">boolean</span></span><br><span class="line"><span class="keyword">byte</span></span><br><span class="line"><span class="keyword">char</span></span><br><span class="line"><span class="keyword">class</span></span><br><span class="line">const</span><br><span class="line">debugger</span><br><span class="line"><span class="keyword">double</span></span><br><span class="line">enum</span><br><span class="line">export</span><br><span class="line"><span class="keyword">extends</span></span><br><span class="line"><span class="keyword">final</span></span><br><span class="line"><span class="keyword">float</span></span><br><span class="line">goto</span><br><span class="line"><span class="keyword">implements</span></span><br><span class="line"><span class="keyword">import</span></span><br><span class="line"><span class="keyword">int</span></span><br><span class="line"><span class="keyword">interface</span></span><br><span class="line"><span class="keyword">long</span></span><br><span class="line"><span class="keyword">native</span></span><br><span class="line"><span class="keyword">package</span></span><br><span class="line"><span class="keyword">private</span></span><br><span class="line"><span class="keyword">protected</span></span><br><span class="line"><span class="keyword">public</span></span><br><span class="line"><span class="keyword">short</span></span><br><span class="line"><span class="keyword">static</span></span><br><span class="line"><span class="keyword">super</span></span><br><span class="line"><span class="keyword">synchronized</span></span><br><span class="line"><span class="keyword">throws</span></span><br><span class="line"><span class="keyword">transient</span></span><br><span class="line"><span class="keyword">volatile</span></span><br></pre></td></tr></table></figure>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>ECMAScript 的变量是<strong>松散类型</strong>的，松散类型可以保存任何类型的数据。换句话说，每个变量仅仅是一个用于保存值的占位符而已。定义变量时要使用 var 操作符。</p>
<ul>
<li><p>使用 var 操作符定义的变量将成为定义该变量的作用域中的局部变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> message = <span class="string">"hello"</span>; <span class="comment">// 局部变量</span></span><br><span class="line">&#125;</span><br><span class="line">test();</span><br><span class="line"><span class="built_in">console</span>.log(message); <span class="comment">// 错误！</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>省略 var 操作符创建全局变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 不推荐！</span></span><br><span class="line"><span class="comment"> * 严格模式下会报错：ReferenceError: message is not defined</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    message = <span class="string">"hello"</span>; <span class="comment">// 全局变量</span></span><br><span class="line">&#125;</span><br><span class="line">test();</span><br><span class="line"><span class="built_in">console</span>.log(message); <span class="comment">// "hello"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>定义多个变量，用逗号分隔开。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> message = <span class="string">"hello"</span>,</span><br><span class="line">    found = <span class="literal">false</span>,</span><br><span class="line">    age = <span class="number">24</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p><img src="http://upload-images.jianshu.io/upload_images/2648731-9b1cf98d1bbefe79.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<ul>
<li>Object 本质上是由一组无序的键值对组成的。</li>
</ul>
<h3 id="typeof-操作符"><a href="#typeof-操作符" class="headerlink" title="typeof 操作符"></a>typeof 操作符</h3><p>typeof 操作符：检测变量的数据类型。</p>
<p>⚠️ typeof 是一个操作符而不是函数。</p>
<table>
<thead>
<tr>
<th>typeof 操作符返回的字符串</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>“undedefined”</td>
<td>未定义</td>
</tr>
<tr>
<td>“boolean”</td>
<td>布尔值</td>
</tr>
<tr>
<td>“string”</td>
<td>字符串</td>
</tr>
<tr>
<td>“number”</td>
<td>数值</td>
</tr>
<tr>
<td>“object”</td>
<td>对象或null</td>
</tr>
<tr>
<td>“function”</td>
<td>函数</td>
</tr>
</tbody>
</table>
<h3 id="Undefined-类型"><a href="#Undefined-类型" class="headerlink" title="Undefined 类型"></a>Undefined 类型</h3><ul>
<li><p>在使用 var 声明变量但未对其进行初始化时，这个变量的值就是 <strong>undefined</strong>。</p>
</li>
<li><p>对<strong>未初始化</strong>和<strong>未声明</strong>的变量执行 typeof 操作符都会返回 <strong>undefined</strong> 值。🤔</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ！！！未声明变量&amp;未初始化变量的区别！！！ */</span></span><br><span class="line"><span class="keyword">var</span> message; <span class="comment">// 变量声明之后默认值为 undefined</span></span><br><span class="line"></span><br><span class="line">alert(message); <span class="comment">// "undefined"</span></span><br><span class="line">alert(age);     <span class="comment">// 没有声明的变量直接使用会产生错误！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ⚠️ 没有声明过的变量只能使用 typeof 操作符检测其数据类型</span></span><br><span class="line">alert(<span class="keyword">typeof</span> message); <span class="comment">// "undefined"</span></span><br><span class="line">alert(<span class="keyword">typeof</span> age)      <span class="comment">// "undefined"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>💡</p>
<p>即便未初始化的变量会自动被赋予 <strong>undefined</strong> 值，但显式地初始化变量依然是明智的选择。如果能够做到这一点，那么当 <strong>typeoft</strong> 操作符返回 <strong>“undefined”</strong> 值时，我们就知道被检测的变量还没有被声明，而不是尚未初始化。</p>
</blockquote>
<h3 id="Null-类型"><a href="#Null-类型" class="headerlink" title="Null 类型"></a>Null 类型</h3><ul>
<li><p>Null 类型只有一个值，null。</p>
</li>
<li><p>null 值表示一个空对象指针。因此，typeof null 会返回 “object”。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 空对象指针&amp;未经初始化变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不推荐使用 undefined 显式初始化变量,因为它默认就是 undefined。</span></span><br><span class="line"><span class="comment">// 而且，字面值 undefined 的主要目的是用于比较。</span></span><br><span class="line"><span class="keyword">var</span> message = <span class="literal">undefined</span>; <span class="comment">// ❎</span></span><br><span class="line"><span class="keyword">var</span> message;             <span class="comment">// ✅</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但是如果定义的变量是对象，那么最好将该变量初始化为 null 而不是其他值。</span></span><br><span class="line"><span class="keyword">var</span> car = <span class="literal">null</span>;    <span class="comment">// ✅</span></span><br><span class="line">alert(<span class="keyword">typeof</span> car); <span class="comment">// "object"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 实际上，undefined 值派生自 null 值</span></span><br><span class="line">alert(<span class="literal">null</span> == <span class="literal">undefined</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Boolean-类型"><a href="#Boolean-类型" class="headerlink" title="Boolean 类型"></a>Boolean 类型</h3><ul>
<li><p>Boolean 类型有两个字面值：true 和 false。</p>
</li>
<li><p>true 和 false 区分大小写。</p>
</li>
<li><p>转型函数：<code>Boolean()</code>：</p>
<p>| 数据类型  | 转换为true的值               | 转换为false的值 |<br>| ——— | —————————- | ————— |<br>| Boolean   | true                         | false           |<br>| String    | 任何非空字符串               | “ ”（空字符串） |<br>| Number    | 任何非零数字值（包括无穷大） | 0和NaN          |<br>| Object    | 任何对象                     | null            |<br>| Undefined | ——                           | undefined       |</p>
</li>
<li><p>将一个值转换为其对应的 Boolean 值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> message = <span class="string">"Hello World"</span>;</span><br><span class="line"><span class="keyword">var</span> messageAsBoolean = <span class="built_in">Boolean</span>(message);</span><br><span class="line"><span class="built_in">console</span>.log(messageAsBoolean); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> message = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> messageAsBoolean = <span class="built_in">Boolean</span>(message);</span><br><span class="line"><span class="built_in">console</span>.log(messageAsBoolean); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Number-类型"><a href="#Number-类型" class="headerlink" title="Number 类型"></a>Number 类型</h3><blockquote>
<p>与其他语言不同，ECMScript 没有为整数和浮点数值分别定义不同的数据类型，Number 类型可用于表示所有数值。 </p>
</blockquote>
<ul>
<li><p>Number 类型可以表示<strong>整数</strong>和<strong>浮点数</strong>。</p>
</li>
<li><p>Number 类型中，八进制在严格模式下无效。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> intNum = <span class="number">55</span>; <span class="comment">// 整数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> octalNum1 = <span class="number">070</span> <span class="comment">// 八进制的56</span></span><br><span class="line"><span class="comment">// 如果八进制的字面值超出了范围（0～7），前导零将会被忽略，后面的数值将被当作十进制数值解析。</span></span><br><span class="line"><span class="keyword">var</span> octNum2 = <span class="number">079</span>; <span class="comment">// 79</span></span><br><span class="line"><span class="keyword">var</span> octNum3 = <span class="number">08</span>; <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hexNum =<span class="number">0xA</span> <span class="comment">// 十六进制的10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 科学计数法</span></span><br><span class="line"><span class="keyword">var</span> float Num = <span class="number">3.125e7</span>; <span class="comment">// 31250000</span></span><br><span class="line"><span class="keyword">var</span> float Num = <span class="number">3.125e-3</span>; <span class="comment">// 0.003125</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>浮点数值的最高精度是17位小数，但在进行算术计算时其精确度远远不如整数</strong>。例如，0.1加0.2的结果不是0.3，而是0.30000000004。这个小小的舍入误差会导致无法测试特定的浮点数值。</p>
</li>
<li><p>浮点数值计算会产生舍入误差问题，因此，<strong>永远不要测试某个特定的浮点数值</strong>。</p>
</li>
<li><p>由于保存浮点数值需要的内存空间是保存整数值的两倍，因此 ECMAScript 会不失时机地将浮点数值转换为整数值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> floatNum1 = <span class="number">1.1</span>; <span class="comment">// 浮点数——1.1</span></span><br><span class="line"><span class="keyword">var</span> floatNum2 = <span class="number">1.</span>;  <span class="comment">// 小数点后面没有数字——解析为1</span></span><br><span class="line"><span class="keyword">var</span> floatNum3 = <span class="number">10.0</span> <span class="comment">// 整数——解析为10</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数值范围：如果某次计算的结果超出了 JavaScript 数值范围（<code>Number.MIN_VALUE</code> , <code>Number.MAX_VALUE</code>），那么这个数值会被自动转换为 <strong>Infinity</strong> 值。而 <strong>Infinity</strong> 值不是能够参与计算的数值。</p>
<p>⭐️⭐️⭐️ <code>isFinite()</code> 函数在参数位于最小与最大数值之间会返回true。</p>
</li>
<li><p><strong>NaN</strong>（Not a Number），非数值，表示<strong>本来要返回数值的操作数未返回数值的情况</strong>。</p>
</li>
</ul>
<ul>
<li><ol>
<li>任何涉及 NaN 的操作都会返回 NaN。</li>
<li>NaN 与任何值都不相等，包括 NaN 本身。</li>
</ol>
<p>⭐️⭐️⭐️ <code>isNaN()</code> 函数，确定传入参数是否“<strong>不是数值</strong>”。无法被转换为数值的值会返回 true。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不是数值/不能转换为数值，返回 true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="literal">NaN</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="number">10</span>));  <span class="comment">// false（10是一个数值）</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="string">"10"</span>)); <span class="comment">// false （可以被转换为数值10）</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="string">"blue"</span>)); <span class="comment">// true （不能被转换为数值）</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="string">"true"</span>)); <span class="comment">// true （可以被转换为数值1）</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="数值转换"><a href="#数值转换" class="headerlink" title="数值转换"></a>数值转换</h3><h4 id="1-Number-，非数值-—-gt-数值"><a href="#1-Number-，非数值-—-gt-数值" class="headerlink" title="1. Number () ，非数值 —&gt; 数值"></a>1. <code>Number ()</code> ，非数值 —&gt; 数值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Boolean</span></span><br><span class="line"><span class="keyword">var</span> num1 = <span class="built_in">Number</span>(<span class="literal">true</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> num2 = <span class="built_in">Number</span>(<span class="literal">false</span>); <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数字 —&gt; 数字</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// null</span></span><br><span class="line"><span class="keyword">var</span> num4 = <span class="built_in">Number</span>(<span class="literal">null</span>); <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> num5 = <span class="built_in">Number</span>(<span class="literal">undefined</span>); <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串</span></span><br><span class="line"><span class="keyword">var</span> num6 = <span class="built_in">Number</span>(<span class="string">"Hello world!"</span>); <span class="comment">// NaN</span></span><br><span class="line"><span class="keyword">var</span> num7 = <span class="built_in">Number</span>(<span class="string">"000011"</span>); <span class="comment">// 11</span></span><br><span class="line"><span class="keyword">var</span> num8 = <span class="built_in">Number</span>(<span class="string">""</span>); <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象 ——&gt; 字符串 ——&gt; 数字</span></span><br><span class="line"><span class="comment">// 1.自动调用对象的 valueOf() 方法，再转为数值；</span></span><br><span class="line"><span class="comment">// 2.自动调用对象的 toString() 方法，再转为数值；</span></span><br></pre></td></tr></table></figure>
<h4 id="2-parseInt-，字符串-—-gt-数值"><a href="#2-parseInt-，字符串-—-gt-数值" class="headerlink" title="2. parseInt ()，字符串 —&gt; 数值"></a>2. <code>parseInt ()</code>，字符串 —&gt; 数值</h4><p>在处理整数的时候更常用的是 <code>parseInt ()</code> 函数。<code>parseInt ()</code> 函数在转换字符串时，更多的是看其是否符合数值模式。它会忽略字符串前面的空格，直至找到第一个非空格字符。如果第一个字符不是数字字符或者负号，<code>parseInt ()</code> 就会返回 <strong>NaN</strong>;也就是说，用 <code>parseInt ()</code> 转换空字符串会返回 <strong>NaN</strong>(<code>Number()</code>对空字符返回 0)。如果第一个字符是数字字符，<code>parseInt ()</code>会继续解析第二个字符，直到解析完所有后续字符或者遇到了一个非数字字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 转换字符串</span></span><br><span class="line"><span class="keyword">var</span> num1 = <span class="built_in">parseInt</span>(<span class="string">"1234abcd"</span>);   <span class="comment">// 1234</span></span><br><span class="line"><span class="keyword">var</span> num2 = <span class="built_in">parseInt</span>(<span class="string">"1a2b3c4d5e"</span>); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// parseInt() 会忽略小数点，因为小数点是非数字字符。</span></span><br><span class="line"><span class="keyword">var</span> num3 = <span class="built_in">parseInt</span>(<span class="string">"22.5"</span>);       <span class="comment">// 22</span></span><br><span class="line"><span class="keyword">var</span> num4 = <span class="built_in">parseInt</span>(<span class="string">"22.34.5"</span>);     <span class="comment">// 22</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// parseInt() 处理空字符串返回 NaN</span></span><br><span class="line"><span class="keyword">var</span> num5 = <span class="built_in">parseInt</span>(<span class="string">""</span>); <span class="comment">// NaN</span></span><br><span class="line"><span class="keyword">var</span> num6 = <span class="built_in">Number</span>(<span class="string">""</span>); <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定基数（即多少进制）</span></span><br><span class="line"><span class="keyword">var</span> num1 = <span class="built_in">parseInt</span>(<span class="string">"10"</span>, <span class="number">2</span>);         <span class="comment">//2 – parsed as binary</span></span><br><span class="line"><span class="keyword">var</span> num2 = <span class="built_in">parseInt</span>(<span class="string">"10"</span>, <span class="number">8</span>);         <span class="comment">//8 – parsed as octal</span></span><br><span class="line"><span class="keyword">var</span> num3 = <span class="built_in">parseInt</span>(<span class="string">"10"</span>, <span class="number">10</span>);        <span class="comment">//10 – parsed as decimal</span></span><br><span class="line"><span class="keyword">var</span> num4 = <span class="built_in">parseInt</span>(<span class="string">"10"</span>, <span class="number">16</span>);        <span class="comment">//16 – parsed as hexadecimal</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>⚠️</p>
<p>在 ECMAScript 5 JavaScript 引擎中，<code>parseInt()</code> 已经不具有解析八进制值的能力，因此前导的零会<br>被认为无效，从而将这个值当成”70”，结果就得到十进制的 70。在 ECMAScript 5 中，即使是在非严格<br>模式下也会如此。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">var</span> num = <span class="built_in">parseInt</span>(<span class="string">"070"</span>); <span class="comment">// 70</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>为了避免错误的解析，建议无论在什么情况下都明确指定基数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">var</span> num = <span class="built_in">parseInt</span>(<span class="string">"070"</span>, <span class="number">8</span>); <span class="comment">// 56</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>多数情况下，我们要解析的都是十进制数值，因此始终将 10 作为第二个参数是非常必要的。</p>
</blockquote>
<h4 id="3-parseFloat-，字符串-—-gt-数值"><a href="#3-parseFloat-，字符串-—-gt-数值" class="headerlink" title="3. parseFloat ()，字符串 —&gt; 数值"></a>3. <code>parseFloat ()</code>，字符串 —&gt; 数值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num1 = <span class="built_in">parseFloat</span>(<span class="string">"12345blue"</span>); <span class="comment">// 12345</span></span><br><span class="line"><span class="keyword">var</span> num2 = <span class="built_in">parseFloat</span>(<span class="string">"0xA"</span>);       <span class="comment">// 0</span></span><br><span class="line"><span class="keyword">var</span> num3 = <span class="built_in">parseFloat</span>(<span class="string">"22.5"</span>);      <span class="comment">// 22.5</span></span><br><span class="line"><span class="keyword">var</span> num4 = <span class="built_in">parseFloat</span>(<span class="string">"22.34.5"</span>);   <span class="comment">// 22.34</span></span><br><span class="line"><span class="keyword">var</span> num5 = <span class="built_in">parseFloat</span>(<span class="string">"0980.5"</span>);    <span class="comment">// 980.5</span></span><br><span class="line"><span class="keyword">var</span> num6 = <span class="built_in">parseFloat</span>(<span class="string">"3.125e7"</span>);   <span class="comment">// 31250000</span></span><br></pre></td></tr></table></figure>
<ul>
<li>字符串中的第一个小数点是有效的，而第二个小数点是无效的。</li>
<li><code>parseFloat()</code> 与 <code>parseInt()</code> 的第二个区别在于它始终都会忽略前导零。</li>
<li><code>parseFloat()</code> 只解析十进制值，因此十六进制格式的字符串则始终会被转换成 0。</li>
<li>如果字符串包含的是一个可解析为<strong>整数</strong>的数(没有小数点，或者小数点后都是零)，<code>parseFloat()</code>会返回整数。</li>
</ul>
<h3 id="String-字符串"><a href="#String-字符串" class="headerlink" title="String 字符串"></a>String 字符串</h3><p>String 类型用于表示由零或多个 16 位 Unicode 字符组成的字符序列，即字符串。字符串可以用双引号（“）或者单引号（‘）表示。</p>
<h4 id="字符字面量"><a href="#字符字面量" class="headerlink" title="字符字面量"></a>字符字面量</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-c8f4922518cccd55.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<ul>
<li>ECMAScript 中的字符串是不可变的，也就是说，字符串一旦创建，它们的值就不能改变。</li>
</ul>
<p>把一个值转换为字符串的2个方法：</p>
<h4 id="1-toString（）"><a href="#1-toString（）" class="headerlink" title="1. toString（）"></a>1. <code>toString（）</code></h4><ul>
<li>⚠️ null 和 undefined 值没有这个方法。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在调用数值的 toString()方法时，可以传递一个参数：指定输出数值的基数，默认10进制转换。</span></span><br><span class="line"><span class="comment">// 通过传递基数，toString()可以输出以二进制、八进制、十六进制，乃至其他任意有效进制格式表示的字符串值。</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">alert(num.toString());       <span class="comment">//"10"</span></span><br><span class="line">alert(num.toString(<span class="number">2</span>));      <span class="comment">//"1010"</span></span><br><span class="line">alert(num.toString(<span class="number">8</span>));      <span class="comment">//"12"</span></span><br><span class="line">alert(num.toString(<span class="number">10</span>));     <span class="comment">//"10"</span></span><br><span class="line">alert(num.toString(<span class="number">16</span>));     <span class="comment">//"a"</span></span><br></pre></td></tr></table></figure>
<h4 id="2-String"><a href="#2-String" class="headerlink" title="2. String ()"></a>2. <code>String ()</code></h4><p>可以将任何类型的值转换为字符串。</p>
<p>⭐️⭐️⭐️ <code>String ()</code> 函数的转换规则：</p>
<ul>
<li>如果值有 <code>toString()</code>方法，则调用该方法；</li>
<li>如果值是 null，则返回 “null”；</li>
<li>如果值是 undefined ，则返回 “undefined”。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value1 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> value2 = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> value3 = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> value4;</span><br><span class="line"></span><br><span class="line">alert(<span class="built_in">String</span>(value1));     <span class="comment">//"10"</span></span><br><span class="line">alert(<span class="built_in">String</span>(value2));     <span class="comment">//"true"</span></span><br><span class="line">alert(<span class="built_in">String</span>(value3));     <span class="comment">//"null"</span></span><br><span class="line">alert(<span class="built_in">String</span>(value4));     <span class="comment">//"undefined"</span></span><br></pre></td></tr></table></figure>
<h3 id="Object-类型"><a href="#Object-类型" class="headerlink" title="Object 类型"></a>Object 类型</h3><ul>
<li>ECMAScript 中的对象其实就是一组数据和功能的集合。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br></pre></td></tr></table></figure>
<p>Object 类型是所有对象的基础，Object 的每个实例都具有下列属性和方法：</p>
<ul>
<li><code>Constructor</code>：保存着用于创建当前对象的函数。</li>
<li><code>hasOwnProperty(propertyName)</code>: 判断属性是否在当前对象实例中。</li>
<li><code>isPrototypeOf(object:)</code>：用于检查传入的对象是否是另一个对象的原型。</li>
<li><code>propertyIsEnumerable(propertyName)</code>：给定属性是否能够使用 for-in 来枚举。</li>
<li><code>toLoacleString()</code>：返回对象的字符串表示。</li>
<li><code>toString:()</code>：返回对象的字符串表示。</li>
<li><code>valueOf()</code>：返回对象的字符串、数值或布尔值表示。</li>
</ul>
<h3 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h3><h4 id="一元操作符"><a href="#一元操作符" class="headerlink" title="一元操作符"></a>一元操作符</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-b4d4f52f6d531b38.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h4 id="一元加和减操作符"><a href="#一元加和减操作符" class="headerlink" title="一元加和减操作符"></a>一元加和减操作符</h4><ul>
<li>在对非数值应用一元加操作符时，该操作符会像 <code>Number()</code> 转型函数一样对这个值执行转换。</li>
</ul>
<h4 id="加（-）操作符"><a href="#加（-）操作符" class="headerlink" title="加（+）操作符"></a>加（+）操作符</h4><ul>
<li>(+0) + (-0) = (+0) </li>
<li>字符串 + 字符串 = 拼接字符串。</li>
<li>字符串 + 操作数 = 操作数转换为字符串，再拼接两个字符串。</li>
</ul>
<h4 id="减（-）操作符"><a href="#减（-）操作符" class="headerlink" title="减（-）操作符"></a>减（-）操作符</h4><ul>
<li>(+0) - (-0) = (-0) </li>
<li>(-0) - (-0) = (+0) </li>
</ul>
<h4 id="位操作符"><a href="#位操作符" class="headerlink" title="位操作符"></a>位操作符</h4><ul>
<li>符号位：对于有符号的整数，32 位中的前 31 位用于表示整数的值。第 32 位用于表示数值的符号:<strong>0 表示正</strong><br><strong>数，1 表示负数</strong>。</li>
<li>负数同样以二进制码存储，但使用的格式是二进制补码。</li>
<li>在 ECMAScript 中，当对数值应用位操作符时，后台会发生如下转换过程:64 位的数值被转换成 32位数值，然后执行位操作，最后再将 32 位的结果转换回 64 位数值。但这个转换过程也导致了一个严重的副效应，即在对特殊的 NaN 和 Infinity 值应用位操作时，这两个值都会被当成 0 来处理。</li>
</ul>
<h4 id="左移"><a href="#左移" class="headerlink" title="左移"></a>左移</h4><p>左移（&lt;&lt;）</p>
<p>有符号右移（&gt;&gt;），保留符号位（即正负号标记）,用符号位的值来填充所有空位。</p>
<p>无符号右移（&gt;&gt;&gt;），用0来填充空位。对正数来说，无符号右移的结果与有符号右移相同。</p>
<h3 id="布尔操作符"><a href="#布尔操作符" class="headerlink" title="布尔操作符"></a>布尔操作符</h3><ul>
<li><p>布尔操作符一共有 3 个:非(NOT)、与(AND)和或(OR)。</p>
</li>
<li><p>同时使用两个逻辑非操作符（!!），实际上就会模拟 <code>Boolean()</code> 转型函数的行为。</p>
</li>
<li><p>逻辑与/逻辑或操作属于短路操作，即如果第一个操作数能够决定结果，那么就不会再对第二个操作数求值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 短路操作符：如果第一个操作数的求值结果为 true，就不会对第二个操作数求值了。</span></span><br><span class="line"><span class="comment"> * 逻辑与/逻辑或操作属于短路操作。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 💡 可以利用逻辑或的这一行为来避免为变量赋 null 或 undefined 值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> myObject = preferredObject || backupObject;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="乘性操作符"><a href="#乘性操作符" class="headerlink" title="乘性操作符"></a>乘性操作符</h3><ul>
<li>如果参与乘性计算的某个操作数不是数值，后台会先使用 Number()转型函数将其转换为数值。也就是说，<strong>空字符串将被当作0，布尔值 true 将被当作 1。</strong></li>
</ul>
<h3 id="加性操作符"><a href="#加性操作符" class="headerlink" title="加性操作符"></a>加性操作符</h3><h3 id="关系操作符"><a href="#关系操作符" class="headerlink" title="关系操作符"></a>关系操作符</h3><ul>
<li><p>在比较字符串时，实际比较的是两个字符串中对应位置的每个字符的字符编码值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两个操作数都是字符串， 而字符串比较的是字符编码("2"的字符编码是 50，而"3"的字符编码是 51)。</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">"23"</span> &lt; <span class="string">"3"</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串"23"会被转换成数值 23，然后再与 3 进行比较</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">"23"</span> &lt; <span class="number">3</span>   <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字母"a"不能转换成合理的数值，因此就被转换成了 NaN。</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">"a"</span> &lt; <span class="number">3</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="相等操作符"><a href="#相等操作符" class="headerlink" title="相等操作符"></a>相等操作符</h3><blockquote>
<ul>
<li><p>相等和不相等——先转换再比较;</p>
</li>
<li><p>全等和不全等——仅比较而不转换;</p>
</li>
</ul>
</blockquote>
<h4 id="相等-amp-不相等"><a href="#相等-amp-不相等" class="headerlink" title="相等&amp;不相等"></a>相等&amp;不相等</h4><ul>
<li>这两个操作符都会先转换操作数(通常称为强制转型)，然后再比较它们的相等性。</li>
</ul>
<h4 id="全等-amp-不全等"><a href="#全等-amp-不全等" class="headerlink" title="全等&amp;不全等"></a>全等&amp;不全等</h4><ul>
<li><p>不全等（==）：如果两个操作数类型不同，会自动强制转换为相等类型的操作数，再进行比较（<strong>强制转型</strong>）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span> <span class="comment">// true，类似值</span></span><br><span class="line"><span class="literal">null</span> === <span class="literal">undefined</span> <span class="comment">// false，不同类型值</span></span><br><span class="line">“<span class="literal">NaN</span>” == <span class="literal">NaN</span> <span class="comment">//false</span></span><br><span class="line"><span class="literal">NaN</span> == <span class="literal">NaN</span> <span class="comment">//false</span></span><br><span class="line"><span class="literal">NaN</span> != <span class="literal">NaN</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">true</span> == <span class="number">1</span> <span class="comment">//  true</span></span><br><span class="line"><span class="literal">false</span> == <span class="number">0</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>全等：（===）： 表示两个操作数未经转换就相等的情况下返回true。</li>
</ul>
<h3 id="条件操作符"><a href="#条件操作符" class="headerlink" title="条件操作符"></a>条件操作符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">variable = boolean_expression ? true_value : false_value;</span><br></pre></td></tr></table></figure>
<h3 id="逗号操作符"><a href="#逗号操作符" class="headerlink" title="逗号操作符"></a>逗号操作符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.在一条语句中执行多个操作，多用于声明多个变量</span></span><br><span class="line"><span class="keyword">var</span> num1=<span class="number">1</span>, num2=<span class="number">2</span>, num3=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.赋值，总是返回表达式中的最后一项</span></span><br><span class="line"><span class="keyword">var</span> num = (<span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">0</span>); <span class="comment">// num 的值为 0</span></span><br></pre></td></tr></table></figure>
<h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><p><img src="http://upload-images.jianshu.io/upload_images/2648731-3840d960a32711b5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h3 id="for-语句"><a href="#for-语句" class="headerlink" title="for 语句"></a>for 语句</h3><p>由于 ECMAScript 中不存在块级作用域，因此在循环内部定义的变量也可以在外部访问到。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 即使 i 是在循环内部定义的一个变量，但在循环外部仍然可以访问到它。</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>
<h3 id="for-in"><a href="#for-in" class="headerlink" title="for-in"></a>for-in</h3><ul>
<li><p>如果表示要迭代的对象的变量值为 null 或 undefined，for-in 语句会抛出错误。</p>
<blockquote>
<p>建议在使用 for-in 循环之前，先检测确认该对象的值不是 null 或 undefined。</p>
</blockquote>
</li>
</ul>
<h3 id="label-语句"><a href="#label-语句" class="headerlink" title="label 语句"></a>label 语句</h3><ul>
<li>label 语句可以在代码中添加标签，以便将来使用。</li>
<li>建议如果使用 label 语句，一定要使用描述性的标签，同时不要嵌套过多的循环。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="selector-tag">label</span>: statement</span><br></pre></td></tr></table></figure>
<h3 id="with-语句"><a href="#with-语句" class="headerlink" title="with 语句"></a>with 语句</h3><ul>
<li>with语句的作用是将代码的作用域设置到一个特定的对象中。</li>
<li>主要目的：简化多次编写同一个对象的工作。</li>
</ul>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">with</span> (expression) statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：</span></span><br><span class="line"><span class="comment">// 把变量都包含在 location 对象中。</span></span><br><span class="line"><span class="keyword">with</span>(location) &#123;</span><br><span class="line">    <span class="keyword">var</span> qs = search.substring(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> hostName = hostname;</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">url</span> = href;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>💡 </p>
<p>大量使用 with 语句会导致性能下降，同时也会给调试代码造成困难，因此在开发大型应用程序时，不建议使用 with 语句。</p>
</blockquote>
<h3 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h3><ul>
<li>ECMAScript 中 switch 的特点：<strong>可以在switch语句中使用任何数据类型。每个case值可以是常量、变量表达式。</strong></li>
<li><strong>switch 语句在比较值时使用的是全等操作符（===），因此不会发生类型转换。</strong></li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionName</span>(<span class="params">arg0, arg1,...argN</span>) </span>&#123;</span><br><span class="line">    statments</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例代码</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"Hello "</span> + <span class="built_in">arguments</span>[<span class="number">0</span>] + <span class="string">","</span> + <span class="built_in">arguments</span>[<span class="number">1</span>]); <span class="comment">// 用类似数组的方式访问传入的参数</span></span><br><span class="line">    alert(<span class="built_in">arguments</span>.length); <span class="comment">// 传入参数的个数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">arguments</span>.length == <span class="number">1</span>) &#123;</span><br><span class="line">        alert(<span class="built_in">arguments</span>[<span class="number">0</span>] + <span class="number">10</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> &#123;</span><br><span class="line">        alert(<span class="built_in">arguments</span>[<span class="number">0</span>] + num2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数体内通过 arguments 对象访问参数数组。</span></span><br><span class="line"><span class="comment">// arguments 与 命名参数的内存空间是相互独立的；</span></span><br><span class="line"><span class="comment">// ***特性：单向影响***：修改 arguments 的值会自动映射同步到命名参数上，反之则不能；</span></span><br><span class="line"><span class="comment">// arguments 对象的长度由传入的参数个数决定；</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ECMAScript 函数的重要特点：<strong>命名的参数只是提供便利，但不是必须的。</strong></li>
<li>ECMAScript 中的参数在内部是用一个数组来表示的。</li>
<li>函数中 arguments.length 属性可以返回传入参数的个数；</li>
<li>arguments 对象的长度是由传入的参数个数决定的，不是由定义函数时的命名参数的个数决定的。</li>
<li>参数：没有传递值的命名参数将自动被赋予 undefined 值。</li>
<li>由于不存在函数签名的特性，ECMAScript 函数不能重载。（就是函数名相同、参数的个数不同的函数）。</li>
<li>无须指定函数的返回值，因为任何 ECMAScript 函数都可以在任何时候返回任何值。 实际上，未指定返回值的函数返回的是一个特殊的 <strong>undefined</strong> 值。</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/09/28/JavaScript 编程：1.概述/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/28/JavaScript 编程：1.概述/" class="post-title-link" itemprop="url">JavaScript 编程：1.概述</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-28 17:18:00" itemprop="dateCreated datePublished" datetime="2018-09-28T17:18:00+08:00">2018-09-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 14:47:26" itemprop="dateModified" datetime="2019-04-18T14:47:26+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/09/28/JavaScript 编程：1.概述/" class="leancloud_visitors" data-flag-title="JavaScript 编程：1.概述">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h1 id="1-JavaScript-简介"><a href="#1-JavaScript-简介" class="headerlink" title="1. JavaScript 简介"></a>1. JavaScript 简介</h1><ul>
<li>1995 年，Netscape 公司的布兰登·艾奇（Brendan Eich），在 Netscape 浏览器上首次设计实现了 JavaScript。</li>
<li>JavaScript 是一种专为与网页交互而设计的脚本语言。</li>
</ul>
<p>一个完整的 JavaScript 实现由三个不同的部分组成：<br><img src="http://upload-images.jianshu.io/upload_images/2648731-d5fe7fcad77ae186.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="JavaScript 组成"></p>
<h2 id="ECMAScript"><a href="#ECMAScript" class="headerlink" title="ECMAScript"></a>ECMAScript</h2><blockquote>
<p>ES6（即 ECMAScript 2015 ）于 2015 年 6 月 17 日发布。</p>
<ul>
<li>ECMAScript 是 ECMA 制定的脚本语言标准，它是 JavaScript 实现的基础。</li>
<li>由 ECMA-262 定义的 ECMAScript 与 Web 浏览器没有依赖关系，Web 浏览器只是 ECMAScript 实现可能的<strong>宿主环境</strong>之一。</li>
<li>不同 Web 浏览器对 ECMAScript 的兼容性。</li>
</ul>
</blockquote>
<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><ul>
<li>文档对象模型（DOM）是针对 XML 但经过扩展用于 HTML 的应用程序编程接口（API）。</li>
<li>DOM 把 HTML 页面映射为一个多层节点结构。</li>
<li>W3C 制定 DOM 标准。</li>
<li>不同 Web 浏览器对 DOM 标准（DOM1、DOM2、DOM3）的支持情况。</li>
</ul>
<h2 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h2><ul>
<li>浏览器对象模型（BOM），支持访问和操作浏览器窗口。</li>
</ul>
<h1 id="2-在-HTML-中使用-JavaScript"><a href="#2-在-HTML-中使用-JavaScript" class="headerlink" title="2. 在 HTML 中使用 JavaScript"></a>2. 在 HTML 中使用 JavaScript</h1><h2 id="元素："><a href="#元素：" class="headerlink" title="\ 元素："></a>\<script> 元素：</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// async ：异步执行脚本。</span><br><span class="line">// async 属性只适用于外部脚本文件。</span><br><span class="line">// 标记为 async 的脚本并不保证按照指定它们的先后顺序执行。</span><br><span class="line">// 在 XHTML 文档中，要把 async 属性设置为 async="async"。</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"指向外部 JavaScript 文件的链接"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// defer ：延迟到文档完全被解析和显示之后再执行脚本。</span><br><span class="line">// defer 属性只适用于外部脚本文件。</span><br><span class="line">// 在现实当中，存在多个脚本时，延迟脚本并不一定会按照顺序执行，也不一定会在 DOMContentLoaded 事件触发前执行，因此最好只包含一个延迟脚本。</span><br><span class="line">// 在 XHTML 文档中，要把 defer 属性设置为 defer="defer"。</span><br><span class="line">// *** 把延迟执行的脚本放在页面底部仍然是最佳选择。 ***</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"指向外部 JavaScript 文件的链接"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="comment">/* 如果包含了 src 属性，此处就不应该再包含额外的 JavaScript 代码 */</span></span></span><br><span class="line"><span class="actionscript">  <span class="comment">/* 即使包含了嵌入的代码，浏览器也会忽略嵌入代码 */</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>💡</p>
<ul>
<li>所有 \<script> 元素会按照它们在页面中出现的<strong>先后顺序依次被解析</strong>。所以一般应该把 \<script> 元素放在页面最后，\</body> 标签之前。</li>
<li>type 属性是可选属性，用于设置脚本语言的内容类型，默认值为 text/javascript 。</li>
</ul>
</blockquote>
<p>使用\<script>元素的两种方式：</p>
<ol>
<li>直接在页面中嵌入 JavaScript 代码；</li>
<li>包含外部 JavaScript 文件。</li>
</ol>
<h2 id="CDATA-片段"><a href="#CDATA-片段" class="headerlink" title="CDATA 片段"></a>CDATA 片段</h2><ul>
<li>可扩展超文本标记语言，即 XHTML（Extensible HyperText Markup Language），是将 HTML 作为 XML 的应用而重新定义的一个标准。编写 XHTML 代码的规则要比编写 HTML 严格得多，而且直接影响能否在嵌入 JavaScript 代码时使用 \<script/> 标签。</li>
<li>CDATA 片段解决的是在 HTML 代码中能正确解析的内容无法被 XHTML 解析的问题。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CDATA 片段解决方法中出现特殊字符导致解析语法错误</span></span><br><span class="line"><span class="comment">// 很多浏览器不兼容 XHTML，把 CDATA 片段加注释。</span></span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="comment">//&lt;![CDATA[</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">            alert(<span class="string">"A is less than B"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> &#123;</span><br><span class="line">            alert(<span class="string">"A is greater than B"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            alert(<span class="string">"A is equal to B"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//]]&gt;</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>💡<br>将页面的 MIME 类型指定为 <strong>“application/xhtml+xml”</strong> 可以触发 XHTML 模式，但并不是所有的浏览器都支持以这种方式提供 XHTML 文档。</p>
</blockquote>
<h2 id="属性"><a href="#属性" class="headerlink" title="\ 属性"></a>\<noscript> 属性</h2><p>下列情况下会显示 \<noscript> 中的内容：</p>
<ol>
<li>浏览器不支持脚本；</li>
<li>浏览器支持脚本，但脚本被禁用；</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>本页面需要浏览器支持（启用）JavaScript<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br></pre></td></tr></table></figure>
</script></h2>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/09/13/OpenSSL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/13/OpenSSL/" class="post-title-link" itemprop="url">OpenSSL</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-13 10:04:00" itemprop="dateCreated datePublished" datetime="2018-09-13T10:04:00+08:00">2018-09-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-15 17:36:39" itemprop="dateModified" datetime="2019-04-15T17:36:39+08:00">2019-04-15</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/PKI-密码学/" itemprop="url" rel="index"><span itemprop="name">PKI&密码学</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/09/13/OpenSSL/" class="leancloud_visitors" data-flag-title="OpenSSL">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<blockquote>
<p>💡以下内容参考学习自<a href="http://www.ituring.com.cn/book/1734" target="_blank" rel="noopener">《OpenSSL攻略》</a>，右侧随书下载。</p>
</blockquote>
<p>原文：<a href="https://www.feistyduck.com/library/openssl-cookbook/online/" target="_blank" rel="noopener">https://www.feistyduck.com/library/openssl-cookbook/online/</a></p>
</blockquote>
<h3 id="加密基元"><a href="#加密基元" class="headerlink" title="加密基元"></a>加密基元</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-0c7cd1314e5f87e5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="密码学加密基元"></p>
<p>说明：</p>
<ul>
<li><strong>散列函数（散列（hash）、指纹、消息摘要、摘要算法、杂凑函数）</strong>：把任意长度的输入消息数据转化成固定长度的输出数据的一种密码算法。</li>
<li><strong>消息验证代码</strong>：验证数据完整性。</li>
<li><strong>数字签名</strong>：RSA私钥加密，公钥解密，结合散列函数。验证消息真实性。</li>
<li><strong>伪随机函数（PRF）</strong>：生成任意数量的伪随机数据 </li>
<li><strong>RSA</strong>：可以同时用于密钥交换和身份验证。 </li>
<li><strong>DHE_RSA</strong>：DHE：密钥交换，RSA：身份验证。</li>
<li><strong>ECDHE_RSA</strong>： ECDHE：密钥交换，RSA：身份验证。</li>
<li><strong>ECDHE_ECDSA</strong> ：ECDHE：密钥交换，ECDSA：身份验证。</li>
</ul>
<h4 id="补充：分组密码工作模式-操作模式"><a href="#补充：分组密码工作模式-操作模式" class="headerlink" title="补充：分组密码工作模式/操作模式"></a>补充：分组密码工作模式/操作模式</h4><blockquote>
<p>分组密码都有固定的分组长度，实际应用中需要加密的明文都大大长于这个分组长度。如何对明文进行分组、填充，分组后的明文组和密文组之间有没有关系，这些要素形成了分组密码的不同工作模式。在实际应用中，分组密码主要有4种运行模式：</p>
<ul>
<li>电子密码本模式（ECB）：不适用于长报文、高度结构化报文。</li>
<li>密文块链接模式（CBC）</li>
<li>密文反馈模式（CFB）：分组密码转换为流密码</li>
<li>输出反馈模式（OFB）：缺点：难以检测对密文的篡改。</li>
</ul>
</blockquote>
<h4 id="分组加密的操作模式"><a href="#分组加密的操作模式" class="headerlink" title="分组加密的操作模式"></a>分组加密的操作模式</h4><ol>
<li>加密操作模式：只保护数据的私密性，无需验证数据来源。<br> ECB、CBC、OFB、CFB、<strong>CTR</strong>。</li>
<li>验证操作模式：不在乎数据的保密性，只想确保数据的发送来源。<br> <strong>CMAC</strong>。</li>
<li>验证加密操作模式：既想保密要传输的数据，还要确认数据的来源。<br> CCM、<strong>GCM</strong>、KW/KWP/TKW</li>
</ol>
<h3 id="TLS服务安全部署"><a href="#TLS服务安全部署" class="headerlink" title="TLS服务安全部署"></a>TLS服务安全部署</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-a7658afa0e290eef.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="TLS服务安全部署"></p>
<h2 id="OpenSSL-的结构及目录功能"><a href="#OpenSSL-的结构及目录功能" class="headerlink" title="OpenSSL 的结构及目录功能"></a><a href="https://www.openssl.org/" target="_blank" rel="noopener">OpenSSL</a> 的结构及目录功能</h2><p><a href="http://linux.51yip.com/search/openssl" target="_blank" rel="noopener">OpenSSL linux 命令在线中文手册</a><br><img src="https://upload-images.jianshu.io/upload_images/2648731-e930899f7dcda3f9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/620" alt="OpenSSL 的结构"></p>
<h3 id="OpenSSL-目录功能对照表"><a href="#OpenSSL-目录功能对照表" class="headerlink" title="OpenSSL 目录功能对照表"></a>OpenSSL 目录功能对照表</h3><table>
<thead>
<tr>
<th>目录名</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Crypto</td>
<td>存放 OpenSSL 所有加密算法源码文件和相关标注如 X.509 源码文件，是 OpenSSL 中最重要的目录，包含了 OpenSSL 密码算法库的所有内容</td>
</tr>
<tr>
<td>SSL</td>
<td>存放 OpenSSL 中 SSL 协议各个版本和 TLS 1.0 协议源码文件，包含了 OpenSSL 协议库的所有内容</td>
</tr>
<tr>
<td>Apps</td>
<td>存放 OpenSSL 中所有应用程序源码文件，如 CA、X509 等应用程序的源文件就存放在这里</td>
</tr>
<tr>
<td>Doc</td>
<td>存放了 OpenSSL 中所有的使用说明文档，包含三个部分：应用程序说明文档、加密算法库 API 说明文档及 SSL 协议API说明文档</td>
</tr>
<tr>
<td>Demos</td>
<td>存放了一些基于 OpenSSL 的应用程序例子，这些例子一般都很简单，演示怎么使用 OpenSSL 中的一个功能</td>
</tr>
<tr>
<td>Include</td>
<td>存放了使用 OpenSSL 的库时需要的头文件</td>
</tr>
<tr>
<td>Test</td>
<td>存放了 OpenSSL 自身功能测试程序的源码文件</td>
</tr>
</tbody>
</table>
<h3 id="构建-OpenSSL"><a href="#构建-OpenSSL" class="headerlink" title="构建 OpenSSL"></a>构建 OpenSSL</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看当前系统使用的 OpenSSL 版本</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl version</span></span><br><span class="line">OpenSSL 1.0.2g  1 Mar 2016</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取完整的版本信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl version -a </span></span><br><span class="line">...</span><br><span class="line">OPENSSLDIR: "/usr/lib/ssl" # OpenSSL 默认查找和配置证书目录</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载 OpenSSL</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://www.openssl.org/<span class="built_in">source</span>/openssl-1.0.2o.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://www.openssl.org/<span class="built_in">source</span>/openssl-1.1.1.tar.gz</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压缩</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar -xzvf openssl-1.0.2o.tar.gz <span class="comment">## 先调用 gzip 解压缩，再解开文件。</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> openssl-1.0.2o/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./config \</span></span><br><span class="line">--prefix=/opt/openssl \</span><br><span class="line">--openssldir=/opt/openssl \ # 安装目录</span><br><span class="line">enable-ec_nistp_64_gcc_128  # 使用优化后的常用椭圆曲线算法</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> make depend       <span class="comment"># 生成可执行文件</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make              <span class="comment"># 编译</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo make install <span class="comment"># 安装</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> OpenSSL 安装在 /opt/openssl/ 目录下</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /opt/openssl/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -l</span></span><br><span class="line">total 40</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jun 15 08:08 bin</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jun 15 08:08 certs # 根证书目录、可信证书库</span><br><span class="line">drwxr-xr-x 3 root root  4096 Jun 15 08:08 include</span><br><span class="line">drwxr-xr-x 4 root root  4096 Jun 15 08:08 lib</span><br><span class="line">drwxr-xr-x 6 root root  4096 Jun 15 08:08 man</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jun 15 08:08 misc # 补充脚本</span><br><span class="line">-rw-r--r-- 1 root root 10835 Jun 15 08:08 openssl.cnf</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jun 15 08:08 private # 私钥目录</span><br></pre></td></tr></table></figure>
<h3 id="查看可用命令：openssl-help"><a href="#查看可用命令：openssl-help" class="headerlink" title="查看可用命令：openssl help"></a>查看可用命令：<code>openssl help</code></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ------ 所有可用工具 ------</span></span><br><span class="line">Standard commands </span><br><span class="line">asn1parse         ca                ciphers           cms</span><br><span class="line">crl               crl2pkcs7         dgst              dh</span><br><span class="line">dhparam           dsa               dsaparam          ec</span><br><span class="line">ecparam           enc               engine            errstr</span><br><span class="line">gendh             gendsa            genpkey           genrsa</span><br><span class="line">nseq              ocsp              passwd            pkcs12</span><br><span class="line">pkcs7             pkcs8             pkey              pkeyparam</span><br><span class="line">pkeyutl           prime             rand              req</span><br><span class="line">rsa               rsautl            s_client          s_server</span><br><span class="line">s_time            sess_id           smime             speed</span><br><span class="line">spkac             srp               ts                verify</span><br><span class="line">version           x509</span><br><span class="line"><span class="meta">#</span><span class="bash"> man + 工具名称，显示某一命令的详细信息</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> man ciphers,显示如何配置密码套件</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ------ 消息摘要命令 ------</span></span><br><span class="line">Message Digest commands (see the `dgst' command for more details)</span><br><span class="line">md4               md5               rmd160            sha</span><br><span class="line">sha1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ------ 加密命令 ------</span></span><br><span class="line">Cipher commands (see the `enc' command for more details)</span><br><span class="line">aes-128-cbc       aes-128-ecb       aes-192-cbc       aes-192-ecb</span><br><span class="line">aes-256-cbc       aes-256-ecb       base64            bf</span><br><span class="line">bf-cbc            bf-cfb            bf-ecb            bf-ofb</span><br><span class="line">camellia-128-cbc  camellia-128-ecb  camellia-192-cbc  camellia-192-ecb</span><br><span class="line">camellia-256-cbc  camellia-256-ecb  cast              cast-cbc</span><br><span class="line">cast5-cbc         cast5-cfb         cast5-ecb         cast5-ofb</span><br><span class="line">des               des-cbc           des-cfb           des-ecb</span><br><span class="line">des-ede           des-ede-cbc       des-ede-cfb       des-ede-ofb</span><br><span class="line">des-ede3          des-ede3-cbc      des-ede3-cfb      des-ede3-ofb</span><br><span class="line">des-ofb           des3              desx              rc2</span><br><span class="line">rc2-40-cbc        rc2-64-cbc        rc2-cbc           rc2-cfb</span><br><span class="line">rc2-ecb           rc2-ofb           rc4               rc4-40</span><br><span class="line">seed              seed-cbc          seed-cfb          seed-ecb</span><br><span class="line">seed-ofb</span><br></pre></td></tr></table></figure>
<h3 id="创建可信证书库"><a href="#创建可信证书库" class="headerlink" title="创建可信证书库"></a>创建可信证书库</h3><ol>
<li><p>从 <a href="https://www.mozilla.org/en-US/about/governance/policies/security-group/certs/" target="_blank" rel="noopener">Mozilla CA Certificate Store</a> 获取开源的可信证书库：<a href="https://hg.mozilla.org/mozilla-central/raw-file/tip/security/nss/lib/ckfw/builtins/certdata.txt" target="_blank" rel="noopener">Source file with all of the included root certificates</a>。下载完成后，可以使用 Perl 脚本或者 Go 脚本将 certdata.txt 文件转换为 PEM 格式。</p>
</li>
<li><p>从 Curl 获取最新的 PEM 格式的可信证书库：<a href="https://curl.haxx.se/docs/caextract.html" target="_blank" rel="noopener">CA certificates extracted from Mozilla</a>。</p>
</li>
</ol>
<h3 id="密钥和证书管理"><a href="#密钥和证书管理" class="headerlink" title="密钥和证书管理"></a>密钥和证书管理</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-75a7cc75605adb76.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>首先，使用 OpenSSL 生成一个非对称加密算法的私钥，可选的密钥算法及密钥长度如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b4315cb588e8bb27.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="非对称加密算法"></p>
<h4 id="1-1-生成-RSA-2048-密钥-（-pem文件）"><a href="#1-1-生成-RSA-2048-密钥-（-pem文件）" class="headerlink" title="1.1 生成 RSA-2048 密钥 （.pem文件）"></a>1.1 生成 RSA-2048 密钥 （.pem文件）</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用 genrsa 命令生成 RSA-2048 位的密钥</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl genrsa -out rsa_private.key 2048</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用 genrsa 命令生成 RSA-2048 位的密钥，并使用 AES-128 位算法保存密钥。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> **********************************************************</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用密码方式保护私钥只有在私钥并没有被放在生产环境服务器上的时候才有用。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> **********************************************************</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl genrsa -aes128 -out fd.key 2048</span></span><br><span class="line">Generating RSA private key, 2048 bit long modulus</span><br><span class="line">....+++</span><br><span class="line">..........................+++</span><br><span class="line">e is 65537 (0x10001) # e 表示公用指数，默认情况下会被设置为65 537。这是所谓的短公用指数(short public exponent)，它可以显著提高RSA的验证性能。</span><br><span class="line">Enter pass phrase for fd.key:huqilin0321</span><br><span class="line">Verifying - Enter pass phrase for fd.key:huqilin0321</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 私钥以 PEM 格式存储</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat /opt/openssl/private/fd.key</span></span><br><span class="line">-----BEGIN RSA PRIVATE KEY----- # 第一行，表明它是一个私钥文件</span><br><span class="line">Proc-Type: 4,ENCRYPTED</span><br><span class="line">DEK-Info: AES-128-CBC,AEDB3A0F4369376615B5AB3D9E4E5FEA</span><br><span class="line"></span><br><span class="line">j9CwxBMf08WKTkQvM3Vi1W6TOQV6uEpfHtYxjy8/JhYsvhqH+EdMyB1ZSMPz+W8e</span><br><span class="line">...</span><br><span class="line">jZoL/+0fcuzX1O5oQkTpaoh1ZafJJROHSZh0nPiuGdIRWJtHUlmt1GgzXvOyIqzm</span><br><span class="line">-----END RSA PRIVATE KEY-----</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解析私钥结构</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl rsa -text -<span class="keyword">in</span> fd.key</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成密钥的公开部分</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl rsa -<span class="keyword">in</span> fd.key -pubout -out fd-public.key</span></span><br><span class="line">Enter pass phrase for fd.key:</span><br><span class="line">writing RSA key</span><br><span class="line">root@ip-172-31-8-201:/opt/openssl/private# ls -l</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r-- 1 root root  451 Jun 15 10:08 fd-public.key # 生成的密钥公开部分文件(公钥)</span><br><span class="line">-rw-r--r-- 1 root root 1766 Jun 15 09:39 fd.key        # 私钥</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看密钥的公开部分</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat fd-public.key</span></span><br><span class="line">-----BEGIN PUBLIC KEY-----</span><br><span class="line">MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1M4fNC/NgH0bnb/oXcXH</span><br><span class="line">9hudaPYk2+xwDnMxzZBhhuPrOpq6wGkJMPl/5cN2zZRGE7wtdLa2Y1gPVlkVd7zv</span><br><span class="line">mSnZYLcXr1CW/Ipzs4Zqavz4aWIi3DiKElLG2lcR2YQY3d4YjEnHvzDotyvuQ7km</span><br><span class="line">rXwKx0TNr3xo0tQ8qwsGHMuyE6FSD9JxwpGHeLd4r9X9qrsGVTfx5yRdRTrgb+d0</span><br><span class="line">YFR+hV6Cv1JQVGHw5UTACioQ4WziABG8mZY1zzAENmB73zWB6NqunCr00R7RwwDP</span><br><span class="line">jfOt5cNRYdEBRy79FG/7RVY+QVvYwm/bv9nOnT2Kjdm/elLkHTcLCgO6M0QDmR/F</span><br><span class="line">oQIDAQAB</span><br><span class="line">-----END PUBLIC KEY-----</span><br></pre></td></tr></table></figure>
<h4 id="1-2-生成-ECDSA-256-密钥（-pem文件）"><a href="#1-2-生成-ECDSA-256-密钥（-pem文件）" class="headerlink" title="1.2 生成 ECDSA-256 密钥（.pem文件）"></a>1.2 生成 ECDSA-256 密钥（.pem文件）</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用 secp256r1 命名曲线创建一个256位长度的 ECDSA 密钥，并使用 AES-128 位算法保存密钥。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl ecparam -genkey -name secp256r1 | openssl ec -out ec.key -aes128</span></span><br></pre></td></tr></table></figure>
<h4 id="2-创建证书签名申请（CSR文件）"><a href="#2-创建证书签名申请（CSR文件）" class="headerlink" title="2 创建证书签名申请（CSR文件）"></a>2 创建证书签名申请（CSR文件）</h4><p>参考：<a href="http://service.oray.com/question/4985.html" target="_blank" rel="noopener">SSL 证书请求文件 (CSR) 生成指南</a></p>
<p>CSR 是要求 CA 给证书签名的一种正式申请，该申请包含申请证书的实体的公钥以及该实体的某些信息。</p>
<ol>
<li><p>交互方式生成 CSR 文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用私钥（fd.key）生成 CSR 文件（fd.csr）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo openssl req -new -key fd.key -out fd.csr</span></span><br><span class="line">Enter pass phrase for fd.key:</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter '.', the field will be left blank.</span><br><span class="line"><span class="meta">#</span><span class="bash"> ⚠️ 输入一个点（.）,该字段为空。键入回车键，则设置为默认值。</span></span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [AU]:CN # 国家</span><br><span class="line">State or Province Name (full name) [Some-State]:Shanghai # 省市</span><br><span class="line">Locality Name (eg, city) []:Shanghai # 地区</span><br><span class="line">Organization Name (eg, company) [Internet Widgits Pty Ltd]:Shanghai Clumsiest Information Co., Ltd. # 组织机构</span><br><span class="line">Organizational Unit Name (eg, section) []: # 单位部门</span><br><span class="line">Common Name (e.g. server FQDN or YOUR name) []: # 通用名</span><br><span class="line">Email Address []:clumsiest@outlook.com # 邮箱地址</span><br><span class="line"></span><br><span class="line">Please enter the following 'extra' attributes # 质询密码，留空</span><br><span class="line">to be sent with your certificate request</span><br><span class="line">A challenge password []:.</span><br><span class="line">An optional company name []:.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查 CSR 格式</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl req -text -noout -<span class="keyword">in</span> fd.csr</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>用当前证书生成 CSR 文件：</p>
<p>更新一张证书，并且不想对里面的信息作任何更改。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -x509toreq -<span class="keyword">in</span> fd.crt -out fd.csr -signkey fd.key</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>非交互方式生成 CSR 文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 3.1如果想自动生成www.feistyduck.com的CSR文件，可以先创建一个fd.cnf文件：</span></span><br><span class="line">[req]</span><br><span class="line">prompt = no</span><br><span class="line">distinguished_name = dn</span><br><span class="line">req_extensions = ext</span><br><span class="line">input_password = PASSPHRASE</span><br><span class="line"></span><br><span class="line">[dn]</span><br><span class="line">CN = www.feistyduck.com</span><br><span class="line">emailAddress = webmaster@feistyduck.com</span><br><span class="line">0 = Feisty Duck Ltd</span><br><span class="line">L = London</span><br><span class="line">C = GB</span><br><span class="line"></span><br><span class="line">[ext]</span><br><span class="line">subjectAltName = DNS:www.feistyduck.com,NDS:feistyduck.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.2 使用如下命令直接创建 CSR 文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl req -new -config fd.cnf -key fd.key -out fd.csr</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="3-1-自签名证书"><a href="#3-1-自签名证书" class="headerlink" title="3.1 自签名证书"></a>3.1 自签名证书</h4><ol>
<li><p>使用 CSR 创建自签名证书：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo openssl x509 -req -days 365 -<span class="keyword">in</span> fd.csr -signkey fd.key -out fd.crt</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>直接使用私钥创建自签名证书：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo openssl req -new -x509 -days 365 -key fd.key -out fd.crt</span></span><br><span class="line">Enter pass phrase for fd.key:</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter '.', the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [AU]:</span><br><span class="line">State or Province Name (full name) [Some-State]:</span><br><span class="line">Locality Name (eg, city) []:</span><br><span class="line">Organization Name (eg, company) [Internet Widgits Pty Ltd]:</span><br><span class="line">Organizational Unit Name (eg, section) []:</span><br><span class="line">Common Name (e.g. server FQDN or YOUR name) []:</span><br><span class="line">Email Address []:</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用私钥非交互式创建自签名证书：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo openssl req -new -x509 -days 365 -key fd.key -out fd.crt -subj <span class="string">"/C=GB/L=London/O=Feisty Duck Ltd/CN=www.feistyduck.com"</span></span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="3-2-创建对多个主机名有效的证书"><a href="#3-2-创建对多个主机名有效的证书" class="headerlink" title="3.2 创建对多个主机名有效的证书"></a>3.2 创建对多个主机名有效的证书</h4><p>默认情况下，OpenSSL 创建的证书只包含一个公用名而且只能设置一个主机名。</p>
<p>在一张证书中支持多主机名的两种方式：</p>
<ol>
<li><p>在 X.509 的使用者可选名称（SAN）扩展字段里面列出所有要使用的主机名；</p>
<ul>
<li><p>将扩展信息放在单独的文本文件中（fd.ext）,在该文件中指定扩展的名称:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subjectAltName = DNS:*<span class="selector-class">.feistyduck</span><span class="selector-class">.com</span>, DNS:feistyduck.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>签发证书时，使用 <strong>-extfile</strong> 开关引用上述文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -days 365 -in fd.csr -signkey fd.key -out fd.crt -extfile fd.ext</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>使用泛域名证书；</p>
</li>
</ol>
<h4 id="3-3-检查证书"><a href="#3-3-检查证书" class="headerlink" title="3.3 检查证书"></a>3.3 检查证书</h4><p>x509 命令可以帮助我们解析并查看证书内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -text:打印证书内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -noout：不打印编码后的证书内容，以减少信息干扰</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -text -noout -<span class="keyword">in</span> fd.crt</span></span><br></pre></td></tr></table></figure>
<h4 id="使用-OpenSSL-快速创建自签名证书"><a href="#使用-OpenSSL-快速创建自签名证书" class="headerlink" title="使用 OpenSSL 快速创建自签名证书"></a>使用 OpenSSL 快速创建自签名证书</h4><blockquote>
<p>⚠️ 请勿在生产环境中使用自签名证书，自签名证书的唯一目的是测试。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.使用 genrsa 命令生成 RSA-2048 位私钥</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl genrsa -out rsa_private.key 2048</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.通过私钥生成证书</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl req -new -x509 -days 365 -key rsa_private.key -out rsa_public.crt</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.查看打印证书</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -text -noout -<span class="keyword">in</span> rsa_public.crt</span></span><br></pre></td></tr></table></figure>
<h4 id="密钥和证书格式转换"><a href="#密钥和证书格式转换" class="headerlink" title="密钥和证书格式转换"></a>密钥和证书格式转换</h4><h5 id="证书文件的类型"><a href="#证书文件的类型" class="headerlink" title="证书文件的类型"></a>证书文件的类型</h5><p>参考：<a href="https://help.aliyun.com/knowledge_detail/42214.html?spm=5176.2020520163.cas.58.2dba2b7aDehVwA&amp;accounttraceid=ffd6c2ba-4d55-4849-8553-9964575343da" target="_blank" rel="noopener">主流字证书都有哪些格式？</a></p>
<blockquote>
<ul>
<li><em>.DER 或 </em>.CER 文件： 这样的证书文件是二进制格式，只含有证书信息，不包含私钥。</li>
<li><em>.CRT 文件： 这样的证书文件可以是二进制格式，也可以是文本格式，一般均为文本格式，功能与 </em>.DER 及 *.CER 证书文件相同。</li>
<li><em>.PEM 文件： 这样的证书文件一般是文本格式，可以存放证书或私钥，或者两者都包含。 </em>.PEM 文件如果只包含私钥，一般用 *.KEY 文件代替。</li>
<li><em>.PFX 或 </em>.P12 文件： 这样的证书文件是二进制格式，同时包含证书和私钥，且一般有密码保护。</li>
</ul>
</blockquote>
<h5 id="PEM-和-DER-转换"><a href="#PEM-和-DER-转换" class="headerlink" title="PEM 和 DER 转换"></a>PEM 和 DER 转换</h5><p>使用x509工具进行PEM和DER格式之间的证书转换：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 从 PEM 转换到 DER：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -inform PEM -<span class="keyword">in</span> fd.pem -outform DER -out fd.der</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 从 DER 转换到 PEM：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -infrom DER -<span class="keyword">in</span> fd.der -outform PEM -out fd.pem</span></span><br></pre></td></tr></table></figure>
<h5 id="PKCS-12（PFX）转换"><a href="#PKCS-12（PFX）转换" class="headerlink" title="PKCS#12（PFX）转换"></a>PKCS#12（PFX）转换</h5><h5 id="PKCS-7转换"><a href="#PKCS-7转换" class="headerlink" title="PKCS#7转换"></a>PKCS#7转换</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 将 PEM 转换成 PKCS<span class="comment">#7 格式：</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl crl2pkcs7 -nocrl -out fd.p7b -certfile fd.crt -certfile fd-chain.crt</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 将 PKCS<span class="comment">#7 转换成 PEM 格式：</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl pkcs7 -<span class="keyword">in</span> fd.p7b -print_certs -out fd.pem</span></span><br></pre></td></tr></table></figure>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="密码套件的配置"><a href="#密码套件的配置" class="headerlink" title="密码套件的配置"></a>密码套件的配置</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 密码套件名称构成：密钥交换算法-身份验证算法-加密算法（加密方法-加密强度-模式）-MAC或PRF</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 密钥交换方法：ECDHE &gt; DHE &gt; RSA</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 身份验证方法：ECDSA 256 &gt; RSA 2048</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 加密算法：AES-256-GCM、</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> PRF（伪随机函数）：HMAC、SHA256</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如：TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如：TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</span></span><br></pre></td></tr></table></figure>
<p>列出所有支持的套件列表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl ciphers -V <span class="string">'ALL:COMPLEMENTOFALL'</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 推荐的配置，同时满足强加密和高性能</span></span><br><span class="line">ECDHE-ECDSA-AES128-GCM-SHA256 </span><br><span class="line">ECDHE-ECDSA-AES256-GCM-SHA384 </span><br><span class="line">ECDHE-ECDSA-AES128-SHA </span><br><span class="line">ECDHE-ECDSA-AES256-SHA </span><br><span class="line">ECDHE-ECDSA-AES128-SHA256 </span><br><span class="line">ECDHE-ECDSA-AES256-SHA384 </span><br><span class="line">ECDHE-RSA-AES128-GCM-SHA256 </span><br><span class="line">ECDHE-RSA-AES256-GCM-SHA384 </span><br><span class="line">ECDHE-RSA-AES128-SHA </span><br><span class="line">ECDHE-RSA-AES256-SHA </span><br><span class="line">ECDHE-RSA-AES128-SHA256 </span><br><span class="line">ECDHE-RSA-AES256-SHA384 </span><br><span class="line">DHE-RSA-AES128-GCM-SHA256 </span><br><span class="line">DHE-RSA-AES256-GCM-SHA384 </span><br><span class="line">DHE-RSA-AES128-SHA </span><br><span class="line">DHE-RSA-AES256-SHA </span><br><span class="line">DHE-RSA-AES128-SHA256 </span><br><span class="line">DHE-RSA-AES256-SHA256 </span><br><span class="line">EDH-RSA-DES-CBC3-SHA</span><br></pre></td></tr></table></figure>
<h4 id="性能评测"><a href="#性能评测" class="headerlink" title="性能评测"></a>性能评测</h4><p>使用 speed 命令评测系统的能力和上限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl speed rc4 aes rsa ecdh sha</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 让speed命令并发使用4核测试</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl speed -multi 4 rsa</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 支持AES-NI指令的服务器可以加速AES计算，使用-evp开关激活硬件加速卡</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> openssl speed -evp aes-128-cbc</span></span><br></pre></td></tr></table></figure>
<h3 id="创建私有证书颁发机构"><a href="#创建私有证书颁发机构" class="headerlink" title="创建私有证书颁发机构"></a>创建私有证书颁发机构</h3><h4 id="运行私有CA的最大挑战"><a href="#运行私有CA的最大挑战" class="headerlink" title="运行私有CA的最大挑战"></a>运行私有CA的最大挑战</h4><p>如何保证基础结构的安全？</p>
<ol>
<li>根密钥必须离线保存。</li>
<li>CRL和OSCP响应程序证书必须定期进行更新，而这会要求根密钥保持联机。</li>
</ol>
<p>创建全新CA的步骤：</p>
<ol>
<li>根CA配置；</li>
<li>创建根CA的目录结构和初始化密钥文件；</li>
<li>生成根CA的密钥和证书；</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> CA 中心生成自身私钥</span></span><br><span class="line">root@ip-172-31-8-201:/opt/openssl# (umask 077; openssl genrsa -out private/cakey.pem 2048)</span><br><span class="line">Generating RSA private key, 2048 bit long modulus</span><br><span class="line">...............+++</span><br><span class="line">...............................................................+++</span><br><span class="line">e is 65537 (0x10001)</span><br><span class="line">// 为了保证CA机构私钥的安全，需要把私钥文件权限设置为077</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> CA 签发自身公钥</span></span><br><span class="line">root@ip-172-31-8-201:/opt/openssl# openssl req -new -x509 -key private/cakey.pem -out cacert.pem -days 365</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter '.', the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [AU]:CN</span><br><span class="line">State or Province Name (full name) [Some-State]:Shanghai</span><br><span class="line">Locality Name (eg, city) []:Shanghai</span><br><span class="line">Organization Name (eg, company) [Internet Widgits Pty Ltd]:shanghai Clumsiest Information Co., Ltd.</span><br><span class="line">Organizational Unit Name (eg, section) []:Development Team</span><br><span class="line">Common Name (e.g. server FQDN or YOUR name) []:arlingbc.com</span><br><span class="line">Email Address []:clumsiest@outlook.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建数据库文件及证书序列文件</span></span><br><span class="line">root@ip-172-31-8-201:/opt/openssl# ls -l</span><br><span class="line">total 52</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jun 15 08:08 bin</span><br><span class="line">-rw-r--r-- 1 root root  1558 Aug 24 03:21 cacert.pem # CA 自身证书文件</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jun 15 09:24 certs      # 客户端证书存放目录</span><br><span class="line">drwxr-xr-x 2 root root  4096 Aug 24 05:54 crl        # CA 吊销的客户端证书存放目录*</span><br><span class="line">drwxr-xr-x 3 root root  4096 Jun 15 08:08 include</span><br><span class="line">-rw-r--r-- 1 root root     0 Aug 24 05:56 index.txt  # 存放客户端证书信息*</span><br><span class="line">drwxr-xr-x 4 root root  4096 Jun 15 08:08 lib</span><br><span class="line">drwxr-xr-x 6 root root  4096 Jun 15 08:08 man</span><br><span class="line">drwxr-xr-x 2 root root  4096 Jun 15 08:08 misc</span><br><span class="line">drwxr-xr-x 2 root root  4096 Aug 24 05:55 newcerts   # 生成新证书存放目录*</span><br><span class="line">-rw-r--r-- 1 root root 10835 Jun 15 08:08 openssl.cnf</span><br><span class="line">drwxr-xr-x 2 root root  4096 Aug 24 03:11 private    # 存放 CA 自身私钥的目录</span><br><span class="line">-rw-r--r-- 1 root root     0 Aug 24 05:57 serial     # 客户端证书编号（编号可以自定义），用于识别客户端证书*</span><br></pre></td></tr></table></figure>
<h3 id="Let’s-Encrypt"><a href="#Let’s-Encrypt" class="headerlink" title="Let’s Encrypt"></a><a href="https://letsencrypt.org/" target="_blank" rel="noopener">Let’s Encrypt</a></h3><p><a href="https://imququ.com/post/letsencrypt-certificate.html" target="_blank" rel="noopener">Let’s Encrypt，免费好用的 HTTPS 证书</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/09/13/Homebrew Cask/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/13/Homebrew Cask/" class="post-title-link" itemprop="url">Homebrew Cask</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-13 09:53:00" itemprop="dateCreated datePublished" datetime="2018-09-13T09:53:00+08:00">2018-09-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-20 01:36:15" itemprop="dateModified" datetime="2019-04-20T01:36:15+08:00">2019-04-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/开发工具-Mac应用/" itemprop="url" rel="index"><span itemprop="name">开发工具&Mac应用</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/09/13/Homebrew Cask/" class="leancloud_visitors" data-flag-title="Homebrew Cask">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <p><img src="http://upload-images.jianshu.io/upload_images/2648731-fc0052bc131a5f1e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Homebrew Cask"></p>
<p>HomeBrew 是一个简单易用的包管理器，可以让你轻松下载、管理第三方应用。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2018/09/13/Homebrew Cask/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/09/12/使用Docker运行Nginx服务/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/12/使用Docker运行Nginx服务/" class="post-title-link" itemprop="url">使用Docker运行Nginx服务</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-12 18:16:00" itemprop="dateCreated datePublished" datetime="2018-09-12T18:16:00+08:00">2018-09-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-16 22:43:55" itemprop="dateModified" datetime="2019-04-16T22:43:55+08:00">2019-04-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/云计算/" itemprop="url" rel="index"><span itemprop="name">云计算</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/09/12/使用Docker运行Nginx服务/" class="leancloud_visitors" data-flag-title="使用Docker运行Nginx服务">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>在 Docker 容器中运行 Nginx 服务（mynginx）：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run \</span></span><br><span class="line">-d \</span><br><span class="line">-p 80:80 \</span><br><span class="line">--rm \</span><br><span class="line">--name mynginx \</span><br><span class="line">--volume "/var/www/arlingbc":/usr/share/nginx/html \</span><br><span class="line">nginx</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>将容器中的 Nginx 配置文件拷贝到当前目录下:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker cp mynginx:/etc/nginx .</span></span><br></pre></td></tr></table></figure>
<p>nginx 配置文件会被拷贝到 ~/nginx 目录下:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-a02193a1601025e1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<ul>
<li>其中，配置文件 <strong>nginx.conf</strong> 末尾有一行：<code>include /etc/nginx/conf.d/*.conf;</code>，表示它会包含 **conf.d中的所有配置文件</li>
</ul>
<ol start="3">
<li>停止运行 Nginx 服务（mynginx）</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker stop mynginx</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>配置 Nginx 文件</li>
</ol>
<p>Nginx 配置文件已经拷贝到本地用户目录下，你可以像往常一样配置 Nginx 文件。关于 Nginx 如何配置，可以参考<a href="https://www.jianshu.com/p/849343f679aa" target="_blank" rel="noopener">Nginx 使用及配置</a></p>
<p>注意点：</p>
<ul>
<li><p><strong>~/nginx/conf.d/default.conf</strong> 中 server 的 root 路径应该是：<code>/usr/share/nginx/html</code>。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-450e4659f8d9ca26.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20180912-180020@2x"></p>
</li>
<li><p><strong>~/nginx/nginx.conf</strong> 中 <code>include /etc/nginx/conf.d/*.conf;</code> 保持不变。</p>
</li>
</ul>
<ol start="5">
<li>运行 Nginx 服务:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run /</span></span><br><span class="line">-d /</span><br><span class="line">--name nginx_arlingbc /</span><br><span class="line">--volume "/var/www/arlingbc":/usr/share/nginx/html /</span><br><span class="line">--volume "/home/ubuntu/nginx":/etc/nginx /</span><br><span class="line">-p 80:80 /</span><br><span class="line">-p 443:443 /</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 参数说明</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d：以后台方式运行 Nginx 服务。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --name：自定义容器名称。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --volume：挂载volume，将容器目录映射到本地目录。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -p：映射端口，将容器的端口暴露给宿主机的端口。</span></span><br></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/nginx-docker.html" target="_blank" rel="noopener">Nginx 容器教程</a></li>
<li><a href="https://www.jianshu.com/p/2057576bfc5a" target="_blank" rel="noopener">Docker 架设 Nginx 服务器</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/09/12/Docker基本用法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/12/Docker基本用法/" class="post-title-link" itemprop="url">Docker基本用法</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-12 14:05:00" itemprop="dateCreated datePublished" datetime="2018-09-12T14:05:00+08:00">2018-09-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-23 17:00:25" itemprop="dateModified" datetime="2019-04-23T17:00:25+08:00">2019-04-23</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/云计算/" itemprop="url" rel="index"><span itemprop="name">云计算</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/09/12/Docker基本用法/" class="leancloud_visitors" data-flag-title="Docker基本用法">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a><a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a></h1><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="http://wiki.jikexueyuan.com/list/docker/" target="_blank" rel="noopener">极客学院Wiki：Docker入门基础教程</a></li>
<li><a href="https://yeasy.gitbooks.io/docker_practice/content/introduction/why.html" target="_blank" rel="noopener">Gitbook：Docker —— 从入门到实践</a></li>
<li><a href="https://imnerd.org/docker-in-action.html" target="_blank" rel="noopener">DOCKER 从入门到实践</a></li>
<li><a href="https://docs.docker.com/docker-for-mac/" target="_blank" rel="noopener">官方文档：Docker docs</a></li>
<li><a href="https://github.com/moby/moby" target="_blank" rel="noopener">GitHub：moby</a></li>
<li><a href="https://blog.csdn.net/bluecloudmatrix/article/details/48156861" target="_blank" rel="noopener">拉开大变革序幕（上）：在浪潮之巅观望 Docker</a></li>
<li><a href="https://www.jianshu.com/p/66d611657ed6" target="_blank" rel="noopener">docker 化你的 java 应用（上）</a></li>
<li><a href="https://www.jianshu.com/p/5f10d2e6af86" target="_blank" rel="noopener">docker 化你的 java 应用（下）</a></li>
<li><a href="https://segmentfault.com/a/1190000000751601" target="_blank" rel="noopener">docker 专题 (2)：docker 常用管理命令（上）</a></li>
<li><a href="https://segmentfault.com/a/1190000000759971" target="_blank" rel="noopener">docker 专题 (2)：docker 常用管理命令（下）</a></li>
<li><a href="https://blog.csdn.net/permike/article/details/51879578" target="_blank" rel="noopener">docker 常用命令详解</a></li>
<li><a href="https://wdxtub.com/2017/05/01/docker-guide/" target="_blank" rel="noopener">Docker 完全指南</a></li>
<li><a href="https://www.jianshu.com/p/9e47ffaf5e31" target="_blank" rel="noopener">Docker 容器可视化监控中心搭建</a></li>
<li><a href="https://www.jianshu.com/p/e9ce05b44150" target="_blank" rel="noopener">Spring Boot 应用监控实战</a></li>
</ul>
<h2 id="什么是-Docker？"><a href="#什么是-Docker？" class="headerlink" title="什么是 Docker？"></a>什么是 Docker？</h2><p>Docker是以Docker容器为资源分割和调度的基本单位，封装整个软件运行时环境，为开发者和系统管理员设计的，用于构建、发布和运行分布式应用的平台。它是一个跨平台、可移植并且简单易用的容器解决方案。</p>
<p>Docker的源代码托管在GitHub上，基于Go语言开发并遵从Apache 2.0协议。</p>
<p>Docker可在容器内部快速自动化地部署应用，并通过操作系统内核技术（namespaces、groups等）为容器提供资源隔离与安全保障。</p>
<h2 id="容器技术的优点"><a href="#容器技术的优点" class="headerlink" title="容器技术的优点"></a>容器技术的优点</h2><p><img src="http://upload-images.jianshu.io/upload_images/2648731-ff1a3f4ab01e106c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h2 id="在-Ubuntu-系统中安装-Docker"><a href="#在-Ubuntu-系统中安装-Docker" class="headerlink" title="在 Ubuntu 系统中安装 Docker"></a>在 Ubuntu 系统中安装 Docker</h2><p>更新系统，并安装必要的软件包https及ca：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install apt-transport-https ca-certificates</span></span><br></pre></td></tr></table></figure>
<p>添加GPG密钥…</p>
<p>更新软件源，安装docker：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get -y upgrade</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install docker.io</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install docker-compose</span></span><br></pre></td></tr></table></figure>
<p>开启Docker服务：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo service docker start</span></span><br></pre></td></tr></table></figure>
<p>重启Docker服务：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo service docker restart</span></span><br></pre></td></tr></table></figure>
<h3 id="关于-root-权限"><a href="#关于-root-权限" class="headerlink" title="关于 root 权限"></a>关于 root 权限</h3><blockquote>
<p>docker 命令的执行一般都需要获取 root 权限，因为 Docker 的命令行工具 docker 与 docker daemon 是同一个二进制文件，而 Docker daemon 负责接收并执行来自 docker 的命令，它的运行需要 root 权限。同时，从 Docker 0.5.2 版本开始，Docker daemon 默认绑定一个 Unix Socket 来代替原有的TCP端口，该 Unix Socket 默认是属于 root 用户的。因此，在执行 docker 命令时，需要使用 sudo 来获取 root 权限。</p>
<p><a href="https://docs.docker.com/install/linux/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="noopener">Manage Docker as a non-root user</a></p>
</blockquote>
<p>为了避免每次命令都输入 sudo，可以把用户加入 Docker 用户组：</p>
<ol>
<li><p>创建 Docker 用户组：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo groupadd docker</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加用户到 docker 组：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo usermod -aG docker <span class="variable">$USER</span></span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="使用阿里云镜像加速器"><a href="#使用阿里云镜像加速器" class="headerlink" title="使用阿里云镜像加速器"></a>使用阿里云镜像加速器</h3><p><a href="https://www.aliyun.com/" target="_blank" rel="noopener">阿里云</a> ➡️ 管理控制台 ➡️ 容器镜像服务 ➡️ 镜像加速器</p>
<p>l</p>
<h2 id="Docker-子命令分类"><a href="#Docker-子命令分类" class="headerlink" title="Docker 子命令分类"></a>Docker 子命令分类</h2><table>
<thead>
<tr>
<th>子命令分类</th>
<th>子命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>Docker环境信息</td>
<td>info、version</td>
</tr>
<tr>
<td>容器生命周期管理</td>
<td>create、exec、kill、start、restart、pause、unpause、rm、run、stop</td>
</tr>
<tr>
<td>镜像仓库管理</td>
<td>login、logout、pull、push、search</td>
</tr>
<tr>
<td>镜像管理</td>
<td>build、images、import、load、rmi、save、tag、commit</td>
</tr>
<tr>
<td>容器运维操作</td>
<td>attach、export、inspect、port、ps、rename、stats、top、wait、cp、diff、update</td>
</tr>
<tr>
<td>容器资源管理</td>
<td>volume、network</td>
</tr>
<tr>
<td>日系日志信息</td>
<td>events、history、logs</td>
</tr>
</tbody>
</table>
<p>查看子命令详细用法：<strong>docker COMMAND –help</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-4991f9e6179a5cde.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="docker命令结构图"></p>
<h3 id="1-Docker环境信息"><a href="#1-Docker环境信息" class="headerlink" title="1. Docker环境信息"></a>1. Docker环境信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 检查 Docker 环境信息</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker info</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 检查安装后的 Docker 版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker --version</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker -v</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker version</span></span><br><span class="line">Docker version 18.03.1-ce, build 9ee9f40</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose --version</span></span><br><span class="line">docker-compose version 1.21.1, build 5a3f1a3</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-machine --version</span></span><br><span class="line">docker-machine version 0.14.0, build 89b8332</span><br></pre></td></tr></table></figure>
<h3 id="2-容器生命周期管理"><a href="#2-容器生命周期管理" class="headerlink" title="2. 容器生命周期管理"></a>2. 容器生命周期管理</h3><ul>
<li><p>docker run 命令</p>
<p>docker run 命令用来基于特定的镜像创建一个容器，并依据选项来控制该容器。</p>
<p>用法：<code>docker run [OPTIONS] IMAGE [COMMAND][ARG...]</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 从ubuntu镜像启动一个容器，并执行echo命令打印出“Hello World”。执行完echo命令后，容器将停止运行。</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run ubuntu <span class="built_in">echo</span> <span class="string">"Hello World"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 启动一个容器，并为它分配一个伪终端执行/bin/bash命令</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 进入伪终端后，exit/Ctrl+D即可退出，同时容器终止运行。</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -i -t --name mytest ubuntu:latest /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 以后台方式运行一个 Nginx 服务器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 80:80 --rm --name mynginx nginx</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -d：以后台方式运行</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Ctrl+C：退出到宿主机并关闭容器；</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Ctrl+P/Ctrl+Q：退出到宿主机但保持容器运行</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Ctrl+P+Q：退出容器但不关闭容器</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># --link name:alias：在两个容器之间建立联系</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动Redis容器,将从数据库连接到主数据库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -it --name redis-master redis /bin/bash</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -it --name redis-slave1 --link redis-master:master redis /bin/bash</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><p>-i</p>
<p>使用交互模式，始终保持输入流开放。</p>
</li>
<li><p>-t</p>
<p>分配一个伪终端，一般两个参数结合时使用-it，即可在容器中利用打开的伪终端进行交互操作。</p>
</li>
<li><p>–name</p>
<p>自定义容器名称，若无此选项，Docker将为容器随机分配一个名字。</p>
</li>
<li><p>–rm</p>
<p>容器停止运行后，自动删除容器文件。</p>
</li>
<li><p>-c</p>
<p>给运行在容器中的所有进程分配CPU的shares值。</p>
</li>
<li><p>-m</p>
<p>限制为容器中所有进程分配的内存总量，以B、K、M、G为单位。</p>
</li>
<li><p>-v</p>
<p>挂载 volume。</p>
</li>
<li><p>-p</p>
<p>映射端口 &lt;host_port:contain_port&gt;</p>
</li>
<li><p>–link</p>
<p>通过–link 选项来建立容器间的连接，不但可以避免容器的IP和端口暴露到外网所导致的安全问题，还可以防止容器在重启后IP地址变化导致的访问失效，它的原理类似于DNS服务器的域名和地址映射。当容器的 IP地址发生变化时，Docker将自动维护映射关系中的IP地址。</p>
</li>
</ul>
</blockquote>
</li>
<li><p>docker start/stop/restart 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 尝试以后台方式运行一个 Nginx 服务器，并访问  http://localhost 验证</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 80:80 --name webserver nginx</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 停止 Nginx 服务器</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker stop webserver</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-Docker-registry"><a href="#3-Docker-registry" class="headerlink" title="3. Docker registry"></a>3. Docker registry</h3><p>官方镜像仓库：<a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a></p>
<ul>
<li><p>docker pull 命令</p>
<p>用法：<code>docker pull [OPTIONS] NAME[:TAG]</code></p>
<p>用法：<code>docker pull username/repository&lt;:tag_name&gt;</code></p>
<p>用法：<code>docker pull registry.domain.com:5000/repos:&lt;tag_name&gt;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 从官方Hub拉取 nginx:latest 镜像</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker pull nginx</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>docker push 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker push SEL/ubuntu</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>docker search 命令</p>
<p>用法：<code>docker search TEAM</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 从官方镜像和所有个人公共镜像中搜索镜像</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker search nginx</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-镜像管理"><a href="#4-镜像管理" class="headerlink" title="4. 镜像管理"></a>4. 镜像管理</h3><ul>
<li><p>docker images 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 默认列出最顶层的镜像</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker images </span></span><br><span class="line">REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx                   latest              71c43202b8ac        13 days ago         109 MB</span><br><span class="line">hyperledger/fabric-ca   1.2.0               66cc132bd09c        2 months ago        252 MB</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 列出所有已下载镜像</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker images -a</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 显示完整的 IMAGE ID</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker images --no-trunc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>docker rmi 和 docker rm 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 删除所有镜像</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker rmi $(docker images -a -q)    </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 删除容器</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker rm webserver</span></span><br><span class="line">webserver  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 容器操作</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps     <span class="comment">## 列出所有运行中的容器</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a  <span class="comment">## 列出所有容器   </span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker stop $(docker ps -a -q)   <span class="comment">## 停止运行所有容器</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker rm $(docker ps -a -q)     <span class="comment">## 删除所有容器</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-容器运维操作"><a href="#5-容器运维操作" class="headerlink" title="5. 容器运维操作"></a>5. 容器运维操作</h3><ul>
<li><p>docker attach 命令</p>
<p>连接到正在运行的容器。</p>
<p>用法：<code>docker attach [OPTIONS] CONTAINER</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker attach --sig-proxy=<span class="literal">false</span> CONTAINER</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>💡</p>
<p><code>attach</code> 命令可以带上<code>--sig-proxy=false</code>来确保<code>CTRL-D</code>或<code>CTRL-C</code>不会关闭容器。</p>
</blockquote>
</li>
<li><p>docker inspect 命令</p>
<p>查看镜像和容器的详细信息。</p>
<p>用法：<code>docker inspect [OPTIONS] CONTAINER|IMAGE [CONTAINER|IMAGE...]</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看容器的内部IP</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker inspect --format=<span class="string">'&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;'</span> CONTAINER</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过 docker inspect 命令查看所挂载的volume情况</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker inspect --format=<span class="string">'&#123;&#123;.Config.Volumes&#125;&#125;'</span> CONTAINER</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker inspect --format=<span class="string">'&#123;&#123;.Mounts&#125;&#125;'</span> CONTAINER</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker inspect a9c9 | grep Mounts -A 10</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>docker ps 命令</p>
<p>查看容器的相关信息，默认只显示正在运行的容器的信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps     <span class="comment">## 列出所有运行中的容器</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a  <span class="comment">## 列出所有容器</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps -l  <span class="comment">## 查看最新创建的容器</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">cc41e7a676a2        hyperledger/fabric-ca:1.2.0   "sh -c 'fabric-ca-..."   12 days ago         Up 12 days          0.0.0.0:7054-&gt;7054/tcp   fabric-ca-server</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker top 命令</p>
<p>查看容器中正在进行的进程</p>
<p>用法：<code>docker top &lt;container_id/container_name&gt;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> host上使用此命令可以看到类似的进程信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps -ef | grep docker</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>docker commit 命令</p>
<p>将一个容器固化为一个新的镜像</p>
<p>用法：<code>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</code></p>
<blockquote>
<p>💡</p>
<p>官方建议通过 docker build 命令结合 Dockerfile 创建和管理镜像</p>
</blockquote>
</li>
<li><p>events、history 和 logs 命令</p>
<p>查看 Docker 的系统日志信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 打印实时系统日志</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker events [OPTIONS]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 指定镜像的历史版本信息</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">history</span> [OPTIONS] IMAGE</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 容器中进程的运行日志</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker logs [OPTIONS] CONTAINER</span></span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/09/10/使用 AWS 区块链模版搭建 Hyperledger Fabric/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/10/使用 AWS 区块链模版搭建 Hyperledger Fabric/" class="post-title-link" itemprop="url">使用 AWS 区块链模版搭建 Hyperledger Fabric</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-10 18:48:00" itemprop="dateCreated datePublished" datetime="2018-09-10T18:48:00+08:00">2018-09-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-20 01:29:17" itemprop="dateModified" datetime="2019-04-20T01:29:17+08:00">2019-04-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/区块链/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/09/10/使用 AWS 区块链模版搭建 Hyperledger Fabric/" class="leancloud_visitors" data-flag-title="使用 AWS 区块链模版搭建 Hyperledger Fabric">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          <p>AWS 区块链模版号称可以在几分钟内完成创建并部署区块链网络。</p>
<p>使用 AWS 区块链模版可以搭建两种类型的区块链网络：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2648731-f29117e3b8d65843.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="AWS 区块链网络"></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2018/09/10/使用 AWS 区块链模版搭建 Hyperledger Fabric/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/08/15/《Thinking in UML》笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/08/15/《Thinking in UML》笔记/" class="post-title-link" itemprop="url">《Thinking in UML》笔记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-08-15 15:12:00" itemprop="dateCreated datePublished" datetime="2018-08-15T15:12:00+08:00">2018-08-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 10:42:56" itemprop="dateModified" datetime="2019-04-18T10:42:56+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/区块链/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/08/15/《Thinking in UML》笔记/" class="leancloud_visitors" data-flag-title="《Thinking in UML》笔记">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h1 id="UML-——-统一建模语言"><a href="#UML-——-统一建模语言" class="headerlink" title="UML —— 统一建模语言"></a>UML —— 统一建模语言</h1><h4 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h4><blockquote>
<p>面向对象（ Object Oriented，简称OO）方法将世界看作一个个相互独立的对象，相互之间并无因果关系，它们平时是“鸡犬之声相闻，老死不相往来”的。只有在某个外部力量的驱动下，对象之间才会依据某种规律相互传递信息。这些交互构成了这个生动世界的一个“过程”。在没有外力的情况下，对象则保持着“静止”的状态。</p>
</blockquote>
<ul>
<li>对象提供了一种处理复杂问题的方式，有了对象，我们能够通过提升抽象级别来构建更大、更复杂的系统。</li>
<li>之所以面向对象方法会兴起，是因为这种认识论能够<strong>帮助我们构造更为复杂的系统来解释越来越复杂的现实世界</strong>。</li>
<li>比掌握具体的技术更重要的是<strong>掌握认识论所采用的方法和分析过程</strong>。</li>
<li>面向对象的特性：<strong>复用性</strong>、<strong>抽象层次</strong>。</li>
<li>抽象层次的好处：<ol>
<li>不论在哪一个层次上，我们都只需要面对有限的复杂度和有限的对象结构，从而可以专心地了解这个层次上的对象是如何工作的；</li>
<li>低层次的零件更换不会影响高层次的功能；</li>
</ol>
</li>
</ul>
<h4 id="要解决面向对象的困难我们需要这样一些方法"><a href="#要解决面向对象的困难我们需要这样一些方法" class="headerlink" title="要解决面向对象的困难我们需要这样一些方法"></a>要解决面向对象的困难我们需要这样一些方法</h4><ul>
<li>一种把现实世界映射到对象世界的方法；</li>
<li>一种用对象世界描述现实世界的方法；</li>
<li>一种验证对象世界行为正确反映了现实世界的方法；</li>
</ul>
<h4 id="UML-是一种建模语言"><a href="#UML-是一种建模语言" class="headerlink" title="UML 是一种建模语言"></a>UML 是一种建模语言</h4><ul>
<li><p>UML本身并没有包含软件方法，而仅是一种语言。</p>
</li>
<li><p><strong>核心元素</strong>描述基本事物；<strong>核心视图</strong>表达这些事物构成的某种有意义的观点；核<strong>心模型</strong>则使用核心视图来描述需求、系统、设计等。</p>
</li>
<li><p><strong>UML 可视化</strong>的含义：UML通过它的元模型和表示法，把那些通过文字或其他表达方法很难表达清楚的，隐晦的潜台词用简单直观的图形表达和暴露出来，准而直观地描述复杂的含义。把“隐晦”的变成“可视”的，也就是把文字变成图形。</p>
</li>
</ul>
<h3 id="面向对象分析设计完整过程"><a href="#面向对象分析设计完整过程" class="headerlink" title="面向对象分析设计完整过程"></a>面向对象分析设计完整过程</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-111419018802d0b3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="建模流程"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/2648731-1e0b10a1c3c09951.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="面向对象分析设计完整过程.png"></p>
<h4 id="业务模型"><a href="#业务模型" class="headerlink" title="业务模型"></a>业务模型</h4><p>业务模型真实映射了参与者在现实世界中的行为。</p>
<ul>
<li><strong>参与者</strong>：信息来源提供者、第一驱动者。现实世界中的“人”。</li>
<li><strong>用例</strong>：驱动者的业务目标。现实世界中的“事”。</li>
<li><strong>业务场景</strong>、<strong>用例场景</strong>：现实世界中的“规则”。</li>
<li><strong>业务对象模型</strong>：达成业务目标过程中的事物。现实世界中的“物”。</li>
</ul>
<h4 id="概念模型"><a href="#概念模型" class="headerlink" title="概念模型"></a>概念模型</h4><p><strong>分析模型</strong>：建立适合计算机理解和实现的模型。</p>
<ul>
<li><p><strong>边界类</strong>：交互的边界。原始需求中的“事”。</p>
<blockquote>
<p>从狭义上说，边界就是大家熟悉的界面，所有对计算机的操作都要通过界面进行。从广义上说，任何一件事物都分为里面和外面，外面的事物与里面的事物之间的任何交互都需要有一个边界。比如参与者与系统的交互，系统与系统之间的交互，模块与模块之间的交互等。</p>
</blockquote>
</li>
<li><p><strong>实体类</strong>：业务实体。现实世界中的“物”。</p>
</li>
<li><p><strong>控制类</strong>：原始需求中的动态信息，即业务或用例场景中的步骤和活动。现实世界中的“规则”。</p>
</li>
</ul>
<h4 id="设计模型"><a href="#设计模型" class="headerlink" title="设计模型"></a>设计模型</h4><blockquote>
<p>在设计模型中，概念模型中的<strong>边界类</strong>可以被转化为操作界面或者系统接口；<strong>控制类</strong>可以被转化为计算程序或控制程序，例如工作流、算法体等；<strong>实体类</strong>可以转化为数据库表、XMI文档或者其他带有持久化特征的类。</p>
</blockquote>
<p>从概念模型向设计模型转化时，可以遵循的规则有：</p>
<ul>
<li>软件架构和框架；</li>
<li>编程语言；</li>
<li>规范或中间件；</li>
</ul>
<h4 id="用例驱动"><a href="#用例驱动" class="headerlink" title="用例驱动"></a>用例驱动</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-4389a6a844d608bc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="建模公式"></p>
<blockquote>
<p>用例驱动是统一过程的重要概念，或者说整个软件生产过程就是用例驱动的。用例驱动软件生产过程是非常有道理的。让我们再次回顾建模公式，很容易得出一个推论，要解决问题领域就要归纳出所有必要的抽象角度（用例），为这些用例描述出可能的特定场景，并找到实现这些场景的事物、规则和行为。再换个说法，如果我们找到的那些事物、规则和行为实现了所有必要的用例，那么问题领域就被解决了。总之，实现用例是必须做的工作，一旦用例实现了，问题领域就解决了。这就是用例驱动方法的原理。</p>
</blockquote>
<h1 id="RUP——统一过程"><a href="#RUP——统一过程" class="headerlink" title="RUP——统一过程"></a>RUP——统一过程</h1><blockquote>
<p><strong>RUP</strong></p>
<p>统一过程归纳和整理了很多在实践中总结出来的软件工程的最佳实践，是一个采用了面对象思想，使用UML作为软件分析设计语言，并且结合了项目管理、质量保证等许多软件程知识综合而成的一个非常完整和庞大的软件方法。</p>
<p>统一过程归纳和集成了软件开发活动中的最佳实践，它定义了软件开发过程中最重要的阶段和工作（四个阶段和九个核心工作流），定义了参与软件开发过程的各种角色和他们的职责，还定义了软件生产过程中产生的工件，并提供了模板。最后，采用演进式软件生命周期（迭代）将工作、角色和工件串在一起，形成了统一过程。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-bd6156b9d2cc3cbe.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="统一过程"></p>
<h4 id="UML-amp-PUP"><a href="#UML-amp-PUP" class="headerlink" title="UML &amp; PUP"></a>UML &amp; PUP</h4><ul>
<li>RUP 是目前与 UML 集成和应用最好、最完整的<strong>软件方法</strong>。</li>
<li><strong>UML</strong> 是一种语言，用来描述软件生产过程中要产生的文档，<strong>统一过程</strong>则是指导如何产生这些文档以及这些文档要讲述什么方法。</li>
</ul>
<h4 id="实施统一过程的原因"><a href="#实施统一过程的原因" class="headerlink" title="实施统一过程的原因"></a>实施统一过程的原因</h4><ol>
<li>提高软件成熟度的需要；</li>
<li>提高软件技术水平和质量的需要；</li>
<li>统一过程适于开发稳定的架构；</li>
</ol>
<h3 id="软件项目真正的灵魂是「软件过程」"><a href="#软件项目真正的灵魂是「软件过程」" class="headerlink" title="软件项目真正的灵魂是「软件过程」"></a>软件项目真正的灵魂是「软件过程」</h3><p>站在软件过程的角度看待问题：先了解一个软件项目是怎么做的，再去 UML 中寻找需要的工具，用 UML 中适合的工具把软件过程要达到的要求记录下来。</p>
<h1 id="建模基础"><a href="#建模基础" class="headerlink" title="建模基础"></a>建模基础</h1><blockquote>
<p><strong>建模</strong>：</p>
<p>通过对客观事物建立一种抽象的方法，用来表征事物并获得对事物本身的理解，再把这种理解概念化，并将这些逻辑概念组织起来，形成对所观察的对象的内部结构和工作原理的便于理解的表达。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-3d64705de9b09cd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="建模"></p>
<ul>
<li>做需求的时候，首要目标不是要弄清楚业务是如何一步一步完成的，而是要弄清楚有多少业务的参与者？每个参与者的目标是什么？参与者的目标就是你的<strong>抽象角度</strong>。</li>
<li>静态的事物（物）+ 特定的条件（规则）+ 特定的动作（参与者的驱动）= 特定的场景（事件）。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-72608c084c79ddea.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="建模公式"></p>
<h4 id="抽象层次"><a href="#抽象层次" class="headerlink" title="抽象层次"></a>抽象层次</h4><p>抽象层次越高，具体信息越少，但是概括能力越强。反之，具体信息越丰富，结果越确定，但相应的概括能力越弱。</p>
<p>抽象的两种方法：</p>
<ol>
<li><strong>自顶向下</strong>：适用于从头开始认识一个事物。</li>
<li><strong>自底向上</strong>：适用于在实践中改进和提高认识。</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b21d57d1a7283d4a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="统一过程一般抽象层次"></p>
<h3 id="对象分析方法"><a href="#对象分析方法" class="headerlink" title="对象分析方法"></a>对象分析方法</h3><ul>
<li><strong>一切都是对象</strong>。</li>
<li><strong>对象的独立性</strong>。对象与对象之间是天然独立的，只是在某个特定的场景下，它们的某一个特定的实例才相互联系在一起。</li>
<li><strong>对象的原子性</strong>。在同一抽象层次上，在分析过程中都应当将对象视为一个不可分割的原子。</li>
<li><strong>对象的可抽象性</strong>。</li>
<li><strong>对象的层次性</strong>。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-5d71fa7d430aa063.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="对象分析方法"></p>
<h1 id="核心元素"><a href="#核心元素" class="headerlink" title="核心元素"></a>核心元素</h1><h2 id="版型"><a href="#版型" class="headerlink" title="版型"></a>版型</h2><p>对 UML 元素基础定义的扩展，在同一个元素基础定义的基础上赋予特别的含义，使得这个元素适用于特定的场合。</p>
<h2 id="参与者（actor）、主角"><a href="#参与者（actor）、主角" class="headerlink" title="参与者（actor）、主角"></a>参与者（actor）、主角</h2><blockquote>
<p>actor 是在系统之外与系统交互的某人或某事物。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-06cf736187f39b33.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20180808-142730"></p>
<ul>
<li>参与者位于系统边界之外。</li>
<li>参与者一定是直接并且主动地向系统发出动作并获得反馈的。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-581a2ebc406f2e40.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="参与者"></p>
<h4 id="业务主角"><a href="#业务主角" class="headerlink" title="业务主角"></a>业务主角</h4><ul>
<li>业务主角是<strong>参与者</strong>的一个版型，特别用于定义<strong>业务的参与者</strong>，在<strong>需求阶段</strong>使用。</li>
<li>业务主角是与业务系统有着交互的人和事物，他们用来确定业务范围。</li>
<li>业务主角针对的是<strong>业务人员</strong>而非计算机用户。</li>
</ul>
<h4 id="业务工人"><a href="#业务工人" class="headerlink" title="业务工人"></a>业务工人</h4><p>人工坐席、被动参与业务，是系统边界中的一部分。</p>
<p>区分参与者和业务工人的方法：判断是在边界之外还是边界之内。</p>
<h4 id="参与者-amp-涉众-amp-用户-amp-角色"><a href="#参与者-amp-涉众-amp-用户-amp-角色" class="headerlink" title="参与者&amp;涉众&amp;用户&amp;角色"></a>参与者&amp;涉众&amp;用户&amp;角色</h4><ul>
<li>涉众是与要建设的这个系统有利益相关的一切人和事。</li>
<li>参与者是涉众的代表。</li>
<li>用户是参与者的代表，是系统的使用者（系统操作员）。</li>
<li>角色是参与者的职责，从众多参与者的职责众抽象出相同的那一部分，将其命名而形成一个角色。</li>
</ul>
<blockquote>
<p>参与者是涉众的代表，它代表涉众对系统的利益要求，并向系统提出建设要求；参与者通过代理给其他用户或将自身实例化成用户来使用系统；参与者的职责可以用角色来归纳，用户被指定扮演哪个或哪些角色因此来获得参与者的职责。<br>参与者的核心地位还体现在，系统是以参与的观点来决定的。参与者对系统的要求，对系统的表述完全决定了系统的功能性。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-330bf9270ff93b8c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="参与者、涉众、用户和角色关系"></p>
<h2 id="用例"><a href="#用例" class="headerlink" title="用例"></a>用例</h2><blockquote>
<p>用例定义了一组用例实例，其中每个实例都是系统所执行的一系列操作，这些操作生成特定主角可以观测的值。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-204e8af6f5f398ea.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20180808-151109"></p>
<ul>
<li>一个用例就是参与者交互的，并且给参与者提供可观测的有意义的结果的一系列活动的集合。</li>
<li>用例，就是一件事情，要完成这件事情，需要做一系列的活动。</li>
<li>用例场景：一个场景就是一个用例的实例。</li>
<li>一个完整的用例：参与者 + 前置条件 + 场景 + 后置条件。</li>
<li>用例的作用：捕捉功能性需求。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-22476700c6222185.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="用例的构成"></p>
<p><strong>用例 != 功能</strong></p>
<p>一个用例是一个参与者如何使用系统，获得什么结果的一个集合，通过分析用例，得出结构性的和功能性的内容，最终实现用例，也就实现了使用者的观点。</p>
<ul>
<li>功能是计算机术语，它是用来描述计算机的，而非定义需求的术语。功能实际描述的是输入➡️计算➡️输出。</li>
<li>功能是脱离使用者的愿望而存在的。</li>
<li>功能是孤立的，给一个输入，通过计算就有一个固定的输出。</li>
<li>如果非要从功能的角度解释用例，那么用例可以解释为一系列完成特定目标的“功能”的组合，针对不同的应用场景，这些“功能”体现不同的组合方式。</li>
</ul>
<h4 id="用例的特征"><a href="#用例的特征" class="headerlink" title="用例的特征"></a>用例的特征</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-37311823f44b8c8e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="用例的特征"></p>
<h4 id="用例的粒度"><a href="#用例的粒度" class="headerlink" title="用例的粒度"></a>用例的粒度</h4><ul>
<li><strong>业务建模阶段</strong>：用例的粒度以每个用例能够说明一件完整的事情为宜，即一个用例可以描述一项完整的业务流程。</li>
<li><strong>概念建模阶段</strong>：用例的粒度以每个用例能描述一个完整的事件流为宜。即一个用例描述一项完整业务中的一个步骤。</li>
<li><strong>系统建模阶段</strong>：用例的粒度以一个用例能够描述操作者与计算机的一次完整交互为宜。</li>
<li>在同一个需求阶段，所有用例的粒度应该是同一个量级的。</li>
</ul>
<h4 id="业务用例"><a href="#业务用例" class="headerlink" title="业务用例"></a>业务用例</h4><ul>
<li>业务用例是用例版型中的一种，专门用于需求阶段的业务建模。</li>
<li>业务用例专门用于<strong>业务建模</strong>。</li>
</ul>
<h4 id="业务用例实现"><a href="#业务用例实现" class="headerlink" title="业务用例实现"></a>业务用例实现</h4><ul>
<li>专门用于需求阶段的业务建模。</li>
<li>业务用例实现表达了同一个业务用例的不同实现方式。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-71ae9c9df54f37b4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="业务用例实现"></p>
<h4 id="概念用例"><a href="#概念用例" class="headerlink" title="概念用例"></a>概念用例</h4><ul>
<li>概念用例用于<strong>概念建模</strong>。</li>
<li>概念用例用来获取业务用例中的核心业务逻辑。</li>
</ul>
<h4 id="系统用例-用例"><a href="#系统用例-用例" class="headerlink" title="系统用例=用例"></a>系统用例=用例</h4><p>系统用例是用来定义系统范围、获取功能性需求的。系统用例是软件系统开发的全部范围，系统用例是我们得到的最终需求。</p>
<h4 id="用例实现"><a href="#用例实现" class="headerlink" title="用例实现"></a>用例实现</h4><p>一个用例实现代表了用例的一种实现方式。</p>
<h2 id="边界"><a href="#边界" class="headerlink" title="边界"></a>边界</h2><ul>
<li>面向对象里，任何一个对象都有一个边界，外界只能通过这个边界来认识对象，与对象打交道，而对象内部则是一个禁区。</li>
<li><strong>边界决定视界。</strong>边界是可大可小的，由建模者主观臆定。</li>
<li><strong>边界决定抽线层次</strong>。通过设定边界、组织边界大小来决定抽象层次，层层推进地描述对象。</li>
<li><strong>边界还是一种分析方法</strong>。实际工作中应当学会灵活地使用边界，用边界来决定抽象层次和视角，进而排除边界外大量的杂音来降低复杂程度。</li>
</ul>
<h2 id="业务实体"><a href="#业务实体" class="headerlink" title="业务实体"></a>业务实体</h2><blockquote>
<p><strong>业务实体</strong>代表<strong>业务角色</strong>执行<strong>业务用例</strong>时所处理或使用的“事物”。</p>
</blockquote>
<ul>
<li>业务实体是类的一种版型，特别用于在<strong>业务建模</strong>阶段建立领域模型。</li>
<li>如果说参与者和用例描述了我们在这个问题领域中达到什么样的目的，那么业务实体就描述了我们使用什么来达到业务目标以及通过什么来记录这个业务目标。</li>
</ul>
<h4 id="理解业务实体"><a href="#理解业务实体" class="headerlink" title="理解业务实体"></a>理解业务实体</h4><ol>
<li>业务实体来自现实世界。</li>
<li>业务实体一定是在分析业务流程（业务用例场景）的过程当中发现的。</li>
<li>业务实体作为类的一个版型，具有对象的所有性质，包括属性和方法。<ul>
<li>属性：在特定的场景下，只需要关心与这个场景直接关联的属性。</li>
<li>方法：在特定的场景下，只需要关心与这个场景有直接关系的方法。</li>
</ul>
</li>
</ol>
<h4 id="获取业务实体"><a href="#获取业务实体" class="headerlink" title="获取业务实体"></a>获取业务实体</h4><ol>
<li>建立业务用例场景；</li>
<li>从业务用例场景中逐个分析动词后面的名词，它们就是业务实体的备选对象；</li>
<li>分析业务实体之间的关系，并决定哪些应当单独建模，哪些应当作为属性。</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-f41480f76ca7135c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="寄信业务实体模型图"></p>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p><img src="http://upload-images.jianshu.io/upload_images/2648731-d7fe5574bdc94ac5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20180808-174111"></p>
<ul>
<li>包最主要的用途是分类元素。</li>
<li>UML 认为好的分包具有高内举、低耦合的性质。</li>
<li>同一个包中的元素应该是相互联系，甚至是不可分割的。</li>
<li>包之间无依赖关系或松耦合关系。</li>
<li>如果实际情况难以做到完全解除依赖关系，那么至少应当保证包之间的依赖关系不会被传递。</li>
<li>包之间的依赖关系应当是单向的，应当尽量避免双向依赖和循环依赖。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-1db74bf0e76fe144.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="常用的包的版型"></p>
<h2 id="分析类"><a href="#分析类" class="headerlink" title="分析类"></a>分析类</h2><blockquote>
<p>分析类用于获取系统中主要的“职责簇”。它们代表系统的原型类，是系统必须处理的主要抽象概念的“第一个关口”。</p>
<ul>
<li>分析类是从功能性需求向计算机实现转化过程中的“第一个关口”。</li>
<li>分析类可以产生系统设计的主要抽象——系统的设计类和子系统。</li>
</ul>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-712898e3eed37f2c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="分析类"></p>
<h4 id="边界类"><a href="#边界类" class="headerlink" title="边界类"></a>边界类</h4><blockquote>
<p>边界类是一种用于对系统外部环境与其内部运作之间的交互进行建模的类。</p>
</blockquote>
<p>边界类常用的场景：</p>
<ul>
<li>参与者与用例之间；</li>
<li>用例与用例之间；</li>
<li>用例与系统边界之外的非人对象；</li>
<li>相关联的业务对象有明显的独立性要求；</li>
<li>从架构角度上来说，边界类主要位于展现层。</li>
</ul>
<h4 id="控制类"><a href="#控制类" class="headerlink" title="控制类"></a>控制类</h4><p>控制类用于对一个或几个用例所特有的控制行为进行建模。控制对象（控制类的实例）通过控制其他对象，因此它们的行为具有协调性质。</p>
<ul>
<li>控制类来源于对用例场景中行为的定义。</li>
<li>控制咧主要起到协调对象的作用。</li>
<li>控制类主要位于业务逻辑层。</li>
<li>我们应当在边界类和边界类、边界类和实体类、实体类和实体类之间都默认加入控制类，将相应的处理逻辑放到控制类里去，哪怕该控制类只有一个操作。</li>
</ul>
<h4 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h4><p>实体类是用于对必须存储的信息和相关行为建模的类。实体对象（实体类的实例）用于保存和更新一些现象的有关信息。</p>
<ul>
<li>实体类来源于业务模型中的业务实体。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-70c9c5cf83198af1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="分析类的三高"></p>
<h2 id="设计类"><a href="#设计类" class="headerlink" title="设计类"></a>设计类</h2><blockquote>
<p><strong>「设计类」</strong></p>
<p>设计类由类型、属性和方法构成。设计类的名称、属性和方法也直接映射到编码中相应的class、<br> property 和 method。</p>
</blockquote>
<ul>
<li>设计类是系统实施中一个或多个对象的抽象。</li>
<li>设计类用于<strong>设计模型</strong>中。</li>
</ul>
<h5 id="可见性"><a href="#可见性" class="headerlink" title="可见性"></a>可见性</h5><p>类的属性和方法的可见性定义：</p>
<ul>
<li><p><strong>公有</strong>：除了类本身以外，属性和方法对其他模型元素也是可视的。</p>
</li>
<li><p><strong>保护</strong>：属性和方法只对类本身、它的子类或友元取决于具体语言）是可视的。</p>
</li>
<li><strong>私有</strong>：属性和方法只对类本身和类的友元（取决于具体语言）是可视的。</li>
<li><strong>实施</strong>：属性和方法只在类本身的内部是可视的（取决于具体语言）。</li>
</ul>
<h2 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h2><h3 id="关联关系（association）"><a href="#关联关系（association）" class="headerlink" title="关联关系（association）"></a>关联关系（association）</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-fbbe535c7ea0abd5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="关联关系"></p>
<ul>
<li>描述不同类的对象之间静态的、天然的结构关系。</li>
<li><strong>静态关联</strong>，通常与运行状态无关。</li>
<li>强关联。</li>
<li>多重性：一对一关系、一对多关系、多对多关系。</li>
<li>在最终的代码里，关联对象通常是以==实例变量（成员变量）==的形式实现的。</li>
</ul>
<h3 id="依赖关系（dependency）"><a href="#依赖关系（dependency）" class="headerlink" title="依赖关系（dependency）"></a>依赖关系（dependency）</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-93770d7d859e2cdd.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="依赖关系：A依赖于B"></p>
<ul>
<li>描述一个对象在运行期会使用到另一个对象的关系。</li>
<li><strong>临时性</strong>、弱关系，随运行场景而改变（动态的）。</li>
<li>依赖有单向依赖、双向依赖。</li>
<li><strong>双向依赖是一种非常不好的结构，我们总是应当保持单向依赖，杜绝双向依赖的产生</strong>。</li>
<li>在最终的代码里，依赖关系体现为==类构造方法、类方法等的传入参数==。</li>
</ul>
<h3 id="扩展关系（extends）"><a href="#扩展关系（extends）" class="headerlink" title="扩展关系（extends）"></a>扩展关系（extends）</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-dbf5601f5adc89f3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="扩展关系：A扩展出B"></p>
<ul>
<li>它特别用于在<strong>用例模型</strong>中说明向基本用例中的某个扩展点插入<strong>扩展用例</strong>。</li>
<li>用于概念模型、业务模型。</li>
<li>表示“<strong>可选</strong>”，而不是必须。</li>
</ul>
<h3 id="包含关系（include）"><a href="#包含关系（include）" class="headerlink" title="包含关系（include）"></a>包含关系（include）</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-01c70205a28d9edf.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="包含关系"></p>
<ul>
<li>用于用例模型。</li>
<li>用于概念模型、业务模型。</li>
<li>包含用例表示“<strong>必须</strong>”，而不是可选。</li>
</ul>
<h3 id="实现关系（realize）"><a href="#实现关系（realize）" class="headerlink" title="实现关系（realize）"></a>实现关系（realize）</h3><blockquote>
<p>实现所代表的含义是，基本用例描述了一个业务目标，但是该业务目标有多种可能的实现途径，每一种实现途径可以用用例实现（或称用例实例）来表示，而用例实现与基本用例之间就构成了实现关系。换言之，每个实现途径都实现了基本用例的业务目标。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-f82b62803688fc0c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20180809-150433"></p>
<ul>
<li>用于在<strong>用例模型</strong>中连接<strong>用例</strong>和<strong>用例实现</strong>。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-5bee35fda8bb3d1c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="实现关系"></p>
<h3 id="精化关系（refine）"><a href="#精化关系（refine）" class="headerlink" title="精化关系（refine）"></a>精化关系（refine）</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-5defe10d3fc0efa3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="精化关系：A精化了B"></p>
<ul>
<li>一个基本用例可以分解出许多更小的关键精化用例，这些更小的==精化用例更细致地展示了基本用例的核心业务==。精化关系用来连接基本用例和精化用例，说明精化用例是由基本用例精化得来的。</li>
<li>精化关系也可以用于<strong>模型与模型之间</strong>，表示某个模型是通过精化另一个模型而得来的。比如说我们认为设计类是通过精化分析类而得来，我们可以用XX设计类&lt; <refine>&gt;XX分析类来表示它们之间的关系。</refine></li>
<li>与泛化关系不同的是，<strong>精化关系表示由基本对象可以分解为更明确、精细的子对象，这些子对象并没有增加、减少、改变基本对象的行为和属性，仅仅是更加细致和明确化了。</strong>在泛化关系中基本对象被泛化成为子对象后，子对象继承了基本对象的所有特征，并且子对象可以增加、改变基本对象的行为和属性</li>
<li>另一方面，精化关系仅仅用于<strong>建模阶段</strong>，在实现语言中是没有精化这一语义的。泛化则等同于实现语言中的继承语义。</li>
</ul>
<h3 id="泛化关系（generalization）"><a href="#泛化关系（generalization）" class="headerlink" title="泛化关系（generalization）"></a>泛化关系（generalization）</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-ebe544790d667272.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="泛化关系：A继承自B"></p>
<ul>
<li>泛化关系可以用于建模过程中的任意一个阶段，说明两个对象之间的<strong>继承关系</strong>。</li>
<li>泛化关系表示一个类对另一个类的继承。</li>
</ul>
<h3 id="聚合关系（aggregation）"><a href="#聚合关系（aggregation）" class="headerlink" title="聚合关系（aggregation）"></a>聚合关系（aggregation）</h3><p>A 聚合到 B 上，或者说 B 由 A 组成。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-312dabd3fea70225.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="聚合关系：A聚合到B上"></p>
<ul>
<li>聚合关系用于<strong>类图</strong>，特别用于表示实体对象之间的关系，表达==整体由部分构成==的语义。例如个部门由许多人员构成。</li>
<li>与组合关系不同的是，==整体和部分不是强依赖的，即使整体不存在了，部分仍然存在==。例如部门撤销以后，人员不会因此而消失，他们依然存在。</li>
</ul>
<h3 id="组合关系（composition）"><a href="#组合关系（composition）" class="headerlink" title="组合关系（composition）"></a>组合关系（composition）</h3><p>A 组合成 B，或者说 B 由 A 组成。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-02c872235b83f9b1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="组合关系"></p>
<ul>
<li>组合关系用于<strong>类图</strong>，特别用于表示实体对象系，表达==整体拥有部分==的语义。例如母公司拥有许多子公司。</li>
<li><strong>组合关系是一种强依赖的特殊聚合关系，如果整体不存在了，则部分也将消亡。</strong>例如母公司解体了，子公司也将不再存在。</li>
</ul>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><blockquote>
<p>组件是系统中实际存在的可更换部分，它实现特定的功能，符合一套接口标准并实现一组接口。</p>
</blockquote>
<ul>
<li>建模过程中，我们通过组件这一元素对分析设计过程中的<strong>类</strong>、<strong>接口</strong>等进行逻辑分类，一个组件表达软件的一组功能。</li>
<li>UML中把组件定义为任何的逻辑代码模块。但是在笔者看来，一个组件应当具有<strong>完备性</strong>、<strong>独立性</strong>、<strong>逻辑性</strong>和<strong>透明性</strong>。</li>
<li>UML中组件之间唯一的关系就是依赖。但是在笔者看来，一个组件应当是一个独立的业务模块，有着完备的功能，可独立部署，一个组件可以看成是一个完备的服务。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-451b90517b9250f6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="使用组件"></p>
<h2 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h2><blockquote>
<p>节点是带有至少一个处理器、内存以及可能还带有其他设备的处理元素。</p>
<p>在实际工作中，一般说来服务器、工作站或客户机可以称为一个节点。节点是应用程序的部署单元。节点元素特别用于部署视图，描述应用程序在物理结构上是如何部署在应用环境中的，是一种包括软、硬件环境在内的拓扑结构描述。</p>
</blockquote>
<p>使用节点的场景：</p>
<ul>
<li>分布式应用环境；</li>
<li>多设备应用环境；</li>
</ul>
<h1 id="核心视图"><a href="#核心视图" class="headerlink" title="核心视图"></a>核心视图</h1><p>在 UML 里，<strong>结构性特征</strong>是用==静态视图==来表达的，<strong>行为性特征</strong>是用==动态视图==来表达的。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-c0123e07da1374fc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="UML 核心视图"></p>
<h3 id="静态视图"><a href="#静态视图" class="headerlink" title="静态视图"></a>静态视图</h3><blockquote>
<p>静视图就是表达静态事物的。它只描述事物的静态结构，而不描述其动态行为。</p>
</blockquote>
<h4 id="用例图"><a href="#用例图" class="headerlink" title="用例图"></a>用例图</h4><ul>
<li>用例视图采用<strong>参与者</strong>和<strong>用例</strong>作为基本单元，以不同的视角展现系统的功能性需求。</li>
</ul>
<h5 id="业务用例视图：使用业务主角和业务用例描述业务建模的功能性需求"><a href="#业务用例视图：使用业务主角和业务用例描述业务建模的功能性需求" class="headerlink" title="业务用例视图：使用业务主角和业务用例描述业务建模的功能性需求"></a>业务用例视图：使用业务主角和业务用例描述业务建模的功能性需求</h5><p>业务用例视图的两个视角：</p>
<ol>
<li><p>业务主角视角：有利于向业务主角确认其业务目标是否都已经齐全，以此来检查是否有遗漏的业务用例没有发现。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-aa75dfe8aebe191e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="业务用例视图之业务主角视角"></p>
</li>
<li><p>业务模块视角：有利于从业务的完整性角度出发，检查完成某个业务的所有业务主角和业务用例是否已经齐全，以此来检查是否有遗漏的业务用例没有被发现。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-098c317cbfaa3682.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="业务用例视图之业务视角"></p>
</li>
<li><p>其他视角</p>
</li>
</ol>
<h5 id="业务用例实现视图：描述业务的实现途径"><a href="#业务用例实现视图：描述业务的实现途径" class="headerlink" title="业务用例实现视图：描述业务的实现途径"></a>业务用例实现视图：描述业务的实现途径</h5><p><img src="http://upload-images.jianshu.io/upload_images/2648731-3f2fd4210cbb334e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="业务用例实现视图"></p>
<h5 id="概念用例视图"><a href="#概念用例视图" class="headerlink" title="概念用例视图"></a>概念用例视图</h5><blockquote>
<p>概念用例视图用于展现从业务用例中经过分析分解出来的关键概念用例，并表示概念用例和业务用例之间的关系。一般来说这些系有扩展、包含和精化。</p>
</blockquote>
<ul>
<li>一般以业务用例为单元展现。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b79ff33e6199eab1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="借阅图书概念用例视图"></p>
<h5 id="系统用例视图"><a href="#系统用例视图" class="headerlink" title="系统用例视图"></a>系统用例视图</h5><blockquote>
<p>系统用例视图展现系统范围，将对业务用例进行分析以后得到的系统用例展现出来。</p>
</blockquote>
<ul>
<li>一般以业务用例为单位展现。</li>
<li>系统用例视图就是系统的开发范围。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-d7afb2e42380eaa5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="借阅图书系统用例"></p>
<p>它表达的含义是计算机系统将开发本视图中所列举出的系统用例，而检查借阅证可能是手工工作而不需要纳入系统建设范围。</p>
<h5 id="系统用例实现视图"><a href="#系统用例实现视图" class="headerlink" title="系统用例实现视图"></a>系统用例实现视图</h5><p>如果一个系统用例有多种实现方式，也应当为其绘制实现视图。</p>
<h4 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h4><blockquote>
<p>类图用于展示系统中的类及其相互之间的关系。</p>
<p>本质上说，类图是现实世界问题领域的抽象对象的结构化、概念化、逻辑化描述。</p>
</blockquote>
<p>在UML中，从开始的需求到最终的设计，类图也是围绕着这三个层次（概念层、说明层、实现层）的观点进行建模的。类图建模是先概念层而说明层，进而实现层这样一个随着抽象层次的逐步降低而逐步细化的过程</p>
<h5 id="概念层类图"><a href="#概念层类图" class="headerlink" title="概念层类图"></a>概念层类图</h5><p>概念层的观点认为，在这个层次的类图描述的是==现实世界中问题领域的概念理解==，类图中表达的类与现实世界的问题领域有着明显的对应关系，类之间的关系也与问题领域中实际事物的关系有着明显的对应关系。需要注意的是，概念层类图中的类和类关系与最终的实现类并不一定有直接和明显的对应关系。在概念层上，类图着重于<strong>对问题领域的概念化理解</strong>，而不是实现，因此类名称通常都是问题领域中实际事物的名称。概念层的类图是独立于实现语言和实现方式的。</p>
<p><strong>概念层类位于业务建模阶段。</strong>领域模型图、业务实体图描述。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-eb67e0cd2ff9015e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="概念层类图"></p>
<h5 id="说明层类图"><a href="#说明层类图" class="headerlink" title="说明层类图"></a>说明层类图</h5><p>说明层的观点认为，在这个层次的类图考察的是==类的接口==而不是实现，类图中表达的类和类关系应当是<strong>对问题领域在接口层次抽象的描述</strong>。</p>
<p><strong>说明层类位于概念建模阶段。</strong>分析类、分析模型图描述。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-d6c3a81451c1eb21.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="说明层类图"></p>
<h5 id="实现层类图"><a href="#实现层类图" class="headerlink" title="实现层类图"></a>实现层类图</h5><p>实现层观点认为，类是==实现代码的描述==，类图中的类直接映射到可执行代码。在这个层次上类必须明确采用哪种实现语言、什么设计模式、什么通信标准、遵循什么规范等</p>
<p><strong>实现层类图位于设计建模阶段。</strong>类图可视为伪代码。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-5fea8578e02c0383.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="实现层类图"></p>
<h4 id="包图"><a href="#包图" class="headerlink" title="包图"></a>包图</h4><p>包图一般都用来展示高层次的观点。</p>
<p>在 UML 所有视图中，包图或许是最自由、约束最小的一种。除了特定的版型之外，包几乎可以用在任何阶段。</p>
<h3 id="动态视图"><a href="#动态视图" class="headerlink" title="动态视图"></a>动态视图</h3><blockquote>
<p>故名思义，动态视图是描述事物<strong>动态行为</strong>的。需要注意的是，==动态视图不能够独立存在，它必==<br>==须特指一个静态视图或UML元素，说明在静态视图规定的事物结构下它们的动态行为。==</p>
</blockquote>
<h4 id="活动图"><a href="#活动图" class="headerlink" title="活动图"></a>活动图</h4><p>活动图描述了为了完成某一个目标需要做的活动以及这些活动的执行顺序。</p>
<p>活动图的两个层面：</p>
<ol>
<li>描述用例场景——用例活动图；</li>
<li>描述对象交互——对象活动图；</li>
</ol>
<p>活动图主要用于：</p>
<ol>
<li>业务场景建模；</li>
<li>用例场景建模；</li>
</ol>
<h5 id="用例活动图"><a href="#用例活动图" class="headerlink" title="用例活动图"></a>用例活动图</h5><p>用例——参与者的一个目标</p>
<p>用例场景——如何来达到这个目标</p>
<p>活动图——描述用例场景（业务流程）</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-a6c9b2e075ef59e3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="登机手续用例场景活动图示例"></p>
<h5 id="对象活动图"><a href="#对象活动图" class="headerlink" title="对象活动图"></a>对象活动图</h5><p>展示对象的交互，不推荐使用。</p>
<h5 id="泳道"><a href="#泳道" class="headerlink" title="泳道"></a>泳道</h5><p>泳道，顾名思义，就像一个游泳运动员只能在一个道里进行比赛一样，一个对象也只能在一个业务流程中担任一个（或一类）职责。泳道代表了一个特定的类、人、部门、层次等对象的职责区，这些对象在业务流程中负责执行的活动集合构成了它们的职责。<br>即使加入泳道后对象交互图有了些模样，笔仍然不推荐使用它。泳道最主要的用途是在分析用例场景时用来获取角色职责。</p>
<h4 id="状态图"><a href="#状态图" class="headerlink" title="状态图"></a>状态图</h4><p>状态图显示一个状态机。状态机用于对模型元素的动态行为进行建模，更具体地说，就是==对系统行为中受事件驱动的方面进行建模==。通使用状态图来说明业务角色或业务实体可能的状态——导致状态转换的事件和状态转换引起的操作。状态图常常会简化对设计的确认。对于类的对象所有可能的状态，状态图都显示它可能接收的消息、将执行的操作和在后类的对象所处的状态</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-4659c30ec08dff09.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图书生命周期状态图"></p>
<h4 id="时序图"><a href="#时序图" class="headerlink" title="时序图"></a>时序图</h4><blockquote>
<p>时序图描述了在参与交互的对象中所发生的事件（从激活的角度来说明），以及这些对象如何通过相互发送消息进行通信。可以为用例事件流的各种不同形式制作时序图。</p>
</blockquote>
<ul>
<li>时序图用于描述==按时间顺序排列的对象之间的交互模式==。</li>
<li>通常使用时序图描述<strong>用例实现</strong>。</li>
</ul>
<h5 id="业务模型时序图"><a href="#业务模型时序图" class="headerlink" title="业务模型时序图"></a>业务模型时序图</h5><p>业务模型时序图用于为领域模型中的业务实体交互建模，其目的是实现业务用例。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-d70daf9b703ef8a9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="网上购买商品业务模型时序图"></p>
<h5 id="概念模型时序图"><a href="#概念模型时序图" class="headerlink" title="概念模型时序图"></a>概念模型时序图</h5><p>概念阶段的时序图采用<strong>分析类</strong>来绘制，目标同样是实现<strong>业务用例</strong>。</p>
<h5 id="设计模型时序图"><a href="#设计模型时序图" class="headerlink" title="设计模型时序图"></a>设计模型时序图</h5><p>设计模型时序图使用<strong>设计类</strong>作为对象绘制。目标是实现概念模型中的某个事件流，一般以某个完整交互为单位，消息细致到方法级别。</p>
<h4 id="协作图"><a href="#协作图" class="headerlink" title="协作图"></a>协作图</h4><p>协作图描述了对象间交互的一种模式；它通过对象之间的连接和它们相互发送的消息来显示参与交互的对象。<br>协作图中可以有对象和主角实例，以及描述它们之间关系和交互的连接和消息。通过说明对象间如何通过互相发送消息来实现通信，协作图描述了参与对象中发生的情况。可以为用例事件流的每一个变化形式制作一个协作图。<br>与时序图的作用相似，协作图用于显示对象之间如何进行交互以执行特定用例或用例中特定部分的行为，协作图的建模结果用于<strong>获取对象的职责和接口</strong>。与时序图不同的是，协作图因为展示了对象间的关系，使得它更适用于获得对<strong>对象结构</strong>的理解，而时序图则更适于获得对于<strong>调用过程</strong>的理解。不过在本质上，它们是可以互换的。</p>
<p>[图片上传失败…(image-d222e7-1534144287983)]</p>
<h1 id="核心模型"><a href="#核心模型" class="headerlink" title="核心模型"></a>核心模型</h1><p>要建立什么模型，首先要确定的是该项目要采用什么样的生命周期。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-329b1e210918c917.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="UML 核心模型"></p>
<h2 id="用例模型"><a href="#用例模型" class="headerlink" title="用例模型"></a>用例模型</h2><blockquote>
<p>用例模型是系统既定功能及系统环境的模型。</p>
</blockquote>
<ul>
<li><strong>业务用例模型</strong>用于识别和规定业务需求，<strong>概念模型</strong>用来分析和确认业务需求，而<strong>系统用例模型</strong>用来规定系统开发需求。这三者之间是一种<strong>精化的关系</strong>。</li>
</ul>
<h3 id="业务用例模型"><a href="#业务用例模型" class="headerlink" title="业务用例模型"></a>业务用例模型</h3><ul>
<li>业务用例模型要准确而完备地描述客户的现存或预想业务。</li>
<li>业务用例模型用于描述和明确业务需求，是为客户现实的业务建模的。</li>
</ul>
<h3 id="概念用例模型"><a href="#概念用例模型" class="headerlink" title="概念用例模型"></a>概念用例模型</h3><p>概念用例模型帮助我们简化和理解业务模型，帮助我们初步从对象角度来理解业务，从而建立软件架构并产生系统用例。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-6fcd5e97b27567dc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="完整的概念用例模型"></p>
<h3 id="系统用例模型-用例模型"><a href="#系统用例模型-用例模型" class="headerlink" title="系统用例模型/用例模型"></a>系统用例模型/用例模型</h3><p>系统建模=需求获取</p>
<p>系统用例模型代表了实际业务转化为计算机功能性需求以后的结果，是系统开发的契约。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-211c76653fb7ac71.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="完整的用例模型"></p>
<h3 id="领域模型"><a href="#领域模型" class="headerlink" title="领域模型"></a>领域模型</h3><p>领域模型是采用业务对象建立起来的一种模型。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-d29ba5b9fc59e9ae.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="领域模型推导"></p>
<h3 id="分析模型"><a href="#分析模型" class="headerlink" title="分析模型"></a>分析模型</h3><p>分析模型使用分析类来建立系统原型，获得系统实现需求的第一手方案。</p>
<h3 id="软件架构和框架"><a href="#软件架构和框架" class="headerlink" title="软件架构和框架"></a>软件架构和框架</h3><p><strong>架构</strong>代表了一个软件项目对系统的定义和理解。<strong>软件架构</strong>在较高的抽象层次上，将系统规划为一些独立的逻辑部件，各负其责，这些部件通过标准的通信接口传递信息。一个架构就是一个系统的骨架。</p>
<p><strong>框架</strong>是针对某个问题领域通用解决方案，它通常集成了最佳实践和可复用的基础结构，对开发工作起到减少工作量、指导和规范作用。</p>
<blockquote>
<p>架构师系统蓝图，是对系统高层次的定义和描述。框架是解决方案，是加速和提高系统质量的半成品。</p>
</blockquote>
<h4 id="业务架构"><a href="#业务架构" class="headerlink" title="业务架构"></a>业务架构</h4><p>业务架构在先启阶段建立，在精化阶段得以改进。业架构的目标是为业务领域建立一个维护和扩展的逻辑结构，描述业务的构成。业架构对我们理解客户业务，尤其是开发行业解决方案有着重要的作用。另一方面，业务架构是软件架构的重要输入。<br>业务架构来源于两个主要的输入：<strong>业务用例</strong>和<strong>领域模型</strong>。如果没有业务架构，只有业务用例和领域模型时，我们将“只见树木不见森林”因为不论是业务用例还是领域模型，它们都只是业务领域的一个部分，尤其业务用例本身就是一个独立的单元，仅凭对它们的理解不足以俯瞰整个业务领域。</p>
<h4 id="软件架构"><a href="#软件架构" class="headerlink" title="软件架构"></a>软件架构</h4><p>软件架构需要在业务架构的基础上引入计算机环境，计算机环境包括硬件环境和软件环境。软件架构需要说明业务架构如何分布在计算机环境中，并得以执行。</p>
<p>一个典型的软件架构包括两个视角:<strong>广度视角</strong>和<strong>深度视角</strong>，这两个视角构成对软件架构的“立体”描述。</p>
<ul>
<li><strong>广度视角</strong>即是常见的软件层次结构它关注软件的分层，规定每一层的职责以及层之间的通信标准。一般使用<strong>层包元素</strong>来绘制。</li>
<li><strong>深度视角</strong>是指广度视角中每一层的详细说明，它关注每一层以及每个部分的具体实现架构。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-54df389a46e0e29a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="软件层次广度视角架构图"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-ed7e53d1126ed63b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="软件层次深度视角"></p>
<h3 id="设计模型-1"><a href="#设计模型-1" class="headerlink" title="设计模型"></a>设计模型</h3><blockquote>
<p>设计模型是一个描述用例实现的对象模型，它可作为对实施模型及其源代码的抽象。设计模型用作实施和测试活动的基本输入。</p>
</blockquote>
<p>设计模型就是我们所熟知的详细设计。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-fb300e964bc4c848.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="设计模型的主要输入"></p>
<h3 id="组件模型"><a href="#组件模型" class="headerlink" title="组件模型"></a>组件模型</h3><h3 id="实施模型"><a href="#实施模型" class="headerlink" title="实施模型"></a>实施模型</h3><p><strong>实施模型</strong>由<strong>配置节点</strong>和<strong>组件</strong>组成。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://www.cnblogs.com/shindo/p/5579191.html" target="_blank" rel="noopener">五分钟读懂 UML 类图</a></li>
<li><a href="https://blog.csdn.net/huojiao2006/article/details/52935321/" target="_blank" rel="noopener">数据库建模三步骤：概念模型 -&gt; 逻辑模型 -&gt; 物理模型</a></li>
<li>Mac UML 工具：<a href="https://www.visual-paradigm.com/download/community.jsp?platform=macosx&amp;arch=jre" target="_blank" rel="noopener">Visual Paradigm</a></li>
<li>VP-UML使用介绍：<a href="https://www.cnblogs.com/lsgxeva/p/7715434.html" target="_blank" rel="noopener">https://www.cnblogs.com/lsgxeva/p/7715434.html</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/08/15/PKI 体系/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/08/15/PKI 体系/" class="post-title-link" itemprop="url">PKI 体系</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-08-15 14:39:00" itemprop="dateCreated datePublished" datetime="2018-08-15T14:39:00+08:00">2018-08-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-15 17:36:06" itemprop="dateModified" datetime="2019-04-15T17:36:06+08:00">2019-04-15</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/PKI-密码学/" itemprop="url" rel="index"><span itemprop="name">PKI&密码学</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2018/08/15/PKI 体系/" class="leancloud_visitors" data-flag-title="PKI 体系">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>CA中心——CA系统——数字证书</p>
<p>CA 中心管理并运营 CA 系统，CA 系统负责颁发数字证书。</p>
<p>专门负责颁发数字证书的系统称为 CA 系统，负责管理并运营 CA 系统的机构称为 CA 中心。所有与数字证书相关的各种概念和技术，统称为 PKI（Public Key Infrastructure）。</p>
</blockquote>
<h3 id="传统密码学"><a href="#传统密码学" class="headerlink" title="传统密码学"></a>传统密码学</h3><ul>
<li>换位加密法；</li>
<li>替换加密法；</li>
</ul>
<h3 id="现代密码学"><a href="#现代密码学" class="headerlink" title="现代密码学"></a>现代密码学</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-89c03684f48a6c3c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="现代密码学"></p>
<ul>
<li><strong>对称算法/密码密钥算法/单密钥算法</strong>：加密和解密使用同一密钥或加密和解密的密钥之间存在简单的、容易计算的互推关系。<ul>
<li>流密码算法又称序列密码算法，每次加密或解密一位或一字节的明文或密文。</li>
<li>分组密码算法将明文（密文）分成固定长度的数据块（比特块或字节块），用同一密钥和算法对每一明文（密文）块加密（解密）后得到等长的密文（明文）块，然后将密文（文）块按照顺序组合起来最终得到密文（明文）。</li>
</ul>
</li>
<li><strong>非对称算法/公钥算法</strong>：加密密钥（公钥）和解密密钥（私钥）不相同的密码算法。</li>
<li><strong>摘要算法/散列函数/哈希函数/杂凑函数</strong>：把任意长的输入消息数据转化成固定长度的输出数据的一种密码算法。</li>
<li><strong>数字签名</strong>：验证消息源及数据内容的真实性；签名能够被第三方验证，并确定消息内容的真实性和签名者身份。<ul>
<li>数字签名体制包括三个算法：密钥生成算法、签名算法、验证算法。</li>
</ul>
</li>
</ul>
<h4 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h4><p>消息加密只是解决了传送消息的保密问题，而防止他人对传输文件进行破坏，以及确定发信人的身份需要使用数字签名。完善的数字签名应具备签字方不能抵赖、他人不能伪造、在公证人面前能够验证真伪的能力。</p>
<h5 id="常用的数字签名方法："><a href="#常用的数字签名方法：" class="headerlink" title="常用的数字签名方法："></a>常用的数字签名方法：</h5><ul>
<li>RSA 签名；</li>
<li>DSS 签名；</li>
<li>Hash 签名；</li>
</ul>
<h5 id="数字签名原理："><a href="#数字签名原理：" class="headerlink" title="数字签名原理："></a>数字签名原理：</h5><p>报文的发送方从报文文本中生成一个固定长度的散列值（报文摘要）。发送方用自己的私钥对这个散列值进行加密来形成发送方的数字签名。然后，这个数字签名将作为报文的附件和报文一起发送给报文的接收方。报文的接收方首先从接收到的原始报文中计算出散列值，接着再用发送方的公钥来对报文附加的数字签名进行解密。如果两个散列值相同，那么接收方就能确认该数字签名是发送方的。通过数字签名能够实现对原始报文的鉴别。<br><img src="https://upload-images.jianshu.io/upload_images/2648731-4bfdf47ced515611.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/620" alt="数字签名原理"><br>采用数字签名，能够保证：</p>
<ol>
<li>信息是由签名者发送的；</li>
<li>信息自签发后到收到为止未曾有过任何修改；</li>
</ol>
<h5 id="数字签名与非对称加密的关系"><a href="#数字签名与非对称加密的关系" class="headerlink" title="数字签名与非对称加密的关系"></a>数字签名与非对称加密的关系</h5><blockquote>
<p>一言以蔽之，数字签名就是将<a href="https://www.wikiwand.com/zh-hans/%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81" target="_blank" rel="noopener">公钥密码</a>反过来使用。</p>
</blockquote>
<ul>
<li>都使用公钥体系，但实现的方法正好相反，使用的密钥对也不同。</li>
<li><strong>数字签名</strong> 使用的是发送方的密钥对，发送方用自己的私钥进行加密，接收方用发送方的公开密钥进行解密。一对多关系。</li>
<li><strong>非对称加密</strong>的加密解密则使用的是接收方的密钥对，这是多对一的关系：任何知道接收方公开密钥的人都可以向接收方发送加密信息，只有唯一拥有接收方私有密钥的人才能对信息解密。</li>
<li>在实用过程中，通常一个用户拥有两个密钥对，一个密钥对用来进行数字签名，另一个密钥对用来进行非对称加密，这种方式提供了更高的安全性。</li>
</ul>
<h3 id="密钥管理"><a href="#密钥管理" class="headerlink" title="密钥管理"></a>密钥管理</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-47a32d37d5491925.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h3 id="密钥管理模式"><a href="#密钥管理模式" class="headerlink" title="密钥管理模式"></a>密钥管理模式</h3><ul>
<li>无中心模式；</li>
<li>有中心模式；</li>
</ul>
<h3 id="PKI-的本质是把非对称密钥管理标准化"><a href="#PKI-的本质是把非对称密钥管理标准化" class="headerlink" title="PKI 的本质是把非对称密钥管理标准化"></a>PKI 的本质是把非对称密钥管理标准化</h3><p>PKI 是 Public Key Infrastructure 的缩写，其主要功能是绑定证书持有者的身份和相关的密钥对（通过为公钥及相关的用户身份信息签发数字证书），为用户提供方便的证书申请、证书作废、证书获取、证书状态查询的途径，并利用数字证书及相关的各种服务（证书发布，黑名单发布，时间戳服务等）实现通信中各实体的身份认证、完整性、抗抵赖性和保密性。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-248d8cbb3257e59d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<ul>
<li><strong>数字证书</strong>：解决公钥与用户映射关系问题；</li>
<li><strong>CA</strong>：解决数字证书签发问题；<br><img src="http://upload-images.jianshu.io/upload_images/2648731-2022dcdcebc24edd.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></li>
<li><strong>KMC</strong>：解决私钥的备份与恢复问题；</li>
<li><strong>双证书机制</strong>：「签名证书及私钥」只用于签名验签，「加密证书及私钥」只用于加密解密。</li>
<li><strong>LDAP</strong>：解决数字证书查询和下载的性能问题，避免 CA 中心成为性能瓶颈。</li>
<li><strong>CRL（证书作废列表）</strong> 和 <strong>OSCP（在线证书状态协议）</strong>：方便用户快速获得证书状态。</li>
<li><strong>RA</strong>：方便证书业务远程办理、方便证书管理流程与应用系统结合。</li>
<li><strong>电子认证服务机构</strong>：保证 CA 系统在数字证书管理方面的规范性、合规性和安全性。</li>
</ul>
<h3 id="基于数字证书可以实现四种基本安全功能："><a href="#基于数字证书可以实现四种基本安全功能：" class="headerlink" title="基于数字证书可以实现四种基本安全功能："></a>基于数字证书可以实现四种基本安全功能：</h3><ol>
<li>身份认证；</li>
<li>保密性；</li>
<li>完整性；</li>
<li>抗抵赖性；</li>
</ol>
<h3 id="数字证书分类"><a href="#数字证书分类" class="headerlink" title="数字证书分类"></a>数字证书分类</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-3b40c81976c04e57.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h3 id="PKI-基本组件"><a href="#PKI-基本组件" class="headerlink" title="PKI 基本组件"></a>PKI 基本组件</h3><p>完整的 PKI 系统必须具有数字证书、认证中心（CA）、证书资料库、证书吊销系统、密钥备份及恢复系统、PKI 应用接口系统等构成部分。</p>
<table>
<thead>
<tr>
<th>组件</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>数字证书</td>
<td>包含了用于签名和加密数据的公钥的电子凭证，是PKI的核心元素</td>
</tr>
<tr>
<td>认证中心（CA）</td>
<td>数字证书的申请及签发机关，CA必须具备权威性</td>
</tr>
<tr>
<td>证书资料库</td>
<td>存储已签发的数字证书和公钥，以及相关证书目录，用户可由此获得所需的其他用户的证书及公钥</td>
</tr>
<tr>
<td>证书吊销列表（CRL）/OCSP</td>
<td>在有效期内吊销的证书列表，在线证书状态协议OCSP是获得证书状态的国际协议</td>
</tr>
<tr>
<td>密钥备份及恢复</td>
<td>为避免因用户丢失解密密钥而无法解密合法数据的情况，PKI提供备份与恢复密钥的机制。必须由可信的机构来完成。并且，密钥备份与恢复只能针对解密密钥，签名私钥不能够作备份</td>
</tr>
<tr>
<td>PKI应用接口（API）</td>
<td>为各种各样的应用提供安全、一致、 可信的方式与PKI交互，确保建立起来的网络环境安全可靠，并降低管理成本</td>
</tr>
</tbody>
</table>
<h3 id="PKI-画外音"><a href="#PKI-画外音" class="headerlink" title="PKI 画外音"></a>PKI 画外音</h3><ul>
<li><a href="http://www.jiemian.com/article/231843.html" target="_blank" rel="noopener">OpenSSL 隐形战友</a></li>
<li><a href="https://www.zhihu.com/question/21838720/answer/62574832" target="_blank" rel="noopener">知乎：为什么 SSL 证书那么贵?</a></li>
<li><a href="https://www.zhihu.com/question/19578422" target="_blank" rel="noopener">知乎：SSL 证书服务，大家用哪家的？</a></li>
<li><a href="https://www.cnblogs.com/LittleHann/p/3738141.html" target="_blank" rel="noopener">openSSL 命令、PKI、CA、SSL 证书原理</a></li>
<li><a href="https://blog.csdn.net/xiyuan1999/article/details/6416948" target="_blank" rel="noopener">OpenSSL 中文手册 之一 OpenSSL 简介－证书</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg" alt="独木舟的木">
            
              <p class="site-author-name" itemprop="name">独木舟的木</p>
              <div class="site-description motion-element" itemprop="description">有时候阳光很好 有时候阳光很暗</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">314</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">38</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">独木舟的木</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/8/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz',
                'X-LC-Key': 'brOnU8mOQvSjpipJvdKUAIbU',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  


  <!-- red heart -->
  <script type="text/javascript" src="/js/src/love.js"></script>
  
</body>
</html>
