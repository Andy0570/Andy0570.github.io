<!DOCTYPE html>













<html class="theme-next gemini" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '0E2AON8EZF',
      apiKey: '22fbefd84c8343239f5c04365b9728de',
      indexName: 'MyBlogPlatform',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="有时候阳光很好 有时候阳光很暗">
<meta name="keywords" content="独木舟的木">
<meta property="og:type" content="website">
<meta property="og:title" content="独木舟的木">
<meta property="og:url" content="https://andy0570.com/page/29/index.html">
<meta property="og:site_name" content="独木舟的木">
<meta property="og:description" content="有时候阳光很好 有时候阳光很暗">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="独木舟的木">
<meta name="twitter:description" content="有时候阳光很好 有时候阳光很暗">



  <link rel="alternate" href="/atom.xml" title="独木舟的木" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/29/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>独木舟的木</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">独木舟的木</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">37</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">316</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/andy0570" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/11/23/Charles/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/23/Charles/" class="post-title-link" itemprop="url">Charles</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-11-23 10:47:00" itemprop="dateCreated datePublished" datetime="2016-11-23T10:47:00+08:00">2016-11-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 22:47:37" itemprop="dateModified" datetime="2019-05-01T22:47:37+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/开发工具-Mac应用/" itemprop="url" rel="index"><span itemprop="name">开发工具&Mac应用</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">587</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>最近在学习<a href="https://www.charlesproxy.com" target="_blank" rel="noopener">Charles</a>网络封包分析工具的使用。</p>
<h3>参考文献</h3>
<ul>
<li><a href="http://blog.devtang.com/2015/11/14/charles-introduction/#u622A_u53D6_iPhone__u4E0A_u7684_u7F51_u7EDC_u5C01_u5305" target="_blank" rel="noopener">唐巧的技术博客：Charles 从入门到精通</a>（阅读难度：★★★）</li>
<li><a href="http://www.yangshebing.com/2016/11/13/iOS%E5%BC%80%E5%8F%91%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E4%B9%8BCharles%E4%BD%BF%E7%94%A8/" target="_blank" rel="noopener">杨社兵的技术博客:iOS开发抓包工具之Charles使用</a>（阅读难度：★★★）</li>
</ul>
<h3>简介</h3>
<p><strong>Charles</strong> 是在Mac下常用的截取网络封包的工具，在做iOS开发时，我们为了调试与服务器端的网络通讯协议，常常需要截取网络封包来分析。<strong>Charles</strong> 通过将自己设置成系统的网络访问代理服务器，使得所有的网络访问请求都通过它来完成，从而实现了网络封包的截取和分析。</p>
<h3><strong>Charles</strong> 主要的功能包括：</h3>
<ul>
<li>支持SSL代理。可以截取分析SSL的请求。</li>
<li>支持流量控制。可以模拟慢速网络以及等待时间（latency）较长的请求。</li>
<li>支持AJAX调试。可以自动将json或xml数据格式化，方便查看。</li>
<li>支持AMF调试。可以将Flash Remoting 或 Flex Remoting信息格式化，方便查看。</li>
<li>支持重发网络请求，方便后端调试。</li>
<li>支持修改网络请求参数。</li>
<li>支持网络请求的截获并动态修改。</li>
<li>检查HTML，CSS和RSS内容是否符合W3C标准。</li>
</ul>
<p>参考的唐巧的这篇技术博客写的很详细，目前也是完全够用了。</p>
<p>iPhone设置代理后无法被<strong>Charles</strong>抓包的解决方法：Mac使用网线连接互联网（而不是WiFi）。
参考：<a href="http://mrljdx.com/2016/06/16/%E8%BF%9E%E6%8E%A5%E5%90%8C%E4%B8%80wifi%E9%85%8D%E7%BD%AECharles%E4%BB%A3%E7%90%86%E7%9A%84%E9%97%AE%E9%A2%98/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="noopener">连接同一wifi配置Charles代理的问题</a>。</p>
<p><img src="http://25.io/smaller/favicon.ico" alt="未完待续..." title="Title here"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/11/18/iOS 编程：Archive保存、读取与应用状态、沙盒机制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/18/iOS 编程：Archive保存、读取与应用状态、沙盒机制/" class="post-title-link" itemprop="url">iOS 编程：Archive保存、读取与应用状态、沙盒机制</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-11-18 10:27:00" itemprop="dateCreated datePublished" datetime="2016-11-18T10:27:00+08:00">2016-11-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 23:00:03" itemprop="dateModified" datetime="2019-05-01T23:00:03+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">5.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">5 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1>保存和读取数据的机制</h1>
<p>在之前写的Homeowner基础上更新，<strong>通过固化来保存和读取模型对象</strong>，当用户重新运行Homeowner应用时，可以读取之前创建并保存的模型对象。</p>
<p>之前的应用：<a href="http://www.jianshu.com/p/08d097e17a25" target="_blank" rel="noopener">《iOS编程（第四版）》Demo8：Homeowner</a></p>
<p>##固化机制
<strong>固化</strong> 是由iOS SDK提供的一种保存和读取对象的机制。当应用固化某个对象时，会将该对象的所有属性存入指定的文件夹。当应用解固某个对象时，会从指定的文件读取相应的数据，然后根据数据还原对象。<br>
为了固化或解固某个对象，相应对象的类必须遵守 <strong>NSCoding</strong> 协议，并实现两个必须方法：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@protocol NSCoding</span><br><span class="line"></span><br><span class="line">- (void)encodeWithCoder:(NSCoder *)aCoder;</span><br><span class="line">- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder; // NS_DESIGNATED_INITIALIZER</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<ul>
<li>在Item.m中实现 <strong>NSCoding</strong> 协议：</li>
</ul>
<p>&lt;!-- more --&gt;</p>
<p>固化：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (void) encodeWithCoder:(NSCoder *)aCoder &#123;</span><br><span class="line">    [aCoder encodeObject :self.itemName       forKey      :@&quot;itemName&quot;];</span><br><span class="line">    [aCoder encodeObject :self.serialNumber   forKey  :@&quot;serialNumber&quot;];</span><br><span class="line">    [aCoder encodeObject :self.dateCreated    forKey   :@&quot;dateCreated&quot;];</span><br><span class="line">    [aCoder encodeObject :self.itemKey        forKey       :@&quot;itemKey&quot;];</span><br><span class="line">    [aCoder encodeInt    :self.valueInDollars forKey:@&quot;valueInDollars&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>解固：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype) initWithCoder:(NSCoder *)aDecoder &#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        _itemName       = [aDecoder decodeObjectForKey     :@&quot;itemName&quot;];</span><br><span class="line">        _serialNumber   = [aDecoder decodeObjectForKey :@&quot;serialNumber&quot;];</span><br><span class="line">        _dateCreated    = [aDecoder decodeObjectForKey  :@&quot;dateCreated&quot;];</span><br><span class="line">        _itemKey        = [aDecoder decodeObjectForKey      :@&quot;itemKey&quot;];</span><br><span class="line">        _valueInDollars = [aDecoder decodeIntForKey  :@&quot;valueInDollars&quot;];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2>应用沙盒机制</h2>
<ul>
<li><a href="http://www.jianshu.com/p/a30ae4746aca" target="_blank" rel="noopener">APP的沙盒文档结构</a>
每个iOS应用都有自己专属的应用沙盒（sandbox）。应用沙盒就是文件系统中的目录，但是iOS系统会将每个应用的沙盒目录与文件系统的其他部分隔离。应用只能访问各自的沙盒。</li>
</ul>
<h3>应用沙盒目录</h3>
<ul>
<li>
<p>应用程序包（application bundle）<br>
包含应用可执行文件和所有资源文件，例如NIB文件和图像文件。它是只读目录。</p>
</li>
<li>
<p>Doucments/<br>
存放应用运行时生成的并且需要保留的数据。iTune或iCloud会在同步设备时备份该目录。当设备发生故障时，可以从iTunes或iCloud恢复该目录中的文件。例如，Homepwner应用可将用户所拥有的物品信息保存在Documents/中</p>
</li>
<li>
<p>Library/Caches/<br>
存放应用运行时生成的需要保留的数据。与Documents/目录不同的是，iTunes或iCloud不会在同步设备时备份该目录。不备份缓存数据的主要原因是相关数据的体积可能会很大，从而延长同步设备所需的时间。如果数据源是在别处（例如web服务器），就可以将得到的数据保存在Library/Caches/目录。当用户需要恢复设备时，相关的应用只需要从数据源（例如web服务器）再次获取数据即可。</p>
</li>
<li>
<p>Library/Preferences/<br>
存放所有的偏好设置，iOS的设置（Setting）应用也会在该目录中查找应用的设置信息。使用<strong>NSUserDefaults</strong>类，可以通过Library/Preferences/目录中的某个特定文件以键值对形式保存数据。iTunes或iCloud会在同步设备时备份该目录。</p>
</li>
<li>
<p>tmp/<br>
存放应用运行时所需的临时数据。当某个应用没有运行时，iOS系统可能会清除该应用的 tmp/ 目录下的文件，但是为了节约用户设备空间，不能依赖这种自动清除机制，而是当应用不再需要使用 tmp/ 目录中的文件时，就及时手动删除这写文件。iTune或iCloud不会在同步设备时备份 tmp/ 目录。通过 <code>NSTemporaryDirectory</code> 函数可以得到应用沙盒中的 tmp/ 目录的全路径。</p>
</li>
</ul>
<h2>获取文件路径</h2>
<p>在实现保存和读取模型对象的功能之前，需要先获取相应文件的全路径（Doucments/）</p>
<p>在HQLItemStore.m中编写一个实现获取路径的方法：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (NSString *) itemArchivePath &#123;</span><br><span class="line"></span><br><span class="line">    //NSSearchPathForDirectoriesInDomains：获取沙盒中某种目录的全路径</span><br><span class="line">    //注意第一个参数是NSDocumentDirectory而不是NSDocumentationDirectory</span><br><span class="line">    NSArray *documentDirectiorise = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);</span><br><span class="line">    //从documentDirectiorise数组获取第一个，也是唯一文档目录路径</span><br><span class="line">    NSString *documentDirectiory = [documentDirectiorise firstObject];</span><br><span class="line">    return [documentDirectiory stringByAppendingPathComponent:@&quot;items.archive&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>啰嗦一下：
这里是用的 HQLItemStore 仓库类来统一管理 Item，因此这个获取路径的方法使用的是 <strong>实例方法</strong>，嗯，并没有任何问题。
试想，如果有一个App需要保存用户账户信息，而且一个 App 就只有一条用户信息，于是我们就把这个管理用户账户的 <strong>Person</strong> 类设置为单例类，但是却没有必要创建仓库类了，因为就只有一条用户信息嘛，于是获取沙盒路径的方法也这样写？写在 <strong>Person</strong> 类里面？也写成实例方法？可能就有点问题了。</li>
</ul>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 单例类方法</span><br><span class="line">+ (instancetype)sharedUser&#123;</span><br><span class="line">    static Person *sharedUser = nil;</span><br><span class="line">    static dispatch_once_t onceToken;</span><br><span class="line">    dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">        // 根据路径载入固化文件</span><br><span class="line">        NSString *path = [self itemArchivePath];</span><br><span class="line">       // ToDo</span><br><span class="line">    &#125;);</span><br><span class="line">    return sharedUser;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>因为当从文件中解固之前要获取对象，对象还没有创建，先要得到路径，怎么能用实例化方法呢？</p>
<ul>
<li>解决方法是使用 C 函数:
头文件声明：</li>
</ul>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">// 声明辅助函数，用于返回文件路径</span><br><span class="line">NSString *docPath(void);</span><br><span class="line"></span><br><span class="line">// ...</span><br></pre></td></tr></table></figure></p>
<p>实现文件：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;Person.h&quot;</span><br><span class="line"></span><br><span class="line">// 辅助函数</span><br><span class="line">NSString *docPath() &#123;</span><br><span class="line">    NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);</span><br><span class="line">    NSString *documentDirectory = [documentDirectories firstObject];</span><br><span class="line">    return [documentDirectory stringByAppendingPathComponent:@&quot;user.archive&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>调用：</p>
<p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person *<span class="keyword">user</span> <span class="title">= [NSKeyedUnarchiver</span> unarchiveObjectWithFile:docPath()];</span><br></pre></td></tr></table></figure></p>
<h2>NSKeyedArchiver与NSKeyedUnarchiver</h2>
<h3>应用退出前保存数据</h3>
<p>Homepwner应用在退出（exit）时，通过NSKeyedArchiver类保存Item模型对象。</p>
<ul>
<li>
<p>在<strong>HQLItemStore.h</strong>中声明一个用于保存数据的新方法：<br>
<figure class="highlight plain"><figcaption><span>(BOOL) saveChanges;```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 在HQLItemStore.m中实现该方法：</span><br><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">- (BOOL) saveChanges&#123;</span><br><span class="line">    //获取文件路径</span><br><span class="line">    NSString *path = [self itemArchivePath];</span><br><span class="line">    //如果固话成功就返回YES</span><br><span class="line">    return [NSKeyedArchiver archiveRootObject:self.privateItems toFile:path];   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>在<strong>AppDelegate.m</strong>顶部导入<strong>HQLItemStore.h</strong>，然后实现
<figure class="highlight plain"><figcaption><span>(void)applicationDidEnterBackground:```方法,使用此方法可以释放共享资源，保存用户数据，使计时器无效，并且当应用停止运行时存储足够的应用程序状态信息以将应用程序恢复到其之前状态。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">- (void)applicationDidEnterBackground:(UIApplication *)application &#123;</span><br><span class="line"></span><br><span class="line">    //保存用户数据</span><br><span class="line">    BOOL success = [[HQLItemStore sharedStore] saveChanges];</span><br><span class="line">    if (success) &#123;</span><br><span class="line">        NSLog(@&quot;Saved all of the HQLItem&quot;);</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        NSLog(@&quot;Could not save any of the HQLItem&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<h3>应用打开前读取数据</h3>
<p>为了能在Homepwner启动时载入之前保存的全部Item对象，需要在创建Itemstore对象时使用<strong>NSKeyedUnarchiver</strong>类。
在<strong>HQLItemStore.m</strong>中，修改初始化方法：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//这是真正的（私有的）初始化方法</span><br><span class="line">- (instancetype)initPrivate &#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    //父类的init方法是否成功创建了对象</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        //载入之前保存的全部HQLItem对象</span><br><span class="line">        NSString *path = [self itemArchivePath];</span><br><span class="line">        //根据路径载入固化文件</span><br><span class="line">        _privateItems = [NSKeyedUnarchiver unarchiveObjectWithFile:path];</span><br><span class="line">        //如果之前没有保存过_privateItems，就创建一个新的</span><br><span class="line">        if (!_privateItems) &#123;</span><br><span class="line">            _privateItems = [[NSMutableArray alloc] init];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/11/14/iOS 编程：轮播图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/14/iOS 编程：轮播图/" class="post-title-link" itemprop="url">iOS 编程：轮播图</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-11-14 13:37:00" itemprop="dateCreated datePublished" datetime="2016-11-14T13:37:00+08:00">2016-11-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 22:58:48" itemprop="dateModified" datetime="2019-05-01T22:58:48+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">7.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">7 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h3>SDCycleScrollView</h3>
<p>傻瓜式最简单的方法，调用第三方框架，<a href="https://github.com/gsdios/SDCycleScrollView" target="_blank" rel="noopener">SDCycleScrollView</a></p>
<h3>下面👇的自定义方法，模仿着写的，待完善。</h3>
<p>参考的<a href="http://www.jianshu.com/p/2b30ad110ba7" target="_blank" rel="noopener">无限轮播(三图轮播原理)</a>,自己模仿写了一个，但是发现图片一开始加载的时候有偏移量，一直没法解决，先留着吧。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 首页轮播图</span><br><span class="line"> */</span><br><span class="line">@interface HQLCarouselView : UIView</span><br><span class="line"></span><br><span class="line">#pragma 视图控制器中调用的接口</span><br><span class="line">- (instancetype) initWithFrame:(CGRect)frame withPictures:(NSArray *)picture_array;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>&lt;!-- more --&gt;</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;HQLCarouselView.h&quot;</span><br><span class="line"></span><br><span class="line">#define KWIDTH self.bounds.size.width</span><br><span class="line">#define KHEIGHT self.bounds.size.height</span><br><span class="line"></span><br><span class="line">@interface HQLCarouselView () &lt;UIScrollViewDelegate&gt;</span><br><span class="line"></span><br><span class="line">/** 存放图片名称的数组*/</span><br><span class="line">@property (nonatomic,strong) NSArray *picture_array;</span><br><span class="line">/** 记录图片数组的下标*/</span><br><span class="line">@property (nonatomic,assign) NSInteger index;</span><br><span class="line">/** 滚动视图*/</span><br><span class="line">@property (nonatomic,strong) UIScrollView *scrollView;</span><br><span class="line">/** 页面控件*/</span><br><span class="line">@property (nonatomic,strong) UIPageControl *pageControl;</span><br><span class="line">/** 计时器*/</span><br><span class="line">@property (nonatomic,strong) NSTimer *timer;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation HQLCarouselView</span><br><span class="line"></span><br><span class="line">#pragma 初始化</span><br><span class="line">- (instancetype) initWithFrame:(CGRect)frame withPictures:(NSArray *)picture_array &#123;</span><br><span class="line">    </span><br><span class="line">    self = [super initWithFrame:frame];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        self.picture_array = picture_array;</span><br><span class="line">        self.index = 0;</span><br><span class="line">        [self addSubview:self.scrollView];</span><br><span class="line">        [self addImageViewToScrollView];</span><br><span class="line">        [self addSubview:self.pageControl];</span><br><span class="line">        [self initTimer];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma 延迟加载</span><br><span class="line">- (NSArray *)picture_array &#123;</span><br><span class="line">    if (!_picture_array) &#123;</span><br><span class="line">        _picture_array = [[NSArray alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">    return _picture_array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIScrollView *)scrollView &#123;</span><br><span class="line">    if (!_scrollView) &#123;</span><br><span class="line">        _scrollView = [[UIScrollView alloc] initWithFrame:self.frame];</span><br><span class="line">        _scrollView.delegate =self;</span><br><span class="line">        _scrollView.showsHorizontalScrollIndicator = NO;    //隐藏滚动条</span><br><span class="line">        _scrollView.pagingEnabled = YES;</span><br><span class="line">        _scrollView.contentSize = CGSizeMake(KWIDTH*3, 0);  //设置可滑尺寸</span><br><span class="line">        _scrollView.contentOffset = CGPointMake(0, 0);    //设置初始偏移量</span><br><span class="line">    &#125;</span><br><span class="line">    return _scrollView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIPageControl *)pageControl &#123;</span><br><span class="line">    if (!_pageControl) &#123;</span><br><span class="line">        _pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(KWIDTH / 2.0 - 50, KHEIGHT-5, 100, 50)]; //圆点位置</span><br><span class="line">        _pageControl.numberOfPages = self.picture_array.count;  //  圆点个数</span><br><span class="line">        _pageControl.currentPage = 0;   //初始选中第一个圆点</span><br><span class="line">        _pageControl.pageIndicatorTintColor = [UIColor whiteColor]; //圆点颜色</span><br><span class="line">        _pageControl.currentPageIndicatorTintColor = [UIColor greenColor];  //  当前圆点颜色</span><br><span class="line">        _pageControl.enabled = NO;  //由于后面要添加计时器，所以此处取消圆点选中事件</span><br><span class="line">    &#125;</span><br><span class="line">    return _pageControl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma 添加image</span><br><span class="line">//往scrollView上添加imgView:初始时让第二个imgView显示第一张图片(三图轮播,因此只创建三个imgView即可,始终让中间的imgView显示当前图片)</span><br><span class="line">- (void)addImageViewToScrollView &#123;</span><br><span class="line">    for (int i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">        UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(KWIDTH*i, 0, KWIDTH, KHEIGHT)];</span><br><span class="line">        imgView.tag = 1000 + i; //添加标记，方便后面找到</span><br><span class="line">        if (i == 0) &#123;</span><br><span class="line">            imgView.image = [UIImage imageNamed:self.picture_array.firstObject];</span><br><span class="line">        &#125;else if (i ==1)&#123;</span><br><span class="line">            imgView.image = [UIImage imageNamed:self.picture_array[1]];</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            imgView.image = [UIImage imageNamed:self.picture_array.lastObject];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        imgView.contentMode =UIViewContentModeScaleToFill;</span><br><span class="line">        [self.scrollView addSubview:imgView];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// scrollView结束减速时执行</span><br><span class="line">- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView &#123;</span><br><span class="line">    if (scrollView.contentOffset.x &gt;= KWIDTH) &#123;</span><br><span class="line">        //根据偏移量向左还是向右分别控制index的值</span><br><span class="line">        if (self.index == self.picture_array.count -1) &#123;</span><br><span class="line">            self.index = 0;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            self.index ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //调整好index值之后重新设置下偏移量以及当前选中的圆点</span><br><span class="line">    [self.scrollView setContentOffset:CGPointMake(KWIDTH, 0) animated:NO];</span><br><span class="line">    self.pageControl.currentPage = self.index;</span><br><span class="line">    </span><br><span class="line">    //让中间的imgView始终显示index位置的图片（中心思想）</span><br><span class="line">    [self addImage:self.index];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//改变ImgView显示的图片名称</span><br><span class="line">- (void)addImage:(NSInteger )index &#123;</span><br><span class="line">    </span><br><span class="line">    //找到添加到scrollView上的imgView</span><br><span class="line">    UIImageView *imageView1 = (UIImageView *)[self.scrollView viewWithTag:1000];</span><br><span class="line">    UIImageView *imageView2 = (UIImageView *)[self.scrollView viewWithTag:1001];</span><br><span class="line">    UIImageView *imageView3 = (UIImageView *)[self.scrollView viewWithTag:1002];</span><br><span class="line">    if (index ==self.picture_array.count - 1) &#123;</span><br><span class="line">        imageView1.image = [UIImage imageNamed:self.picture_array[index - 1]];</span><br><span class="line">        imageView2.image = [UIImage imageNamed:self.picture_array[index]];</span><br><span class="line">        imageView3.image = [UIImage imageNamed:self.picture_array[0]];</span><br><span class="line">    &#125;</span><br><span class="line">    else if (index ==0)&#123;</span><br><span class="line">        imageView1.image = [UIImage imageNamed:self.picture_array.lastObject];</span><br><span class="line">        imageView2.image = [UIImage imageNamed:self.picture_array[index]];</span><br><span class="line">        imageView3.image = [UIImage imageNamed:self.picture_array[index + 1]];</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        imageView1.image = [UIImage imageNamed:self.picture_array[index - 1]];</span><br><span class="line">        imageView2.image = [UIImage imageNamed:self.picture_array[index]];</span><br><span class="line">        imageView3.image = [UIImage imageNamed:self.picture_array[index + 1]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//创建计时器</span><br><span class="line">- (void)initTimer &#123;</span><br><span class="line">    self.timer = [NSTimer scheduledTimerWithTimeInterval:2.5</span><br><span class="line">                                                  target:self</span><br><span class="line">                                                selector:@selector(loadsScrollViewImage)</span><br><span class="line">                                                userInfo:nil</span><br><span class="line">                                                 repeats:YES];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//计时器要执行的方法：每次执行改变偏移量</span><br><span class="line">- (void)loadsScrollViewImage &#123;</span><br><span class="line">    [self.scrollView setContentOffset:CGPointMake(self.scrollView.contentOffset.x + KWIDTH, 0) animated:YES];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//偏移量改变并且有滚动动画才会执行该方法，内部代码与上面结束减速（scrollViewDidEndDecelerating）要执行代码相同</span><br><span class="line">- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView &#123;</span><br><span class="line"></span><br><span class="line">    if (scrollView.contentOffset.x &gt;= KWIDTH) &#123;</span><br><span class="line">        //根据偏移量是向左还是向右分别控制index的值</span><br><span class="line">        if (self.index == self.picture_array.count - 1) &#123;</span><br><span class="line">            self.index = 0;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            self.index ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        if (self.index == 0) &#123;</span><br><span class="line">            self.index = self.picture_array.count -1;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            self.index --;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //调整好index的值之后重新设置下偏移量以及当前选中的</span><br><span class="line">    [self.scrollView setContentOffset:CGPointMake(KWIDTH, 0) animated:NO];</span><br><span class="line">    self.pageControl.currentPage = self.index;</span><br><span class="line">    //让中间的imgView始终显示index位置的图片（中心思想）</span><br><span class="line">    [self addImage:self.index];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//防止计时器与拖动手势冲突</span><br><span class="line">- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView &#123;</span><br><span class="line">    [self.timer invalidate];</span><br><span class="line">    self.timer = nil;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//拖动结束时开启一个新的计时器</span><br><span class="line">- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate &#123;</span><br><span class="line">    [self initTimer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>主视图控制器中调用：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//轮播图</span><br><span class="line">_carouselView = [[HQLCarouselView alloc] initWithFrame:CGRectMake(0,32,self.view.width,self.view.width * self.view.height / 1440) withPictures:@[@&quot;slide_000.png&quot;,@&quot;slide_001.png&quot;,@&quot;slide_002.png&quot;]];</span><br><span class="line">[self.view addSubview:_carouselView];</span><br></pre></td></tr></table></figure></p>
<h3>参考文章</h3>
<ul>
<li><a href="https://isux.tencent.com/carousels.html" target="_blank" rel="noopener">你还在用轮播图吗?</a></li>
<li><a href="http://www.jianshu.com/p/d9fa442e48f9" target="_blank" rel="noopener">简单实现下拉图片放大③ - 定时器轮播图</a></li>
<li><a href="http://www.jianshu.com/p/2b30ad110ba7" target="_blank" rel="noopener">轮播图:无限轮播(三图轮播原理)</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/11/11/iOS 开发者账户申请/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/11/iOS 开发者账户申请/" class="post-title-link" itemprop="url">iOS 开发者账户申请</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-11-11 12:18:00" itemprop="dateCreated datePublished" datetime="2016-11-11T12:18:00+08:00">2016-11-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 23:02:44" itemprop="dateModified" datetime="2019-05-01T23:02:44+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">11k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">10 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h3>iOS的开发者账号类型:</h3>
<h3>个人</h3>
<p>如果正要为 Apple 平台开发 app，请在 <a href="https://developer.apple.com/download/" target="_blank" rel="noopener">Xcode 下载页面</a>上免费下载 Xcode 开发者工具、SDK 和资源。无需计划的会员资格。如果您还没有 Apple ID，可以<a href="https://appleid.apple.com/account#!&amp;page=create" target="_blank" rel="noopener">在此处创建一个</a>。</p>
<p>**Apple Developer Program。**如果您是个人或代表独资/个人企业并有意创建 app 在适用于 iPhone、iPad、Mac 和 Apple Watch 的 App Store 上分发，请注册 Apple Developer Program。会员资格包括以下内容的使用权限：测试版 OS、高级 app 功能，以及用于开发、测试和分发 app 和 Safari Extensions 的工具。作为个人注册的开发者将使用个人姓名在 App Store 上销售 app。</p>
<p>会员资格每年 99 美元</p>
<p><a href="https://developer.apple.com/programs/whats-included/cn/" target="_blank" rel="noopener">了解所含内容</a> | <a href="https://developer.apple.com/programs/enroll/cn/" target="_blank" rel="noopener">了解如何注册</a></p>
<hr>
<p>&lt;!-- more --&gt;</p>
<h3>组织</h3>
<p>**Apple Developer Program。**如果您代表组织并有意创建 app 在适用于 iPhone、iPad、Mac 和 Apple Watch 的 App Store 上分发，请注册 Apple Developer Program。会员资格包括您的整个开发团队对以下内容的使用权限：测试版 OS、高级 app 功能以及开发、测试和分发 app 和 Safari Extensions 所需的工具。组织将使用自己的法定实体名称销售 app。在注册过程中，公司和教育机构必须提供注册其法定实体时的 D-U-N-S 编号（可免费获取）。</p>
<p>会员资格每年 99 美元</p>
<p><a href="https://developer.apple.com/programs/whats-included/cn/" target="_blank" rel="noopener">了解所含内容</a> | <a href="https://developer.apple.com/programs/enroll/cn/" target="_blank" rel="noopener">了解如何注册</a></p>
<p>**Apple Developer Enterprise Program。**如果您的组织想要创建专门设计的 app 并只将其分发给您组织的员工，请注册 Apple Developer Enterprise Program。会员资格包括您的整个开发团队对以下内容的使用权限：测试版 OS、高级 app 功能以及开发、测试和分发 app 所需的工具。在注册过程中，公司和教育机构必须提供注册其法定实体时的 D-U-N-S 编号（可免费获取）。</p>
<p>会员资格每年 299 美元</p>
<p><a href="https://developer.apple.com/programs/enterprise/cn/" target="_blank" rel="noopener">了解所含内容</a> | <a href="https://developer.apple.com/programs/enroll/cn/" target="_blank" rel="noopener">了解如何注册</a></p>
<p>**MFi Program。**适用于为 Apple 设备制造相关电子配件的公司。</p>
<p><a href="https://developer.apple.com/cn/programs/mfi/" target="_blank" rel="noopener">详细了解注册要求</a>。</p>
<hr>
<h3>教育机构</h3>
<p>**iOS Developer University Program。**这是一项免费的开发者计划，适用于想要在课堂中引入 iOS 开发的高等教育机构。</p>
<p>随着 Xcode 7 在今年秋季的面世，任何教师和学生都可以获取在 Apple 设备上开发和安装 app 所需的工具和资源。
<a href="https://developer.apple.com/education/" target="_blank" rel="noopener">详细了解您学校的 app 开发教学事宜。</a></p>
<hr>
<h2>申请开发者账号</h2>
<ul>
<li>
<p>申请前需准备：</p>
<ul>
<li>Apple ID 账号</li>
<li>一张可以付美元的信用卡（VISA or 万事达）</li>
<li>企业账号申请还需要<a href="http://baike.baidu.com/link?url=7sBiNL9AzKM8PD5hShWBxPaM-xP-wHDAckZn0hD4DGQ2x7LhuFRbQjjay-5btj_TtEdzwl2tReoOpxL7XCXRRUwz-pQFjwopGK1WzDEQxDCqYEsjCl0sP5JvKqTtC8ol" target="_blank" rel="noopener">邓白氏编码</a></li>
<li>最好备一份公司的营业执照复印件（后期申请企业信息时可参照）</li>
<li>企业账号必须是公司域名邮箱</li>
</ul>
</li>
<li>
<p>登录<a href="https://developer.apple.com" target="_blank" rel="noopener">Apple Developer官网</a>,选择👉<strong>Account</strong>
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071134.jpg" alt></p>
</li>
<li>
<p>选择👉<strong>Join the Apple Developer Program</strong>,加入苹果开发者计划。</p>
</li>
</ul>
<blockquote>
<p>苹果开发者计划会员资格包括你所需要的一切有关开发、发布和管理你在App Store商店上的App.你也可以获得访问测试版软件、高级app功能、beta版测试工具和app分析工具的权限，</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071135.jpg" alt></p>
<ul>
<li>
<p>选择👉<strong>Enroll</strong>，注册。
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071136.jpg" alt></p>
</li>
<li>
<p>注册时所需的内容</p>
<ol>
<li>
<p>&lt;mark&gt;以个人身份注册&lt;/mark&gt;<br>
如果您是个人或独资企业/个人业务，请使用 Apple ID 登录以开始注册。您需要提供基本个人信息，包括您的法定姓名和地址。</p>
</li>
<li>
<p>&lt;mark&gt;以组织身份注册&lt;/mark&gt;<br>
如果正在注册您的组织，您需要 Apple ID 以及以下信息，以开始注册：</p>
<p><strong>邓白氏码(D-U-N-S® 编号)</strong><br>
您的所在组织必须拥有 D-U-N-S 编号，以便我们验证您所在组织的身份和法人实体状态。这些唯一的九位编码由 Dun &amp; Bradstreet 进行分配，广泛用作标准的企业识别码。您可以检查自己所在组织是否已拥有 D-U-N-S 编号；如有必要，可以申请一个。这些编号在大多数司法管辖区中都是免费的。<a href="https://developer.apple.com/support/D-U-N-S/cn/" target="_blank" rel="noopener">了解详情</a><br>
<strong>法人实体状态</strong><br>
要注册开发人员计划，您的组织必须是法律实体，以便与苹果签订法律协议。 我们不接受DBA，虚构企业，商业名称或分支机构。 法定实体名称必须与您计划使用的税号相对应，并且将作为您可能在App Store和Mac App Store上分发的应用程序的“卖家”显示。<br>
<strong>法律约束授权</strong><br>
作为组织的 Apple Developer Program 注册人，您必须拥有约束组织遵守法律协议的法律授权。您必须是组织的所有人/创始人、行政管理团队成员、高级项目主管或拥有高级员工授予的法律授权。</p>
<p>选择👉<strong>Start Your Enrollment</strong>,开始注册。
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071137.jpg" alt></p>
</li>
</ol>
</li>
<li>
<p>选择注册类型<br>
&lt;mark&gt;Apple ID信息&lt;/mark&gt;<br>
此Apple ID帐户的信息将用于验证和法律协议，因此请确保您的法定名称和国家/地区正确无误。<br>
&lt;mark&gt;注册实体类型&lt;/mark&gt;</p>
<ol>
<li>个人或代表独资/个人企业（Individual/Sole Proprietor/Single Person Business）；</li>
<li>公司/组织（Company/Organization）</li>
<li>政府组织（Government Organization）</li>
</ol>
<blockquote>
<p>请注意：为了在App Store商店上将您的公司名称列为卖家，您的公司必须在您所在的国家/地区拥有合法实体。 个人和个体商户在其所在国家不被承拥有合法实体的将会被注册并且如果被苹果公司审核通过并且发布的应用，将会根据注册时个人的法定名称下载。</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071138.jpg" alt></p>
</li>
</ul>
<h3>1.个人或代表独资/个人企业（Individual/Sole Proprietor/Single Person Business</h3>
<ul>
<li>
<p>填写详细信息<br>
<a href="https://countrycode.org/china" target="_blank" rel="noopener">CountryCode.org官网</a>
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071138-1.jpg" alt>
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071140.jpg" alt></p>
</li>
<li>
<p>下一步：确认信息
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071140-1.jpg" alt>
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071141.jpg" alt></p>
</li>
<li>
<p>下一步：确认购买会员
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071142.jpg" alt></p>
</li>
<li>
<p>下一步：再次填写Apple ID账户和密码</p>
</li>
<li>
<p>下一步：选择可以支付美金的信用卡（visa 或者 万事达）,输入你的信用卡账单地址，确保正确，否则审核可能无法通过！
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071143.jpg" alt></p>
</li>
</ul>
<h3>2.公司/组织（Company/Organization）</h3>
<p>申请公司开发者账户需要<strong>邓白氏码</strong>,可以参考这篇文章：
<a href="http://www.jianshu.com/p/fd0360904379" target="_blank" rel="noopener">IOS-申请邓白氏编码的超详细流程介绍</a>
注意：申请填写资料的 <strong>格式规范</strong> 问题</p>
<ol>
<li>
<p>公司中英文名：（注：中文名称一定要和营业执照上一致）<br>
英文名 <strong>(Co.,后有一个空格，Ltd后有一点)</strong></p>
</li>
<li>
<p>公司办公中英文地址：（注：具体到详细地址）
公司办公英文地址填写：下拉参考附录</p>
</li>
<li>
<p>公司邮编：（注：具体到详细邮编）</p>
</li>
<li>
<p>公司主营业务</p>
</li>
<li>
<p>公司企业类型</p>
</li>
<li>
<p>企业是否独立，有无分公司办事处</p>
</li>
<li>
<p>企业有没有英文缩写或者英文简称（没有可不写）</p>
</li>
<li>
<p>联系人姓名，性别，手机，公司电话，职务</p>
</li>
</ol>
<p>公司电话填写：下拉参考附录</p>
<ol start="9">
<li>
<p>员工人数规模（请尽量准确，不要填写一个范围，谢谢）</p>
</li>
<li>
<p>营业执照照片. (正本/副本或黑白/彩色都可以)</p>
</li>
</ol>
<h3>3.政府组织（Government Organization</h3>
<p>申请过一次政府版的 Apple 开发者账号，需要的材料除了以上的这些，还需要向苹果提供 <strong>使用印有正式组织抬头的信笺纸向 Apple 提供一封申请函</strong>，申请函包含的信息如下：</p>
<ol>
<li>表明您（XXX）已获得法律授权，可代表贵组织接受 Apple Developer Programs 的所有相关法律协议。</li>
<li>表明贵组织（XXX）希望加入 Apple Developer Programs。</li>
<li>提供您的注册 ID **********。</li>
<li>提供您的姓名（以正楷书写）、职务、签名和联系信息。</li>
</ol>
<p>注：如果需要授权，请让授权方在同一信函中声明他/她授予您签署 Apple Developer Programs 法律协议的当前及后续版本的权限。授权方还必须提供其姓名、职务、签名和联系信息。</p>
<p>申请函格式：
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071146.jpg" alt>
政府申请函模版文件：
百度云链接:https://pan.baidu.com/s/1kR7w_n5an1fkmiCYRbpyyA  密码:r6ef</p>
<p>接下来的付款流程和申请其他类型的开发者账号流程是一样的。</p>
<h3>相关阅读</h3>
<ul>
<li><a href="http://www.jianshu.com/p/9d737365cdc6" target="_blank" rel="noopener">翻译：苹果开发者协议</a></li>
</ul>
<h3>参考文章:</h3>
<ul>
<li><a href="http://www.cocoachina.com/apple/20170731/20073.html" target="_blank" rel="noopener">公司开发者账号申请（2017最新版）</a></li>
<li><a href="http://blog.csdn.net/gbking/article/details/52586340" target="_blank" rel="noopener">苹果开发者账号申请与简介</a></li>
<li><a href="http://www.cnblogs.com/xilinch/p/4037164.html" target="_blank" rel="noopener">苹果公司开发者账号注册流程详解</a></li>
<li><a href="http://www.jianshu.com/p/e88be24d6ab0" target="_blank" rel="noopener">iOS开发者账户申请</a></li>
<li><a href="http://jingyan.baidu.com/article/b0b63dbfe0affc4a483070d3.html" target="_blank" rel="noopener">百度经验：最新2016年苹果开发者申请流程(企业/公司账户)</a></li>
<li><a href="http://sonnewilling.com/blog/2014/03/01/iosying-yong-fa-bu-liu-cheng/" target="_blank" rel="noopener">iOS应用发布流程</a></li>
<li><a href="http://www.jianshu.com/p/3546bb4e9ba5" target="_blank" rel="noopener">iOS - 最新的App上架教程 2017</a></li>
</ul>
<h3>参考附录</h3>
<h4>英文地址书写格式</h4>
<blockquote></blockquote>
<p>室/房－－－Room 
单元－－－Unit
村－－－Vallage
号楼/栋－－－ Building
号 －－－No.
公司 －－－Com.或 Crop或LTD.CO
号宿舍 －－－ Dormitory
厂 －－－Factory
楼/层 －－－/F
酒楼/酒店 －－－Hotel
住宅区/小区 －－－ Residential Quater
县 －－－ County
甲/乙/丙/丁 －－－－A/B/C/D
镇 －－－Town
巷/弄 －－－Lane 
市 －－－ City
路 －－－Road
省 －－－ Prov. 
花园－－－ Garden 
院－－－ Yard 
街－－－ Street 
大学 －－－ College 
信箱 －－－Mailbox
区 －－－ District
表示序数词，比如1st、2nd、3rd、4th……如果不会，就用No.<strong><em>代替，或者直接填数字！
另外有一些</em></strong>里之类难翻译的东西，就直接写拼音*** Li。而<strong><em>东（南、西、北）路，直接用拼音也行，写</em></strong> East（South、West、North）Road也行。还有，如果地方不够可以将7栋3012室写成：7-3012。
201室 Room 201 
12号 No.12 
2单元 Unit 2 
长安街 Chang An street 
3号楼 Building No.3 
长安公司 Chang An Company 
南京路 Nanjing road 
宝山区 BaoShan District 
赵家酒店 ZhaoJia hotel 
钱家花园: Qianjia garden 
孙家县 Sunjia county 
李家镇 Lijia town 
广州市 Guangzhou city 
广东省 Guangdong province 
中国 China</p>
<blockquote>
<p>地址翻译实例 :
宝山区南京路12号3号楼201室
room 201，building No.3,No.12，nan jing road，BaoShan District
如果地方不够可以将3号楼201室写成：3-201
宝山区示范新村37号403室
Room 403,No.37,SiFan Residential Quarter,BaoShan District
中华人民共和国民政部政策研究中心北京河沿大街147号
No.147# HeiYian Street the policy center of civil administration department the People’Republic of China
虹口区西康南路125弄34号201室
Room 201,No.34,Lane 125,XiKang Road(South),HongKou District
北京市崇文区天坛南里西区20楼3单元101
Room 3-101 building No.20,TianTan-NanXiLi Residential ChongWen District BeiJing City
江苏省扬州市宝应县泰山东村102栋204室
Room 204 building No.102, East TaiShan Residential BaoYin County JiangSu Province
473004河南省南阳市中州路42号 王坤
Wang Kun
Room 42，Zhongzhou Road，Nanyang City，Henan Prov.China 473004
中国四川省江油市川西北矿区采气一队
1 Team CaiQi ChuanXiBei Mining Area JiangYou City SiChuan Province China
中国河北省邢台市群众艺术馆
The Masses Art Centre XinTai City HeBei Prov.China
江苏省吴江市平望镇联北村七组
7 Group LiBei Village PingWang Town WeJiang City JiangSu Province
434000湖北省荆州市红苑大酒店 王坤
Wang Kun
Hongyuan Hotel,Jingzhou city,Hubei Prov. China 434000
473000河南南阳市八一路272号特钢公司 王坤
Wang Kun
Special Steel Corp，No.272，Bayi　Road，Nanyang City，Henan Prov. China 473000
528400广东中山市东区亨达花园7栋702 王坤
Wang Kun
Room 702, 7th Building,Hengda Garden, East District,Zhongshan, China 528400
361012福建省厦门市莲花五村龙昌里34号601室 王坤
Wang Kun
Room 601, No.34 Long Chang Li,Xiamen, Fujian, China 361012
361004厦门公交总公司承诺办 王坤
Mr. Wang Kun
Cheng Nuo Ban, Gong Jiao Zong Gong Si Xiamen, Fujian, China 361004
266042山东省青岛市开平路53号国棉四厂二宿舍1号楼2单元204户甲 王坤
Mr. Zhou Wangcai
NO. 204, A, Building NO. 1,The 2nd Dormitory of the NO. 4 State-owned Textile Factory,
53 Kaiping Road, Qingdao,Shandong, China 266042</p>
</blockquote>
<blockquote>
<p>英文地址的写法
[英文地址]
中国MPA在线的英文地址：Rome1232,Youth building,No.34 West Beisanhuan Road, Beijing,China
一、寄达城市名的批译 ：
　　我国城市有用英文等书写的，也有用汉语拼音书写的。例如“北京”英文写为“Peking”，汉语拼音写为“Beijing”二者虽然都是用拉丁字母，但拼读方法不同，前者是以音
标相拼，而后者则是用声母和韵母相拼的，批译时要注意识别，以免错译。 
二、街道地址及单位名称的批译： 
　　常见有英文书写、汉语拼音书写、英文和汉语拼音混合书写三种。
1、英文书写的，例如Address：6 East Changan Avenue PeKing译为北京市东长安街6号；
2、汉语拼音书写的，例如：105 niujie Beijing译为北京市牛街105号；
3、英文、汉语拼音混合书写的，例如：NO.70 dong feng dong Rd.Guangzhou译为广州东风东路70号。
三、机关、企业等单位的批译： 
　　收件人为机关、企业等单位的，应先译收件人地址，再译单位名称。批译方法为： 
　　1、按中文语序书写的要顺译。
例如：SHANGHAI FOODSTUFFS IMP AND EXP CO.
译为：上海食品进出口公司； 
　　2、以英文介词短语充当定语，一般位于被修饰的名词之后，译在该名词之前。
例如：Civil Aviation Administration Of China
译为：中国民航局； 
　　3、机关、企业单位的分支机构一般用英文“branch”(分部、分公司等)表示。
例如：Beijing Electron Co. Ltd Xian branch
译为：北京电子有限公司西安分公司。
四、姓名方面： 
    外国人习惯是名（Firstname）在前，姓(Lastname)在后。若碰到让您一起填的，最好要注意一 
下顺序，不过你要是填反了，也没关系。中国银行收支票时是都承认的。
例如：刘刚，可写成GangLiu，也可写成LiuGang。 
五、地址翻译——翻译原则：先小后大。
1、中国人喜欢先说大的后说小的，如<strong>区</strong>路<strong>号。
而外国人喜欢先说小的后说大的，如 ：<strong>号</strong>路</strong>区，因此您在翻译时就应该先写小的后写大的。例如：中国山东省青岛市四方区洛阳路34号3号楼4单元402户，就要从房开始写
起： 
      Room402,Unit4,Building3,No.34.LuoyangRoad,sifangDistrict,QingdaoCity,Shandong Prov,China
（逗号后面有空格）。 
注意：其中路名、公司名、村名等均不用翻译成同意的英文，只要照写拼音就行了。
因为您的支票是中国的邮递员送过来，关键是要他们明白。技术大厦您写成Technology Building，他们可能更迷糊。 注意：填写姓名时，姓在前，名在后，中间空格，首字母大
写。填写地址时，从小地址到大地址，逗号或空格后的第一个字母大写。
A：
室/房Room
村Vallage
号No.
宿舍Dormitory
楼/层F
住宅区/小区Residential Quater
甲/乙/丙/丁A/B/C/D
巷/弄Lane
单元Unit
楼/栋Building
公司Com./Crop/LTD.CO
厂Factory
酒楼/酒店Hotel
路Road
花园Garden
街Street
信箱Mailbox
区Districtq
县County
镇Town
市City
省Prov.
院Yard
大学College
<strong>表示序数词，比如1st、2nd、3rd、4th......如果不会，就用No.<strong><em>代替，或者直接填数字吧！
另外有一些</em></strong>里之类难翻译的东西，就直接写拼音</strong><em>Li。而</em><strong>东（南、西、北）路，直接用拼音也行，写</strong>*East（South、West、North）Road也行。还有，如果地方不够可以
将7栋3012室写成：7-3012。
201室:Room201
12号:No.12
2单元:Unit2
3号楼:BuildingNo.3
长安街:ChangAnstreet
南京路:Nanjingroad
长安公司:ChangAnCompany
宝山区:BaoShanDistrict
赵家酒店:ZhaoJiahotel
钱家花园:Qianjiagarden
孙家县:Sunjiacounty
李家镇:Lijiatown
广州市:Guangzhoucity
广东省:Guangdongprovince
中国:China
英文地址一般的写法与我们描述的相反，由小写到大，以下为示范：
宝山区南京路12号3号楼201室
room201，buildingNo.3,No.12，nanjingroad，BaoShanDistrict
如果地方不够可以将3号楼201室写成：3-201
宝山区示范新村37号403室
Room403,No.37,SiFanResidentialQuarter,BaoShanDistrict
中华人民共和国民政部政策研究中心北京河沿大街147号
No.147#HeiYianStreetthepolicycenterofciviladministrationdepartmentthePeople’RepublicofChina
虹口区西康南路125弄34号201室
Room201,No.34,Lane125,XiKangRoad(South),HongKouDistrict
北京市崇文区天坛南里西区20楼3单元101
Room3-101buildingNo.20,TianTan-NanXiLiResidentialChongWenDistrictBeiJingCity
江苏省扬州市宝应县泰山东村102栋204室
Room204buildingNo.102,EastTaiShanResidentialBaoYinCountyJiangSuProvince
473004河南省南阳市中州路42号刘刚
LiuGang，Room42，ZhongzhouRoad，NanyangCity，HenanProv.China473004
中国四川省江油市川西北矿区采气一队
1TeamCaiQiChuanXiBeiMiningAreaJiangYouCitySiChuanProvinceChina
中国河北省邢台市群众艺术馆
TheMassesArtCentreXinTaiCityHeBeiProv.China
江苏省吴江市平望镇联北村七组
7GroupLiBeiVillagePingWangTownWeJiangCityJiangSuProvince
434000湖北省荆州市红苑大酒店刘刚
LiuGang，HongyuanHotel，Jingzhoucity，HubeiProv，China434000
473000河南南阳市八一路272号特钢公司刘刚
LiuGang，SpecialSteelCorp，No.272，Bayi　Road，NanyangCity，HenanProv.China473000
528400广东中山市东区亨达花园7栋702刘刚
LiuGang
Room702，7thBuilding，HengdaGarden，EastDistrict，Zhongshan，China528400
361012福建省厦门市莲花五村龙昌里34号601室刘刚
LiuGang，Room601，No.34LongChangLi，Xiamen,Fujian,China361012
361004厦门公交总公司承诺办刘刚
Mr.LiuGang，ChengNuoBan，GongJiaoZongGongSi，XiamenFujian,China361004
宝山区示范新村37号403室
Room 403,No.37,ShiFan Residential Quarter,BaoShan District
虹口区西康南路125弄34号201室
Room 201,No.34,Lane 125,XiKang Road(South),HongKou District
河南省南阳市中州路42号
Room 42， Zhongzhou Road，Nanyang City， Henan Prov.
湖北省荆州市红苑大酒店
Hongyuan Hotel, Jingzhou city, Hubei Prov.
河南南阳市八一路272号特钢公司
Special Steel Corp，No.272， Bayi　Road，Nanyang City， Henan Prov.
中山市东区亨达花园7栋702
Room 702, 7th Building, Hengda Garden, East District, Zhongshan
福建省厦门市莲花五村龙昌里34号601室
Room 601, No.34 Long Chang Li, Xiamen, Fujian
厦门公交总公司承诺办
Cheng Nuo Ban, Gong Jiao Zong Gong Si, Xiamen, Fujian
山东省青岛市开平路53号国棉四厂二宿舍1号楼2单元204户甲
NO. 204,Entrance A, Building NO. 1, The 2nd Dormitory of the NO. 4 State-owned Textile Factory, 53 Kaiping Road, Qingdao, Shandong</p>
</blockquote>
<h3>国际电话书写格式</h3>
<blockquote>
<p>很多人将中国的电话国际格式书写成如下的形式：
　　086-010-87654321
　　0086-010-87654321
　　稍懂国际电话书写格式的人都知道，上面的书写是完全错误的！
　　国际电话号码书写格式正确的写法（国际惯例）应该是： 
+国家代码-地区代码-用户电话号码
　　其中：
　　1、“+”（不含引号）的含义是，主叫方所在国拨打国际长途电话时加拨的数字，比如在中国，拨打国际长途时，在对方国家代码前加拨“00”。但，这并非说在所有的国家拨打国际长途时都是加拨“00”！比如，在俄罗斯，拨打国际长途时加拨“810”。因此，一个中国机构或者个人给俄罗斯方面书写自己的电话号码为：0086-……那就让人见笑或者不知所措了。　　作为中国方面很难知道各国拨打国际长途电话时加拨的数字，因此，在国际代码“86”前加“+”号就是非常方便、准确的做法了。如果有人不遵循这一国际惯例和规定，非要另搞一套，那在国际范围内是行不通的。历史的经验和教训值得注意，在改革开放初期，有的中国企业就因为电话号码书写错误，曾经为此付出了惨重的经济代价。
　　2、“国家代码”：中国的代码是86。
　　3、“地区代码”，中国的地区代码是不含“0”的。我们平时所见的010、021、0311，其中的“0”都是针对国内长途而言的，国际长途情况下，此“0”省略。说明：有的国家，某地区号码中包含“0”也有不含“0”的，但，含“0”的不能省略（这与在中国大陆拨打跨区长途电话时，在地区代码前面加拨“0”不是一个含义）。
　　因此，上面举的北京电话号码，若是按照国际电话格式书写，
　　应该是：+86-10-87654321</p>
</blockquote>
<p>最后更新：2017年9月</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/11/09/iOS 9 人机界面指南/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/09/iOS 9 人机界面指南/" class="post-title-link" itemprop="url">iOS 9 人机界面指南</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-11-09 10:25:00" itemprop="dateCreated datePublished" datetime="2016-11-09T10:25:00+08:00">2016-11-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 22:48:05" itemprop="dateModified" datetime="2019-05-01T22:48:05+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-资源/" itemprop="url" rel="index"><span itemprop="name">iOS 资源</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">233</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://25.io/smaller/favicon.ico" alt="以下资源非原创，摘自各种公众号或网络，仅用于学习交流get新技能，方便日常查阅，无任何商业及侵权目的！" title="Title here"></p>
<ul>
<li>
<p>官方原文：<a href="https://developer.apple.com/ios/human-interface-guidelines/#//apple_ref/doc/uid/TP40006556-CH27-SW1" target="_blank" rel="noopener">iOS Human Interface Guidelines</a></p>
</li>
<li>
<p><a href="https://isux.tencent.com/ios9-guideline-ch1.html" target="_blank" rel="noopener">[ISUX译]iOS 9人机界面指南(一)：UI设计基础</a></p>
</li>
<li>
<p><a href="https://isux.tencent.com/ios9-guideline-ch2.html" target="_blank" rel="noopener">[ISUX译]iOS 9人机界面指南(二)：设计策略</a></p>
</li>
<li>
<p><a href="https://isux.tencent.com/ios9-guideline-ch3-1.html" target="_blank" rel="noopener">[ISUX译]iOS 9人机界面指南(三)：iOS 技术 (上)</a></p>
</li>
<li>
<p><a href="https://isux.tencent.com/ios9-guideline-ch3-2.html" target="_blank" rel="noopener">[ISUX译]iOS 9人机界面指南(三)：iOS 技术 (下)</a></p>
</li>
<li>
<p><a href="https://isux.tencent.com/ios9-guideline-ch4.html" target="_blank" rel="noopener">[ISUX译]iOS 9人机界面指南(四)：UI元素</a></p>
</li>
<li>
<p><a href="https://isux.tencent.com/ios9-guideline-ch5.html" target="_blank" rel="noopener">[ISUX]译iOS 9 人机界面指南(五)：图标与图形设计</a></p>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/10/27/《iOS编程（第四版）》Demo12：TouchTracker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/10/27/《iOS编程（第四版）》Demo12：TouchTracker/" class="post-title-link" itemprop="url">《iOS编程（第四版）》Demo12：TouchTracker</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-27 10:22:00" itemprop="dateCreated datePublished" datetime="2016-10-27T10:22:00+08:00">2016-10-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 22:45:12" itemprop="dateModified" datetime="2019-05-01T22:45:12+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">16k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">14 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h3>TouchTracker</h3>
<p>参考：<a href="https://www.amazon.cn/gp/product/B013UG2ULW/ref=oh_aui_d_detailpage_o03_?ie=UTF8&amp;psc=1" target="_blank" rel="noopener">《iOS编程（第四版）[美]Christian Keur》</a> 写的Demo笔记</p>
<h2>1. 触摸事件与UIResponder</h2>
<p>因为 <strong>UIView</strong> 是 <strong>UIResponder</strong> 的子类，所以覆盖以下四个方法就可以处理四种不同的触摸事件：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// ① 一根手指或多根手指触摸屏幕</span><br><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;</span><br><span class="line"></span><br><span class="line">// ② 一根手指或多根手指在屏幕上移动（随着手指的移动，相关的对象会持续发送该消息）</span><br><span class="line">- (void)touchesMoved:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;</span><br><span class="line"></span><br><span class="line">// ③ 一根手指或多根手指离开屏幕</span><br><span class="line">- (void)touchesEnded:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;</span><br><span class="line"></span><br><span class="line">// ④ 在触摸操作正常结束前，某个系统事件（例如突然来电话）打断了触摸过程</span><br><span class="line">- (void)touchesCancelled:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;</span><br></pre></td></tr></table></figure></p>
<p>当系统检测到手指触摸屏幕的事件后，就会创建 <strong>UITouch</strong> 对象（一根手指的触摸事件对应一个<strong>UITouch</strong>对象）。发生触摸事件的 <strong>UIView</strong> 对象会收到不同阶段的以上四种消息。</p>
<p>&lt;!-- more --&gt;</p>
<p><strong>UITouch</strong> 对象和事件响应的方法的工作机制：</p>
<ul>
<li>一个 <strong>UITouch</strong> 对象对应屏幕上的一根手指。只要手指没有离开屏幕，相应的 <strong>UITouch</strong> 对象就会一直存在。这些 <strong>UITouch</strong> 对象都会保存对应的手指在屏幕上的当前位置。</li>
<li>在触摸事件的持续过程中，无论发生什么，最初发生触摸事件的那个视图都会在各个阶段收到相应的触摸消息。也就是说，&lt;u&gt;当某个视图发生触摸事件后，该视图将永远“拥有”当时创建的所有 <strong>UITouch</strong> 对象&lt;/u&gt;。</li>
<li>读者自己编写的代码不需要也不应该保留任何 <strong>UITouch</strong> 对象。当某个 <strong>UITouch</strong> 对象的状态发生变化时，系统会向指定的对象发送特定的事件消息，并传入发生变化的 <strong>UITouch</strong> 对象。</li>
<li>触摸事件由系统添加至一个由 <strong>UIApplication</strong> 单例管理的事件队列。</li>
<li>当多根手指在&lt;u&gt;同一个视图、同一个时刻&lt;/u&gt;执行相同的触摸动作时，<strong>UIApplication</strong> 会用&lt;u&gt;单个消息、一次分发所有相关的 <strong>UITouch</strong> 对象&lt;/u&gt;。但是，因为 <strong>UIApplication</strong>对“同一时刻”的判断很严格，通常 <strong>UIApplication</strong> 都是发送&lt;u&gt;多个 <strong>UIResponder</strong> 消息，分批发送 <strong>UITouch</strong> 对象&lt;/u&gt;。</li>
</ul>
<h2>2. 创建touchTracker画板应用</h2>
<p>通过创建一个“画板”应用来简单描述触摸事件和手势处理,用户可以在该视图上触摸并绘制线条，借助多点触控，用户还可以同时画多根线条。
demo演示：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071316.gif" alt></p>
<h3>项目的组织结构</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071322.jpg" alt="TouchTracker"></p>
<h3>模型对象：定义一条线</h3>
<p>通过两个点可以定义一条直线，所以 <strong>HQLLine</strong> 对象需要用 <strong>begin</strong> 属性和 <strong>end</strong> 属性来保存起点和终点。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &lt;CoreGraphics/CoreGraphics.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 描述线条的模型对象：起点 begin（x,y）、终点 end（x,y）</span><br><span class="line"> */</span><br><span class="line">@interface HQLLine : NSObject</span><br><span class="line"></span><br><span class="line">@property (nonatomic) CGPoint begin;</span><br><span class="line">@property (nonatomic) CGPoint end;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<h2>3. 实现绘图功能</h2>
<p>HQLDrawView 对象要实现绘图功能：</p>
<ul>
<li>管理正在绘制的线条、被选中的线条和绘制完成的线条。所以在类扩展中添加这几个属性：</li>
</ul>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@interface HQLDrawView () &lt;UIGestureRecognizerDelegate&gt;</span><br><span class="line"></span><br><span class="line">// 保存当前线（多点触控，同时保存多线）</span><br><span class="line">// key 是 UITouch 对象的内存地址，value 是 HQLLine 对象</span><br><span class="line">@property (nonatomic, strong) NSMutableDictionary *linesInProgress;</span><br><span class="line"></span><br><span class="line">// 保存所有线</span><br><span class="line">@property (nonatomic, strong) NSMutableArray *finishedLines;</span><br><span class="line"></span><br><span class="line">// 单击手势选中的线条</span><br><span class="line">// weak: ① finishedLines 数组会保存 selectedLine，是强引用；</span><br><span class="line">//       ② 如果用户双击清除所有线条，finishedLines 数组会移除 selectedLine，这时 HQLDrawView会自动将 selectedLine 设置为 nil</span><br><span class="line">@property (nonatomic, weak) HQLLine *selectedLine;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>当前线 <strong>linesInProgress</strong> 通过字典来保存
字典的key是一个NSValue对象，保存UITouch对象的内存地址。
字典的value就是UITouch对象所对应的线（HQLLine对象）。</p>
<ul>
<li><strong>使用内存地址分辨UITouch对象</strong> 的原因是：在触摸事件开始、移动、结束的整个过程中，其内存地址是不会改变的，内存地址相同的UITouch对象一定是同一个对象。</li>
<li>而又用<strong>NSValue</strong>来封装<strong>UITouch</strong>对象的内存地址，而不是直接保存 <strong>UITouch对象</strong>是因为：<strong>NSDictionary</strong>及其子类<strong>NSMutableDictionary</strong>的键必须遵守<strong>NSCopying协议</strong>——键必须可以复制（可以响应copy消息）。<strong>UITouch</strong>并不遵守<strong>NSCopying协议</strong>，因为每一个触摸事件都是唯一的，不应该被复制。相反，<strong>NSValue</strong>遵守<strong>NSCopying协议</strong>，同一个<strong>UITouch对象</strong>会在触摸过程中创建包含相同内存地址的<strong>NSValue对象</strong>。</li>
</ul>
</blockquote>
<ul>
<li>处理触摸事件：</li>
</ul>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark 一根手指或多根手指触摸屏幕</span><br><span class="line">// 触摸事件开始时,HQLDrawView 对象需要创建一个 HQLLine 对象，并将其begin属性和end属性设置为触摸发生时的手指位置</span><br><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    </span><br><span class="line">    // 向控制台输出日志，查看触摸事件发生顺序</span><br><span class="line">    NSLog(@&quot;%@&quot;,NSStringFromSelector(_cmd));</span><br><span class="line">    </span><br><span class="line">    for (UITouch *t in touches) &#123;</span><br><span class="line">        // 根据触摸位置创建 HQLLine 对象</span><br><span class="line">        CGPoint location = [t locationInView:self];</span><br><span class="line">        HQLLine *line = [[HQLLine alloc] init];</span><br><span class="line">        line.begin = location;</span><br><span class="line">        line.end   = location;</span><br><span class="line">        // valueWithNonretainedObject：将 UITouch 对象的内存地址封装为 NSValue 对象</span><br><span class="line">        // 使用内存地址分辨 UITouch 对象的原因是，在触摸事件开始、移动、结束的整个过程中，其内存地址不会改变，内存地址相同的 UITouch 对象一定是同一个对象。</span><br><span class="line">        NSValue *key = [NSValue valueWithNonretainedObject:t];</span><br><span class="line">        // 保存当前线到字典中，key值是内存地址，value值是 HQLLine 对象</span><br><span class="line">        self.linesInProgress[key] = line;</span><br><span class="line">    &#125;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark 一根手指或多根手指在屏幕上移动</span><br><span class="line">// 触摸事件继续时（手指在频幕上移动），HQLDrawView对象需要将end设置为手指的当前位置</span><br><span class="line">- (void) touchesMoved:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    </span><br><span class="line">    // 向控制台输出日志，查看触摸事件发生顺序</span><br><span class="line">    NSLog(@&quot;%@&quot;,NSStringFromSelector(_cmd));</span><br><span class="line">    </span><br><span class="line">    for (UITouch *t in touches) &#123;</span><br><span class="line">        // 根据当前 UITouch 对象的内存地址找到key值，再找到value值，更新 HQLLine 对象的终点</span><br><span class="line">        NSValue *key = [NSValue valueWithNonretainedObject:t];</span><br><span class="line">        HQLLine *line = self.linesInProgress[key];</span><br><span class="line">        line.end = [t locationInView:self];</span><br><span class="line">    &#125;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark 一根手指或多根手指离开屏幕</span><br><span class="line">// 触摸结束时，将当前线linesInProgress保存到finishedLines数组中。</span><br><span class="line">- (void) touchesEnded:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    </span><br><span class="line">    // 向控制台输出日志，查看触摸事件发生顺序</span><br><span class="line">    NSLog(@&quot;%@&quot;,NSStringFromSelector(_cmd));</span><br><span class="line">    </span><br><span class="line">    for (UITouch *t in touches) &#123;</span><br><span class="line">        NSValue *key = [NSValue valueWithNonretainedObject:t];</span><br><span class="line">        HQLLine *line = self.linesInProgress[key];</span><br><span class="line">        // 将所有绘制完成的线，即 HQLLine 对象添加到_finishedLines数组中</span><br><span class="line">        [self.finishedLines addObject:line];</span><br><span class="line">        // 从当前线中移除 HQLLine 对象</span><br><span class="line">        [self.linesInProgress removeObjectForKey:key];</span><br><span class="line">    &#125;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark 在触摸操作正常结束前，某个系统事件打断了触摸进程</span><br><span class="line">// 触摸取消事件：当系统中断了应用，触摸事件就会被取消，这是应用应该恢复到触摸事件发生前的状态，这里就简单的清楚所有正在绘制的线条。</span><br><span class="line">- (void) touchesCancelled:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    </span><br><span class="line">    //向控制台输出日志，查看触摸事件发生顺序</span><br><span class="line">    NSLog(@&quot;%@&quot;,NSStringFromSelector(_cmd));</span><br><span class="line">    </span><br><span class="line">    for (UITouch *t in touches) &#123;</span><br><span class="line">        NSValue *key = [NSValue valueWithNonretainedObject:t];</span><br><span class="line">        // 从当前线中移除 HQLLine 对象</span><br><span class="line">        [self.linesInProgress removeObjectForKey:key];</span><br><span class="line">    &#125;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2>8. 响应对象链</h2>
<p><strong>UIResponder</strong> 对象可以接受触摸事件，而 <strong>UIView</strong>、<strong>UIViewController</strong>、<strong>UIApplication</strong> 和 <strong>UIWindow</strong> 等都是 <strong>UIResponder</strong> 的子类。因此，他们都可以可以接受触摸事件。</p>
<p>例如，虽然 <strong>UIViewController</strong> 不是视图对象，系统不能向 <strong>UIViewController</strong> 对象直接发送触摸事件，但是该对象能通过响应对象链接受事件。</p>
<p><strong>UIResponder</strong> 对象拥有一个名为nextResponder的指针，相关的 <strong>UIResponder</strong> 对象可以通过该指针组成一个响应对象链。</p>
<ul>
<li>当 <strong>UIView</strong> 对象属于某个 <strong>UIViewController</strong> 对象时，其nextResponder指针就会指向包含该视图的**UIViewController **对象。</li>
<li>当 <strong>UIView</strong> 对象不属于任何 <strong>UIViewController</strong> 对象时，其nextResponder指针就会指向该视图的父视图。<strong>UIViewController</strong> 对象的nextResponder通常会指向其视图的父视图。最顶层的父视图是 <strong>UIWindow</strong> 对象，而 <strong>UIWindow</strong> 对象的nextResponder指向的是 <strong>UIApplication</strong> 单例。</li>
<li>如果没有为某个 <strong>UIResponder</strong> 对象覆盖特定的事件处理方法，那么该对象的nextResponder会尝试处理相应的触摸事件。最终，该事件会传递给<strong>UIApplication</strong>（响应对象链的最后一个对象），如果 <strong>UIApplication</strong> 也无法对其处理，系统就会丢弃该事件。</li>
</ul>
<p>除了由 <strong>UIResponder</strong> 对象向nextResponder转发消息，也可以直接向nextResponder发送消息。
<figure class="highlight plain"><figcaption><span>nextResponder]touchesBegan:touches withEvent:event];  ```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### UIController</span><br><span class="line"></span><br><span class="line">* **UIController**是部分Cocoa Touch类的父类，例如**UIButton**和**UISlider**。</span><br><span class="line">* **UIControl** 对象并不是直接向目标对象发送消息，而是通过 **UIApplication** 转发。**UIApplication** 在转发源自 **UIControl** 对象的消息时，会先判断目标对象是不是 `nil`。如果是 `nil`，**UIApplication** 就会先找出 **UIWindow** 对象的第一响应对象，然后向第一响应对象发送相应的动作消息。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 13. UIGestureRecognizer 与 UIMenuController</span><br><span class="line"></span><br><span class="line">* **UIGestureRecognizer **对象可以用于识别特定手势，例如“张开或者合拢手指”（pinch）或者滑动（swipe）手势。</span><br><span class="line">* 在为应用添加手势识别功能时，需要&lt;u&gt;针对特定的手势创建 **UIGestureRecognizer** 子类对象，而不是直接使用 **UIGestureRecognizer** 对象。&lt;/u&gt;</span><br><span class="line"></span><br><span class="line">### 双击手势</span><br><span class="line">添加双击手势需要在**HQLDrawView.m**的初始化方法中创建一个**UITapGestureRecognize**对象，并注册触发的手势方法。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">// -----------------------------------------------</span><br><span class="line">// 使用 UIGestureRecognize 子类步骤：</span><br><span class="line">// ① 创建对象并设置目标-动作对；</span><br><span class="line">// ② 将该对象“附着”在某个视图上；</span><br><span class="line"></span><br><span class="line">// UIGestureRecognize 子类 - UITapGestureRecognizer</span><br><span class="line">// 1️⃣ 双击手势</span><br><span class="line">UITapGestureRecognizer *doubleTapRecognizer =</span><br><span class="line">    [[UITapGestureRecognizer alloc] initWithTarget:self</span><br><span class="line">                                            action:@selector(doubleTap:)];</span><br><span class="line">// 设置点击次数为2</span><br><span class="line">doubleTapRecognizer.numberOfTapsRequired = 2;</span><br><span class="line">// 设置手势优先：延迟 UIView 收到 UIResponder 消息</span><br><span class="line">// 只有双击手势识别失败后，才能再去识别 UIResponder 消息的触摸手势，防止误识别。</span><br><span class="line">doubleTapRecognizer.delaysTouchesBegan = YES;</span><br><span class="line">// 将该对象“附着”在视图上；</span><br><span class="line">[self addGestureRecognizer:doubleTapRecognizer];</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// doubleTap:双击手势方法：删除所有线条</span><br><span class="line">- (void) doubleTap:(UIGestureRecognizer *)gr &#123;</span><br><span class="line">NSLog(@&quot;Recognized Double Tap&quot;);</span><br><span class="line">[self.linesInProgress removeAllObjects];</span><br><span class="line">[self.finishedLines removeAllObjects];</span><br><span class="line">[self setNeedsDisplay];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3>单击手势</h3>
<p>在<strong>HQLDrawView.m</strong>的初始化方法中创建一个<strong>UITapGestureRecognizer</strong>单击手势对象。
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 2️⃣ 单击手势</span><br><span class="line">UITapGestureRecognizer *tapRecognizer =</span><br><span class="line">    [[UITapGestureRecognizer alloc] initWithTarget:self</span><br><span class="line">                                            action:@selector(tap:)];</span><br><span class="line">// 同样设置手势优先：① 延迟 UIView 收到 UIResponder 消息</span><br><span class="line">tapRecognizer.delaysTouchesBegan = YES;</span><br><span class="line">// ② 需要双击手势识别失败时再识别单击手势</span><br><span class="line">[tapRecognizer requireGestureRecognizerToFail:doubleTapRecognizer];</span><br><span class="line">[self addGestureRecognizer:tapRecognizer];</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - 单击手势</span><br><span class="line"></span><br><span class="line">- (void) tap:(UIGestureRecognizer *)gr &#123;</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;Recognized tap&quot;);</span><br><span class="line">    // 获取点击的坐标位置</span><br><span class="line">    CGPoint point = [gr locationInView:self];</span><br><span class="line">    // 根据该点找到最近的线</span><br><span class="line">    self.selectedLine = [self lineAtPoint:point];</span><br><span class="line">    </span><br><span class="line">    // 弹出删除菜单</span><br><span class="line">    if (self.selectedLine) &#123;</span><br><span class="line">        // 使视图成为 UIMenuItem 动作消息的目标</span><br><span class="line">        [self becomeFirstResponder];</span><br><span class="line">        // 获取 UIMenuController 对象</span><br><span class="line">        UIMenuController *menu = [UIMenuController sharedMenuController];</span><br><span class="line">        // 创建一个新的标题为 “Delete” 的 UIMenuItem 对象</span><br><span class="line">        UIMenuItem *deleteItem =</span><br><span class="line">            [[UIMenuItem alloc] initWithTitle:@&quot;删除&quot;</span><br><span class="line">                                       action:@selector(deleteLine:)];</span><br><span class="line">        menu.menuItems = @[deleteItem];</span><br><span class="line">        // 先为 UIMenuController 对象设置显示区域，然后将其设置为可见</span><br><span class="line">        [menu setTargetRect:CGRectMake(point.x, point.y, 2, 2) inView:self];</span><br><span class="line">        [menu setMenuVisible:YES animated:YES];</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        // 如果没有选中的线条，就隐藏 UIMenuController 对象</span><br><span class="line">        // 即点击其他空白区域，隐藏 UIMenuController 对象</span><br><span class="line">        [[UIMenuController sharedMenuController] setMenuVisible:NO</span><br><span class="line">                                                       animated:YES];</span><br><span class="line">    &#125;</span><br><span class="line">    // 用绿色重绘这根线条</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma 根据点找出最近的线</span><br><span class="line">- (HQLLine *) lineAtPoint:(CGPoint) p &#123;</span><br><span class="line">    </span><br><span class="line">    // 找出离P最近的 HQLLine 对象</span><br><span class="line">    for (HQLLine *l in self.finishedLines) &#123;</span><br><span class="line">        CGPoint start = l.begin;</span><br><span class="line">        CGPoint end = l.end;</span><br><span class="line">        //检查线条的若干点</span><br><span class="line">        for (float t= 0.0; t &lt;= 1.0; t += 0.05) &#123;</span><br><span class="line">            float x = start.x + t * (end.x - start.x);</span><br><span class="line">            float y = start.y + t * (end.y - start.y);</span><br><span class="line">            // 如果线条的某个点和p的距离在20点以内，就返回相应的HQLLine对象</span><br><span class="line">            if (hypot(x-p.x, y-p.y) &lt; 20.0) &#123;</span><br><span class="line">                return l;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return nil;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma UIMenuItem 动作方法：删除线</span><br><span class="line"></span><br><span class="line">- (void) deleteLine:(id) sender &#123;</span><br><span class="line">    // 从已经完成的线条中删除选中的线条</span><br><span class="line">    [self.finishedLines removeObject:self.selectedLine];</span><br><span class="line">    // 重画整个视图</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3>UIMenuController</h3>
<p>以上单击手势方法 <figure class="highlight plain"><figcaption><span>中用到了 **UIMenuController** 对象</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*	**UIMenuController **对象用于在用户手指按下的地方显示一组 **UIMenuItem** 对象（菜单项），每个 **UIMenuItem** 对象都有自己的标题和动作方法。</span><br><span class="line"> *显示 **UIMenuItem** 对象的 ∫ 对象必须是当前 **UIWindow** 对象的第一响应对象。</span><br><span class="line"></span><br><span class="line">&gt; 如果要将某个自定义的 **UIView** 子类对象设置为第一响应者 ```[self becomeFirstResponder]``` ，就必须在HQLDrawView.m中覆盖 ```canBecomeFirstResponder``` 方法并返回YES。</span><br><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">- (BOOL) canBecomeFirstResponder &#123;</span><br><span class="line">return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>还需要为<strong>UIMenuController</strong>对象实现删除线的动作方法，才会在选中某条线时显示<strong>UIMenuController</strong>对象。如果<strong>UIMenuController</strong>对象的动作方法没有实现，应用就不会显示<strong>UIMenucontroller</strong>对象。</p>
</blockquote>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (void) deleteLine:(id) sender &#123;</span><br><span class="line">//从已经完成的线条中删除选中的线条</span><br><span class="line">[self.finishedLines removeObject:self.selectedLine];</span><br><span class="line">//重画整个视图</span><br><span class="line">[self setNeedsDisplay];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3>5. UILongPressGestureRecognizer</h3>
<p>###长按手势</p>
<ul>
<li><strong>UILongPressGestureRecognizer</strong> 对象默认会将持续时间超过0.5秒的触摸事件识别为长按手势。设置 <strong>UILongPressGestureRecognizer</strong> 对象的 <figure class="highlight plain"><figcaption><span>属性可以修改这个时间。   </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* **UILongPressGestureRecognizer **对象在识别出长按手势后，会持续跟踪该手势并在不同的阶段分别触发三种不同的事件：   </span><br><span class="line">   1. **UIGestureRecognizerStatePossible**（可能会发生）</span><br><span class="line">   2. **UIGestureRecognizerStateBegan**（长按开始）</span><br><span class="line">   3. **UIGestureRecognizerStateEnded**（长按结束）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在**HQLDrawView.m**的初始化方法中创建一个**UILongPressGestureRecognizer**长按手势对象。</span><br><span class="line">```objective-c</span><br><span class="line">// -----------------------------------------------</span><br><span class="line">        // UIGestureRecognize 子类 - UILongPressGestureRecognizer</span><br><span class="line">        // 3️⃣ 长按手势</span><br><span class="line">        UILongPressGestureRecognizer *pressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self</span><br><span class="line">                                                          action:@selector(longPress:)];</span><br><span class="line">        // UILongPressGestureRecognizer 对象默认会将持续时间超过 0.5秒的触摸事件识别为长按手势</span><br><span class="line">        // 设置 minimumPressDuration 属性可修改该时间</span><br><span class="line">        pressRecognizer.minimumPressDuration = 0.6;</span><br><span class="line">        [self addGestureRecognizer:pressRecognizer];</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>在<strong>HQLDrawView.m</strong>中实现longPress:方法</p>
</blockquote>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (void) longPress:(UIGestureRecognizer *)gr &#123;</span><br><span class="line">    </span><br><span class="line">    // 长按开始</span><br><span class="line">    if (gr.state == UIGestureRecognizerStateBegan) &#123;</span><br><span class="line">        CGPoint point = [gr locationInView:self];</span><br><span class="line">        // 选中被长按的线</span><br><span class="line">        self.selectedLine = [self lineAtPoint:point];</span><br><span class="line">        if (self.selectedLine) &#123;</span><br><span class="line">            // 删除当前线</span><br><span class="line">            [self.linesInProgress removeAllObjects];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 长按结束</span><br><span class="line">    else if (gr.state == UIGestureRecognizerStateEnded) &#123;</span><br><span class="line">        self.selectedLine = nil;</span><br><span class="line">    &#125;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2>UIPanGestureRecognizer（拖动手势）以及同时识别多个手势</h2>
<p>在<strong>HQLDrawView.m</strong>中的类扩展中将<strong>HQLDrawView</strong>声明为遵守<strong>UIGestureRecognizerDelegate</strong>协议。然后声明一个类型为<strong>UIPanGestureRecognizer</strong>的属性:
<figure class="highlight plain"><figcaption><span>(nonatomic,strong) UIPanGestureRecognizer *moveRecognizer;```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; 更新**HQLDrawView.m**的```initWithFrame:```方法,创建一个**UIPanGestureRecognizer**对象。默认情况下，UIGestureRecognize对象在识别出特定的手势时，会“吃掉”所有和该手势有段的UItouch对象，这边选择否“NO”，让UILongPressGestureRecognizer对象和UIPanGestureRecognizer对象能够同时识别手势。</span><br><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">// 4️⃣ 移动手势</span><br><span class="line">self.moveRecognizer =</span><br><span class="line">    [[UIPanGestureRecognizer alloc] initWithTarget:self</span><br><span class="line">                                            action:@selector(moveLine:)];</span><br><span class="line">self.moveRecognizer.delegate = self;</span><br><span class="line">// cancelsTouchesInView 属性默认为 YES，这个对象会在识别出特定手势时，“吃掉”所有和该手势有关的 UITouch 对象；</span><br><span class="line">// 这里设置为NO，因为还要处理相关的 UITouch 对象：</span><br><span class="line">// 一开始，画板上没有任何线时，在屏幕上划动就会识别出 moveRecognizer 手势，它会发送 moveLine:消息。执行该消息，如果没有选中的线条就直接返回。与此同时 YES 的cancelsTouchesInView 属性拦截了所有的 UIResponder 方法，就无法处理 UITouch 对象，就无法画线。</span><br><span class="line">self.moveRecognizer.cancelsTouchesInView = NO;</span><br><span class="line">[self addGestureRecognizer:self.moveRecognizer];</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>使用UIGestureRecognizerDelegate协议中的一个协议<figure class="highlight plain"><figcaption><span>shouldRecognizeSimultaneouslyWithGestureRecognizer:```，当某个**UIGestureRecognizer**子类对象识别出特定的手势后，如果发现其他的**UIGestureRecognizer**子类对象也识别出了特定的手势，就会向其委托对象发送```gestureRecognizer: shouldRecognizeSimultaneouslyWithGestureRecognizer:```消息。如果相应的方法返回YES，那么当前的**UIGestureRecognizer**子类对象就会和其他的**UIGestureRecognizer**子类对象共享**UITouch**对象。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">#pragma mark - UIGestureRecognizerDelegate</span><br><span class="line">// 默认情况下，UIGestureRecognize 对象在识别出特定的手势时，会“吃掉”所有和该手势有关的 UItouch 对象</span><br><span class="line">// 让 UILongPressGestureRecognizer 长按手势和 UIPanGestureRecognizer 拖动手势同时被识别</span><br><span class="line">- (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer &#123;</span><br><span class="line">    </span><br><span class="line">    if (gestureRecognizer == self.moveRecognizer) &#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    return NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>在<strong>HQLDrawView.m</strong>中实现<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">- (void) moveLine:(UIPanGestureRecognizer *)gr &#123;</span><br><span class="line">    // 如果没有选中的线条就直接返回</span><br><span class="line">    if (! self.selectedLine) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 如果菜单项可见，返回</span><br><span class="line">    UIMenuController *menuController = [UIMenuController sharedMenuController];</span><br><span class="line">    if (menuController.isMenuVisible ) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 如果 UIPanGestureRecognizer 对象处于“变化后”状态</span><br><span class="line">    if (gr.state == UIGestureRecognizerStateChanged) &#123;</span><br><span class="line">        // 获取手指的拖移距离</span><br><span class="line">        CGPoint translation = [gr translationInView:self];</span><br><span class="line">        // 将拖移距离加至选中的线条的起点和终点</span><br><span class="line">        CGPoint begin = self.selectedLine.begin;</span><br><span class="line">        CGPoint end = self.selectedLine.end;</span><br><span class="line">        begin.x += translation.x;</span><br><span class="line">        begin.y += translation.y;</span><br><span class="line">        end.x += translation.x;</span><br><span class="line">        end.y += translation.y;</span><br><span class="line">        // 为选中的线段设置新的起点和和终点</span><br><span class="line">        self.selectedLine.begin = begin;</span><br><span class="line">        self.selectedLine.end = end;</span><br><span class="line">        // 重画视图</span><br><span class="line">        [self setNeedsDisplay];</span><br><span class="line">        // 使该对象增量地报告拖移距离</span><br><span class="line">        // ：将手指的当前位置设置为拖移手势的起始位置</span><br><span class="line">        [gr setTranslation:CGPointZero inView:self];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><a href="https://github.com/Andy0570/TouchTracker.git" target="_blank" rel="noopener">GitHub源码</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/10/13/Cocoapods 安装及使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/10/13/Cocoapods 安装及使用/" class="post-title-link" itemprop="url">Cocoapods 安装及使用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-13 14:31:00" itemprop="dateCreated datePublished" datetime="2016-10-13T14:31:00+08:00">2016-10-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:13:44" itemprop="dateModified" datetime="2019-04-28T15:13:44+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-开源框架/" itemprop="url" rel="index"><span itemprop="name">iOS 开源框架</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">5.8k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">5 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071202.png" alt></p>
<p>&lt;!-- more --&gt;</p>
<ul>
<li>GitHub源码:<a href="https://github.com/CocoaPods/CocoaPods" target="_blank" rel="noopener">CocoaPods/<strong>CocoaPods</strong></a></li>
<li>star:10000+</li>
</ul>
<p>它是用Ruby写的，并划分为多个 gem包。它依赖于 Ruby环境</p>
<h3>安装步骤：</h3>
<ol>
<li>
<p>先更新系统的Ruby环境。
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo gem update --system  # 这里请翻墙一下</span><br><span class="line">gem -v                    # 查看已安装的 Ruby 版本（最新版本：<span class="number">2.7</span><span class="number">.8</span>，截止<span class="number">2018</span>年<span class="number">11</span>月<span class="number">27</span>日）</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>安装CocoPods先下载相关资源。
默认的镜像资源服务器被天朝给墙了。所以需要先更换源地址，然后再安装。</p>
</li>
</ol>
<ul>
<li>
<p>移除原先的源</p>
<p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem sources --<span class="built_in">remove</span> https:<span class="comment">//rubygems.org/</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>指定新源</p>
<p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gem sources -<span class="built_in">add</span> http<span class="variable">s:</span>//gems.<span class="keyword">ruby</span>-china.<span class="keyword">com</span>/</span><br><span class="line">// Attention：之前的地址是 http<span class="variable">s:</span>//gems.<span class="keyword">ruby</span>-china.org，不知道什么时候莫名改成了 http<span class="variable">s:</span>//gems.<span class="keyword">ruby</span>-china.<span class="keyword">com</span> 。</span><br></pre></td></tr></table></figure></p>
<p>相关阅读：
<a href="https://ruby-china.org/topics/29250" target="_blank" rel="noopener">Ruby China 的 RubyGems 镜像上线</a>
<a href="https://gems.ruby-china.org" target="_blank" rel="noopener">RubyGems 镜像</a></p>
</li>
<li>
<p>验证新源是否替换成功</p>
<p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">gem sources -l</span></span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<ol start="3">
<li>安装Cocoapods.
(1) <s><code>$sudo gem install cocoapods</code></s>
备注：苹果系统升级 OS X EL Capitan 后改为 :
<code>$sudo gem install -n /usr/local/bin cocoapods</code>
(2) <code>$pod setup</code></li>
</ol>
<h3>使用CocoaPods的镜像索引</h3>
<p>第一次执行 <code>pod setup</code>时，CocoaPods 会将所有项目的 Podspec 文件更新到本地的 ~/.cocoapods/ 目录下，该索引文件较大且更新非常缓慢。
将 CocoaPods 设置成 gitcafe 或者  occhina 镜像，执行索引更新时会快很多。</p>
<p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pod repo remove <span class="literal">master</span></span><br><span class="line">pod repo add <span class="keyword">master</span> <span class="title">https</span>://gitcafe.com/akuandev/Specs.git</span><br><span class="line">pod repo update</span><br></pre></td></tr></table></figure></p>
<p>也可以将以上代码中的 <code>https://gitcafe.com/akuandev/Specs.git</code>  替换成 <code>http://git.oschina.net/akuandev/Specs.git</code> 即可使用 occhina 上的镜像。</p>
<p>添加新源时报错：
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ pod repo add <span class="keyword">master</span> <span class="title">https</span>://git.coding.net/CocoaPods/Specs.git</span><br><span class="line">[!] To setup the <span class="keyword">master</span> <span class="title">specs</span> repo, please run `pod setup`.</span><br><span class="line">➜  ~ git <span class="keyword">clone</span> <span class="title">https</span>://git.coding.net/CocoaPods/Specs.git ~/.cocoapods/repos/<span class="literal">master</span></span><br></pre></td></tr></table></figure></p>
<p>—— 参考自：https://lamjack.github.io/2016/cocoapods-install-and-use/</p>
<h3>搜索相关框架：</h3>
<p>打开终端，输入以下代码：</p>
<p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="built_in">search</span> 框架名   # 如<span class="symbol">:</span> pod <span class="built_in">search</span> AFNetworking</span><br></pre></td></tr></table></figure></p>
<p>链接：<a href="http://blog.csdn.net/zhaoweixing1989/article/details/13997917" target="_blank" rel="noopener">mac终端命令</a></p>
<h3>项目中使用：</h3>
<ol>
<li>创建Podfile文件。
新建项目。<strong>在终端CD到项目的主文件夹(就是包含 项目.xcodeproj 的文件)。</strong>
输入命令：</li>
</ol>
<p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>pod init</span><br><span class="line"><span class="variable">$ </span>vim Podfile</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>编辑Podfile
命令模式：i -&gt;输入模式 ESC -&gt;命令模式 shift + ： -&gt;末行模式 wq 保存退出</li>
</ol>
<p>i进入模式 ESC退出</p>
<p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Uncomment this line to define a global platform for your project</span></span><br><span class="line">platform <span class="symbol">:ios</span>, <span class="string">'8.0'</span></span><br><span class="line">inhibit_all_warnings!    <span class="comment"># 屏蔽所有第三方框架警告</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'ProjectName'</span> <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uncomment this line if you're using Swift or would like to use dynamic frameworks</span></span><br><span class="line">  <span class="comment"># use_frameworks!</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Pods for ProjectName</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 网络库</span></span><br><span class="line">  pod <span class="string">'AFNetworking'</span></span><br><span class="line">  pod <span class="string">'YTKNetwork'</span></span><br><span class="line">  pod <span class="string">'SDWebImage'</span></span><br><span class="line">  pod <span class="string">'Reachability'</span>, <span class="string">'~&gt; 3.2'</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 服务类</span></span><br><span class="line">  pod <span class="string">'QQ_XGPush'</span></span><br><span class="line">  pod <span class="string">'Bugly'</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># UI</span></span><br><span class="line">  pod <span class="string">'Masonry'</span></span><br><span class="line">  pod <span class="string">'MBProgressHUD'</span></span><br><span class="line">  pod <span class="string">'MJRefresh'</span></span><br><span class="line">  pod <span class="string">'EAIntroView'</span></span><br><span class="line">  pod <span class="string">'SDCycleScrollView'</span></span><br><span class="line">  pod <span class="string">'DZNEmptyDataSet'</span></span><br><span class="line">  pod <span class="string">'XLForm'</span></span><br><span class="line">  pod <span class="string">'SHSPhoneComponent'</span></span><br><span class="line">  pod <span class="string">'BEMCheckBox'</span></span><br><span class="line">  pod <span class="string">'SCLAlertView-Objective-C'</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 工具组件类</span></span><br><span class="line">  pod <span class="string">'ChameleonFramework'</span></span><br><span class="line">  pod <span class="string">'FDFullscreenPopGesture'</span></span><br><span class="line">  pod <span class="string">'IQKeyboardManager'</span></span><br><span class="line">  pod <span class="string">'YYKit'</span></span><br><span class="line">  pod <span class="string">'UIAlertController+Blocks'</span></span><br><span class="line">  pod <span class="string">'LBXScan/LBXNative'</span></span><br><span class="line">  pod <span class="string">'LBXScan/UI'</span></span><br><span class="line">  pod <span class="string">'UITableView+FDTemplateLayoutCell'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'ProjectNameTests'</span> <span class="keyword">do</span></span><br><span class="line">  inherit! <span class="symbol">:search_paths</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="string">"Podfile"</span> <span class="number">52</span>L, <span class="number">999</span>C</span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>
<p>保存文件后，安装第三方库
每次更改Podfile 都要执行<code>pod update</code>（记得cd 到项目主文件下）
输入命令：<code>$pod install</code></p>
</li>
<li>
<p>安装完成，此时项目文件中会多出 .xcworkspace 文件，以后就通过它来打开项目。</p>
</li>
</ol>
<p>More: <a href="http://www.jianshu.com/p/8af475c4f717" target="_blank" rel="noopener">Podfile语法参考(译)</a></p>
<h3>常见错误：</h3>
<p><strong>错误1</strong>：</p>
<p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Error </span>fetching http://ruby.taobao.org/:</span><br><span class="line">bad response Not Found 404 (http://ruby.taobao.org/specs.4.8.gz)</span><br></pre></td></tr></table></figure></p>
<p>解决方案：把安装流程中 <code>gem sources -a http://ruby.taobao.org/</code>  改为 <code>gem sources -a https://ruby.taobao.org/</code></p>
<p><strong>错误2</strong>：</p>
<p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ERROR:  </span>While executing gem ... (Errno::EPERM)</span><br><span class="line">Operation not permitted - /usr/bin/pod</span><br></pre></td></tr></table></figure></p>
<p>解决方案：苹果系统升级OS X EL Capitan后会出现的插件错误，将安装流程安装CocoaPods 的 (1)sudo gem install cocoapods ——&gt;改为sudo gem install -n /usr/local/bin cocoapods</p>
<p><strong>错误3</strong>:</p>
<p><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ERROR</span>:<span class="type">The</span> dependency <span class="keyword">is</span> <span class="keyword">not</span> used <span class="keyword">in</span> <span class="built_in">any</span> concrete target</span><br><span class="line"><span class="type">The</span> dependency <span class="type">AFNetworking</span> <span class="keyword">is</span> <span class="keyword">not</span> used <span class="keyword">in</span> <span class="built_in">any</span> concrete target</span><br></pre></td></tr></table></figure></p>
<p>解决方案：</p>
<ol>
<li>
<p>安装cocoapods的预览版本</p>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem <span class="keyword">install</span> cocoapods <span class="comment">--pre</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>修改Podfile格式</p>
<p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">platform</span> :ios, <span class="string">'8.0'</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'MyApp'</span> <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">pod <span class="string">'AFNetworking'</span>, <span class="string">'~&gt; 2.6'</span></span><br><span class="line">pod <span class="string">'ORStackView'</span>, <span class="string">'~&gt; 3.0'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>*里面的 MyApp 记得替换为自己攻城里面的target。</p>
</li>
</ol>
<ol start="3">
<li>
<p>更新pod</p>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="keyword">install</span> / pod <span class="keyword">update</span></span><br></pre></td></tr></table></figure></p>
</li>
</ol>
<p><strong>错误4</strong></p>
<p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">error: </span>RPC failed; curl 56 LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54</span><br></pre></td></tr></table></figure></p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071204.jpg" alt="image"></p>
<p>SSL证书错误，解决方案参考：https://gems.ruby-china.org/</p>
<p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~<span class="string">/.gemrc</span>  <span class="comment"># 配置该文件，关闭SSL验证</span></span><br></pre></td></tr></table></figure></p>
<p>文件如下：</p>
<p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="meta">:backtrace:</span> false</span><br><span class="line"><span class="meta">:bulk_threshold:</span> 1000</span><br><span class="line"><span class="meta">:sources:</span></span><br><span class="line"><span class="meta">-</span> https://gems.ruby-china.org/</span><br><span class="line"><span class="meta">:ssl_verify_mode:</span> 0   # 新增此处代码</span><br><span class="line"><span class="meta">:update_sources:</span> true</span><br><span class="line"><span class="meta">:verbose:</span> true</span><br></pre></td></tr></table></figure></p>
<p><strong>错误 5</strong></p>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RPC failed; curl 18 transfer closed <span class="keyword">with</span> outstanding <span class="keyword">read</span> <span class="keyword">data</span> remaining</span><br></pre></td></tr></table></figure></p>
<p>解决方案，增加缓冲区内存：</p>
<p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>http.postBuffer 524288000</span><br></pre></td></tr></table></figure></p>
<p><strong>错误6</strong>
Xcode 9.3 下运行 <code>pod init</code> 报错：</p>
<h3>Error</h3>
<p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">RuntimeError - [Xcodeproj] Unknown object version.</span><br><span class="line">/usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.4.0/<span class="title">gems</span>/<span class="title">xcodeproj</span>-1.5.2/<span class="title">lib</span>/<span class="title">xcodeproj</span>/<span class="title">project</span>.<span class="title">rb</span>:217:<span class="title">in</span> `<span class="title">initialize_from_file</span>'</span></span><br><span class="line">/usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.4.0/<span class="title">gems</span>/<span class="title">xcodeproj</span>-1.5.2/<span class="title">lib</span>/<span class="title">xcodeproj</span>/<span class="title">project</span>.<span class="title">rb</span>:102:<span class="title">in</span> `<span class="title">open</span>'</span></span><br><span class="line">/usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.4.0/<span class="title">gems</span>/<span class="title">cocoapods</span>-1.3.1/<span class="title">lib</span>/<span class="title">cocoapods</span>/<span class="title">command</span>/<span class="title">init</span>.<span class="title">rb</span>:41:<span class="title">in</span> `<span class="title">validate!</span>'</span></span><br><span class="line">/usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.4.0/<span class="title">gems</span>/<span class="title">claide</span>-1.0.2/<span class="title">lib</span>/<span class="title">claide</span>/<span class="title">command</span>.<span class="title">rb</span>:333:<span class="title">in</span> `<span class="title">run</span>'</span></span><br><span class="line">/usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.4.0/<span class="title">gems</span>/<span class="title">cocoapods</span>-1.3.1/<span class="title">lib</span>/<span class="title">cocoapods</span>/<span class="title">command</span>.<span class="title">rb</span>:52:<span class="title">in</span> `<span class="title">run</span>'</span></span><br><span class="line">/usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.4.0/<span class="title">gems</span>/<span class="title">cocoapods</span>-1.3.1/<span class="title">bin</span>/<span class="title">pod</span>:55:<span class="title">in</span> `&lt;<span class="title">top</span> (<span class="title">required</span>)&gt;'</span></span><br><span class="line">/usr/local/bin/<span class="symbol">pod:</span><span class="number">23</span>:in <span class="string">`load'</span></span><br><span class="line"><span class="string">/usr/local/bin/pod:23:in `</span>&lt;main&gt;<span class="string">'</span></span><br></pre></td></tr></table></figure></p>
<p>解决方法：安装Cocoapods预览版本:
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem <span class="keyword">install</span> cocoapods <span class="comment">--pre</span></span><br></pre></td></tr></table></figure></p>
<p>参考：<a href="https://github.com/CocoaPods/CocoaPods/issues/7458" target="_blank" rel="noopener">RuntimeError - [Xcodeproj] Unknown object version. </a></p>
<p><strong>错误7</strong>
<code>pod update</code> 报错，(Gem::GemNotFoundException)：
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ pod update</span><br><span class="line">Traceback (most recent call <span class="keyword">last</span>):</span><br><span class="line">	<span class="number">2</span>: <span class="keyword">from</span> /usr/<span class="keyword">local</span>/bin/pod:<span class="number">23</span>:<span class="keyword">in</span> `&lt;main&gt;'</span><br><span class="line">	<span class="number">1</span>: <span class="keyword">from</span> /usr/<span class="keyword">local</span>/Cellar/ruby/<span class="number">2.6</span><span class="number">.0</span>_1/lib/ruby/<span class="number">2.6</span><span class="number">.0</span>/rubygems.rb:<span class="number">302</span>:<span class="keyword">in</span> `activate_bin_path'</span><br><span class="line">/usr/<span class="keyword">local</span>/Cellar/ruby/<span class="number">2.6</span><span class="number">.0</span>_1/lib/ruby/<span class="number">2.6</span><span class="number">.0</span>/rubygems.rb:<span class="number">283</span>:<span class="keyword">in</span> `find_spec_for_exe': can't find gem cocoapods (&gt;= <span class="number">0.</span>a) <span class="keyword">with</span> executable pod (Gem::GemNotFoundException)</span><br></pre></td></tr></table></figure></p>
<p>解决方案：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新 gem 版本</span></span><br><span class="line">sudo gem <span class="keyword">update</span> <span class="comment">--system</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载 cocoapods</span></span><br><span class="line">gem <span class="keyword">install</span> cocoapods</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新安装 cocoapods 到指定目录</span></span><br><span class="line">sudo gem <span class="keyword">install</span> cocoapods -n /usr/<span class="keyword">local</span>/<span class="keyword">bin</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>默认情况下，安装 cocoapods 时（<code>sudo gem install cocoapods</code>）会被安装到 <code>/usr/bin</code> 目录下，但是苹果为了系统安全，该目录禁止任何写入，root 用户也不能。</p>
</blockquote>
<h3>参考：</h3>
<ul>
<li><a href="http://blog.devtang.com/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/" target="_blank" rel="noopener">用CocoaPods做iOS程序的依赖管理 @唐巧</a> （阅读难度：★★）</li>
<li><a href="http://www.cnblogs.com/zxs-19920314/p/4985476.html" target="_blank" rel="noopener">iOS 最新版 CocoaPods 的安装流程</a> （阅读难度：★）</li>
<li><a href="https://www.jianshu.com/p/8111873cfaa9" target="_blank" rel="noopener">CocoaPods 公有库</a></li>
<li><a href="http://studentdeng.github.io/blog/2013/09/13/cocoapods-tutorial/" target="_blank" rel="noopener">Cocoapods 入门 @不会开机的男孩</a></li>
<li><a href="http://www.jianshu.com/p/1711e131987d" target="_blank" rel="noopener">看一遍就会的CocoaPods的安装和使用教程</a>
概述：第三方库依赖管理工具，管理第三方库。</li>
<li><a href="http://code4app.com/article/cocoapods-install-usage" target="_blank" rel="noopener">CocoaPods安装和使用教程</a></li>
<li><a href="https://skyline75489.github.io/post/2015-8-14_ios_static_dynamic_framework_learning.html" target="_blank" rel="noopener">iOS 静态库，动态库与 Framework</a></li>
<li>http://www.jianshu.com/p/8af475c4f717</li>
<li>http://ios.jobbole.com/90957/</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/10/10/iOS 编程：加载Storyboard中的指定视图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/10/10/iOS 编程：加载Storyboard中的指定视图/" class="post-title-link" itemprop="url">iOS 编程：加载Storyboard中的指定视图</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-10 09:46:00" itemprop="dateCreated datePublished" datetime="2016-10-10T09:46:00+08:00">2016-10-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 22:48:22" itemprop="dateModified" datetime="2019-05-01T22:48:22+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">764</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>参考：</p>
<ul>
<li><a href="http://blog.csdn.net/kyfxbl/article/details/17687265" target="_blank" rel="noopener">用代码创建并实例化在storyboard中声明的ViewController  </a></li>
<li><a href="http://www.jianshu.com/p/88d6173665f4" target="_blank" rel="noopener">IOS开发－使用Storyboard进行界面跳转及传值</a></li>
</ul>
<p>选中Storyboard上的指定ViewController，设置identity inspector（身份检查器）中的 Storyboard ID 值。
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071217.jpg" alt></p>
<pre><code>  //        HQLLoginViewController *loginViewController = [[HQLLoginViewController alloc] init];
 //        [self.navigationController pushViewController:loginViewController animated:YES];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:[NSBundle mainBundle]];
    HQLLoginViewController *loginViewController = [storyboard instantiateViewControllerWithIdentifier:@&quot;loginViewController&quot;];
    [self.navigationController pushViewController:loginViewController animated:YES];
</code></pre>
<ul>
<li>跳转到 <strong>Segue</strong> 连接的下一个视图控制器</li>
</ul>
<p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> <span class="symbol">performSegueWithIdentifier:</span>@<span class="string">"ID_step2"</span> <span class="symbol">sender:</span><span class="keyword">self</span>];</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/10/08/iOS 编程：AppIcon和LaunchScreen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/10/08/iOS 编程：AppIcon和LaunchScreen/" class="post-title-link" itemprop="url">iOS 编程：AppIcon和LaunchScreen</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-08 10:24:00" itemprop="dateCreated datePublished" datetime="2016-10-08T10:24:00+08:00">2016-10-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 22:59:15" itemprop="dateModified" datetime="2019-05-01T22:59:15+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">777</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>参考文章：</p>
<ul>
<li><a href="http://www.jianshu.com/p/49affaef8368" target="_blank" rel="noopener">iOS开发添加静态启动页,icon图标及APP名字</a></li>
<li><a href="http://www.jianshu.com/p/f69c8dbc0ae8" target="_blank" rel="noopener">设置应用程序图标和启动背景图</a></li>
<li><a href="http://www.jianshu.com/p/2f1149269cd0" target="_blank" rel="noopener">通过LaunchScreen自定义启动动画</a></li>
<li><a href="http://www.jianshu.com/p/e52806516139" target="_blank" rel="noopener">iOS启动图和开屏广告图，类似网易</a></li>
</ul>
<p>&lt;!-- more --&gt;</p>
<h1>AppIcon</h1>
<p>在XCode8之前，设置应用程序icon我都是用的一款非常好用的第三方插件RTImageAssets，<a href="https://github.com/NSLog-YuHaitao/Xcode-Plugins-4" target="_blank" rel="noopener">gitHub地址</a>，但是自从更新XCode8之后第三方插件便无法正常使用。于是找到了一个解决办法，<a href="http://www.jianshu.com/p/86dcccaec4c3" target="_blank" rel="noopener">解决Xcode8第三方插件失效问题</a>,亲测可用。</p>
<h3>使用RTImageAssets插件生成AppIcon</h3>
<p>如果还没有安装该插件可以看这里，<a href="http://www.jianshu.com/p/3b0ea8901bc7" target="_blank" rel="noopener">iOS开发中,推荐几款好用的Xcode插件</a>,或者自行Google安装。</p>
<ul>
<li>
<p>当APP没有使用Icon而在模拟器上调试运行时，系统会生成默认的ICON。像这样：<br>
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071032.jpg" alt></p>
</li>
<li>
<p>找到添加AppIcon的位置,①选中项目名称，②选择general;③下拉找到App Icons and Launch Images;④点击“→”</p>
</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071032-1.jpg" alt></p>
<ul>
<li>
<p>接着界面会显示放置AppIcon的地方，如果没有的话可以移动鼠标在如下导航栏空白位置鼠标右击新建一个。
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071035.jpg" alt></p>
</li>
<li>
<p>在项目中导入一个尺寸为1024×1024的图片，这里随便找一张来自网络的butterfly.png，然后返回到App Icon set 页面，在菜单栏打开 File ——&gt; ImageAssets ——&gt; AppIcons.
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071036.jpg" alt></p>
</li>
<li>
<p>然后系统会弹出设置Icon页面，只需要将符合要求的butterfly.png图标拖入页面内，点击 Generate，关闭该窗口。
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071037.jpg" alt></p>
</li>
<li>
<p>此时所有需要的AppIcon已经自动生成了。
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071037-1.jpg" alt></p>
</li>
<li>
<p>cmd+R 编译运行验证Icon设置成功。<br>
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071039.jpg" alt></p>
</li>
</ul>
<p>#LaunchScreen
参考</p>
<ul>
<li><a href="http://www.jianshu.com/p/19a3136043dd" target="_blank" rel="noopener">iOS适配启动页</a></li>
</ul>
<h3>未完待续...</h3>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/09/30/《iOS编程（第四版）》Demo：Needfeed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/09/30/《iOS编程（第四版）》Demo：Needfeed/" class="post-title-link" itemprop="url">《iOS编程（第四版）》Demo：Needfeed</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-09-30 15:35:00" itemprop="dateCreated datePublished" datetime="2016-09-30T15:35:00+08:00">2016-09-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 22:44:11" itemprop="dateModified" datetime="2019-05-01T22:44:11+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">13k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">12 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h2>点击TableView列表展示WebView</h2>
<p>注： <strong>本文参考 <em>IOS编程（第四版）</em> 第21章 <em>web服务与UIwebView</em> 相关内容开发一款名为Nerdfeed的应用。展示 <em>UITableView</em> 与 <em>UIWebView</em> 相关知识内容，以为整理记录，作为日后开发过程中参考并使用。</strong></p>
<p><strong>Needfeed</strong> 的作用是读取并通过 <strong>UITableView</strong> 显示 Big Nerd Ranch 提供的在线课程，选择某项课程会打开相应课程的网页。Demo如下：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071015.gif" alt="Needfeed"></p>
<p>要实现以上Demo所示的Needfeed应用，需要完成两项任务：</p>
<ol>
<li>连接指定的web服务并获取数据，然后根据得到的数据创建模型对象。</li>
<li>用UIWebView显示Web内容。</li>
</ol>
<p>&lt;!-- more --&gt;</p>
<h2>1.创建HQLCoursesViewController类，并将其父类设置为UITableViewController</h2>
<p><code>@interface HQLCoursesViewController : UITableViewController</code></p>
<h3>遵守UITableViewDataSource协议的类需要实现数据源方法</h3>
<blockquote>
<p>API文档描述 &gt; The UITableViewDataSource protocol is adopted by an object that mediates the application’s data model for a UITableView object. The data source provides the table-view object with the information it needs to construct and modify a table view.</p>
</blockquote>
<p>翻译：当一个对象需要为应用程序的UITableView对象提供数据源模型时，采用UITableViewDataSource协议。数据源则为table-view对象提供它需要建立和修改列表视图的信息。</p>
<p>UITableViewDataSource协议必须（@requored）实现的2个方法：</p>
<ul>
<li>
<p>-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;<br>
向数据源获取并返回列表视图中给定section区域中的行数。</p>
</li>
<li>
<p>-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;<br>
在列表视图的特定单元格位置插入请求到的数据</p>
</li>
</ul>
<p>因此，我们先在HQLCoursesViewController.m中实现空的数据源方法，之后再作修改。</p>
<p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回行数</span></span><br><span class="line">- (<span class="built_in">NSInteger</span>) tableView:(<span class="built_in">UITableView</span> *)tableView</span><br><span class="line">  numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取用于显示第section个表格段、第row行数据的UITableViewCell对象</span></span><br><span class="line">- (<span class="built_in">UITableViewCell</span> *) tableView:(<span class="built_in">UITableView</span> *)tableView</span><br><span class="line">          cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2>2.在AppDelegate.m中创建视图控制器对象</h2>
<p>需要创建<strong>UINavigationControl</strong>对象，并将其设置为<strong>UIWindow</strong>的根视图控制器</p>
<pre><code>//创建coursesViewController对象 cvc
HQLCoursesViewController *cvc = [[HQLCoursesViewController alloc] initWithStyle:UITableViewStylePlain];
   
//UINavigationController对象 masterNav 是 cvc 的根视图控制器
UINavigationController *masterNav = [[UINavigationController alloc] initWithRootViewController:cvc];

self.window.rootViewController = masterNav;
</code></pre>
<h2>NSURL、NSURLRequest、NSURLSession和NSURLSessionTask</h2>
<p>要从web服务器获取数据，Nerdfeed需要使用NSURL、NSURLRequest、NSURLSession和NSURLSessionTask四个类。
推荐阅读：[^1]
[^1]:http://www.cnblogs.com/kenshincui/p/4042190.html<br>
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071017.jpg" alt="关系图"></p>
<ul>
<li><strong>NSURL</strong>对象负责以<strong>URL</strong>的格式保存web应用的位置。对大多数web服务，<strong>URL</strong>将包含基地址（base address）、web应用名和需要传送的参数。</li>
<li><strong>NSURLRequest</strong>对象负责保存需要传送给web服务器的全部数据，这些数据包括：一个NSURL对象、缓存方法（caching policy）、等待web服务器响应的最长时间和需要通过HTTP协议传送的额外信息（<strong>NSMutableURLRequest</strong>是<strong>NSURLRequest</strong>的可变子类）。</li>
<li>每一个<strong>NSURLSessionTask</strong>对象都表示一个<strong>NSURLRequest</strong>的生命周期。<strong>NSURLSessionTask</strong>可以跟踪<strong>NSURLRequest</strong>的状态，还可以对<strong>NSURLRequest</strong>执行取消、暂停和继续操作。<strong>NSURLSessionTask</strong>有多种不同功能的子类，包括<strong>NSURLSession-DataTask</strong>,<strong>NSURLSessionUploadTask</strong>和<strong>NSURLSessionDownloadTask</strong>.</li>
<li><strong>NSURLSession</strong>对象可以看作是一个生产<strong>NSURLSessionTask</strong>对象的工厂。可以设置其生产出来的<strong>NSURLSessionTask</strong>对象的通用属性，例如请求的内容、是否允许在蜂窝网络下发送请求等。<strong>NSURLSession</strong>对象还有一个功能强大的委托，可以跟踪<strong>NSURLSessionTask</strong>对象的状态、处理服务器的认证要求等。</li>
</ul>
<h2>3.构建URL与发送请求</h2>
<h2>NSURLSession</h2>
<p>NSURLSession有两种不同的含义：第一种含义指NSURLSession类；第二种含义指一组用于处理网络请求的API。
此处使用第一种含义，首先在HQLCoursesViewController.m的类扩展中添加一个属性，用于保存NSURLSession对象：</p>
<p><code>@property (nonatomic) NSURLSession *session;</code></p>
<ol>
<li>接下来覆盖<strong>HQLCoursesViewController.m</strong>的<strong>initWithStyle</strong>：方法，创建<strong>NSURLSession</strong>对象</li>
</ol>
<pre><code><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">instancetype</span>) initWithStyle:(<span class="built_in">UITableViewStyle</span>)style &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建NSURLSession对象</span></span><br><span class="line"><span class="keyword">self</span> = [<span class="keyword">super</span> initWithStyle:style];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.navigationItem.title = <span class="string">@"BNRCourses"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSURLSessionConfiguration</span> *config = [<span class="built_in">NSURLSessionConfiguration</span> defaultSessionConfiguration];</span><br><span class="line">    </span><br><span class="line">    _session = [<span class="built_in">NSURLSession</span> sessionWithConfiguration:config</span><br><span class="line">                                        <span class="comment">//NSURLSessionConfiguration对象</span></span><br><span class="line">                                             delegate:<span class="literal">nil</span>   <span class="comment">//委托</span></span><br><span class="line">                                        delegateQueue:<span class="literal">nil</span>]; <span class="comment">//委托队列</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
<ol start="2">
<li>
<p>在<strong>HQLCoursesViewController.m</strong>中实现<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">此处NSURLRequest使用默认的**GET**请求方法，若要使用**POST**方法，需要设置**POST**请求体。</span><br></pre></td></tr></table></figure></p>
<p>// 获取数据方法
-(void) fetchFeed {</p>
<p>//创建NSURLRequest请求对象
NSString *requestString = @&quot;http://bookapi.bignerdranch.com/private/courses.json&quot;;
NSURL *url = [NSURL URLWithString:requestString];
NSURLRequest *req = [NSURLRequest requestWithURL:url];</p>
<p>//使用NSURLSession对象创建一个NSURLSessionDataTask对象，将NSURLRequest对象发送给服务器
NSURLSessionDataTask *dataTask = [self.session dataTaskWithRequest:req
completionHandler://block对象
^(NSData * _Nullable data,
NSURLResponse * _Nullable response,
NSError * _Nullable error) {
//接收数据<br>
NSString *json = [[NSString alloc] initWithData:data
encoding:NSUTF8StringEncoding];
NSLog(@&quot;%@&quot;,json);</p>
<p>//NSURLSessionDataTask在刚创建的时候处于暂停状态，需要手动调用resume方法恢复,让NSURLSessionDataTask开始向服务器发送请求。
[dataTask resume];<br>
}
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. Nerdfeed应该在创建HQLCoursesViewController对象后就发起网络请求。修改*<span class="strong">*HQLCoursesViewController.m*</span><span class="strong">*的*</span><span class="strong">*initWithStyle*</span><span class="strong">*：方法，添加调用 *</span><span class="strong">*fetchFeed*</span><span class="strong">*的方法。</span></span><br><span class="line"><span class="strong">session对象创建完成后调用```[self fetchFeed];</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">	- (<span class="keyword">instancetype</span>) initWithStyle:(<span class="built_in">UITableViewStyle</span>)style &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建NSURLSession对象</span></span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithStyle:style];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.navigationItem.title = <span class="string">@"BNRCourses"</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSURLSessionConfiguration</span> *config = [<span class="built_in">NSURLSessionConfiguration</span> defaultSessionConfiguration];</span><br><span class="line">        </span><br><span class="line">        _session = [<span class="built_in">NSURLSession</span> sessionWithConfiguration:config</span><br><span class="line">                                            <span class="comment">//NSURLSessionConfiguration对象</span></span><br><span class="line">                                                 delegate:<span class="literal">nil</span>   <span class="comment">//委托</span></span><br><span class="line">                                            delegateQueue:<span class="literal">nil</span>]; <span class="comment">//委托队列</span></span><br><span class="line">        [<span class="keyword">self</span> fetchFeed];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</li>
</ol>
<h2>JSON数据</h2>
<ul>
<li>JSON数据只包含有限的几种基础对象，用于表示来自服务器的模型对象，例如数组、字典、字符串和数字。而每个JOSN文件是由这些基础对象嵌套组合而成的。</li>
</ul>
<h2>4.解析JSON数据</h2>
<ul>
<li><strong>NSJSONSerialization</strong>类：用于解析JSON数据</li>
<li><strong>NSJSONSerialization</strong>可以将JSON数据转换为Object-C对象</li>
<li><strong>字典</strong>会转换为<strong>NSDictionary</strong>对象；<strong>数组</strong>会转换为<strong>NSArray</strong>对象；<strong>字符串</strong>会转换为<strong>NSString</strong>对象；<strong>数字</strong>会转换为<strong>NSNumber</strong>对象</li>
</ul>
<p>删除</p>
<p><s>NSString *json = [[NSString alloc] initWithData:data
encoding:NSUTF8StringEncoding];</s><br>
~~NSLog(@&quot;%@&quot;,json); ~~</p>
<p>修改为</p>
<pre><code>NSDictionary *jsonObject = [NSJSONSerialization JSONObjectWithData:data
                                                               options:0
                                                                 error:nil];
NSLog(@&quot;%@&quot;,jsonObject);
</code></pre>
<p>在HQLCoursesViewController.m的类扩展中添加一个属性用于保存在线课程数组。数组中的每一个元素都是一个NSDictionary对象，表示一项课程的详细信息。</p>
<pre><code>@interface HQLCoursesViewController () 

@property (nonatomic) NSURLSession *session;

//保存在线课程数组
@property (nonatomic,copy) NSArray *courses;

@end
</code></pre>
<p>然后修改NSURLSessionDataTask的completionHandler，</p>
<p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURLSessionDataTask</span> *dataTask = [<span class="keyword">self</span>.session dataTaskWithRequest:req</span><br><span class="line">                                                     completionHandler: <span class="comment">//block对象</span></span><br><span class="line">                                      ^(<span class="built_in">NSData</span> * _Nullable data,</span><br><span class="line">                                        <span class="built_in">NSURLResponse</span> * _Nullable response,</span><br><span class="line">                                        <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 解析JSON数据</span></span><br><span class="line">        <span class="built_in">NSDictionary</span> *jsonObject = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData:data</span><br><span class="line">                                                                   options:<span class="number">0</span></span><br><span class="line">                                                                     error:<span class="literal">nil</span>];</span><br><span class="line"> 		 <span class="comment">//NSLog(@"%@",jsonObject)</span></span><br><span class="line">        <span class="comment">//将NSDictionary代表的课程存入数组</span></span><br><span class="line">        <span class="keyword">self</span>.courses = jsonObject[<span class="string">@"courses"</span>];</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,<span class="keyword">self</span>.courses);</span><br><span class="line">        </span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//NSURLSessionDataTask在刚创建的时候处于暂停状态</span></span><br><span class="line">    [dataTask resume];  <span class="comment">//手动调用resume方法恢复</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来修改<strong>UITableView</strong>的数据源方法，将课程的title显示在相应的<strong>UITableViewCell</strong>中。最后还需要覆盖<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">	- (void) viewDidLoad &#123;</span><br><span class="line">	</span><br><span class="line">	[super viewDidLoad];</span><br><span class="line">	</span><br><span class="line">	//重用UITableViewCell，向表视图注册应该使用的UITableViewCell</span><br><span class="line">	[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@&quot;UITableViewCell&quot;];</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	//获取数据源</span><br><span class="line">	//UITableViewDataSource协议必须（@requored）实现的2个方法</span><br><span class="line">	////返回行数</span><br><span class="line">	- (NSInteger) tableView:(UITableView *)tableView</span><br><span class="line">	numberOfRowsInSection:(NSInteger)section &#123;</span><br><span class="line">	</span><br><span class="line">	//返回课程数目</span><br><span class="line">	return self.courses.count;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	//获取用于显示第section个表格段、第row行数据的UITableViewCell对象</span><br><span class="line">	- (UITableViewCell *) tableView:(UITableView *)tableView</span><br><span class="line">	      cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">	</span><br><span class="line">	//创建或重用UITableViewCell对象</span><br><span class="line">	UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;UITableViewCell&quot;</span><br><span class="line">	                         forIndexPath:indexPath];</span><br><span class="line">	</span><br><span class="line">	NSDictionary *course = self.courses[indexPath.row];</span><br><span class="line">	cell.textLabel.text  = course [@&quot;title&quot;];//设置标题</span><br><span class="line">	return cell;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 主线程</span><br><span class="line">* 主线程有时也被称为用户界面线程（UI thread），这是由于修改用户界面的代码必须在主线程中运行。</span><br><span class="line">* 当web服务请求成功后，**HQLCoursesViewController**需要重新加载**UITableView**对象的数据（调用**UITableView**对象的```reloadData```方法），默认情况下**NSURLSessionDataTask**是在后台线程中执行```completionHandler:```的，为了让```reloadData```方法在主线程中运行，可以使用**dispatch_asynch**函数.</span><br></pre></td></tr></table></figure></p>
<p>...
//将NSDictionary代表的课程存入数组
self.courses = jsonObject[@&quot;courses&quot;];
NSLog(@&quot;%@&quot;,self.courses);</p>
<pre><code>    dispatch_async(dispatch_get_main_queue(), ^{
        //重新加载UITableView对象的数据
        [self.tableView reloadData];
</code></pre>
<p>...</p>
<p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">### 5.UIWebView</span></span><br><span class="line">注：官方建议，以 iOS 8 或者以后的版本运行的应用程序，使用<span class="strong">**WKWebView**</span>类而不是使用<span class="strong">**UIWebView**</span>。</span><br><span class="line"></span><br><span class="line">可参阅对UIWebView、WKWebView官方文档翻译，点击查看：</span><br><span class="line"></span><br><span class="line">[<span class="string">API翻译：UIWebView</span>](<span class="link">http://www.jianshu.com/p/bc935fab4e30</span>) 、  [<span class="string">API翻译：WKWebView</span>](<span class="link">http://www.jianshu.com/p/793d815006c5</span>) 、  [<span class="string">API翻译：WebKit</span>](<span class="link">http://www.jianshu.com/p/18d2f56b8414</span>)    </span><br><span class="line"></span><br><span class="line">课程返回的JSON数据中，每个Course对象都是一个NSDictionary对象，其中含有"url"键，值是一个URL字符串，表示对应的网址。   </span><br><span class="line">新建一个<span class="strong">**HQLWebViewController**</span>对象，父类是<span class="strong">**UIViewController**</span></span><br><span class="line"></span><br><span class="line"><span class="code">	#import &lt;UIKit/UIKit.h&gt;</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	@interface HQLWebViewController : UIViewController </span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	@property (nonatomic) NSURL *URL;</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	@end </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​	</span><br><span class="line">在<span class="strong">**HQLWebViewController.m**</span>中，加入以下代码：</span><br></pre></td></tr></table></figure></p>
<p>@implementation HQLWebViewController</p>
<ul>
<li>
<p>(void) loadView {</p>
<p>UIWebView *webView = [[UIWebView alloc] init];
webView.scalesPageToFit = YES;
self.view = webView ;</p>
</li>
</ul>
<p>}</p>
<ul>
<li>(void) setURL:(NSURL *)URL
{
_URL = URL;
if (_URL) {
NSURLRequest *req = [NSURLRequest requestWithURL:_URL];
[(UIWebView *)self.view loadRequest:req];
}
}</li>
</ul>
<p>@end</p>
<p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在*<span class="strong">*HQLCoursesViewController.h*</span><span class="strong">*中，声明一个新属性，指向*</span><span class="strong">*HQLWebViewController*</span><span class="strong">*。</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">	#import &lt;UIKit/UIKit.h&gt;</span></span><br><span class="line"><span class="strong">	@class HQLWebViewController;</span></span><br><span class="line"><span class="strong">	</span></span><br><span class="line"><span class="strong">	@interface HQLCoursesViewController : UITableViewController</span></span><br><span class="line"><span class="strong">	</span></span><br><span class="line"><span class="strong">	@property (nonatomic) HQLWebViewController *</span>webViewController;</span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在*<span class="strong">*AppDelegate.m*</span><span class="strong">*中，创建*</span><span class="strong">*HQLWebViewController*</span><span class="strong">*对象并将其赋给*</span><span class="strong">*HQLCoursesViewController*</span><span class="strong">*对象的*</span><span class="strong">*webViewController*</span><span class="strong">*属性。</span></span><br></pre></td></tr></table></figure></p>
<pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

HQLCoursesViewController *cvc = [[HQLCoursesViewController alloc] initWithStyle:UITableViewStylePlain];

UINavigationController *masterNav = [[UINavigationController alloc] initWithRootViewController:cvc];

HQLWebViewController *wvc = [[HQLWebViewController alloc] init];
cvc.webViewController = wvc;

self.window.rootViewController = masterNav;
    
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
</code></pre>
<p>}</p>
<p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在*<span class="strong">*HQLCoursesViewController.m*</span><span class="strong">*中导入*</span><span class="strong">*HQLWebViewController.h*</span><span class="strong">*,然后实现*</span><span class="strong">*UITableView*</span><span class="strong">*对象的数据源协议，用户点击*</span><span class="strong">*UITableView*</span><span class="strong">*对象中的某个*</span><span class="strong">*UITableViewCell*</span><span class="strong">*后，NerdFeed会创建*</span><span class="strong">*HQLWebViewController.h*</span><span class="strong">*对象并将其压入*</span><span class="strong">*UINavigationController*</span><span class="strong">*栈。</span></span><br></pre></td></tr></table></figure></p>
<p>//用户更改选择后调用
//创建HQLWebViewController对象并将其压入UINavigationController栈</p>
<ul>
<li>(void) tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
NSDictionary *course = self.courses [indexPath.row];
NSURL *URL = [NSURL URLWithString:course [@&quot;url&quot;]];
self.webViewController.title =course [@&quot;title&quot;];
self.webViewController.URL = URL;
//如果对象不属于splitViewController，则当前设备不是iPad,可以将webViewController压入navigationController栈
if (! self.splitViewController) {
[self.navigationController pushViewController:self.webViewController animated:YES];
}
}
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### <span class="number">6</span>.认证信息</span><br><span class="line">* web服务可以在返回HTTP响应时附带认证要求（authentication challenge）,只有当发起方提供相应的认证信息（比如用户名和密码），且当认证通过后，web服务才会返回真正的HTTP相应。</span><br><span class="line"></span><br><span class="line"><span class="symbol">* 当应用收到认证要求时，NSURLSession的委托会收到```(void)URLSession:task:didReceiveChallenge:completionHandler:```消</span>息，可以在该消息中发送用户名和密码，完成认证。</span><br><span class="line"></span><br><span class="line">打开**HQLCoursesViewController.m**文件，修改```fetchFeed```方法中的URL地址将**http**改为**HTTPS**。</span><br><span class="line"></span><br><span class="line">```NSString *requestString = @<span class="string">"https://bookapi.bignerdranch.com/private/courses.json"</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>还需要在初始化时为NSURLSession设置委托。更新<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        _session = [NSURLSession sessionWithConfiguration:config</span><br><span class="line">                                            //NSURLSessionConfiguration对象</span><br><span class="line">                                                 delegate:self   //设置委托</span><br><span class="line">                                            delegateQueue:nil]; //委托队列</span><br><span class="line"></span><br><span class="line">然后设置使**HQLCoursesViewController**遵守**NSURLSessionDataDelegate**协议：</span><br><span class="line">```@interface HQLCoursesViewController () &lt;NSURLSessionDataDelegate&gt;</span><br></pre></td></tr></table></figure></p>
<p>实现<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>//处理web服务认证</p>
<ul>
<li>
<p>(void) URLSession:(NSURLSession *)session
task:(NSURLSessionTask *)task
didReceiveChallenge:(NSURLAuthenticationChallenge *)challenge
completionHandler:(void (^)(NSURLSessionAuthChallengeDisposition, NSURLCredential * _Nullable))completionHandler {</p>
<p>//凭据
NSURLCredential *cred = [NSURLCredential
credentialWithUser:@&quot;BigNerdRanch&quot;
password:@&quot;AchieveNerdvana&quot;
persistence:NSURLCredentialPersistenceForSession];//认证信息有效期，枚举值</p>
<p>//完成处理程序 completionHandler(认证类型，认证信息)
completionHandler (NSURLSessionAuthChallengeUseCredential,cred);</p>
</li>
</ul>
<p>}</p>
<pre><code>
[gitHub地址](https://github.com/Andy0570/Nerdfeed.git)
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/28/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><span class="page-number current">29</span><a class="page-number" href="/page/30/">30</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/30/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png" alt="独木舟的木">
            
              <p class="site-author-name" itemprop="name">独木舟的木</p>
              <div class="site-description motion-element" itemprop="description">有时候阳光很好 有时候阳光很暗</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">316</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">独木舟的木</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">2.2m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">32:53</span>
  
</div>



  <span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
  </span>
  <span class="post-meta-divider">|</span>

  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/29/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  

  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  
  
</body>
</html>
