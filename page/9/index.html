<!DOCTYPE html>













<html class="theme-next gemini" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '0E2AON8EZF',
      apiKey: '22fbefd84c8343239f5c04365b9728de',
      indexName: 'MyBlogPlatform',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="有时候阳光很好 有时候阳光很暗">
<meta name="keywords" content="独木舟的木">
<meta property="og:type" content="website">
<meta property="og:title" content="独木舟的木">
<meta property="og:url" content="https://andy0570.com/page/9/index.html">
<meta property="og:site_name" content="独木舟的木">
<meta property="og:description" content="有时候阳光很好 有时候阳光很暗">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="独木舟的木">
<meta name="twitter:description" content="有时候阳光很好 有时候阳光很暗">



  <link rel="alternate" href="/atom.xml" title="独木舟的木" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/9/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>独木舟的木</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">独木舟的木</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">37</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">316</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/andy0570" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/09/10/使用 AWS 区块链模版搭建 Hyperledger Fabric/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/10/使用 AWS 区块链模版搭建 Hyperledger Fabric/" class="post-title-link" itemprop="url">使用 AWS 区块链模版搭建 Hyperledger Fabric</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-10 18:48:00" itemprop="dateCreated datePublished" datetime="2018-09-10T18:48:00+08:00">2018-09-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:59:34" itemprop="dateModified" datetime="2019-04-28T15:59:34+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/区块链/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>AWS 区块链模版号称可以在几分钟内完成创建并部署区块链网络。</p>
<p>使用 AWS 区块链模版可以搭建两种类型的区块链网络：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075638.png" alt="AWS 区块链网络"></p>
<p>&lt;!-- more --&gt;</p>
<p>具体搭建步骤可以参考<a href="https://docs.aws.amazon.com/zh_cn/blockchain-templates/latest/developerguide/what-are-blockchain-templates.html" target="_blank" rel="noopener">AWS Blockchain Templates 开发人员指南</a>，里面有关于搭建 Ethereum 的详细步骤，文档中的**「先决条件」**设置项是用于搭建 Ethereum 网络的，对 Fabric 网络并不适用，所以这里说一下搭建超级账本的 Fabric。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075639.png" alt="使用模版创建的 Hyperledger Fabric 网络"></p>
<p>在使用模版快速创建堆栈前，务必要提前设置好的相关内容：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075640.jpg" alt="官方说明"></p>
<p>说明：</p>
<ul>
<li>
<p>一个有权使用相关服务的 IAM 账户（<a href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_roles.html" target="_blank" rel="noopener">IAM账户</a>，可以理解为在 AWS 根账户下设置子账户，比如说，你可以给你的同事设置一个子账户（子账户有独立的登录链接、用户名、密码），然后为这个子账户开通（登录AWS控制台的）相关操作权限，然后你的同事就可以用这个子账户登录AWS控制台了。</p>
</li>
<li>
<p>设置一个密钥对（公钥+私钥），用来通过 SSH 方式登录 EC2 实例的。</p>
</li>
<li>
<p><strong>设置一个 IAM 权限策略文件。</strong></p>
</li>
<li>
<p><strong>创建一个具有一个公有子网的 VPC 网络。</strong></p>
</li>
<li>
<p>设置一个安全组（安全组充当防火墙功能），入站流量开通 22 端口、80 端口。</p>
</li>
</ul>
<p>以上的5个前提条件设置正确了，我们就可以用区块链模版创建 Fabric 网络了，下面具体说一下画红框的比较难的两个配置：</p>
<h3>设置 IAM 角色并附加权限策略</h3>
<p>设置步骤：</p>
<ol>
<li>AWS控制台——服务——IAM——角色——创建角色，设置勾选如下：</li>
</ol>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075641.jpg" alt="image"></p>
<ol start="2">
<li>创建策略，Tab页面选 JSON，把下面👇的 JSON 内容复制进去：</li>
</ol>
<p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"Version"</span>: <span class="string">"2012-10-17"</span>,</span><br><span class="line">    <span class="attr">"Statement"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"Effect"</span>: <span class="string">"Allow"</span>,</span><br><span class="line">            <span class="attr">"Action"</span>: [</span><br><span class="line">                <span class="string">"ecr:GetAuthorizationToken"</span>,</span><br><span class="line">                <span class="string">"ecr:BatchCheckLayerAvailability"</span>,</span><br><span class="line">                <span class="string">"ecr:GetDownloadUrlForLayer"</span>,</span><br><span class="line">                <span class="string">"ecr:GetRepositoryPolicy"</span>,</span><br><span class="line">                <span class="string">"ecr:DescribeRepositories"</span>,</span><br><span class="line">                <span class="string">"ecr:ListImages"</span>,</span><br><span class="line">                <span class="string">"ecr:DescribeImages"</span>,</span><br><span class="line">                <span class="string">"ecr:BatchGetImage"</span>,</span><br><span class="line"><span class="string">"s3:Get*"</span>,</span><br><span class="line">                <span class="string">"s3:List*"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"Resource"</span>: <span class="string">"*"</span></span><br><span class="line">        &#125;</span><br><span class="line">] &#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075642.jpg" alt="image"></p>
<p>点击右下角的**「Review Policy」<strong>,设置这个权限策略文件的名称（myFabricPolicy）和描述（...），最后点击</strong>「Create Policy」**：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075643.jpg" alt="image"></p>
<ol start="3">
<li>
<p>回到我们刚才创建角色的页面，添加刚刚创建的策略 （myFabricPolicy）给这个角色，找的时候可以点击**「删选策略」<strong>——</strong>「客户托管」**，☑️勾选完之后点击下一步审核：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075644.jpg" alt="image"></p>
</li>
<li>
<p>审核页面，给 IAM 角色设置一个角色名称（myFabricIAM）,点击**「创建角色」**：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075645.jpg" alt="image"></p>
</li>
<li>
<p>创建完之后，可以点击我们刚刚创建的 IAM 角色查看详情，记住这里的<strong>实例配置文件 ARN</strong>，在使用区块链模版创建 Fabric 网络时会使用到的。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075647.jpg" alt="image"></p>
</li>
</ol>
<h3>设置 VPC</h3>
<p>设置如下：</p>
<p>AWS控制台——服务——VPC——在VPC控制面板中点击蓝色的按钮「<strong>Launch VPC Wizard</strong>」,选择带有单个公有子网的 VPC：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075647-1.jpg" alt="image"></p>
<p>设置 VPC 名称、子网名称，其他值为默认值。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075648.jpg" alt="image"></p>
<h3>使用 AWS 区块链模版创建 Fabric 网络</h3>
<p>在 <a href="https://docs.aws.amazon.com/zh_cn/blockchain-templates/latest/developerguide/what-are-blockchain-templates.html" target="_blank" rel="noopener">AWS Blockchain Templates 开发人员指南</a> 的Hyperledger Fabric 部分点击启动链接：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075650.jpg" alt="image"></p>
<p>设置参考如下：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075651.jpg" alt="image"></p>
<p>创建之后，喝一杯咖啡☕️等一会儿...</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075652.jpg" alt="image"></p>
<p>等状态显示为「<strong>CREATE_COMPLETE</strong>」就OKK了。🎉🎉🎉</p>
<h3>参考</h3>
<ul>
<li><a href="https://github.com/hyperledger/fabric" target="_blank" rel="noopener">hyperledger/fabric</a></li>
<li><a href="https://github.com/yeasy/hyperledger_code_fabric" target="_blank" rel="noopener">Hyperledger 源码分析之 Fabric</a></li>
<li><a href="https://docs.aws.amazon.com/zh_cn/blockchain-templates/latest/developerguide/what-are-blockchain-templates.html" target="_blank" rel="noopener">AWS Blockchain Templates 开发人员指南</a></li>
<li><a href="https://lists.hyperledger.org/g/fabric/topic/tutorial_get_started_with/21382525?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,20,21382525" target="_blank" rel="noopener">Tutorial: Get started with blockchain using the AWS Hyperledger Fabric template</a></li>
<li><a href="https://blogs.msdn.microsoft.com/azureservicefabric/2017/05/18/tutorial-how-to-create-a-service-fabric-standalone-cluster-with-aws-ec2-instances/" target="_blank" rel="noopener">How to create a Service Fabric standalone cluster with AWS EC2 instances</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/08/15/《Thinking in UML》笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/08/15/《Thinking in UML》笔记/" class="post-title-link" itemprop="url">《Thinking in UML》笔记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-08-15 15:12:00" itemprop="dateCreated datePublished" datetime="2018-08-15T15:12:00+08:00">2018-08-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 20:42:41" itemprop="dateModified" datetime="2019-05-01T20:42:41+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/区块链/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">11k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">10 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1>UML —— 统一建模语言</h1>
<h4>面向对象编程</h4>
<blockquote>
<p>面向对象（ Object Oriented，简称OO）方法将世界看作一个个相互独立的对象，相互之间并无因果关系，它们平时是“鸡犬之声相闻，老死不相往来”的。只有在某个外部力量的驱动下，对象之间才会依据某种规律相互传递信息。这些交互构成了这个生动世界的一个“过程”。在没有外力的情况下，对象则保持着“静止”的状态。</p>
</blockquote>
<ul>
<li>对象提供了一种处理复杂问题的方式，有了对象，我们能够通过提升抽象级别来构建更大、更复杂的系统。</li>
<li>之所以面向对象方法会兴起，是因为这种认识论能够<strong>帮助我们构造更为复杂的系统来解释越来越复杂的现实世界</strong>。</li>
<li>比掌握具体的技术更重要的是<strong>掌握认识论所采用的方法和分析过程</strong>。</li>
<li>面向对象的特性：<strong>复用性</strong>、<strong>抽象层次</strong>。</li>
<li>抽象层次的好处：
<ol>
<li>不论在哪一个层次上，我们都只需要面对有限的复杂度和有限的对象结构，从而可以专心地了解这个层次上的对象是如何工作的；</li>
<li>低层次的零件更换不会影响高层次的功能；</li>
</ol>
</li>
</ul>
<p>&lt;!-- more --&gt;</p>
<h4>要解决面向对象的困难我们需要这样一些方法</h4>
<ul>
<li>一种把现实世界映射到对象世界的方法；</li>
<li>一种用对象世界描述现实世界的方法；</li>
<li>一种验证对象世界行为正确反映了现实世界的方法；</li>
</ul>
<h4>UML 是一种建模语言</h4>
<ul>
<li>
<p>UML本身并没有包含软件方法，而仅是一种语言。</p>
</li>
<li>
<p><strong>核心元素</strong>描述基本事物；<strong>核心视图</strong>表达这些事物构成的某种有意义的观点；核<strong>心模型</strong>则使用核心视图来描述需求、系统、设计等。</p>
</li>
<li>
<p><strong>UML 可视化</strong>的含义：UML通过它的元模型和表示法，把那些通过文字或其他表达方法很难表达清楚的，隐晦的潜台词用简单直观的图形表达和暴露出来，准而直观地描述复杂的含义。把“隐晦”的变成“可视”的，也就是把文字变成图形。</p>
</li>
</ul>
<h3>面向对象分析设计完整过程</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075442.jpg" alt="建模流程"></p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075443.png" alt="面向对象分析设计完整过程.png"></p>
<h4>业务模型</h4>
<p>业务模型真实映射了参与者在现实世界中的行为。</p>
<ul>
<li><strong>参与者</strong>：信息来源提供者、第一驱动者。现实世界中的“人”。</li>
<li><strong>用例</strong>：驱动者的业务目标。现实世界中的“事”。</li>
<li><strong>业务场景</strong>、<strong>用例场景</strong>：现实世界中的“规则”。</li>
<li><strong>业务对象模型</strong>：达成业务目标过程中的事物。现实世界中的“物”。</li>
</ul>
<h4>概念模型</h4>
<p><strong>分析模型</strong>：建立适合计算机理解和实现的模型。</p>
<ul>
<li>
<p><strong>边界类</strong>：交互的边界。原始需求中的“事”。</p>
<blockquote>
<p>从狭义上说，边界就是大家熟悉的界面，所有对计算机的操作都要通过界面进行。从广义上说，任何一件事物都分为里面和外面，外面的事物与里面的事物之间的任何交互都需要有一个边界。比如参与者与系统的交互，系统与系统之间的交互，模块与模块之间的交互等。</p>
</blockquote>
</li>
<li>
<p><strong>实体类</strong>：业务实体。现实世界中的“物”。</p>
</li>
<li>
<p><strong>控制类</strong>：原始需求中的动态信息，即业务或用例场景中的步骤和活动。现实世界中的“规则”。</p>
</li>
</ul>
<h4>设计模型</h4>
<blockquote>
<p>在设计模型中，概念模型中的<strong>边界类</strong>可以被转化为操作界面或者系统接口；<strong>控制类</strong>可以被转化为计算程序或控制程序，例如工作流、算法体等；<strong>实体类</strong>可以转化为数据库表、XMI文档或者其他带有持久化特征的类。</p>
</blockquote>
<p>从概念模型向设计模型转化时，可以遵循的规则有：</p>
<ul>
<li>软件架构和框架；</li>
<li>编程语言；</li>
<li>规范或中间件；</li>
</ul>
<h4>用例驱动</h4>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075443.jpg" alt="建模公式"></p>
<blockquote>
<p>用例驱动是统一过程的重要概念，或者说整个软件生产过程就是用例驱动的。用例驱动软件生产过程是非常有道理的。让我们再次回顾建模公式，很容易得出一个推论，要解决问题领域就要归纳出所有必要的抽象角度（用例），为这些用例描述出可能的特定场景，并找到实现这些场景的事物、规则和行为。再换个说法，如果我们找到的那些事物、规则和行为实现了所有必要的用例，那么问题领域就被解决了。总之，实现用例是必须做的工作，一旦用例实现了，问题领域就解决了。这就是用例驱动方法的原理。</p>
</blockquote>
<h1>RUP——统一过程</h1>
<blockquote>
<p><strong>RUP</strong></p>
<p>统一过程归纳和整理了很多在实践中总结出来的软件工程的最佳实践，是一个采用了面对象思想，使用UML作为软件分析设计语言，并且结合了项目管理、质量保证等许多软件程知识综合而成的一个非常完整和庞大的软件方法。</p>
<p>统一过程归纳和集成了软件开发活动中的最佳实践，它定义了软件开发过程中最重要的阶段和工作（四个阶段和九个核心工作流），定义了参与软件开发过程的各种角色和他们的职责，还定义了软件生产过程中产生的工件，并提供了模板。最后，采用演进式软件生命周期（迭代）将工作、角色和工件串在一起，形成了统一过程。</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075445.jpg" alt="统一过程"></p>
<h4>UML &amp; PUP</h4>
<ul>
<li>RUP 是目前与 UML 集成和应用最好、最完整的<strong>软件方法</strong>。</li>
<li><strong>UML</strong> 是一种语言，用来描述软件生产过程中要产生的文档，<strong>统一过程</strong>则是指导如何产生这些文档以及这些文档要讲述什么方法。</li>
</ul>
<h4>实施统一过程的原因</h4>
<ol>
<li>提高软件成熟度的需要；</li>
<li>提高软件技术水平和质量的需要；</li>
<li>统一过程适于开发稳定的架构；</li>
</ol>
<h3>软件项目真正的灵魂是「软件过程」</h3>
<p>站在软件过程的角度看待问题：先了解一个软件项目是怎么做的，再去 UML 中寻找需要的工具，用 UML 中适合的工具把软件过程要达到的要求记录下来。</p>
<h1>建模基础</h1>
<blockquote>
<p><strong>建模</strong>：</p>
<p>通过对客观事物建立一种抽象的方法，用来表征事物并获得对事物本身的理解，再把这种理解概念化，并将这些逻辑概念组织起来，形成对所观察的对象的内部结构和工作原理的便于理解的表达。</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075447.jpg" alt="建模"></p>
<ul>
<li>做需求的时候，首要目标不是要弄清楚业务是如何一步一步完成的，而是要弄清楚有多少业务的参与者？每个参与者的目标是什么？参与者的目标就是你的<strong>抽象角度</strong>。</li>
<li>静态的事物（物）+ 特定的条件（规则）+ 特定的动作（参与者的驱动）= 特定的场景（事件）。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075448.jpg" alt="建模公式"></p>
<h4>抽象层次</h4>
<p>抽象层次越高，具体信息越少，但是概括能力越强。反之，具体信息越丰富，结果越确定，但相应的概括能力越弱。</p>
<p>抽象的两种方法：</p>
<ol>
<li><strong>自顶向下</strong>：适用于从头开始认识一个事物。</li>
<li><strong>自底向上</strong>：适用于在实践中改进和提高认识。</li>
</ol>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075450.jpg" alt="统一过程一般抽象层次"></p>
<h3>对象分析方法</h3>
<ul>
<li><strong>一切都是对象</strong>。</li>
<li><strong>对象的独立性</strong>。对象与对象之间是天然独立的，只是在某个特定的场景下，它们的某一个特定的实例才相互联系在一起。</li>
<li><strong>对象的原子性</strong>。在同一抽象层次上，在分析过程中都应当将对象视为一个不可分割的原子。</li>
<li><strong>对象的可抽象性</strong>。</li>
<li><strong>对象的层次性</strong>。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075450-1.jpg" alt="对象分析方法"></p>
<h1>核心元素</h1>
<h2>版型</h2>
<p>对 UML 元素基础定义的扩展，在同一个元素基础定义的基础上赋予特别的含义，使得这个元素适用于特定的场合。</p>
<h2>参与者（actor）、主角</h2>
<blockquote>
<p>actor 是在系统之外与系统交互的某人或某事物。</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075451.jpg" alt="Jietu20180808-142730"></p>
<ul>
<li>参与者位于系统边界之外。</li>
<li>参与者一定是直接并且主动地向系统发出动作并获得反馈的。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075453.jpg" alt="参与者"></p>
<h4>业务主角</h4>
<ul>
<li>业务主角是<strong>参与者</strong>的一个版型，特别用于定义<strong>业务的参与者</strong>，在<strong>需求阶段</strong>使用。</li>
<li>业务主角是与业务系统有着交互的人和事物，他们用来确定业务范围。</li>
<li>业务主角针对的是<strong>业务人员</strong>而非计算机用户。</li>
</ul>
<h4>业务工人</h4>
<p>人工坐席、被动参与业务，是系统边界中的一部分。</p>
<p>区分参与者和业务工人的方法：判断是在边界之外还是边界之内。</p>
<h4>参与者&amp;涉众&amp;用户&amp;角色</h4>
<ul>
<li>涉众是与要建设的这个系统有利益相关的一切人和事。</li>
<li>参与者是涉众的代表。</li>
<li>用户是参与者的代表，是系统的使用者（系统操作员）。</li>
<li>角色是参与者的职责，从众多参与者的职责众抽象出相同的那一部分，将其命名而形成一个角色。</li>
</ul>
<blockquote>
<p>参与者是涉众的代表，它代表涉众对系统的利益要求，并向系统提出建设要求；参与者通过代理给其他用户或将自身实例化成用户来使用系统；参与者的职责可以用角色来归纳，用户被指定扮演哪个或哪些角色因此来获得参与者的职责。
参与者的核心地位还体现在，系统是以参与的观点来决定的。参与者对系统的要求，对系统的表述完全决定了系统的功能性。</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075454.jpg" alt="参与者、涉众、用户和角色关系"></p>
<h2>用例</h2>
<blockquote>
<p>用例定义了一组用例实例，其中每个实例都是系统所执行的一系列操作，这些操作生成特定主角可以观测的值。</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075455.jpg" alt="Jietu20180808-151109"></p>
<ul>
<li>一个用例就是参与者交互的，并且给参与者提供可观测的有意义的结果的一系列活动的集合。</li>
<li>用例，就是一件事情，要完成这件事情，需要做一系列的活动。</li>
<li>用例场景：一个场景就是一个用例的实例。</li>
<li>一个完整的用例：参与者 + 前置条件 + 场景 + 后置条件。</li>
<li>用例的作用：捕捉功能性需求。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075456.jpg" alt="用例的构成"></p>
<p><strong>用例 != 功能</strong></p>
<p>一个用例是一个参与者如何使用系统，获得什么结果的一个集合，通过分析用例，得出结构性的和功能性的内容，最终实现用例，也就实现了使用者的观点。</p>
<ul>
<li>功能是计算机术语，它是用来描述计算机的，而非定义需求的术语。功能实际描述的是输入➡️计算➡️输出。</li>
<li>功能是脱离使用者的愿望而存在的。</li>
<li>功能是孤立的，给一个输入，通过计算就有一个固定的输出。</li>
<li>如果非要从功能的角度解释用例，那么用例可以解释为一系列完成特定目标的“功能”的组合，针对不同的应用场景，这些“功能”体现不同的组合方式。</li>
</ul>
<h4>用例的特征</h4>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075457.jpg" alt="用例的特征"></p>
<h4>用例的粒度</h4>
<ul>
<li><strong>业务建模阶段</strong>：用例的粒度以每个用例能够说明一件完整的事情为宜，即一个用例可以描述一项完整的业务流程。</li>
<li><strong>概念建模阶段</strong>：用例的粒度以每个用例能描述一个完整的事件流为宜。即一个用例描述一项完整业务中的一个步骤。</li>
<li><strong>系统建模阶段</strong>：用例的粒度以一个用例能够描述操作者与计算机的一次完整交互为宜。</li>
<li>在同一个需求阶段，所有用例的粒度应该是同一个量级的。</li>
</ul>
<h4>业务用例</h4>
<ul>
<li>业务用例是用例版型中的一种，专门用于需求阶段的业务建模。</li>
<li>业务用例专门用于<strong>业务建模</strong>。</li>
</ul>
<h4>业务用例实现</h4>
<ul>
<li>专门用于需求阶段的业务建模。</li>
<li>业务用例实现表达了同一个业务用例的不同实现方式。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075458.jpg" alt="业务用例实现"></p>
<h4>概念用例</h4>
<ul>
<li>概念用例用于<strong>概念建模</strong>。</li>
<li>概念用例用来获取业务用例中的核心业务逻辑。</li>
</ul>
<h4>系统用例=用例</h4>
<p>系统用例是用来定义系统范围、获取功能性需求的。系统用例是软件系统开发的全部范围，系统用例是我们得到的最终需求。</p>
<h4>用例实现</h4>
<p>一个用例实现代表了用例的一种实现方式。</p>
<h2>边界</h2>
<ul>
<li>面向对象里，任何一个对象都有一个边界，外界只能通过这个边界来认识对象，与对象打交道，而对象内部则是一个禁区。</li>
<li>**边界决定视界。**边界是可大可小的，由建模者主观臆定。</li>
<li><strong>边界决定抽线层次</strong>。通过设定边界、组织边界大小来决定抽象层次，层层推进地描述对象。</li>
<li><strong>边界还是一种分析方法</strong>。实际工作中应当学会灵活地使用边界，用边界来决定抽象层次和视角，进而排除边界外大量的杂音来降低复杂程度。</li>
</ul>
<h2>业务实体</h2>
<blockquote>
<p><strong>业务实体</strong>代表<strong>业务角色</strong>执行<strong>业务用例</strong>时所处理或使用的“事物”。</p>
</blockquote>
<ul>
<li>业务实体是类的一种版型，特别用于在<strong>业务建模</strong>阶段建立领域模型。</li>
<li>如果说参与者和用例描述了我们在这个问题领域中达到什么样的目的，那么业务实体就描述了我们使用什么来达到业务目标以及通过什么来记录这个业务目标。</li>
</ul>
<h4>理解业务实体</h4>
<ol>
<li>业务实体来自现实世界。</li>
<li>业务实体一定是在分析业务流程（业务用例场景）的过程当中发现的。</li>
<li>业务实体作为类的一个版型，具有对象的所有性质，包括属性和方法。
<ul>
<li>属性：在特定的场景下，只需要关心与这个场景直接关联的属性。</li>
<li>方法：在特定的场景下，只需要关心与这个场景有直接关系的方法。</li>
</ul>
</li>
</ol>
<h4>获取业务实体</h4>
<ol>
<li>建立业务用例场景；</li>
<li>从业务用例场景中逐个分析动词后面的名词，它们就是业务实体的备选对象；</li>
<li>分析业务实体之间的关系，并决定哪些应当单独建模，哪些应当作为属性。</li>
</ol>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075459.jpg" alt="寄信业务实体模型图"></p>
<h2>包</h2>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075500.jpg" alt="Jietu20180808-174111"></p>
<ul>
<li>包最主要的用途是分类元素。</li>
<li>UML 认为好的分包具有高内举、低耦合的性质。</li>
<li>同一个包中的元素应该是相互联系，甚至是不可分割的。</li>
<li>包之间无依赖关系或松耦合关系。</li>
<li>如果实际情况难以做到完全解除依赖关系，那么至少应当保证包之间的依赖关系不会被传递。</li>
<li>包之间的依赖关系应当是单向的，应当尽量避免双向依赖和循环依赖。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075501.jpg" alt="常用的包的版型"></p>
<h2>分析类</h2>
<blockquote>
<p>分析类用于获取系统中主要的“职责簇”。它们代表系统的原型类，是系统必须处理的主要抽象概念的“第一个关口”。</p>
<ul>
<li>分析类是从功能性需求向计算机实现转化过程中的“第一个关口”。</li>
<li>分析类可以产生系统设计的主要抽象——系统的设计类和子系统。</li>
</ul>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075502.jpg" alt="分析类"></p>
<h4>边界类</h4>
<blockquote>
<p>边界类是一种用于对系统外部环境与其内部运作之间的交互进行建模的类。</p>
</blockquote>
<p>边界类常用的场景：</p>
<ul>
<li>参与者与用例之间；</li>
<li>用例与用例之间；</li>
<li>用例与系统边界之外的非人对象；</li>
<li>相关联的业务对象有明显的独立性要求；</li>
<li>从架构角度上来说，边界类主要位于展现层。</li>
</ul>
<h4>控制类</h4>
<p>控制类用于对一个或几个用例所特有的控制行为进行建模。控制对象（控制类的实例）通过控制其他对象，因此它们的行为具有协调性质。</p>
<ul>
<li>控制类来源于对用例场景中行为的定义。</li>
<li>控制咧主要起到协调对象的作用。</li>
<li>控制类主要位于业务逻辑层。</li>
<li>我们应当在边界类和边界类、边界类和实体类、实体类和实体类之间都默认加入控制类，将相应的处理逻辑放到控制类里去，哪怕该控制类只有一个操作。</li>
</ul>
<h4>实体类</h4>
<p>实体类是用于对必须存储的信息和相关行为建模的类。实体对象（实体类的实例）用于保存和更新一些现象的有关信息。</p>
<ul>
<li>实体类来源于业务模型中的业务实体。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075502-1.jpg" alt="分析类的三高"></p>
<h2>设计类</h2>
<blockquote>
<p><strong>「设计类」</strong></p>
<p>设计类由类型、属性和方法构成。设计类的名称、属性和方法也直接映射到编码中相应的class、
property 和 method。</p>
</blockquote>
<ul>
<li>设计类是系统实施中一个或多个对象的抽象。</li>
<li>设计类用于<strong>设计模型</strong>中。</li>
</ul>
<h5>可见性</h5>
<p>类的属性和方法的可见性定义：</p>
<ul>
<li>
<p><strong>公有</strong>：除了类本身以外，属性和方法对其他模型元素也是可视的。</p>
</li>
<li>
<p><strong>保护</strong>：属性和方法只对类本身、它的子类或友元取决于具体语言）是可视的。</p>
</li>
<li>
<p><strong>私有</strong>：属性和方法只对类本身和类的友元（取决于具体语言）是可视的。</p>
</li>
<li>
<p><strong>实施</strong>：属性和方法只在类本身的内部是可视的（取决于具体语言）。</p>
</li>
</ul>
<h2>关系</h2>
<h3>关联关系（association）</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075504.jpg" alt="关联关系"></p>
<ul>
<li>描述不同类的对象之间静态的、天然的结构关系。</li>
<li><strong>静态关联</strong>，通常与运行状态无关。</li>
<li>强关联。</li>
<li>多重性：一对一关系、一对多关系、多对多关系。</li>
<li>在最终的代码里，关联对象通常是以==实例变量（成员变量）==的形式实现的。</li>
</ul>
<h3>依赖关系（dependency）</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075505.jpg" alt="依赖关系：A依赖于B"></p>
<ul>
<li>描述一个对象在运行期会使用到另一个对象的关系。</li>
<li><strong>临时性</strong>、弱关系，随运行场景而改变（动态的）。</li>
<li>依赖有单向依赖、双向依赖。</li>
<li><strong>双向依赖是一种非常不好的结构，我们总是应当保持单向依赖，杜绝双向依赖的产生</strong>。</li>
<li>在最终的代码里，依赖关系体现为==类构造方法、类方法等的传入参数==。</li>
</ul>
<h3>扩展关系（extends）</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075507.jpg" alt="扩展关系：A扩展出B"></p>
<ul>
<li>它特别用于在<strong>用例模型</strong>中说明向基本用例中的某个扩展点插入<strong>扩展用例</strong>。</li>
<li>用于概念模型、业务模型。</li>
<li>表示“<strong>可选</strong>”，而不是必须。</li>
</ul>
<h3>包含关系（include）</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075509.jpg" alt="包含关系"></p>
<ul>
<li>用于用例模型。</li>
<li>用于概念模型、业务模型。</li>
<li>包含用例表示“<strong>必须</strong>”，而不是可选。</li>
</ul>
<h3>实现关系（realize）</h3>
<blockquote>
<p>实现所代表的含义是，基本用例描述了一个业务目标，但是该业务目标有多种可能的实现途径，每一种实现途径可以用用例实现（或称用例实例）来表示，而用例实现与基本用例之间就构成了实现关系。换言之，每个实现途径都实现了基本用例的业务目标。</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075510.jpg" alt="Jietu20180809-150433"></p>
<ul>
<li>用于在<strong>用例模型</strong>中连接<strong>用例</strong>和<strong>用例实现</strong>。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075511.jpg" alt="实现关系"></p>
<h3>精化关系（refine）</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075512.jpg" alt="精化关系：A精化了B"></p>
<ul>
<li>一个基本用例可以分解出许多更小的关键精化用例，这些更小的==精化用例更细致地展示了基本用例的核心业务==。精化关系用来连接基本用例和精化用例，说明精化用例是由基本用例精化得来的。</li>
<li>精化关系也可以用于<strong>模型与模型之间</strong>，表示某个模型是通过精化另一个模型而得来的。比如说我们认为设计类是通过精化分析类而得来，我们可以用XX设计类&lt; &lt;refine&gt;&gt;XX分析类来表示它们之间的关系。</li>
<li>与泛化关系不同的是，**精化关系表示由基本对象可以分解为更明确、精细的子对象，这些子对象并没有增加、减少、改变基本对象的行为和属性，仅仅是更加细致和明确化了。**在泛化关系中基本对象被泛化成为子对象后，子对象继承了基本对象的所有特征，并且子对象可以增加、改变基本对象的行为和属性</li>
<li>另一方面，精化关系仅仅用于<strong>建模阶段</strong>，在实现语言中是没有精化这一语义的。泛化则等同于实现语言中的继承语义。</li>
</ul>
<h3>泛化关系（generalization）</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075514.jpg" alt="泛化关系：A继承自B"></p>
<ul>
<li>泛化关系可以用于建模过程中的任意一个阶段，说明两个对象之间的<strong>继承关系</strong>。</li>
<li>泛化关系表示一个类对另一个类的继承。</li>
</ul>
<h3>聚合关系（aggregation）</h3>
<p>A 聚合到 B 上，或者说 B 由 A 组成。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075515.jpg" alt="聚合关系：A聚合到B上"></p>
<ul>
<li>聚合关系用于<strong>类图</strong>，特别用于表示实体对象之间的关系，表达==整体由部分构成==的语义。例如个部门由许多人员构成。</li>
<li>与组合关系不同的是，==整体和部分不是强依赖的，即使整体不存在了，部分仍然存在==。例如部门撤销以后，人员不会因此而消失，他们依然存在。</li>
</ul>
<h3>组合关系（composition）</h3>
<p>A 组合成 B，或者说 B 由 A 组成。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075517.jpg" alt="组合关系"></p>
<ul>
<li>组合关系用于<strong>类图</strong>，特别用于表示实体对象系，表达==整体拥有部分==的语义。例如母公司拥有许多子公司。</li>
<li>**组合关系是一种强依赖的特殊聚合关系，如果整体不存在了，则部分也将消亡。**例如母公司解体了，子公司也将不再存在。</li>
</ul>
<h2>组件</h2>
<blockquote>
<p>组件是系统中实际存在的可更换部分，它实现特定的功能，符合一套接口标准并实现一组接口。</p>
</blockquote>
<ul>
<li>建模过程中，我们通过组件这一元素对分析设计过程中的<strong>类</strong>、<strong>接口</strong>等进行逻辑分类，一个组件表达软件的一组功能。</li>
<li>UML中把组件定义为任何的逻辑代码模块。但是在笔者看来，一个组件应当具有<strong>完备性</strong>、<strong>独立性</strong>、<strong>逻辑性</strong>和<strong>透明性</strong>。</li>
<li>UML中组件之间唯一的关系就是依赖。但是在笔者看来，一个组件应当是一个独立的业务模块，有着完备的功能，可独立部署，一个组件可以看成是一个完备的服务。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075518.jpg" alt="使用组件"></p>
<h2>节点</h2>
<blockquote>
<p>节点是带有至少一个处理器、内存以及可能还带有其他设备的处理元素。</p>
<p>在实际工作中，一般说来服务器、工作站或客户机可以称为一个节点。节点是应用程序的部署单元。节点元素特别用于部署视图，描述应用程序在物理结构上是如何部署在应用环境中的，是一种包括软、硬件环境在内的拓扑结构描述。</p>
</blockquote>
<p>使用节点的场景：</p>
<ul>
<li>分布式应用环境；</li>
<li>多设备应用环境；</li>
</ul>
<h1>核心视图</h1>
<p>在 UML 里，<strong>结构性特征</strong>是用==静态视图==来表达的，<strong>行为性特征</strong>是用==动态视图==来表达的。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075520.jpg" alt="UML 核心视图"></p>
<h3>静态视图</h3>
<blockquote>
<p>静视图就是表达静态事物的。它只描述事物的静态结构，而不描述其动态行为。</p>
</blockquote>
<h4>用例图</h4>
<ul>
<li>用例视图采用<strong>参与者</strong>和<strong>用例</strong>作为基本单元，以不同的视角展现系统的功能性需求。</li>
</ul>
<h5>业务用例视图：使用业务主角和业务用例描述业务建模的功能性需求</h5>
<p>业务用例视图的两个视角：</p>
<ol>
<li>
<p>业务主角视角：有利于向业务主角确认其业务目标是否都已经齐全，以此来检查是否有遗漏的业务用例没有发现。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075520-1.jpg" alt="业务用例视图之业务主角视角"></p>
</li>
<li>
<p>业务模块视角：有利于从业务的完整性角度出发，检查完成某个业务的所有业务主角和业务用例是否已经齐全，以此来检查是否有遗漏的业务用例没有被发现。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075523.jpg" alt="业务用例视图之业务视角"></p>
</li>
<li>
<p>其他视角</p>
</li>
</ol>
<h5>业务用例实现视图：描述业务的实现途径</h5>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075523-1.jpg" alt="业务用例实现视图"></p>
<h5>概念用例视图</h5>
<blockquote>
<p>概念用例视图用于展现从业务用例中经过分析分解出来的关键概念用例，并表示概念用例和业务用例之间的关系。一般来说这些系有扩展、包含和精化。</p>
</blockquote>
<ul>
<li>一般以业务用例为单元展现。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075524.jpg" alt="借阅图书概念用例视图"></p>
<h5>系统用例视图</h5>
<blockquote>
<p>系统用例视图展现系统范围，将对业务用例进行分析以后得到的系统用例展现出来。</p>
</blockquote>
<ul>
<li>一般以业务用例为单位展现。</li>
<li>系统用例视图就是系统的开发范围。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075525.jpg" alt="借阅图书系统用例"></p>
<p>它表达的含义是计算机系统将开发本视图中所列举出的系统用例，而检查借阅证可能是手工工作而不需要纳入系统建设范围。</p>
<h5>系统用例实现视图</h5>
<p>如果一个系统用例有多种实现方式，也应当为其绘制实现视图。</p>
<h4>类图</h4>
<blockquote>
<p>类图用于展示系统中的类及其相互之间的关系。</p>
<p>本质上说，类图是现实世界问题领域的抽象对象的结构化、概念化、逻辑化描述。</p>
</blockquote>
<p>在UML中，从开始的需求到最终的设计，类图也是围绕着这三个层次（概念层、说明层、实现层）的观点进行建模的。类图建模是先概念层而说明层，进而实现层这样一个随着抽象层次的逐步降低而逐步细化的过程</p>
<h5>概念层类图</h5>
<p>概念层的观点认为，在这个层次的类图描述的是==现实世界中问题领域的概念理解==，类图中表达的类与现实世界的问题领域有着明显的对应关系，类之间的关系也与问题领域中实际事物的关系有着明显的对应关系。需要注意的是，概念层类图中的类和类关系与最终的实现类并不一定有直接和明显的对应关系。在概念层上，类图着重于<strong>对问题领域的概念化理解</strong>，而不是实现，因此类名称通常都是问题领域中实际事物的名称。概念层的类图是独立于实现语言和实现方式的。</p>
<p>**概念层类位于业务建模阶段。**领域模型图、业务实体图描述。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075529.jpg" alt="概念层类图"></p>
<h5>说明层类图</h5>
<p>说明层的观点认为，在这个层次的类图考察的是==类的接口==而不是实现，类图中表达的类和类关系应当是<strong>对问题领域在接口层次抽象的描述</strong>。</p>
<p>**说明层类位于概念建模阶段。**分析类、分析模型图描述。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075530.jpg" alt="说明层类图"></p>
<h5>实现层类图</h5>
<p>实现层观点认为，类是==实现代码的描述==，类图中的类直接映射到可执行代码。在这个层次上类必须明确采用哪种实现语言、什么设计模式、什么通信标准、遵循什么规范等</p>
<p>**实现层类图位于设计建模阶段。**类图可视为伪代码。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075532-1.jpg" alt="实现层类图"></p>
<h4>包图</h4>
<p>包图一般都用来展示高层次的观点。</p>
<p>在 UML 所有视图中，包图或许是最自由、约束最小的一种。除了特定的版型之外，包几乎可以用在任何阶段。</p>
<h3>动态视图</h3>
<blockquote>
<p>故名思义，动态视图是描述事物<strong>动态行为</strong>的。需要注意的是，==动态视图不能够独立存在，它必==
==须特指一个静态视图或UML元素，说明在静态视图规定的事物结构下它们的动态行为。==</p>
</blockquote>
<h4>活动图</h4>
<p>活动图描述了为了完成某一个目标需要做的活动以及这些活动的执行顺序。</p>
<p>活动图的两个层面：</p>
<ol>
<li>描述用例场景——用例活动图；</li>
<li>描述对象交互——对象活动图；</li>
</ol>
<p>活动图主要用于：</p>
<ol>
<li>业务场景建模；</li>
<li>用例场景建模；</li>
</ol>
<h5>用例活动图</h5>
<p>用例——参与者的一个目标</p>
<p>用例场景——如何来达到这个目标</p>
<p>活动图——描述用例场景（业务流程）</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075534.jpg" alt="登机手续用例场景活动图示例"></p>
<h5>对象活动图</h5>
<p>展示对象的交互，不推荐使用。</p>
<h5>泳道</h5>
<p>泳道，顾名思义，就像一个游泳运动员只能在一个道里进行比赛一样，一个对象也只能在一个业务流程中担任一个（或一类）职责。泳道代表了一个特定的类、人、部门、层次等对象的职责区，这些对象在业务流程中负责执行的活动集合构成了它们的职责。
即使加入泳道后对象交互图有了些模样，笔仍然不推荐使用它。泳道最主要的用途是在分析用例场景时用来获取角色职责。</p>
<h4>状态图</h4>
<p>状态图显示一个状态机。状态机用于对模型元素的动态行为进行建模，更具体地说，就是==对系统行为中受事件驱动的方面进行建模==。通使用状态图来说明业务角色或业务实体可能的状态——导致状态转换的事件和状态转换引起的操作。状态图常常会简化对设计的确认。对于类的对象所有可能的状态，状态图都显示它可能接收的消息、将执行的操作和在后类的对象所处的状态</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075535.jpg" alt="图书生命周期状态图"></p>
<h4>时序图</h4>
<blockquote>
<p>时序图描述了在参与交互的对象中所发生的事件（从激活的角度来说明），以及这些对象如何通过相互发送消息进行通信。可以为用例事件流的各种不同形式制作时序图。</p>
</blockquote>
<ul>
<li>时序图用于描述==按时间顺序排列的对象之间的交互模式==。</li>
<li>通常使用时序图描述<strong>用例实现</strong>。</li>
</ul>
<h5>业务模型时序图</h5>
<p>业务模型时序图用于为领域模型中的业务实体交互建模，其目的是实现业务用例。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075537.jpg" alt="网上购买商品业务模型时序图"></p>
<h5>概念模型时序图</h5>
<p>概念阶段的时序图采用<strong>分析类</strong>来绘制，目标同样是实现<strong>业务用例</strong>。</p>
<h5>设计模型时序图</h5>
<p>设计模型时序图使用<strong>设计类</strong>作为对象绘制。目标是实现概念模型中的某个事件流，一般以某个完整交互为单位，消息细致到方法级别。</p>
<h4>协作图</h4>
<p>协作图描述了对象间交互的一种模式；它通过对象之间的连接和它们相互发送的消息来显示参与交互的对象。
协作图中可以有对象和主角实例，以及描述它们之间关系和交互的连接和消息。通过说明对象间如何通过互相发送消息来实现通信，协作图描述了参与对象中发生的情况。可以为用例事件流的每一个变化形式制作一个协作图。
与时序图的作用相似，协作图用于显示对象之间如何进行交互以执行特定用例或用例中特定部分的行为，协作图的建模结果用于<strong>获取对象的职责和接口</strong>。与时序图不同的是，协作图因为展示了对象间的关系，使得它更适用于获得对<strong>对象结构</strong>的理解，而时序图则更适于获得对于<strong>调用过程</strong>的理解。不过在本质上，它们是可以互换的。</p>
<p>[图片上传失败...(image-d222e7-1534144287983)]</p>
<h1>核心模型</h1>
<p>要建立什么模型，首先要确定的是该项目要采用什么样的生命周期。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075538.jpg" alt="UML 核心模型"></p>
<h2>用例模型</h2>
<blockquote>
<p>用例模型是系统既定功能及系统环境的模型。</p>
</blockquote>
<ul>
<li><strong>业务用例模型</strong>用于识别和规定业务需求，<strong>概念模型</strong>用来分析和确认业务需求，而<strong>系统用例模型</strong>用来规定系统开发需求。这三者之间是一种<strong>精化的关系</strong>。</li>
</ul>
<h3>业务用例模型</h3>
<ul>
<li>业务用例模型要准确而完备地描述客户的现存或预想业务。</li>
<li>业务用例模型用于描述和明确业务需求，是为客户现实的业务建模的。</li>
</ul>
<h3>概念用例模型</h3>
<p>概念用例模型帮助我们简化和理解业务模型，帮助我们初步从对象角度来理解业务，从而建立软件架构并产生系统用例。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075538-1.jpg" alt="完整的概念用例模型"></p>
<h3>系统用例模型/用例模型</h3>
<p>系统建模=需求获取</p>
<p>系统用例模型代表了实际业务转化为计算机功能性需求以后的结果，是系统开发的契约。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075539.jpg" alt="完整的用例模型"></p>
<h3>领域模型</h3>
<p>领域模型是采用业务对象建立起来的一种模型。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075541.jpg" alt="领域模型推导"></p>
<h3>分析模型</h3>
<p>分析模型使用分析类来建立系统原型，获得系统实现需求的第一手方案。</p>
<h3>软件架构和框架</h3>
<p><strong>架构</strong>代表了一个软件项目对系统的定义和理解。<strong>软件架构</strong>在较高的抽象层次上，将系统规划为一些独立的逻辑部件，各负其责，这些部件通过标准的通信接口传递信息。一个架构就是一个系统的骨架。</p>
<p><strong>框架</strong>是针对某个问题领域通用解决方案，它通常集成了最佳实践和可复用的基础结构，对开发工作起到减少工作量、指导和规范作用。</p>
<blockquote>
<p>架构师系统蓝图，是对系统高层次的定义和描述。框架是解决方案，是加速和提高系统质量的半成品。</p>
</blockquote>
<h4>业务架构</h4>
<p>业务架构在先启阶段建立，在精化阶段得以改进。业架构的目标是为业务领域建立一个维护和扩展的逻辑结构，描述业务的构成。业架构对我们理解客户业务，尤其是开发行业解决方案有着重要的作用。另一方面，业务架构是软件架构的重要输入。
业务架构来源于两个主要的输入：<strong>业务用例</strong>和<strong>领域模型</strong>。如果没有业务架构，只有业务用例和领域模型时，我们将“只见树木不见森林”因为不论是业务用例还是领域模型，它们都只是业务领域的一个部分，尤其业务用例本身就是一个独立的单元，仅凭对它们的理解不足以俯瞰整个业务领域。</p>
<h4>软件架构</h4>
<p>软件架构需要在业务架构的基础上引入计算机环境，计算机环境包括硬件环境和软件环境。软件架构需要说明业务架构如何分布在计算机环境中，并得以执行。</p>
<p>一个典型的软件架构包括两个视角:<strong>广度视角</strong>和<strong>深度视角</strong>，这两个视角构成对软件架构的“立体”描述。</p>
<ul>
<li><strong>广度视角</strong>即是常见的软件层次结构它关注软件的分层，规定每一层的职责以及层之间的通信标准。一般使用<strong>层包元素</strong>来绘制。</li>
<li><strong>深度视角</strong>是指广度视角中每一层的详细说明，它关注每一层以及每个部分的具体实现架构。</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075541-1.jpg" alt="软件层次广度视角架构图"></p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075543.jpg" alt="软件层次深度视角"></p>
<h3>设计模型</h3>
<blockquote>
<p>设计模型是一个描述用例实现的对象模型，它可作为对实施模型及其源代码的抽象。设计模型用作实施和测试活动的基本输入。</p>
</blockquote>
<p>设计模型就是我们所熟知的详细设计。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075545.jpg" alt="设计模型的主要输入"></p>
<h3>组件模型</h3>
<h3>实施模型</h3>
<p><strong>实施模型</strong>由<strong>配置节点</strong>和<strong>组件</strong>组成。</p>
<h3>参考</h3>
<ul>
<li><a href="https://www.cnblogs.com/shindo/p/5579191.html" target="_blank" rel="noopener">五分钟读懂 UML 类图</a></li>
<li><a href="https://blog.csdn.net/huojiao2006/article/details/52935321/" target="_blank" rel="noopener">数据库建模三步骤：概念模型 -&gt; 逻辑模型 -&gt; 物理模型</a></li>
<li>Mac UML 工具：<a href="https://www.visual-paradigm.com/download/community.jsp?platform=macosx&amp;arch=jre" target="_blank" rel="noopener">Visual Paradigm</a></li>
<li>VP-UML使用介绍：https://www.cnblogs.com/lsgxeva/p/7715434.html</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/08/15/PKI 体系/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/08/15/PKI 体系/" class="post-title-link" itemprop="url">PKI 体系</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-08-15 14:39:00" itemprop="dateCreated datePublished" datetime="2018-08-15T14:39:00+08:00">2018-08-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 21:04:15" itemprop="dateModified" datetime="2019-05-01T21:04:15+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/PKI-密码学/" itemprop="url" rel="index"><span itemprop="name">PKI&密码学</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>CA中心——CA系统——数字证书</p>
<p>CA 中心管理并运营 CA 系统，CA 系统负责颁发数字证书。</p>
<p>专门负责颁发数字证书的系统称为 CA 系统，负责管理并运营 CA 系统的机构称为 CA 中心。所有与数字证书相关的各种概念和技术，统称为 PKI（Public Key Infrastructure）。</p>
</blockquote>
<h3>传统密码学</h3>
<ul>
<li>换位加密法；</li>
<li>替换加密法；</li>
</ul>
<h3>现代密码学</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075319-1.jpg" alt="现代密码学"></p>
<ul>
<li><strong>对称算法/密码密钥算法/单密钥算法</strong>：加密和解密使用同一密钥或加密和解密的密钥之间存在简单的、容易计算的互推关系。
<ul>
<li>流密码算法又称序列密码算法，每次加密或解密一位或一字节的明文或密文。</li>
<li>分组密码算法将明文（密文）分成固定长度的数据块（比特块或字节块），用同一密钥和算法对每一明文（密文）块加密（解密）后得到等长的密文（明文）块，然后将密文（文）块按照顺序组合起来最终得到密文（明文）。</li>
</ul>
</li>
<li><strong>非对称算法/公钥算法</strong>：加密密钥（公钥）和解密密钥（私钥）不相同的密码算法。</li>
<li><strong>摘要算法/散列函数/哈希函数/杂凑函数</strong>：把任意长的输入消息数据转化成固定长度的输出数据的一种密码算法。</li>
<li><strong>数字签名</strong>：验证消息源及数据内容的真实性；签名能够被第三方验证，并确定消息内容的真实性和签名者身份。
<ul>
<li>数字签名体制包括三个算法：密钥生成算法、签名算法、验证算法。</li>
</ul>
</li>
</ul>
<p>&lt;!-- more --&gt;</p>
<h4>数字签名</h4>
<p>消息加密只是解决了传送消息的保密问题，而防止他人对传输文件进行破坏，以及确定发信人的身份需要使用数字签名。完善的数字签名应具备签字方不能抵赖、他人不能伪造、在公证人面前能够验证真伪的能力。</p>
<h5>常用的数字签名方法：</h5>
<ul>
<li>RSA 签名；</li>
<li>DSS 签名；</li>
<li>Hash 签名；</li>
</ul>
<h5>数字签名原理：</h5>
<p>报文的发送方从报文文本中生成一个固定长度的散列值（报文摘要）。发送方用自己的私钥对这个散列值进行加密来形成发送方的数字签名。然后，这个数字签名将作为报文的附件和报文一起发送给报文的接收方。报文的接收方首先从接收到的原始报文中计算出散列值，接着再用发送方的公钥来对报文附加的数字签名进行解密。如果两个散列值相同，那么接收方就能确认该数字签名是发送方的。通过数字签名能够实现对原始报文的鉴别。
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075321.png" alt="数字签名原理">
采用数字签名，能够保证：</p>
<ol>
<li>信息是由签名者发送的；</li>
<li>信息自签发后到收到为止未曾有过任何修改；</li>
</ol>
<h5>数字签名与非对称加密的关系</h5>
<blockquote>
<p>一言以蔽之，数字签名就是将<a href="https://www.wikiwand.com/zh-hans/%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81" target="_blank" rel="noopener">公钥密码</a>反过来使用。</p>
</blockquote>
<ul>
<li>都使用公钥体系，但实现的方法正好相反，使用的密钥对也不同。</li>
<li><strong>数字签名</strong> 使用的是发送方的密钥对，发送方用自己的私钥进行加密，接收方用发送方的公开密钥进行解密。一对多关系。</li>
<li><strong>非对称加密</strong>的加密解密则使用的是接收方的密钥对，这是多对一的关系：任何知道接收方公开密钥的人都可以向接收方发送加密信息，只有唯一拥有接收方私有密钥的人才能对信息解密。</li>
<li>在实用过程中，通常一个用户拥有两个密钥对，一个密钥对用来进行数字签名，另一个密钥对用来进行非对称加密，这种方式提供了更高的安全性。</li>
</ul>
<h3>密钥管理</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075322.jpg" alt="image"></p>
<h3>密钥管理模式</h3>
<ul>
<li>无中心模式；</li>
<li>有中心模式；</li>
</ul>
<h3>PKI 的本质是把非对称密钥管理标准化</h3>
<p>PKI 是 Public Key Infrastructure 的缩写，其主要功能是绑定证书持有者的身份和相关的密钥对（通过为公钥及相关的用户身份信息签发数字证书），为用户提供方便的证书申请、证书作废、证书获取、证书状态查询的途径，并利用数字证书及相关的各种服务（证书发布，黑名单发布，时间戳服务等）实现通信中各实体的身份认证、完整性、抗抵赖性和保密性。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075324.jpg" alt="image"></p>
<ul>
<li><strong>数字证书</strong>：解决公钥与用户映射关系问题；</li>
<li><strong>CA</strong>：解决数字证书签发问题；
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075325.jpg" alt="image"></li>
<li><strong>KMC</strong>：解决私钥的备份与恢复问题；</li>
<li><strong>双证书机制</strong>：「签名证书及私钥」只用于签名验签，「加密证书及私钥」只用于加密解密。</li>
<li><strong>LDAP</strong>：解决数字证书查询和下载的性能问题，避免 CA 中心成为性能瓶颈。</li>
<li><strong>CRL（证书作废列表）</strong> 和 <strong>OSCP（在线证书状态协议）</strong>：方便用户快速获得证书状态。</li>
<li><strong>RA</strong>：方便证书业务远程办理、方便证书管理流程与应用系统结合。</li>
<li><strong>电子认证服务机构</strong>：保证 CA 系统在数字证书管理方面的规范性、合规性和安全性。</li>
</ul>
<h3>基于数字证书可以实现四种基本安全功能：</h3>
<ol>
<li>身份认证；</li>
<li>保密性；</li>
<li>完整性；</li>
<li>抗抵赖性；</li>
</ol>
<h3>数字证书分类</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075326.jpg" alt="image"></p>
<h3>PKI 基本组件</h3>
<p>完整的 PKI 系统必须具有数字证书、认证中心（CA）、证书资料库、证书吊销系统、密钥备份及恢复系统、PKI 应用接口系统等构成部分。</p>
<table>
<thead>
<tr>
<th>组件</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>数字证书</td>
<td>包含了用于签名和加密数据的公钥的电子凭证，是PKI的核心元素</td>
</tr>
<tr>
<td>认证中心（CA）</td>
<td>数字证书的申请及签发机关，CA必须具备权威性</td>
</tr>
<tr>
<td>证书资料库</td>
<td>存储已签发的数字证书和公钥，以及相关证书目录，用户可由此获得所需的其他用户的证书及公钥</td>
</tr>
<tr>
<td>证书吊销列表（CRL）/OCSP</td>
<td>在有效期内吊销的证书列表，在线证书状态协议OCSP是获得证书状态的国际协议</td>
</tr>
<tr>
<td>密钥备份及恢复</td>
<td>为避免因用户丢失解密密钥而无法解密合法数据的情况，PKI提供备份与恢复密钥的机制。必须由可信的机构来完成。并且，密钥备份与恢复只能针对解密密钥，签名私钥不能够作备份</td>
</tr>
<tr>
<td>PKI应用接口（API）</td>
<td>为各种各样的应用提供安全、一致、 可信的方式与PKI交互，确保建立起来的网络环境安全可靠，并降低管理成本</td>
</tr>
</tbody>
</table>
<h3>PKI 画外音</h3>
<ul>
<li><a href="http://www.jiemian.com/article/231843.html" target="_blank" rel="noopener">OpenSSL 隐形战友</a></li>
<li><a href="https://www.zhihu.com/question/21838720/answer/62574832" target="_blank" rel="noopener">知乎：为什么 SSL 证书那么贵?</a></li>
<li><a href="https://www.zhihu.com/question/19578422" target="_blank" rel="noopener">知乎：SSL 证书服务，大家用哪家的？</a></li>
<li><a href="https://www.cnblogs.com/LittleHann/p/3738141.html" target="_blank" rel="noopener">openSSL 命令、PKI、CA、SSL 证书原理</a></li>
<li><a href="https://blog.csdn.net/xiyuan1999/article/details/6416948" target="_blank" rel="noopener">OpenSSL 中文手册 之一 OpenSSL 简介－证书</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/07/20/Mac 下 Ubuntu USB 安装启动盘制作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/20/Mac 下 Ubuntu USB 安装启动盘制作/" class="post-title-link" itemprop="url">Mac 下 Ubuntu USB 安装启动盘制作</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-20 10:01:00" itemprop="dateCreated datePublished" datetime="2018-07-20T10:01:00+08:00">2018-07-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 20:58:03" itemprop="dateModified" datetime="2019-05-01T20:58:03+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/云计算/" itemprop="url" rel="index"><span itemprop="name">云计算</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">☁  Desktop [master] ⚡ hdiutil convert -format UDRW -o ./ubuntu-18.04-desktop-amd64 ./ubuntu-18.04-desktop-amd64.iso    <span class="comment"># 将ISO转为DMG</span></span><br><span class="line">正在读取Driver Descriptor Map（DDM：0）…</span><br><span class="line">正在读取Ubuntu 18.04 LTS amd64          （Apple_ISO：1）…</span><br><span class="line">正在读取Apple（Apple_partition_map：2）…</span><br><span class="line">正在读取Ubuntu 18.04 LTS amd64          （Apple_ISO：3）…</span><br><span class="line">.............................................................................</span><br><span class="line">正在读取EFI（Apple_HFS：4）…</span><br><span class="line">.............................................................................</span><br><span class="line">正在读取Ubuntu 18.04 LTS amd64          （Apple_ISO：5）…</span><br><span class="line">..............................................................................</span><br><span class="line">已耗时： 2.082s</span><br><span class="line">速度：880.0M 字节/秒</span><br><span class="line">节省：0.0%</span><br><span class="line">created: /Users/huqilin/Desktop/ubuntu-18.04-desktop-amd64.dmg</span><br><span class="line"></span><br><span class="line">☁  Desktop [master] ⚡ diskutil list    <span class="comment"># 得到 U 盘设备号</span></span><br><span class="line">/dev/disk0 (internal):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:      GUID_partition_scheme                         251.0 GB   disk0</span><br><span class="line">   1:                        EFI EFI                     314.6 MB   disk0s1</span><br><span class="line">   2:                 Apple_APFS Container disk1         250.7 GB   disk0s2</span><br><span class="line"></span><br><span class="line">/dev/disk1 (synthesized):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:      APFS Container Scheme -                      +250.7 GB   disk1</span><br><span class="line">                                 Physical Store disk0s2</span><br><span class="line">   1:                APFS Volume Macintosh HD            112.5 GB   disk1s1</span><br><span class="line">   2:                APFS Volume Preboot                 21.1 MB    disk1s2</span><br><span class="line">   3:                APFS Volume Recovery                517.8 MB   disk1s3</span><br><span class="line">   4:                APFS Volume VM                      3.2 GB     disk1s4</span><br><span class="line"></span><br><span class="line">/dev/disk2 (external, physical):</span><br><span class="line">   <span class="comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span></span><br><span class="line">   0:     FDisk_partition_scheme                        *7.8 GB     disk2</span><br><span class="line">   1:                  Apple_HFS USB8G                   7.8 GB     disk2s1</span><br><span class="line"></span><br><span class="line">☁  Desktop [master] ⚡ diskutil unmountDisk /dev/disk2    <span class="comment"># 卸载 U 盘设备</span></span><br><span class="line">Unmount of all volumes on disk2 was successful</span><br><span class="line">☁  Desktop [master] ⚡ sudo dd <span class="keyword">if</span>=ubuntu-18.04-desktop-amd64.dmg of=/dev/disk2 bs=1m    <span class="comment"># 创建可启动的 USB 驱动盘</span></span><br><span class="line">Password:</span><br><span class="line">1832+1 records <span class="keyword">in</span></span><br><span class="line">1832+1 records out</span><br><span class="line">1921843200 bytes transferred <span class="keyword">in</span> 207.200284 secs (9275292 bytes/sec)</span><br><span class="line"></span><br><span class="line">☁  Desktop [master] ⚡ diskutil eject /dev/disk2    <span class="comment"># 弹出磁盘</span></span><br><span class="line">Disk /dev/disk2 ejected</span><br></pre></td></tr></table></figure></p>
<p>参考：<a href="https://www.jianshu.com/p/e2f41e217109" target="_blank" rel="noopener">Mac OS X Ubuntu usb 安装启动盘制作</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/07/04/WebViewJavascriptBridge——实现OC与JS的相互调用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/04/WebViewJavascriptBridge——实现OC与JS的相互调用/" class="post-title-link" itemprop="url">WebViewJavascriptBridge——实现OC与JS的相互调用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-04 15:59:00" itemprop="dateCreated datePublished" datetime="2018-07-04T15:59:00+08:00">2018-07-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 21:06:11" itemprop="dateModified" datetime="2019-05-01T21:06:11+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-开源框架/" itemprop="url" rel="index"><span itemprop="name">iOS 开源框架</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.5k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>GitHub: <a href="https://github.com/marcuswestin/WebViewJavascriptBridge" target="_blank" rel="noopener">WebViewJavascriptBridge</a></li>
<li>Star: 11000+</li>
</ul>
<blockquote>
<p>说明：双方交互之前还有一些初始化代码，此处省略。。。</p>
</blockquote>
<h2>1. JavaScript 调用 Objective-C 方法</h2>
<blockquote>
<p>💡
Objective-C 注册一个方法，JavaScript 调用该方法。
JS 调用该方法时可以传参数给OC，OC执行完之后也可以返回参数给JS。</p>
</blockquote>
<p>&lt;!-- more --&gt;</p>
<p>Objective-C 端通过如下方法注册：</p>
<h5><code>[bridge registerHandler:(NSString*)handlerName handler:(WVJBHandler)handler]</code></h5>
<p>示例：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 1. JS 调用 OC</span><br><span class="line">// 在 ObjC 中注册一个名为 testObjcCallback 的处理程序</span><br><span class="line">// JavaScript 端就可以通过 WebViewJavascriptBridge.callHandler(&quot;testObjcCallback&quot;) 方法来调用该处理程序了。</span><br><span class="line">// JS 可以给 OC 传参数，放在 data 中。</span><br><span class="line">// OC 也可以返回参数给 JS，放在 responseCallback 中。</span><br><span class="line">[_bridge registerHandler:@&quot;testObjcCallback&quot; handler:^(id data, WVJBResponseCallback responseCallback) &#123;</span><br><span class="line">    // data 是 JS 传过来的参数内容</span><br><span class="line">    NSLog(@&quot;testObjcCallback called: %@&quot;, data);</span><br><span class="line"></span><br><span class="line">    if (responseCallback) &#123;</span><br><span class="line">        // OC 返回给 JS 的内容</span><br><span class="line">        responseCallback(@&quot;Response from testObjcCallback&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>
<p>JavaScript 端通过如下方法调用：</p>
<h5><code>bridge.callHandler(&quot;handlerName&quot;, data)</code></h5>
<h5><code>bridge.callHandler(&quot;handlerName&quot;, data, function responseCallback(responseData) { ... })</code></h5>
<p>示例：</p>
<p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="number">1.</span> JS 调用 OC --&gt;</span><br><span class="line">bridge.callHandler(<span class="string">'testObjcCallback'</span>, &#123;<span class="string">'foo'</span>: <span class="string">'bar'</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    log(<span class="string">'JS got response'</span>, response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>JS 调用名为 testObjcCallback 的 Objective-C 方法，同时给 Objective-C 传递了参数<code>'foo': 'bar'</code>，JS 还接受并打印了Objective-C 返回的参数内容 response。</p>
<h2>2. Objective-C 调用 JavaScript 方法</h2>
<blockquote>
<p>💡
JavaScript 注册一个方法，Objective-C 调用该方法。
OC 调用 JS 方法时，也可以传参数给 JS。
JS 执行完该方法之后，也可以返回参数给 OC。</p>
</blockquote>
<p>JavaScript 端通过如下方法注册：</p>
<h5><code>bridge.registerHandler(&quot;handlerName&quot;, function(responseData) { ... })</code></h5>
<p>示例：</p>
<p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="number">2.</span> OC 调用 JS 的方法 --&gt;</span><br><span class="line">bridge.registerHandler(<span class="string">'testJavascriptHandler'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data, responseCallback</span>) </span>&#123;</span><br><span class="line">    log(<span class="string">'ObjC called testJavascriptHandler with'</span>, data)</span><br><span class="line">    <span class="keyword">var</span> responseData = &#123; <span class="string">'Javascript Says'</span>:<span class="string">'Right back atcha!'</span> &#125;</span><br><span class="line">    log(<span class="string">'JS responding with'</span>, responseData)</span><br><span class="line">    responseCallback(responseData)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>Objective-C 端通过如下方法调用：</p>
<h5><code>[bridge callHandler:(NSString*)handlerName</code></h5>
<h5><code>[bridge callHandler:(NSString*)handlerName data:(id)data]</code></h5>
<h5><code>[bridge callHandler:(NSString*)handlerName data:(id)data responseCallback:(WVJBResponseCallback)callback]</code></h5>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 2. OC 调用 JS, 同时传参数给 JS。</span><br><span class="line">// 调用名为 handlerName 的 javascript 处理程序。</span><br><span class="line">// 如果给出了 responseCallback 块，则 javascript 处理程序可以响应。</span><br><span class="line">[_bridge callHandler:@&quot;testJavascriptHandler&quot; data:@&#123; @&quot;foo&quot;:@&quot;before ready&quot; &#125;];</span><br></pre></td></tr></table></figure></p>
<h3>参考</h3>
<ul>
<li><a href="https://www.jianshu.com/p/9b101ca587a8" target="_blank" rel="noopener">WebViewJavascriptBridge 使用 「JS 交互」</a></li>
<li><a href="https://blog.csdn.net/gezhenrong/article/details/60134343" target="_blank" rel="noopener">iOS WebViewJavascriptBridge 的使用</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/07/03/iOS 编程：半透明弹窗/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/03/iOS 编程：半透明弹窗/" class="post-title-link" itemprop="url">iOS 编程：半透明弹窗</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-03 14:20:00" itemprop="dateCreated datePublished" datetime="2018-07-03T14:20:00+08:00">2018-07-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 20:49:54" itemprop="dateModified" datetime="2019-05-01T20:49:54+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">808</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://www.jianshu.com/p/8a93dd9555e0" target="_blank" rel="noopener">移动弹窗基础知识浅析——iOS 弹窗体系</a></p>
<h3>主流 APP 上的半透明弹窗效果</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075023.jpg" alt="image"></p>
<p>&lt;!-- more --&gt;</p>
<h3>GitHub 第三方框架</h3>
<p>类似样式的第三方框架</p>
<ul>
<li><a href="https://github.com/wimagguc/ios-custom-alertview" target="_blank" rel="noopener">Custom iOS AlertView</a></li>
<li><a href="https://github.com/dogo/SCLAlertView" target="_blank" rel="noopener">SCLAlertView</a></li>
</ul>
<h3>原生实现</h3>
<p>如何在当前页面显示一个半透明的弹窗视图？</p>
<p>新建一个带 Nib 的 <strong>UIViewController</strong> 子类对象（本实例类名为 <strong>HQLVersionUpdateViewController</strong>），接着设置根视图的不透明度（Opacity），这里的值设置为60%：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075024.jpg" alt="image"></p>
<p>接着构建你想要显示的弹窗视图：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075025.jpg" alt="image"></p>
<p>最后添加在当前页面显示的代码：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 显示版本更新弹窗</span><br><span class="line">HQLVersionUpdateViewController *versionUpdateVC = [[HQLVersionUpdateViewController alloc] init];</span><br><span class="line">versionUpdateVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve; // 设置弹出方式</span><br><span class="line">versionUpdateVC.providesPresentationContextTransitionStyle = YES;</span><br><span class="line">versionUpdateVC.definesPresentationContext = YES;</span><br><span class="line">versionUpdateVC.modalPresentationStyle = UIModalPresentationOverFullScreen; // 设置全屏显示</span><br><span class="line">[self presentViewController:versionUpdateVC animated:YES completion:nil];</span><br></pre></td></tr></table></figure></p>
<h3>参考</h3>
<ul>
<li><a href="http://miketech.it/ios-transparent-viewcontroller/" target="_blank" rel="noopener">iOS 创建半透明 ViewController</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_ce804acc0102vyrz.html" target="_blank" rel="noopener">iOS 利用模态视图转换弹出半透明视图</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/06/24/Nginx 使用及配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/24/Nginx 使用及配置/" class="post-title-link" itemprop="url">Nginx 使用及配置</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-24 17:15:00" itemprop="dateCreated datePublished" datetime="2018-06-24T17:15:00+08:00">2018-06-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 20:58:42" itemprop="dateModified" datetime="2019-05-01T20:58:42+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/云计算/" itemprop="url" rel="index"><span itemprop="name">云计算</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">12k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">11 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075039.png" alt></p>
<h3><a href="http://nginx.org/" target="_blank" rel="noopener">Nginx</a> 目录</h3>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /etc/nginx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -l</span></span><br><span class="line">total 60</span><br><span class="line">drwx------ 2 ubuntu ubuntu 4096 Jun 16 09:27 cert    ## ssl证书目录</span><br><span class="line">drwxr-xr-x 2 root   root   4096 Jul 12  2017 conf.d</span><br><span class="line">-rw-r--r-- 1 root   root   1077 Feb 11  2017 fastcgi.conf</span><br><span class="line">-rw-r--r-- 1 root   root   1007 Feb 11  2017 fastcgi_params</span><br><span class="line">-rw-r--r-- 1 root   root   2837 Feb 11  2017 koi-utf</span><br><span class="line">-rw-r--r-- 1 root   root   2223 Feb 11  2017 koi-win</span><br><span class="line">-rw-r--r-- 1 root   root   3957 Feb 11  2017 mime.types</span><br><span class="line">-rw-r--r-- 1 root   root   1501 Aug 31 07:42 nginx.conf    ## 配置文件</span><br><span class="line">-rw-r--r-- 1 root   root    180 Feb 11  2017 proxy_params</span><br><span class="line">-rw-r--r-- 1 root   root    636 Feb 11  2017 scgi_params</span><br><span class="line">drwxr-xr-x 2 root   root   4096 Aug 31 09:42 sites-available  ## 虚拟主机配置代理目录</span><br><span class="line">drwxr-xr-x 2 root   root   4096 Jun 15 06:39 sites-enabled    ## 启动配置代理目录</span><br><span class="line">drwxr-xr-x 2 root   root   4096 Jun  4 06:03 snippets</span><br><span class="line">-rw-r--r-- 1 root   root    664 Feb 11  2017 uwsgi_params</span><br><span class="line">-rw-r--r-- 1 root   root   3071 Feb 11  2017 win-utf</span><br></pre></td></tr></table></figure></p>
<p>&lt;!-- more --&gt;</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075040.jpg" alt="image"></p>
<h3>常用命令</h3>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 查看 Nginx 程序文件目录:/usr/sbin/nginx</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps  -ef | grep nginx</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 查看 nginx.conf 配置文件目录:/etc/nginx/nginx.conf</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> nginx -t                 </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim /etc/nginx/nginx.conf</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 配置文件目录：/etc/nginx</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 虚拟主机配置文件目录：/etc/nginx/sites-available/</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 虚拟主机文件夹目录：/var/www/，详情可在 /etc/nginx/sites-available/ 中配置</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 默认网页文件目录：/usr/share/nginx/html</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 测试配置文件，只检查配置文件是否存在语法错误</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> nginx -t -c &lt;path-to-nginx.conf&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo nginx -t -c /etc/nginx/nginx.conf</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 启动 Nginx 服务</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> nginx 安装目录 -c &lt;path-to-nginx.conf&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo /etc/init.d/nginx start</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 停止 Nginx 服务</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo /usr/sbin/nginx -s stop </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 重启 Nginx </span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo /usr/sbin/nginx -s reload  <span class="comment"># 0.8 版本之后的方法</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">kill</span> -HUP pid     <span class="comment"># 向 master 进程发送信号从容地重启 Nginx，即服务不中断</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo service nginx start</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo service nginx stop</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo service nginx restart</span></span><br></pre></td></tr></table></figure></p>
<p>官方配置说明：</p>
<ul>
<li>http://wiki.nginx.org/Pitfalls</li>
<li>http://wiki.nginx.org/QuickStart</li>
<li>http://wiki.nginx.org/Configuration</li>
</ul>
<h4>Nginx 配置文件：/etc/nginx/nginx.conf</h4>
<ul>
<li>
<p>参考 <a href="http://www.nginx.cn/76.html" target="_blank" rel="noopener">Nginx 基本配置与参数说明</a> | <a href="https://www.nginx.com/resources/wiki/start/topics/examples/full/" target="_blank" rel="noopener">Full Example Configuration</a></p>
</li>
<li>
<p><code>/etc/nginx/nginx.conf</code> 配置文件，在虚拟主机部分包含了这两个文件：</p>
<p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># Virtual Host Configs</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;  </span><br><span class="line"><span class="attribute">include</span> /etc/nginx/sites-enabled/*;</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<h4>配置代理目录： /etc/nginx/sites-available/</h4>
<ul>
<li><strong>sites-available</strong> 目录中存放着具体的 Server 配置文件。</li>
<li>默认配置文件：<code>/etc/nginx/sites-available/default</code> 文件详细配置了默认的虚拟主机目录<code>root /var/www/html</code>，监听的端口是80。</li>
</ul>
<h4>启动配置代理目录：/etc/nginx/sites-enabled/</h4>
<ul>
<li>
<p><strong>sites-enabled</strong> 目录中存放的是链接文件，每个链接文件都指向 <strong>sites-available</strong> 目录中的配置文件，表示需要让 Nginx 启用哪些配置代理文件。</p>
</li>
<li>
<p>在 <strong>sites-enabled</strong> 下创建 symbol link 链接 <strong>sites-available</strong> 下的配置文件就可以启用代理配置。</p>
<p><code>$ sudo ln -s /etc/nginx/sites-available/availableFileName linkFileName</code></p>
</li>
<li>
<p>默认启用的服务：<code>/etc/nginx/sites-enabled/</code> 中的 default 软链接指向  <code>/etc/nginx/sites-available/default</code>，删除该链接文件，就会关闭该配置代理。</p>
</li>
</ul>
<h3>nginx.conf 配置文件详解</h3>
<ul>
<li><a href="http://www.nginx.cn/76.html" target="_blank" rel="noopener">Nginx 基本配置与参数说明</a></li>
<li><a href="https://www.nginx.com/resources/wiki/start/topics/examples/full/" target="_blank" rel="noopener">Full Example Configuration</a></li>
</ul>
<p>Nginx 配置文件路径：<strong>/etc/nginx/nginx.conf</strong></p>
<p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># 全局配置</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">user</span> www-data;             <span class="comment">## 配置 worker 进程的用户和组</span></span><br><span class="line"><span class="attribute">worker_processes</span> auto;     <span class="comment">## 配置 worker 进程启动的数量，建议配置为 CPU 核心数</span></span><br><span class="line"><span class="attribute">error_log</span> logs/error.log;  <span class="comment">## 全局错误日志</span></span><br><span class="line"><span class="attribute">pid</span> /run/nginx.pid;        <span class="comment">## 设置记录主进程 ID 的文件</span></span><br><span class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">8192</span>; <span class="comment">## 配置一个工作进程能够接受并发连接的最大数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># 工作模式及连接数上限</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="comment"># epoll 是多路复用 IO（I/O Multiplexing）中的一种方式，</span></span><br><span class="line">    <span class="comment"># 仅用于 Linux 2.6 以上内核，可以大大提高 Nginx 性能</span></span><br><span class="line">    <span class="attribute">use</span> <span class="literal">epoll</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 单个后台 worker process 进程的最大并发链接数</span></span><br><span class="line">    <span class="comment"># 并发总数 max_clients = worker_professes * worker_connections</span></span><br><span class="line">	worker_connections <span class="number">4096</span>;  <span class="comment">## Defaule: 1024</span></span><br><span class="line">	<span class="comment"># multi_accept on;  ## 指明 worker 进程立刻接受新的连接</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># http 模块</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Basic Settings</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">#sendfile 指令指定 nginx 是否调用 sendfile 函数（zero copy 方式）来输出文件，</span></span><br><span class="line">    <span class="comment">#对于普通应用，必须设为 on,</span></span><br><span class="line">    <span class="comment">#如果用来进行下载等应用磁盘 IO 重负载应用，可设置为 off，</span></span><br><span class="line">    <span class="comment">#以平衡磁盘与网络 I/O 处理速度，降低系统的 uptime.</span></span><br><span class="line">	<span class="attribute">sendfile</span> <span class="literal">on</span>;</span><br><span class="line">	<span class="attribute">tcp_nopush</span> <span class="literal">on</span>;</span><br><span class="line">	<span class="attribute">tcp_nodelay</span> <span class="literal">on</span>;</span><br><span class="line">	<span class="attribute">keepalive_timeout</span> <span class="number">65</span>;      <span class="comment">## 连接超时时间</span></span><br><span class="line">	<span class="attribute">types_hash_max_size</span> <span class="number">2048</span>;  <span class="comment">## 指定散列类型表的最大大小</span></span><br><span class="line">	<span class="comment"># server_tokens off;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># server_names_hash_bucket_size 64;  # this seems to be required for some vhosts</span></span><br><span class="line">	<span class="comment"># server_name_in_redirect off;</span></span><br><span class="line">    </span><br><span class="line">	<span class="attribute">include</span> /etc/nginx/mime.types;  <span class="comment">## 设定 mine 类型</span></span><br><span class="line">	<span class="attribute">default_type</span> application/octet-stream;</span><br><span class="line">   </span><br><span class="line">    <span class="comment"># 设定请求缓冲</span></span><br><span class="line">    <span class="attribute">client_header_buffer_size</span>    <span class="number">128k</span>; <span class="comment"># 指定客户端请求头缓存大小，当请求头大于 1KB 时会用到该项</span></span><br><span class="line">    <span class="attribute">large_client_header_buffers</span>  <span class="number">4</span> <span class="number">128k</span>; <span class="comment"># 最大数量和最大客户端请求头的大小</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># SSL Settings</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment"># 启用所有协议，禁用已废弃的不安全的SSL 2 和SSL 3</span></span><br><span class="line">	<span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>; <span class="comment"># Dropping SSLv3, ref: POODLE</span></span><br><span class="line">    <span class="comment"># 让服务器选择要使用的算法套件</span></span><br><span class="line">	<span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Logging Settings</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">access_log</span> /var/log/nginx/access.log;  <span class="comment">## 访问日志</span></span><br><span class="line">	<span class="attribute">error_log</span> /var/log/nginx/error.log;    <span class="comment">## 错误日志</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Gzip Settings</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line">	<span class="attribute">gzip_disable</span> <span class="string">"msie6"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment"># gzip_vary on;</span></span><br><span class="line">	<span class="comment"># gzip_proxied any;</span></span><br><span class="line">	<span class="comment"># gzip_comp_level 6;</span></span><br><span class="line">	<span class="comment"># gzip_buffers 16 8k;</span></span><br><span class="line">	<span class="comment"># gzip_http_version 1.1;</span></span><br><span class="line">	<span class="comment"># gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Virtual Host Configs</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;   <span class="comment"># 这个文件夹默认是空的</span></span><br><span class="line">	<span class="attribute">include</span> /etc/nginx/sites-enabled/*; <span class="comment"># 开启的 Server 服务配置</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># mail 模块</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line">        </span><br><span class="line"><span class="section">mail</span> &#123;</span><br><span class="line">	<span class="comment"># See sample authentication script at:</span></span><br><span class="line">	<span class="comment"># http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># auth_http localhost/auth.php;</span></span><br><span class="line">	<span class="comment"># pop3_capabilities "TOP" "USER";</span></span><br><span class="line">	<span class="comment"># imap_capabilities "IMAP4rev1" "UIDPLUS";</span></span><br><span class="line"></span><br><span class="line">	<span class="section">server</span> &#123;</span><br><span class="line">		<span class="attribute">listen</span>     localhost:<span class="number">110</span>;</span><br><span class="line">		<span class="attribute">protocol</span>   pop3;</span><br><span class="line">		<span class="attribute">proxy</span>      <span class="literal">on</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="section">server</span> &#123;</span><br><span class="line">		<span class="attribute">listen</span>     localhost:<span class="number">143</span>;</span><br><span class="line">		<span class="attribute">protocol</span>   imap;</span><br><span class="line">		<span class="attribute">proxy</span>      <span class="literal">on</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3>虚拟服务器配置</h3>
<p>虚拟服务器配置文件目录： <strong>/etc/nginx/sites-available/</strong></p>
<p>自定义配置文件：<code>sudo vim /etc/nginx/sites-available/arlingbc</code></p>
<h4>配置 80 端口：</h4>
<p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Virtual Host configuration for arlingbc.com</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># You can move that to a different file under sites-available/ and symlink that</span></span><br><span class="line"><span class="comment"># to sites-enabled/ to enable it.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 丢弃缺乏 Host 头的请求</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"> 	   <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">       <span class="attribute">return</span> <span class="number">444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">       <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">       <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">       <span class="attribute">server_name</span> example.com www.example.com;</span><br><span class="line"></span><br><span class="line">       <span class="comment"># 定义服务器的默认网站根目录位置</span></span><br><span class="line">       <span class="attribute">root</span> /var/www/example/;</span><br><span class="line">       </span><br><span class="line">       <span class="comment"># Add index.php to the list if you are using PHP</span></span><br><span class="line">       <span class="attribute">index</span> index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">       <span class="comment"># access log file 访问日志</span></span><br><span class="line">       <span class="attribute">access_log</span> logs/nginx.access.log main;</span><br><span class="line">       </span><br><span class="line">       <span class="comment"># 禁止访问隐藏文件</span></span><br><span class="line">       <span class="comment"># Deny all attempts to access hidden files such as .htaccess, .htpasswd, .DS_Store (Mac).</span></span><br><span class="line">       <span class="attribute">location</span> <span class="regexp">~ /\.</span> &#123;</span><br><span class="line">                <span class="attribute">deny</span> all;</span><br><span class="line">                <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">       &#125;</span><br><span class="line">    </span><br><span class="line">       <span class="comment"># 默认请求</span></span><br><span class="line">       <span class="attribute">location</span> / &#123;</span><br><span class="line">                <span class="comment"># 首先尝试将请求作为文件提供，然后作为目录，然后回退到显示 404。</span></span><br><span class="line">        		<span class="comment"># try_files 指令将会按照给定它的参数列出顺序进行尝试，第一个被匹配的将会被使用。</span></span><br><span class="line">                <span class="comment"># try_files $uri $uri/ =404;</span></span><br><span class="line">      </span><br><span class="line">                <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?path_info=<span class="variable">$uri</span>&amp;<span class="variable">$args</span> =<span class="number">404</span>;</span><br><span class="line">                <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">                <span class="attribute">expires</span> max;</span><br><span class="line">       &#125;</span><br><span class="line">    </span><br><span class="line">       <span class="comment"># 静态文件，nginx 自己处理</span></span><br><span class="line">       <span class="attribute">location</span> <span class="regexp">~ ^/(images|javascript|js|css|flash|media|static)/</span> &#123;</span><br><span class="line">            </span><br><span class="line">           <span class="comment">#过期 30 天，静态文件不怎么更新，过期可以设大一点，</span></span><br><span class="line">           <span class="comment">#如果频繁更新，则可以设置得小一点。</span></span><br><span class="line">           <span class="attribute">expires</span> <span class="number">30d</span>;</span><br><span class="line">       &#125;</span><br><span class="line">    </span><br><span class="line">       <span class="comment"># .php 请求</span></span><br><span class="line">       <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">                <span class="attribute">try_files</span> <span class="variable">$uri</span> =<span class="number">404</span>;</span><br><span class="line">                <span class="attribute">include</span> /etc/nginx/fastcgi_params;</span><br><span class="line">                <span class="attribute">fastcgi_pass</span> unix:/var/run/php5-fpm.sock;</span><br><span class="line">                <span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">                <span class="attribute">fastcgi_param</span> SCRIPT_FILENAME <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">                <span class="attribute">fastcgi_intercept_errors</span> <span class="literal">on</span>;</span><br><span class="line">       &#125;</span><br><span class="line">    </span><br><span class="line">      <span class="comment"># PHP 脚本请求全部转发到 FastCGI 处理. 使用 FastCGI 默认配置.</span></span><br><span class="line">      <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">      <span class="comment">#</span></span><br><span class="line">      <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">      <span class="comment">#       include snippets/fastcgi-php.conf;</span></span><br><span class="line">      <span class="comment">#</span></span><br><span class="line">      <span class="comment">#       # With php7.0-cgi alone:</span></span><br><span class="line">      <span class="comment">#       fastcgi_pass 127.0.0.1:9000;</span></span><br><span class="line">      <span class="comment">#       # With php7.0-fpm:</span></span><br><span class="line">      <span class="comment">#       fastcgi_pass unix:/run/php/php7.0-fpm.sock;</span></span><br><span class="line">      <span class="comment">#&#125;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># 拒绝访问. htaccess 文件，如果 Apache 的文档根与 nginx 的一致</span></span><br><span class="line">      <span class="comment"># deny access to .htaccess files, if Apache's document root</span></span><br><span class="line">      <span class="comment"># concurs with nginx's one</span></span><br><span class="line">      <span class="comment">#</span></span><br><span class="line">      <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">      <span class="comment">#       deny all;</span></span><br><span class="line">      <span class="comment">#&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4>配置 HTTPS 服务（443端口）：</h4>
<p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># 80 port</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认服务器，丢弃缺乏 Host 头的请求</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"> 	   <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">       <span class="attribute">return</span> <span class="number">444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">        <span class="attribute">sever_name</span> example.com www.example.com;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^(.*)$</span> https://<span class="variable">$host</span><span class="variable">$1</span> <span class="literal">permanent</span>;  <span class="comment">## 端口转发</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># 443 port</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="comment"># 阿里云参考配置</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span>;</span><br><span class="line">    <span class="attribute">server_name</span> example.com www.example.com;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">root</span> /var/www/example/;    <span class="comment"># 为虚拟服务器指明文档的根目录</span></span><br><span class="line">    <span class="attribute">index</span> index.html index.htm; <span class="comment"># 给定URL文件</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="comment"># 部署 HTTP 严格传输安全（HSTS）</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="attribute">add_header</span> Strict-Transport-Security <span class="string">"max-age=31536000; includeSubDomains; preload"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Note: You should disable gzip for SSL traffic.</span></span><br><span class="line">    <span class="comment"># See: https://bugs.debian.org/773332</span></span><br><span class="line">    <span class="attribute">gzip</span> <span class="literal">off</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="comment"># SSL configuration</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">ssl</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">ssl_certificate</span>   cert/certfile.pem;    <span class="comment"># 证书</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span>  cert/certfile.key; <span class="comment"># 私钥</span></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">5m</span>; <span class="comment"># 设置超时时间</span></span><br><span class="line">    <span class="comment"># 密码套件配置</span></span><br><span class="line">    <span class="comment"># 密码套件名称构成：密钥交换-身份验证-加密算法（算法-强度-模式）-MAC或PRF</span></span><br><span class="line">    <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM- SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; </span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span>; <span class="comment"># 设置 SSL/TSL 协议版本号</span></span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>; <span class="comment"># 控制密码套件优先级，让服务器选择要使用的算法套件</span></span><br><span class="line">    <span class="attribute">ssl_buffer_size</span> <span class="number">1400</span>; <span class="comment"># 减少TLS缓冲区大小，可以显著减少首字节时间（《HTTPS权威指南》P416）</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="comment"># location configuration</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3>ngx_http_limit_conn_module 模块</h3>
<p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="comment"># 最大连接数</span></span><br><span class="line">    <span class="comment"># 分配一个共享内存区域，大小为 10M，用于限制IP</span></span><br><span class="line">    <span class="comment"># 使用 $binary_remote_addr 变量， 可以将每条状态记录的大小减少到 64 个字节，这样 1M 的内存可以保存大约 1 万 6 千个 64 字节的记录。</span></span><br><span class="line">    <span class="attribute">limit_conn_zone</span> <span class="variable">$binary_remote_addr</span> zone=ips:<span class="number">10m</span>;</span><br><span class="line">    <span class="comment"># 分配一个共享内存区域，大小为 10M，用于限制服务器连接数</span></span><br><span class="line">    <span class="attribute">limit_conn_zone</span> <span class="variable">$server_name</span> zone=servers:<span class="number">10m</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 设置日志记录级别</span></span><br><span class="line">    <span class="comment"># 当服务器因为频率过高拒绝或者延迟处理请求时可以记下相应级别的日志。</span></span><br><span class="line">    <span class="attribute">limit_conn_log_level</span> <span class="literal">notice</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="comment"># 限制每一个IP地址访问限制10个连接</span></span><br><span class="line">        <span class="attribute">limit_conn</span> ips <span class="number">10</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 服务器提供的最大连接数 1000</span></span><br><span class="line">        <span class="attribute">limit_conn</span> servers <span class="number">1000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3>ngx_http_limit_req_module 模块</h3>
<ul>
<li><a href="https://blog.csdn.net/loophome/article/details/50767907" target="_blank" rel="noopener">Nginx 模块 ngx_http_limit_req_module 限制请求速率</a></li>
<li><a href="http://www.ttlsa.com/nginx/nginx-limiting-the-number-of-requests-ngx_http_limit_req_module-module/" target="_blank" rel="noopener">nginx 限制请求数 ngx_http_limit_req_module 模块</a></li>
</ul>
<p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="comment"># 最大连接数</span></span><br><span class="line">    <span class="comment"># 分配一个共享内存区域，大小为 10M，限制下载连接数为1</span></span><br><span class="line">    <span class="attribute">limit_conn_zone</span> <span class="variable">$binary_remote_addr</span> zone=connections:<span class="number">10m</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 最大并发数，每秒请求数（r/s），每分钟请求数（r/m）</span></span><br><span class="line">    <span class="comment"># 分配一个设置最大并发数的内存区域，大小 10M，limit_req 限制之前的请求速率 1次/s。</span></span><br><span class="line">    <span class="comment"># 使用 $binary_remote_addr 变量， 可以将每条状态记录的大小减少到 64 个字节，这样 1M 的内存可以保存大约 1 万 6 千个 64 字节的记录。</span></span><br><span class="line">    <span class="attribute">limit_req_zone</span> <span class="variable">$binary_remote_addr</span> zone=requests:<span class="number">10m</span> rate=1r/s;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置日志记录级别</span></span><br><span class="line">    <span class="comment"># 当服务器因为频率过高拒绝或者延迟处理请求时可以记下相应级别的日志。</span></span><br><span class="line">    <span class="attribute">limit_req_log_level</span> <span class="literal">warn</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># immediately release socket buffer memory on timeout</span></span><br><span class="line">    <span class="attribute">reset_timedout_connection</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="comment"># 仅对 search URL 有效</span></span><br><span class="line">        <span class="attribute">location</span> /search &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 限制速率</span></span><br><span class="line">            <span class="comment"># 最大延迟请求数量 10 个，超过则返回状态码 503</span></span><br><span class="line">            <span class="attribute">limit_req</span> zone=requests burst=<span class="number">3</span> nodelay;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 限制客户端带宽，</span></span><br><span class="line">        <span class="comment"># 策略：允许小文件自由下载，但对于大文件则启用这种限制</span></span><br><span class="line">        <span class="attribute">location</span> /downloads &#123;</span><br><span class="line">            <span class="comment"># 首先限制客户端的下载连接数为1 </span></span><br><span class="line">            <span class="attribute">limit_conn</span> connections <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 下载完 1M 内容之后，启用 limit_rate 限制。</span></span><br><span class="line">            <span class="attribute">limit_rate_after</span> <span class="number">1m</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 限制客户端下载下载内容的速率为 500k/s</span></span><br><span class="line">            <span class="attribute">limit_rate</span> <span class="number">500k</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3>参考</h3>
<ul>
<li><a href="https://github.com/taobao/nginx-book" target="_blank" rel="noopener">阿里出品：Nginx 开发从入门到精通</a></li>
<li><a href="http://wiki.jikexueyuan.com/project/nginx/" target="_blank" rel="noopener">Nginx 入门指南</a></li>
<li><a href="http://www.nginx.cn/doc/" target="_blank" rel="noopener">Nginx 中文文档</a></li>
<li><a href="https://www.nginx.com/resources/wiki/modules/index.html" target="_blank" rel="noopener">NGINX 3rd Party Modules</a></li>
<li><a href="https://blog.bitzo.cn/2017/07/28/nginx/" target="_blank" rel="noopener">Nginx 反向代理（端口转发）</a></li>
<li><a href="https://www.jianshu.com/p/b1f247fe2cb6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=weixin" target="_blank" rel="noopener">5 个提高 Node.js 应用性能的技巧</a></li>
<li><a href="https://www.yd631.com/nginx-nodejs/" target="_blank" rel="noopener">基于 Debian 系统配置 Nginx 环境的 Node.js 应用教程</a></li>
<li><a href="https://juejin.im/post/57b54f151532bc0063ebfe31" target="_blank" rel="noopener">为什么要使用 Node.js</a></li>
<li><a href="https://www.oschina.net/news/79567/apache-vs-nginx-vs-node-js" target="_blank" rel="noopener">巨头终极对决，Apache、Nginx 与 Node.js 之争</a></li>
<li><a href="https://www.jianshu.com/p/3551a118deeb?utm_campaign=haruki&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=weixin" target="_blank" rel="noopener">图解 HTTPS</a></li>
<li><a href="https://blog.csdn.net/wzy_1988/article/details/8549290" target="_blank" rel="noopener">nginx 强制使用 https 访问 (http 跳转到 https)</a></li>
<li><a href="https://www.jb51.net/article/137208.htm" target="_blank" rel="noopener">Nginx 启用 OCSP Stapling 的配置</a></li>
<li><a href="https://quchao.com/entry/how-to-configure-ocsp-stapling-on-nginx-for-the-certificates-issued-by-lets-encrypt/" target="_blank" rel="noopener">在 NginX 上为证书配置 OCSP Stapling</a></li>
<li><a href="https://www.linuxidc.com/Linux/2017-06/144493.htm" target="_blank" rel="noopener">Linux 公社：Nginx 配置项优化详解</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/06/12/为 VMware 虚拟机内安装的 Ubuntu 16.0.4 设置静态IP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/12/为 VMware 虚拟机内安装的 Ubuntu 16.0.4 设置静态IP/" class="post-title-link" itemprop="url">为 VMware 虚拟机内安装的 Ubuntu 16.0.4 设置静态IP</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-12 00:56:00" itemprop="dateCreated datePublished" datetime="2018-06-12T00:56:00+08:00">2018-06-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 20:46:08" itemprop="dateModified" datetime="2019-05-01T20:46:08+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h3>网络拓扑图</h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075613.png" alt></p>
<p>&lt;!-- more --&gt;</p>
<ol>
<li>
<p>首先打开 Windows 设置 &gt; 控制面板 &gt; 网络和 Internet &gt; 网络和共享中心 &gt; 更改适配器设置 ：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075618.jpg" alt="image"></p>
<p>这边有两点需要注意的地方：</p>
<p>一：主机连到外网的网卡（这里是 VMware Network Adapter VMnet1）需要鼠标右击属性 &gt; 设置 Internet 连接共享，添加 VMware Network Adapter VMnet8：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075620.jpg" alt="image"></p>
<p>添加共享之后，可以去 Windows 的 cmd 控制台查看网卡为 VMnet8 分配的 IP 地址：</p>
<p>使用命令 <code>ipconfig</code> 即可查看：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075621.jpg" alt="image"></p>
</li>
</ol>
<p>二：VMware Network Adapter VMnet8 网卡属性设置 Internet 协议版本（TCP/IPV4）属性如下：</p>
<ul>
<li>IP 地址就是上一步查询到的 IPv4 地址：192.168.137.1</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075622.jpg" alt="image"></p>
<ol start="2">
<li>
<p>设置 VMware 菜单栏的编辑 &gt; 虚拟网络编辑器 :</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075623.jpg" alt="image"></p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075624.jpg" alt="image"></p>
<ul>
<li>
<p>因为分配给 VMnet8 的IP地址是 192.168.137.1，所以子网IP要设置为192.168.137.0</p>
</li>
<li>
<p>取消勾选 DHCP 之前，可以先点击右边的 <strong>DHCP设置</strong>，查看 Ubuntu 虚拟机可用的IP地址范围：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075625.jpg" alt="image"></p>
<p>可以看到可用的IP地址范围是：192.168.137.128 ～ 192.168.137.254。所以说 <strong>IP 地址的值并不是完全任意设置的</strong>。</p>
</li>
<li>
<p>点击 NAT 设置，主要是查看并设置网关IP：192.168.137.2。然后这里的子网掩码、网关IP都需要记住，因为接下来设置静态IP会用到。下面的端口转发设置可以先不用管，下面会说到。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075626.jpg" alt="image"></p>
</li>
</ul>
</li>
<li>
<p>编辑虚拟机设置，网络适配器设置为自定义 VMnet8（NAT模式）：</p>
<p>💡 这一步需要在虚拟机关机状态下才能设置。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075628.jpg" alt="image"></p>
</li>
<li>
<p>打开 Ubuntu虚拟机，设置该虚拟机的静态IP地址，编辑 <code>/etc/network/interfaces</code> 配置文件。</p>
<p>打开控制台，命令行中输入：<code>sudo vim /etc/network/interfaces</code> ，编辑添加如下所示：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075631.jpg" alt="image"></p>
<ul>
<li>ens33 是虚拟器的网卡名称，可以通过 <code>ifconfig</code> 查看你的这个网卡名称是啥，因为不一定是 eth0。</li>
<li>address 是IP地址，因为IP地址的设置范围是192.168.137.128 ～ 192.168.137.254，所以可以设置为 192.168.137.130.</li>
<li>netmask 是子网掩码。</li>
<li>gateway 是网关地址。</li>
<li>broadcast 是广播地址，不知道的话可以在控制台输入<code>ifconfig</code> 查看。</li>
<li>dns-nameservers 是 DNS 地址。</li>
</ul>
</li>
<li>
<p>编辑 <code>/etc/resolv.conf</code> DNS 配置文件。命令行输入<code>sudo vim /etc/resolv.conf</code>，配置 DNS 地址为阿里云的地址：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075632.jpg" alt="image"></p>
<blockquote>
<p>注意：在相对较早的版本中，你需要设置 / etc 下的 resolv.conf 文件，并加入 nameserver，这样才可以连接互联网。但在 Ubuntu 12.04 之后，已经不推荐这种方式了，因为无论你想该配置文件中设置什么值，重新启动之后都会被还原为初始状态。推荐的做法是直接在 interfaces 配置文件中加入 dns-nameserver &lt;网关 IP&gt; 这一行。</p>
</blockquote>
<p>编辑完成后重启网卡：  <code>sudo /etc/init.d/networking restart</code>，或者重启虚拟器：<code>sudo reboot</code>。</p>
<p>最后使用 ping 命令验证。</p>
</li>
</ol>
<h3>其它问题</h3>
<h4>更改 Ubuntu 键盘配置</h4>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 更改为标准 104 键盘</span></span><br><span class="line">sudo dpkg-reconfigure keyboard-configuration</span><br></pre></td></tr></table></figure></p>
<h4>使用 vi 命令编辑配置文件时，键盘输入i底部不显示 -- INSERT -- 来显示编辑器模式</h4>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装并使用 vim</span></span><br><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure></p>
<h4>su</h4>
<ol>
<li>编辑 /etc/NetworkManger/NetworkManger.conf 文件
<code>sudo vim /etc/NetworkManger/NetworkManger.conf</code>
将 <code>managed=false</code> 修改为 <code>managed=true</code>。</li>
<li>重启 network-manager service:
<code>sudo service network-manager restart</code></li>
</ol>
<p>#NAT模式实现局域网物理机与虚拟机的互通访问</p>
<p>这里就是上面略过的端口转发设置，不难理解，参考如下：</p>
<ul>
<li><a href="https://blog.csdn.net/u011031430/article/details/77131841" target="_blank" rel="noopener"> NAT 模式实现局域网物理机与虚拟机的互通访问</a></li>
<li><a href="https://blog.csdn.net/u012268339/article/details/61204801" target="_blank" rel="noopener">局域网访问电脑中 VMware 虚拟机</a></li>
</ul>
<h4>虚拟机所属电脑的防火墙设置</h4>
<p>端口转发设置好之后，同一个局域网内的主机应该可以访问 Ubuntu 上运行的 Server，或者使用 SSH 登录，如果不行或者 ping 不通的话，你可能需要稍微关注一下 Ubuntu 所在的 windows 主机防火墙设置，需要添加入站规则以打开端口：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075632-1.jpg" alt="image"></p>
<h2>桥接模式</h2>
<p>NAT模式中，虚拟机和宿主机不是在同一个网段的，而使用桥接模式则可以让虚拟机和宿主机在同一个网段中。</p>
<p>注意点：</p>
<ol>
<li>宿主机需要勾选 VMware Bridge Protocol（更改适配器设置-VMware Network Adapter VMnet1 属性 - 网络 - 勾选 VMware Bridge Protocol）。</li>
<li>VMware 设置：虚拟网络编辑器添加桥接模式网络。</li>
<li>虚拟机网络适配器设置：网络连接勾选「桥接模式」。</li>
<li>打开虚拟机，设置IP地址需要和宿主机在同一个网段内，网关IP地址需要和宿主机相同。</li>
<li>重启虚拟机网络适配器或重启电脑即可。</li>
</ol>
<h3>参考</h3>
<ul>
<li><a href="https://www.cnblogs.com/chengssblog/p/6531964.html" target="_blank" rel="noopener"><s>Vmware 虚拟机设置静态 IP 地址</s></a> | 文章里的修改网络配置文件目录指的应该是CentOS系统，而Ubuntu下应该是 /etc/network/interfaces 文件。</li>
<li><a href="http://blog.163.com/yi_yixinyiyi/blog/static/136286889201122221528757/" target="_blank" rel="noopener">Ubuntu 的网络配置文件</a></li>
<li><a href="https://www.linuxidc.com/Linux/2017-04/143102.htm" target="_blank" rel="noopener">Linux公社: 为 VMware 虚拟机内安装的 Ubuntu 16.04 设置静态 IP 地址 | 2017-04-24</a></li>
<li><a href="https://www.jianshu.com/p/625de9911bfb" target="_blank" rel="noopener">简书: 为 VMware 虚拟机内安装的 Ubuntu 16.04 设置静态 IP 地址</a></li>
<li><a href="https://graspingtech.com/ubuntu-server-16-04-static-ip/" target="_blank" rel="noopener">How to Configure Ubuntu Server 16.04 to Use a Static IP Address</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/06/09/构建iOS界面：入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/09/构建iOS界面：入门/" class="post-title-link" itemprop="url">构建iOS界面：入门</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-09 15:15:00" itemprop="dateCreated datePublished" datetime="2018-06-09T15:15:00+08:00">2018-06-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 20:44:02" itemprop="dateModified" datetime="2019-05-01T20:44:02+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/翻译文档/" itemprop="url" rel="index"><span itemprop="name">翻译文档</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h3>原文</h3>
<ul>
<li><a href="https://robots.thoughtbot.com/building-ios-interfaces-swift-primer" target="_blank" rel="noopener">Building iOS Interfaces: A Primer</a></li>
<li><a href="https://robots.thoughtbot.com/building-ios-interfaces-views" target="_blank" rel="noopener">Building iOS Interfaces: Views</a></li>
<li><a href="https://robots.thoughtbot.com/building-ios-interfaces-custom-button" target="_blank" rel="noopener">Building iOS Interfaces: A Custom Button</a></li>
</ul>
<p>本文是构建 iOS 界面系列的第1部分，它解决了如何在没有原生编程经验的情况下实现iOS设计的方法和原因，这对Web设计人员和开发人员来说是完美的。</p>
<p>为Web设计教会了我们设计师编写HTML / CSS的价值，以及它在提高整体工作质量方面的作用。 在现代网页设计过程中，涉及静态模型和数百兆分片资产的瀑布工作流程早已不复存在。</p>
<p>不幸的是，对于移动设计来说也是一样。 大量的设计者发现Xcode令人望而生畏，他们更倾向于使用其他工具来设计原型，然后交给开发者来实现。 平台制造商和开发商没有把这个任务变得更容易。 文档和工具都是以开发人员为中心的，而社区普遍认为UI编程是开发人员工作的一部分。 现在是时候改变这一点。</p>
<p>&lt;!-- more --&gt;</p>
<h2>Xcode? Swift? UIKit? Oh My!</h2>
<p>当我和设计师学习iOS的时候，我听到的最常见的问题是“我从哪里开始？”。 考虑到这个过程涉及的概念相对较多，这是一个有效的问题。 无法得到这个问题的明确答案往往导致在开始之前放弃。 在学习方面，没有比处理未知的未知物更令人沮丧的事情 - 我们不知道我们不知道的事情。 这个介绍旨在解决这个问题，然后再讨论更具体的话题。</p>
<h3>Frameworks</h3>
<p>让我们从基础开始。 iOS操作系统是由苹果公司建立的一个封闭的系统，为每个iPhone，iPad和iPod Touch提供电源。 它从曾在Mac电脑上运行十多年的祖父OS X大量借用。 反过来，手机操作系统严重影响了苹果公司开发工具带的最新成员watchOS（苹果手表）和tvOS（苹果电视）。</p>
<p>iOS最基本的构建块之一就是框架。 框架是一个独立的API集合，旨在解决诸如控件，音频，视频，动画等特定问题。 框架可以驻留在其他框架中，导致一个层次结构，如果一个人不注意，可能很容易混淆。</p>
<p>iOS中的顶级框架称为Cocoa Touch，与Cocoa for OS X相反.Cocoa Touch托管您将作为UI设计者处理的所有框架，包括Foundation，UIKit和Core Animation。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075610.jpg" alt="image"></p>
<p><strong>How will this affect my day-to-day work?</strong></p>
<p>您需要将这些框架中的一些导入到您的文件中才能访问某些API。 对于iOS，UIKit将是最常见的导入。</p>
<h3>Languages</h3>
<p>现在我们已经确定了我们要使用的框架，我们需要一种方法来与他们沟通。 这就是编程语言的地方。多年来，开发人员已经能够使用诸如C，Objective-C甚至C ++等语言来调用内置的API。</p>
<p>在2014年，苹果公司将Swift作为一种现代化的官方编程语言，大部分框架都进行了更新以利用它。</p>
<p><strong>How will this affect my day-to-day work?</strong></p>
<p>你需要熟悉Swift，并且对于面向对象的编程如何工作有一些基本的了解。 这些听起来可能听起来令人望而生畏，但实际上并非如此。 不是如果你已经处理了 CSS 和 JavaScript。 这是一个Swift文件的例子：</p>
<p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyButton</span>: <span class="title">UIButton</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">awakeFromNib</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.awakeFromNib()</span><br><span class="line">    backgroundColor = <span class="type">UIColor</span>.yellowColor()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的代码片段定义了一个新的按钮子类，并使其默认背景颜色为黄色。 这里介绍的概念包括类和继承，超出了这篇介绍性文章的范围，但仍然是充分利用框架API的基础。</p>
<h3>Software Tools</h3>
<p>到目前为止，我们已经有框架和语言与他们沟通。 我们现在需要的是将这些成分结合在一起来构建我们的用户界面。 输入Xcode。</p>
<p>不论好坏，Xcode是唯一官方支持的用于构建iOS应用程序的编辑器。 它是功能丰富的，包括您需要开始的所有第一方框架。 这个名字实际上是误导性的，因为你花费大部分时间的部分甚至不需要编写代码：Interface Builder。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075611.jpg" alt="image"></p>
<p>Interface Builder允许您以可视化的方式构建界面，包括将不同的控件放入画布中，并在某种程度上对其进行造型，而无需编写任何代码。 不是所有的东西都像你最喜欢的图形编辑器一样工作，但是相似之处在那里。</p>
<p>我们在设计界面时所做的很大一部分是布局。 为此，苹果已经构建了自动布局，一个基于约束的系统，描述视图之间的关系，而不是绝对的框架。</p>
<p>这将如何影响我的日常工作？</p>
<p>您将花费大部分时间在图形编辑器和Xcode之间。 此外，自动布局将成为您可能触及的一切的重要组成部分。</p>
<h3>Recap</h3>
<p>我们已经了解了您需要熟悉的工具和技术，以便更好地实施您的iOS设计。你可能仍然想知道你应该如何处理这些问题 - 一个合理的问题，如果没有答案，可能会阻碍学习过程，或者更糟的是阻止它。先让我们看看坏消息：</p>
<ul>
<li>熟悉上面介绍的所有概念和工具，才能充分发挥平台的潜力。</li>
<li>除Swift之外，很难在学习过程中将这些技术相互分离。</li>
</ul>
<p>现在好消息是：</p>
<ul>
<li>Basic Swift is a low-hanging fruit to go for.</li>
<li>了解框架的最好方法就是使用它们。</li>
<li>当你有一个明确的目标时，学习顺序就会减少。</li>
<li>你将要使用的框架是有据可查的。</li>
<li>所有考虑的事情，学习中最根本的事情之一就是理解为什么。唉，那里的大部分资源都是完全侧重于如何做的饼干食谱。希望本系列能够为您解决这个问题找到正确的道路。</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2018/06/08/iOS 日常开发问题及解决方法汇总/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/08/iOS 日常开发问题及解决方法汇总/" class="post-title-link" itemprop="url">iOS 日常开发问题及解决方法汇总</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-08 10:32:00" itemprop="dateCreated datePublished" datetime="2018-06-08T10:32:00+08:00">2018-06-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-01 20:51:57" itemprop="dateModified" datetime="2019-05-01T20:51:57+08:00">2019-05-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>说明:该列表用于记录日常开发中遇到的编译问题和解决方法!</p>
</blockquote>
<h3>1. 编译器错误：Unsupported compiler 'com.apple.compilers.llvmgcc42' selected for architecture 'armv7'</h3>
<p>解决方法：
Build Settings - Build Options - Compile for C/C++/Objective-C 选项卡设置为：<strong>Default compiler(Apple LLVM 9.0)</strong>
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075143.png" alt="Jietu20171222-165112.png"></p>
<p>&lt;!-- more --&gt;</p>
<h3>2. Missing .entitlements file 导致代码签名失败无法编译问题</h3>
<p>此问题产生的原因是我在项目中 <strong>New Group with Flower</strong> 时无意间对名为  <code>XXX.entitlements</code> 的文件进行了移动。
导致 Targets - Build Settings - Signing - Code Signing Entitlements 这里提示找不到 <code>.entitlements</code> 的文件。</p>
<p>解决方法：重新设置 <code>.entitlements</code> 文件的完整路径。一开始我不知道是哪里有问题，就把 <strong>Code Signing Entitlements</strong>这一栏的值清空了，然后去 TARGETS - General - Signing 中重新勾选 <code>Automatically manage signing</code>，Team 一栏空缺的话就重新勾选。然后 Capabilities 中 Push Notifications 如果有⚠️警告之类的提示就点击 fix 按钮。最后也可以解决问题，编译成功。</p>
<h3>3. EXC_BAD_ACCESS 问题</h3>
<p>参考： <a href="http://www.cocoachina.com/ios/20160226/15324.html" target="_blank" rel="noopener">EXC_BAD_ACCESS的本质详解以及僵尸模式调试原理</a></p>
<h3>4. Xcode 8、9屏蔽控制台多余的Log日志</h3>
<p>Xcode菜单栏 &gt; Product &gt; Scheme &gt; Edit Scheme &gt; Run &gt; Arguments &gt; Environment Variables 设置：
<strong>OS_ACTIVITY_MODE = disable</strong>。</p>
<blockquote>
<p>💡Tips
设置<code>DYLD_PRINT_STATISTICS</code> = <code>YES</code> 可以在控制台打印加载时长。</p>
</blockquote>
<p>参考：<a href="http://blog.csdn.net/xia0liang/article/details/52923658" target="_blank" rel="noopener">Xcode8 屏蔽控制台多余的Log日志</a></p>
<h3>5. Xcode升级到8.2.1后编辑区域码字意外退出</h3>
<p>解决方法：查看意外退出报告，Finder前往plug-ins目录，删除相关文件（<strong>KSImageNamed.ideplugin</strong>）。
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075145.jpg" alt>
参考：<a href="http://www.jianshu.com/p/b20f2ceb8d4d" target="_blank" rel="noopener">“Xcode”意外退出(无限意外退出) 问题的解决方法</a></p>
<h3>6. Xcode升级后插件失效错误分析与解决方案</h3>
<p><a href="http://forkpanda.com" target="_blank" rel="noopener">参考1</a> 、<a href="http://joeshang.github.io/2015/04/10/fix-xcode-upgrade-plugin-invalid/" target="_blank" rel="noopener">参考2</a></p>
<h3>7. Xcode删除文件后Issue 导航栏missing file警告</h3>
<p>解决方法：运行终端，执行命令行<code>cd</code>进入missing file目录，然后运行:
<code>svn delete nameOfMissingFile</code>
参考：<a href="http://blog.csdn.net/yuanya/article/details/12494783" target="_blank" rel="noopener">Xcode删除文件后missing file警告 </a></p>
<p>某次删除图片文件显示警告: <code>a peg revision is not allowed here</code>
解决方法是加 @ 后缀：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$svn delete main_normal@2x-1.png</span><br><span class="line">svn: E200009: &apos;main_normal@2x-1.png&apos;: a peg revision is not allowed here</span><br><span class="line">$ svn delete main_normal@2x-1.png@</span><br><span class="line">D         main_normal@2x-1.png</span><br></pre></td></tr></table></figure></p>
<h3>8. 真机调试NSLog无法打印</h3>
<p>解决方法：使用 <code>printf()</code>方法。或者使用DDLog日志框架。
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#ifdef DEBUG</span><br><span class="line"></span><br><span class="line">#define MYString [NSString stringWithFormat:@&quot;%s&quot;, __FILE__].lastPathComponent</span><br><span class="line">#define NSLog(...) printf(&quot;%s 第%d行: %s\n\n&quot;,[MYString UTF8String] ,__LINE__, [[NSString stringWithFormat:__VA_ARGS__] UTF8String]);</span><br><span class="line"></span><br><span class="line">#else</span><br><span class="line">#define NSLog(...)</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure></p>
<p>参考：<a href="http://www.jianshu.com/p/caaea517ad36" target="_blank" rel="noopener">Xcode 8解决真机测试Log被屏蔽的问题</a></p>
<h3>9. 在Storyboard上修改了Text的文字，真机上调试并没有生效的问题</h3>
<p>解决方法：汉化问题，Storyboard下还有一个中文版副本
参考：<a href="http://www.2cto.com/kf/201308/234274.html" target="_blank" rel="noopener">IOS StoryBoard修改对于真机无效的问题</a></p>
<h3>10. 项目编译运行通过，断点在main函数上breakpoint 1.2</h3>
<p>解决方法：首先修改添加的All Exception breakpoint:
<img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075147.jpg" alt>
再去控制台定位问题。</p>
<h3>11. 调试打印方法名</h3>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 在控制台打印方法名</span><br><span class="line">NSLog(@&quot;%s&quot;,__func__);</span><br><span class="line">NSLog(@&quot;%s&quot;,__FUNCTION__);</span><br><span class="line">NSLog(@&quot;%s&quot;,__PRETTY_FUNCTION__);</span><br><span class="line">NSLog(@&quot;%@&quot;,NSStringFromSelector(_cmd));</span><br></pre></td></tr></table></figure></p>
<h3>12. 自动布局约束发生歧义</h3>
<p>解决方法：使用 <code>_autolayoutTrance</code> 方法
① 在视图控制器的 <code>viewWillAppear:</code> 方法中设置一个断点。
② 当程序在断点处停下来之后，在控制台输入：
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(lldb) po <span class="comment">[<span class="comment">[UIWindow keyWindow]</span> _autolayoutTrance]</span></span><br></pre></td></tr></table></figure></p>
<p>如果应用界面与期望的方式不一致，同时也无法确定问题的原因，就可以使用该方法找出有歧义布局的视图。</p>
<h3>13 设置严格选择器匹配</h3>
<p>Build Settings:</p>
<p>-Wstrict-selector-match</p>
<h3>14 <a href="https://blog.csdn.net/qq_19979539/article/details/52493194" target="_blank" rel="noopener">iOS 解决 CUICatalog: Invalid asset name supplied 问题</a></h3>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/075148.png" alt></p>
<h2>参考</h2>
<ul>
<li><a href="https://www.jianshu.com/p/1ff9e44ccc78" target="_blank" rel="noopener">多年iOS开发经验总结(一) @杂雾无尘</a></li>
<li><a href="https://www.jianshu.com/p/9fcd37c0ea05" target="_blank" rel="noopener">多年iOS开发经验总结(二) @杂雾无尘</a></li>
<li><a href="https://www.jianshu.com/p/15b91b260d16" target="_blank" rel="noopener">iOS - 常见问题的整理 (一) @重庆妹子在霾都</a></li>
<li><a href="https://www.jianshu.com/p/aa07ae3be254" target="_blank" rel="noopener">iOS - 常见问题的整理 (二) @重庆妹子在霾都</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png" alt="独木舟的木">
            
              <p class="site-author-name" itemprop="name">独木舟的木</p>
              <div class="site-description motion-element" itemprop="description">有时候阳光很好 有时候阳光很暗</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">316</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">独木舟的木</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">2.2m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">32:53</span>
  
</div>



  <span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
  </span>
  <span class="post-meta-divider">|</span>

  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/9/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  

  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  
  
</body>
</html>
