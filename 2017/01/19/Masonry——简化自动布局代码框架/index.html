<!DOCTYPE html>













<html class="theme-next gemini" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '0E2AON8EZF',
      apiKey: '22fbefd84c8343239f5c04365b9728de',
      indexName: 'MyBlogPlatform',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="GitHub源码: Masonry  star:17000+   ⭐️⭐️⭐️  以下内容来源于官方源码、 README 文档、测试 Demo或个人使用总结 ！  MasonryMasonry 是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装自动布局，简洁明了并具有高可读性。 Masonry利用简化、可链接和表达式的语法发挥 Auto Layout 和 NSLayoutCon">
<meta name="keywords" content="iOS,GitHub">
<meta property="og:type" content="article">
<meta property="og:title" content="Masonry——简化自动布局代码框架">
<meta property="og:url" content="https://andy0570.com/2017/01/19/Masonry——简化自动布局代码框架/index.html">
<meta property="og:site_name" content="独木舟的木">
<meta property="og:description" content="GitHub源码: Masonry  star:17000+   ⭐️⭐️⭐️  以下内容来源于官方源码、 README 文档、测试 Demo或个人使用总结 ！  MasonryMasonry 是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装自动布局，简洁明了并具有高可读性。 Masonry利用简化、可链接和表达式的语法发挥 Auto Layout 和 NSLayoutCon">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-e9dbc519a52c663f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-267b32ef5012fde1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-0572861e5411a644.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-039fd1306120f1b4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-c93a5fceecc4012d.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-06bc5eb7dfff4d34.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-fd5dee7c4a43a469.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-30f240cd53c469ea.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-ad606f82654fc2c0.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2648731-7f6f17b8a615be53.gif?imageMogr2/auto-orient/strip">
<meta property="og:updated_time" content="2019-04-16T17:43:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Masonry——简化自动布局代码框架">
<meta name="twitter:description" content="GitHub源码: Masonry  star:17000+   ⭐️⭐️⭐️  以下内容来源于官方源码、 README 文档、测试 Demo或个人使用总结 ！  MasonryMasonry 是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装自动布局，简洁明了并具有高可读性。 Masonry利用简化、可链接和表达式的语法发挥 Auto Layout 和 NSLayoutCon">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/2648731-e9dbc519a52c663f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">



  <link rel="alternate" href="/atom.xml" title="独木舟的木" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/2017/01/19/Masonry——简化自动布局代码框架/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Masonry——简化自动布局代码框架 | 独木舟的木</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">独木舟的木</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">37</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">317</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/andy0570" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/01/19/Masonry——简化自动布局代码框架/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Masonry——简化自动布局代码框架

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-01-19 17:57:00" itemprop="dateCreated datePublished" datetime="2017-01-19T17:57:00+08:00">2017-01-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-17 01:43:02" itemprop="dateModified" datetime="2019-04-17T01:43:02+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-开源框架/" itemprop="url" rel="index"><span itemprop="name">iOS 开源框架</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/01/19/Masonry——简化自动布局代码框架/" class="leancloud_visitors" data-flag-title="Masonry——简化自动布局代码框架">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <ul>
<li>GitHub源码: <a href="https://github.com/SnapKit/Masonry" target="_blank" rel="noopener">Masonry</a> </li>
<li>star:17000+</li>
</ul>
<blockquote>
<pre><code>⭐️⭐️⭐️ 
</code></pre><p>以下内容来源于官方源码、 README 文档、测试 Demo或个人使用总结 ！</p>
</blockquote>
<h1 id="Masonry"><a href="#Masonry" class="headerlink" title="Masonry"></a>Masonry</h1><p><strong>Masonry</strong> 是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装自动布局，简洁明了并具有高可读性。</p>
<p>Masonry利用简化、可链接和表达式的语法发挥 <strong>Auto Layout</strong> 和 <strong>NSLayoutConstraints</strong> 的力量。支持iOS和OSX <strong>Auto Layout</strong>。</p>
<p>总的来说，就是当你在 <strong>Interface Bulider</strong> 上使用 <strong>Auto Layout</strong> 的时候基本上是非常方便的，但是当我们的 <strong>UI</strong> 是用手写代码生成时，或是<strong>UI界面</strong>需要随用户交互而更改，这时候做自动布局的时候使用原生的 <strong>NSLayoutConstraints</strong> 类及其的繁琐，<strong>Masonry</strong> 用简洁的语法对<strong>Auto Layout</strong> 进行了封装，使用相对更方便。</p>
<h3 id="NSLayoutConstraints-的问题"><a href="#NSLayoutConstraints-的问题" class="headerlink" title="NSLayoutConstraints 的问题"></a>NSLayoutConstraints 的问题</h3><p>添加一个子视图，跟随父视图的大小变化，但是与父视图边距有10个点的距离：<br><img src="http://upload-images.jianshu.io/upload_images/2648731-e9dbc519a52c663f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="使用-NSLayoutConstraints"><a href="#使用-NSLayoutConstraints" class="headerlink" title="使用 NSLayoutConstraints"></a>使用 NSLayoutConstraints</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    UIView *superview = self.view;</span><br><span class="line">    UIView *view1 = [[UIView alloc] init];</span><br><span class="line">    // 设置为NO，表示通过添加自己的约束以使用 Auto Layout 定位视图</span><br><span class="line">    view1.translatesAutoresizingMaskIntoConstraints = NO;</span><br><span class="line">    view1.backgroundColor = [UIColor greenColor];</span><br><span class="line">    [superview addSubview:view1];</span><br><span class="line">    </span><br><span class="line">    // 指定每个边缘的插入量（正），值可以是负的到“起点”</span><br><span class="line">    UIEdgeInsets padding = UIEdgeInsetsMake(10, 10, 10, 10);</span><br><span class="line">    </span><br><span class="line">    [superview addConstraints:@[</span><br><span class="line">                                </span><br><span class="line">        // view1 constraints</span><br><span class="line">        // view1.attribute1 = multiplier × superview.attribute2 + constant</span><br><span class="line">        // view1的顶部距离父视图的顶部10px</span><br><span class="line">        [NSLayoutConstraint constraintWithItem:view1</span><br><span class="line">                                     attribute:NSLayoutAttributeTop</span><br><span class="line">                                     relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                        toItem:superview</span><br><span class="line">                                     attribute:NSLayoutAttributeTop</span><br><span class="line">                                    multiplier:1.0</span><br><span class="line">                                      constant:padding.top],</span><br><span class="line">        // 左边距离10px</span><br><span class="line">        [NSLayoutConstraint constraintWithItem:view1</span><br><span class="line">                                     attribute:NSLayoutAttributeLeft</span><br><span class="line">                                     relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                        toItem:superview</span><br><span class="line">                                     attribute:NSLayoutAttributeLeft</span><br><span class="line">                                    multiplier:1.0</span><br><span class="line">                                      constant:padding.left],</span><br><span class="line">        // 底部距离10px</span><br><span class="line">        [NSLayoutConstraint constraintWithItem:view1</span><br><span class="line">                                     attribute:NSLayoutAttributeBottom</span><br><span class="line">                                     relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                        toItem:superview</span><br><span class="line">                                     attribute:NSLayoutAttributeBottom</span><br><span class="line">                                    multiplier:1.0</span><br><span class="line">                                      constant:-padding.bottom],</span><br><span class="line">        // 右边距离10px</span><br><span class="line">        [NSLayoutConstraint constraintWithItem:view1</span><br><span class="line">                                     attribute:NSLayoutAttributeRight</span><br><span class="line">                                     relatedBy:NSLayoutRelationEqual</span><br><span class="line">                                        toItem:superview</span><br><span class="line">                                     attribute:NSLayoutAttributeRight</span><br><span class="line">                                    multiplier:1</span><br><span class="line">                                      constant:-padding.right],</span><br><span class="line">        ]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用Masonry"><a href="#使用Masonry" class="headerlink" title="使用Masonry"></a>使用Masonry</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.equalTo(superview.mas_top).with.offset(padding.top);</span><br><span class="line">    make.left.equalTo(superview.mas_left).with.offset(padding.left);</span><br><span class="line">    make.bottom.equalTo(superview.mas_bottom).with.offset(-padding.bottom);</span><br><span class="line">    make.right.equalTo(superview.mas_right).with.offset(-padding.right);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h4 id="更短的写法"><a href="#更短的写法" class="headerlink" title="更短的写法"></a>更短的写法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.edges.equalTo(superview).with.insets(padding);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h3 id="Masonry实践"><a href="#Masonry实践" class="headerlink" title="Masonry实践"></a>Masonry实践</h3><p>下面参考<a href="http://adad184.com/2014/09/28/use-masonry-to-quick-solve-autolayout/" target="_blank" rel="noopener">Masonry介绍与使用实践(快速上手Autolayout) @里脊串的开发随笔</a>，练习使用Masonry。</p>
<h4 id="需要的源码"><a href="#需要的源码" class="headerlink" title="需要的源码"></a>需要的源码</h4><ul>
<li><a href="https://github.com/SnapKit/Masonry" target="_blank" rel="noopener">GitHub:Masonry</a></li>
<li><a href="https://github.com/adad184/MMPlaceHolder" target="_blank" rel="noopener">GitHub:MMPlaceHolder</a></li>
<li><a href="https://github.com/adad184/DemoMasonry" target="_blank" rel="noopener">GitHub:DemoMasonry</a></li>
</ul>
<h4 id="1-居中显示一个300-300的superview"><a href="#1-居中显示一个300-300的superview" class="headerlink" title="1. 居中显示一个300*300的superview"></a>1. 居中显示一个300*300的superview</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">UIView *superview = [UIView new];</span><br><span class="line">[superview showPlaceHolder];    // 需要导入MMPlaceHolder框架</span><br><span class="line">superview.backgroundColor = [UIColor blackColor];</span><br><span class="line">[self.view addSubview:superview];</span><br><span class="line">[superview mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.center.equalTo(self.view);</span><br><span class="line">    make.size.mas_equalTo(CGSizeMake(300, 300));</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-267b32ef5012fde1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="2-让superview1略小于其superview-边距为20"><a href="#2-让superview1略小于其superview-边距为20" class="headerlink" title="2.让superview1略小于其superview(边距为20)"></a>2.让superview1略小于其superview(边距为20)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">UIView *superview1 =[UIView new];</span><br><span class="line">superview1.backgroundColor = [UIColor redColor];</span><br><span class="line">[superview addSubview:superview1];</span><br><span class="line">[superview1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    // 写法一</span><br><span class="line">   make.edges.equalTo(superview).with.insets(UIEdgeInsetsMake(20, 20, 20, 20));</span><br><span class="line"></span><br><span class="line">    /** 写法二</span><br><span class="line">    make.top.equalTo(superview).with.offset(20);</span><br><span class="line">    make.left.equalTo(superview).with.offset(20);</span><br><span class="line">    make.bottom.equalTo(superview).with.offset(-20);</span><br><span class="line">    make.right.equalTo(superview).with.offset(-20);</span><br><span class="line">    **/</span><br><span class="line"></span><br><span class="line">    /** 写法三</span><br><span class="line">     make.top.left.bottom.and.right.equalTo(superview).with.insets(UIEdgeInsetsMake(20, 20, 20, 20));</span><br><span class="line">    **/</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-0572861e5411a644.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="3-让两个高度为150的view垂直居中、等宽、等间隔排列-间隔为10-自动计算其宽度"><a href="#3-让两个高度为150的view垂直居中、等宽、等间隔排列-间隔为10-自动计算其宽度" class="headerlink" title="3.让两个高度为150的view垂直居中、等宽、等间隔排列 (间隔为10 ),自动计算其宽度"></a>3.让两个高度为150的view垂直居中、等宽、等间隔排列 (间隔为10 ),自动计算其宽度</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">UIView *superview2 =[UIView new];</span><br><span class="line">superview2.backgroundColor = [UIColor orangeColor];</span><br><span class="line">[superview addSubview:superview2];</span><br><span class="line"></span><br><span class="line">UIView *superview3 =[UIView new];</span><br><span class="line">superview3.backgroundColor = [UIColor orangeColor];</span><br><span class="line">[superview addSubview:superview3];</span><br><span class="line"></span><br><span class="line">int padding1 = 10;</span><br><span class="line">[superview2 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.centerY.mas_equalTo(superview.mas_centerY);</span><br><span class="line">    make.left.equalTo(superview.mas_left).with.offset(padding1);</span><br><span class="line">    make.right.equalTo(superview3.mas_left).with.offset(-padding1);</span><br><span class="line">    make.height.mas_equalTo(@150);</span><br><span class="line">    make.width.equalTo(superview3);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">[superview3 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.centerY.mas_equalTo(superview.mas_centerY);</span><br><span class="line">    make.left.equalTo(superview2.mas_right).with.offset(padding1);</span><br><span class="line">    make.right.equalTo(superview.mas_right).with.offset(-padding1);</span><br><span class="line">    make.height.mas_equalTo(@150);</span><br><span class="line">    make.width.equalTo(superview2);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-039fd1306120f1b4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="4-在UIScrollView-上顺序排列一些view并自动计算contentSize"><a href="#4-在UIScrollView-上顺序排列一些view并自动计算contentSize" class="headerlink" title="4.在UIScrollView 上顺序排列一些view并自动计算contentSize"></a>4.在UIScrollView 上顺序排列一些view并自动计算contentSize</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">UIScrollView *scrollView = [UIScrollView new];</span><br><span class="line">scrollView.backgroundColor = [UIColor whiteColor];</span><br><span class="line">[superview addSubview:scrollView];</span><br><span class="line">[scrollView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.edges.equalTo(superview).with.insets(UIEdgeInsetsMake(5, 5, 5, 5));</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">UIView *container = [UIView new];</span><br><span class="line">[scrollView addSubview:container];</span><br><span class="line">[container mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.edges.equalTo(scrollView);</span><br><span class="line">    make.width.equalTo(scrollView);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">int count = 10;</span><br><span class="line">UIView *lastView = nil;</span><br><span class="line"></span><br><span class="line">for (int i = 1;  i &lt;= count; i++) &#123;</span><br><span class="line">    UIView *subView = [UIView new];</span><br><span class="line">    [container addSubview:subView];</span><br><span class="line">    subView.backgroundColor = [UIColor colorWithHue:(arc4random() % 256 / 256.0)</span><br><span class="line">                                         saturation:(arc4random() % 128 / 256.0) + 0.5</span><br><span class="line">                                         brightness:(arc4random() % 128 / 256.0) + 0.5</span><br><span class="line">                                              alpha:1];</span><br><span class="line"></span><br><span class="line">    [subView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.left.and.right.equalTo(container);</span><br><span class="line">        make.height.mas_equalTo(@(20 * i)); // 每个子视图的高度是20的倍数</span><br><span class="line"></span><br><span class="line">        if (lastView) &#123;</span><br><span class="line">            // 下一个子视图的顶部 = 上一个子视图的底部</span><br><span class="line">            make.top.mas_equalTo(lastView.mas_bottom);</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            // 第一次执行，lastView = nil,因此第一个子视图的顶部是容器的顶部</span><br><span class="line">            make.top.mas_equalTo(container.mas_top);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    lastView = subView;</span><br><span class="line">&#125;</span><br><span class="line">[container mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    // 容器的底部是最后一个视图的底部</span><br><span class="line">    make.bottom.equalTo(lastView.mas_bottom);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-c93a5fceecc4012d.gif?imageMogr2/auto-orient/strip" alt></p>
<h4 id="5-横向或者纵向等间隙的排列一组view"><a href="#5-横向或者纵向等间隙的排列一组view" class="headerlink" title="5.横向或者纵向等间隙的排列一组view"></a>5.横向或者纵向等间隙的排列一组view</h4><blockquote>
<p>11/15 添加<br>均匀分布一组view推荐使用 <code>NSArray+MASAdditions.h</code> 类中的两个方法:</p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  distribute with fixed spacing</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> axisType     which axis to distribute items along</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> fixedSpacing the spacing between each item</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> leadSpacing  the spacing before the first item and the container</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> tailSpacing  the spacing after the last item and the container</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)<span class="string">mas_distributeViewsAlongAxis:</span>(MASAxisType)axisType <span class="string">withFixedSpacing:</span>(CGFloat)fixedSpacing <span class="string">leadSpacing:</span>(CGFloat)leadSpacing <span class="string">tailSpacing:</span>(CGFloat)tailSpacing;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  distribute with fixed item size</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> axisType        which axis to distribute items along</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> fixedItemLength the fixed length of each item</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> leadSpacing     the spacing before the first item and the container</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> tailSpacing     the spacing after the last item and the container</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)<span class="string">mas_distributeViewsAlongAxis:</span>(MASAxisType)axisType <span class="string">withFixedItemLength:</span>(CGFloat)fixedItemLength <span class="string">leadSpacing:</span>(CGFloat)leadSpacing <span class="string">tailSpacing:</span>(CGFloat)tailSpacing;</span><br></pre></td></tr></table></figure>
<p><del>需要使用封装的 category 类:</del></p>
<ul>
<li><strong>UIView+LJC.h</strong>：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 横向或者纵向等间隙的排列一组view</span><br><span class="line"> */</span><br><span class="line">@interface UIView (LJC)</span><br><span class="line"></span><br><span class="line">- (void) distributeSpacingHorizontallyWith:(NSArray*)views;</span><br><span class="line"></span><br><span class="line">- (void) distributeSpacingVerticallyWith:(NSArray*)views;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>UIView+LJC.m</strong>：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;UIView+LJC.h&quot;</span><br><span class="line">#import &lt;Masonry/Masonry.h&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@implementation UIView (LJC)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 横向排列一组view</span><br><span class="line"></span><br><span class="line"> @param views view数组</span><br><span class="line"> */</span><br><span class="line">- (void) distributeSpacingHorizontallyWith:(NSArray*)views</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableArray *spaces = [NSMutableArray arrayWithCapacity:views.count+1];</span><br><span class="line">    </span><br><span class="line">    for ( int i = 0 ; i &lt; views.count+1 ; ++i )</span><br><span class="line">    &#123;</span><br><span class="line">        UIView *v = [UIView new];</span><br><span class="line">        [spaces addObject:v];</span><br><span class="line">        [self addSubview:v];</span><br><span class="line">        </span><br><span class="line">        [v mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.width.equalTo(v.mas_height);</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    UIView *v0 = spaces[0];</span><br><span class="line">    </span><br><span class="line">    [v0 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.left.equalTo(self.mas_left);</span><br><span class="line">        make.centerY.equalTo(((UIView*)views[0]).mas_centerY);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    UIView *lastSpace = v0;</span><br><span class="line">    for ( int i = 0 ; i &lt; views.count; ++i )</span><br><span class="line">    &#123;</span><br><span class="line">        UIView *obj = views[i];</span><br><span class="line">        UIView *space = spaces[i+1];</span><br><span class="line">        </span><br><span class="line">        [obj mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.left.equalTo(lastSpace.mas_right);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        [space mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.left.equalTo(obj.mas_right);</span><br><span class="line">            make.centerY.equalTo(obj.mas_centerY);</span><br><span class="line">            make.width.equalTo(v0);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        lastSpace = space;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [lastSpace mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.right.equalTo(self.mas_right);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 垂直排列一组view</span><br><span class="line"></span><br><span class="line"> @param views view数组</span><br><span class="line"> */</span><br><span class="line">- (void) distributeSpacingVerticallyWith:(NSArray*)views</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableArray *spaces = [NSMutableArray arrayWithCapacity:views.count+1];</span><br><span class="line">    </span><br><span class="line">    for ( int i = 0 ; i &lt; views.count+1 ; ++i )</span><br><span class="line">    &#123;</span><br><span class="line">        UIView *v = [UIView new];</span><br><span class="line">        [spaces addObject:v];</span><br><span class="line">        [self addSubview:v];</span><br><span class="line">        </span><br><span class="line">        [v mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.width.equalTo(v.mas_height);</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    UIView *v0 = spaces[0];</span><br><span class="line">    </span><br><span class="line">    [v0 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(self.mas_top);</span><br><span class="line">        make.centerX.equalTo(((UIView*)views[0]).mas_centerX);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    UIView *lastSpace = v0;</span><br><span class="line">    for ( int i = 0 ; i &lt; views.count; ++i )</span><br><span class="line">    &#123;</span><br><span class="line">        UIView *obj = views[i];</span><br><span class="line">        UIView *space = spaces[i+1];</span><br><span class="line">        </span><br><span class="line">        [obj mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.top.equalTo(lastSpace.mas_bottom);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        [space mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.top.equalTo(obj.mas_bottom);</span><br><span class="line">            make.centerX.equalTo(obj.mas_centerX);</span><br><span class="line">            make.height.equalTo(v0);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        lastSpace = space;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [lastSpace mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.bottom.equalTo(self.mas_bottom);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<ul>
<li>实例测试：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">UIView *subView11 = [UIView new];</span><br><span class="line">UIView *subView12 = [UIView new];</span><br><span class="line">UIView *subView13 = [UIView new];</span><br><span class="line">UIView *subView21 = [UIView new];</span><br><span class="line">UIView *subView31 = [UIView new];</span><br><span class="line"></span><br><span class="line">subView11.backgroundColor = [UIColor redColor];</span><br><span class="line">subView12.backgroundColor = [UIColor redColor];</span><br><span class="line">subView13.backgroundColor = [UIColor redColor];</span><br><span class="line">subView21.backgroundColor = [UIColor redColor];</span><br><span class="line">subView31.backgroundColor = [UIColor redColor];</span><br><span class="line"></span><br><span class="line">[superview addSubview:subView11];</span><br><span class="line">[superview addSubview:subView12];</span><br><span class="line">[superview addSubview:subView13];</span><br><span class="line">[superview addSubview:subView21];</span><br><span class="line">[superview addSubview:subView31];</span><br><span class="line"></span><br><span class="line">//给予不同的大小，测试结果</span><br><span class="line"></span><br><span class="line">[subView11 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.centerY.equalTo(@[subView12,subView13]); // 11、12、13 Y方向对齐</span><br><span class="line">    make.centerX.equalTo(@[subView21,subView31]); // 11、21、31 X方向对齐</span><br><span class="line">    make.size.mas_equalTo(CGSizeMake(40, 40));</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">[subView12 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.size.mas_equalTo(CGSizeMake(30, 30));</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">[subView13 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.size.mas_equalTo(CGSizeMake(20, 20));</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">[subView21 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.size.mas_equalTo(CGSizeMake(50, 50));</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">[subView31 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.size.mas_equalTo(CGSizeMake(60, 60));</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">[superview distributeSpacingHorizontallyWith:@[subView11,subView12,subView13]];</span><br><span class="line">[superview distributeSpacingVerticallyWith:@[subView11,subView21,subView31]];</span><br><span class="line"></span><br><span class="line">[superview showPlaceHolderWithAllSubviews];</span><br><span class="line">[superview hidePlaceHolder];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用空白的占位view填充目标view的旁边</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-06bc5eb7dfff4d34.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>继续参考：<a href="https://www.zybuluo.com/kezhen/note/147167" target="_blank" rel="noopener">Masonry使用总结</a>，学习使用 Masonry；</p>
<h4 id="6-Masonry的比例使用-multipliedBy"><a href="#6-Masonry的比例使用-multipliedBy" class="headerlink" title="6.Masonry的比例使用 multipliedBy"></a>6.Masonry的比例使用 multipliedBy</h4><p>使用<strong>multipliedBy</strong>必须是对<strong>同一个控件本身</strong>，如果修改成相对于其它控件会导致Crash。</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">UIView *topView = [UIView new]<span class="comment">;</span></span><br><span class="line">[topView setBackgroundColor:[UIColor redColor]]<span class="comment">;</span></span><br><span class="line">[self.view <span class="keyword">addSubview:topView];</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">UIView </span>*topInnerView = [UIView new]<span class="comment">;</span></span><br><span class="line">[topInnerView setBackgroundColor:[UIColor greenColor]]<span class="comment">;</span></span><br><span class="line">[topInnerView <span class="keyword">showPlaceHolder];</span></span><br><span class="line"><span class="keyword">[self.view </span><span class="keyword">addSubview:topInnerView];</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">UIView </span>*<span class="keyword">bottomView </span>=[UIView new]<span class="comment">;</span></span><br><span class="line">[<span class="keyword">bottomView </span>setBackgroundColor:[UIColor <span class="keyword">blueColor]];</span></span><br><span class="line"><span class="keyword">[self.view </span><span class="keyword">addSubview:bottomView];</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">UIView </span>*<span class="keyword">bottomInnerView </span>=[UIView new]<span class="comment">;</span></span><br><span class="line">[<span class="keyword">bottomInnerView </span>setBackgroundColor:[UIColor <span class="keyword">blackColor]];</span></span><br><span class="line"><span class="keyword">[bottomInnerView </span><span class="keyword">showPlaceHolder];</span></span><br><span class="line"><span class="keyword">[self.view </span><span class="keyword">addSubview:bottomInnerView];</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">[topView </span>mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.left.<span class="keyword">and.right.mas_equalTo(0);</span></span><br><span class="line"><span class="keyword"> </span>   make.height.mas_equalTo(<span class="keyword">bottomView);</span></span><br><span class="line"><span class="keyword">&#125;];</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">[topInnerView </span>mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.left.<span class="keyword">and.right.mas_equalTo(0);</span></span><br><span class="line"><span class="keyword"> </span>   make.width.mas_equalTo(topInnerView.mas_height).<span class="keyword">multipliedBy(3);</span></span><br><span class="line"><span class="keyword"> </span>   make.center.mas_equalTo(topView)<span class="comment">;</span></span><br><span class="line">&#125;]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">[<span class="keyword">bottomView </span>mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.left.<span class="keyword">bottom.and.right.mas_equalTo(0);</span></span><br><span class="line"><span class="keyword"> </span>   make.height.mas_equalTo(topView)<span class="comment">;</span></span><br><span class="line">    make.top.mas_equalTo(topView.mas_bottom)<span class="comment">;</span></span><br><span class="line">&#125;]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">[<span class="keyword">bottomInnerView </span>mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.<span class="keyword">and.bottom.mas_equalTo(bottomView);</span></span><br><span class="line"><span class="keyword"> </span>   make.height.mas_equalTo(<span class="keyword">bottomInnerView.mas_width).multipliedBy(3);</span></span><br><span class="line"><span class="keyword"> </span>   make.center.mas_equalTo(<span class="keyword">bottomView);</span></span><br><span class="line"><span class="keyword">&#125;];</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-fd5dee7c4a43a469.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="7-使用priority优先级属性来做简单的动画"><a href="#7-使用priority优先级属性来做简单的动画" class="headerlink" title="7.使用priority优先级属性来做简单的动画"></a>7.使用priority优先级属性来做简单的动画</h4><blockquote>
<p>.priority allows you to specify an exact priority</p>
<p>.priorityHigh equivalent to <strong>UILayoutPriorityDefaultHigh</strong></p>
<p>.priorityMedium is half way between high and low</p>
<p>.priorityLow equivalent to <strong>UILayoutPriorityDefaultLow</strong></p>
</blockquote>
<ol>
<li>先为blueView设置属性：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@interface ViewController ()</span><br><span class="line"></span><br><span class="line">@property (nonatomic,strong) UIView *blueView;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>2.创建视图并设置约束：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// 红色视图</span><br><span class="line">UIView *redView = [UIView new];</span><br><span class="line">redView.backgroundColor = [UIColor redColor];</span><br><span class="line">[self.view addSubview:redView];</span><br><span class="line"></span><br><span class="line">// 蓝色视图</span><br><span class="line">self.blueView = [UIView new];</span><br><span class="line">self.blueView.backgroundColor = [UIColor blueColor];</span><br><span class="line">[self.view addSubview:self.blueView];</span><br><span class="line"></span><br><span class="line">// 黄色视图</span><br><span class="line">UIView *yellowView = [UIView new];</span><br><span class="line">yellowView.backgroundColor = [UIColor yellowColor];</span><br><span class="line">[self.view addSubview:yellowView];</span><br><span class="line"></span><br><span class="line">// ————红色视图约束————</span><br><span class="line">[redView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.left.mas_equalTo(self.view.mas_left).with.offset(20);</span><br><span class="line">    make.bottom.mas_equalTo(self.view.mas_bottom).with.offset(-80);</span><br><span class="line">    make.height.mas_equalTo(50);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">// ————蓝色视图约束————</span><br><span class="line">[self.blueView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.left.mas_equalTo(redView.mas_right).with.offset(40);</span><br><span class="line">    make.bottom.width.and.height.with.height.mas_equalTo(redView);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">// ————黄色视图约束————</span><br><span class="line">[yellowView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">  	// 默认满足高优先级约束</span><br><span class="line">    make.left.mas_equalTo(self.blueView.mas_right).with.offset(40);</span><br><span class="line">    make.right.mas_equalTo(self.view.mas_right).with.offset(-20);</span><br><span class="line">    make.bottom.width.and.height.mas_equalTo(redView);</span><br><span class="line"></span><br><span class="line">    //** priority设置为250，最高1000（默认）**</span><br><span class="line">    make.left.mas_equalTo(redView.mas_right).with.offset(20).priority(250);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>3.点击屏幕移除蓝色视图方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    [self.blueView removeFromSuperview];</span><br><span class="line">    [UIView animateWithDuration:1.0 animations:^&#123;</span><br><span class="line">        [self.view layoutIfNeeded];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注释：黄色视图的<strong>left</strong>属性分别设置了两个约束，一个相对于蓝色视图的高优先级约束：<code>make.left.mas_equalTo(self.blueView.mas_right).with.offset(40);</code></p>
<p>另一个相对于红色视图的低优先级约束：<code>make.left.mas_equalTo(redView.mas_right).with.offset(20).priority(250);</code></p>
<p>当蓝色视图存在时，两个约束同时存在，为避免约束冲突，系统默认满足高优先级的约束；</p>
<p>当点击屏幕，蓝色视图被移除后，低优先级的约束就会生效。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-30f240cd53c469ea.gif?imageMogr2/auto-orient/strip" alt></p>
<h4 id="8-Masonry更新约束方法：mas-updateConstraints"><a href="#8-Masonry更新约束方法：mas-updateConstraints" class="headerlink" title="8.Masonry更新约束方法：mas_updateConstraints"></a>8.Masonry更新约束方法：mas_updateConstraints</h4><p>如果你只想更新约束的常量值，则可以使用更方便的方法:<code>mas_updateConstraints</code>而不是<code>mas_makeConstraints</code>。</p>
<ol>
<li><p>创建一个Button属性、scale属性用于记录放大比例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@interface ViewController ()</span><br><span class="line">@property (nonatomic,strong) UIButton *growingButton;</span><br><span class="line">@property (nonatomic,assign) CGFloat scale;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建Button实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">self.growingButton = [UIButton buttonWithType:UIButtonTypeSystem];</span><br><span class="line">[self.growingButton setTitle:@&quot;点我放大&quot; forState:UIControlStateNormal];</span><br><span class="line">self.growingButton.layer.borderColor = UIColor.greenColor.CGColor;</span><br><span class="line">self.growingButton.layer.borderWidth = 3;</span><br><span class="line">[self.growingButton addTarget:self action:@selector(onGrowButtonTaped:) forControlEvents:UIControlEventTouchUpInside];</span><br><span class="line">[self.view addSubview:self.growingButton];</span><br><span class="line">self.scale = 1.0;</span><br><span class="line"></span><br><span class="line">[self.growingButton mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.center.mas_equalTo(self.view);</span><br><span class="line">    // 初始宽、高为100，优先级最低</span><br><span class="line">    make.width.height.mas_equalTo(100 * self.scale);</span><br><span class="line">    // 最大放大到整个view</span><br><span class="line">    make.width.and.height.lessThanOrEqualTo(self.view);</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>点击Button方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (void)onGrowButtonTaped:(UIButton *)sender &#123;</span><br><span class="line">    self.scale += 1.0;</span><br><span class="line">    </span><br><span class="line">    //告诉self.view约束需要更新</span><br><span class="line">    [self.view setNeedsUpdateConstraints];</span><br><span class="line">    </span><br><span class="line">    //调用此方法告诉self.view检测是否需要更新约束，若需要则更新。下面添加的动画效果才起作用</span><br><span class="line">    [self.view updateConstraintsIfNeeded];</span><br><span class="line">    </span><br><span class="line">    [UIView animateWithDuration:0.3 animations:^&#123;</span><br><span class="line">        [self.view layoutIfNeeded];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新约束：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 这是Apple推荐的添加/更新约束的地方</span><br><span class="line">// 此方法可以被多次调用，以响应 setNeedsUpdateConstraints</span><br><span class="line">// 如果您需要触发对约束的更新，可以在UIKit内部或你的代码中调用该方法</span><br><span class="line">- (void)updateViewConstraints &#123;</span><br><span class="line">    [self.growingButton mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        //这里写需要更新的约束，不用更新的约束将继续存在，并不会被取代</span><br><span class="line">        make.width.and.height.mas_equalTo(100*self.scale);</span><br><span class="line">    &#125;];</span><br><span class="line">  	// //根据Apple要求，super方法应该在方法结束时调用</span><br><span class="line">    [super updateViewConstraints];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>   <img src="http://upload-images.jianshu.io/upload_images/2648731-ad606f82654fc2c0.gif?imageMogr2/auto-orient/strip" alt></p>
<p>代码执行顺序：</p>
<blockquote>
<p><strong>-[ViewController viewDidLoad]</strong></p>
<p><strong>-[ViewController createGrowingButton]</strong></p>
<p><strong>mas_makeConstraints</strong></p>
<p> <strong>-[ViewController updateViewConstraints]</strong></p>
<p><strong>mas_updateConstraints</strong></p>
<p>点击按钮</p>
<p><strong>-[ViewController onGrowButtonTaped:]</strong></p>
<p><strong>-[ViewController updateViewConstraints]</strong></p>
<p><strong>mas_updateConstraints</strong></p>
<p>点击按钮</p>
<p><strong>-[ViewController onGrowButtonTaped:]</strong></p>
<p><strong>-[ViewController updateViewConstraints]</strong></p>
<p><strong>mas_updateConstraints</strong></p>
</blockquote>
<h5 id="更新约束和布局的相关方法"><a href="#更新约束和布局的相关方法" class="headerlink" title="更新约束和布局的相关方法"></a>更新约束和布局的相关方法</h5><ul>
<li>关于UIView重新布局相关的API，主要用以下三个API：</li>
</ul>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- <span class="params">(void)</span>setNeedsLayout  标记为需要在下一个周期重新布局</span><br><span class="line">- <span class="params">(void)</span>layoutIfNeeded  查看当前视图是否被标记需要重新布局，有则在内部调用layoutSubviews方法立即进行重新布局</span><br><span class="line">- <span class="params">(void)</span>layoutSubviews  重写当前方法，在内部完成重新布局操作,不要直接调用，如果需要强制更新布局，调用 setNeedsLayout<span class="params">()</span></span><br></pre></td></tr></table></figure>
<ul>
<li>关于更新约束布局相关的API，主要用以下四个API：</li>
</ul>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- <span class="params">(void)</span>setNeedsUpdateConstraints  标记需要进行重新布局，系统会调用 updateConstraints<span class="params">()</span>方法，修改多个约束后调用该方法批量更新有助于提升性能</span><br><span class="line">- <span class="params">(BOOL)</span>needsUpdateConstraints     当前是否需要重新布局，内部会判断当前有没有被标记的约束</span><br><span class="line">- <span class="params">(void)</span>updateConstraintsIfNeeded  调用此方法，如果有标记为需要重新布局的约束，则立即进行重新布局，内部会调用  updateConstraints方法</span><br><span class="line">- <span class="params">(void)</span>updateConstraints          重写此方法，内部实现自定义布局过程</span><br></pre></td></tr></table></figure>
<h4 id="9-Masonry的重写约束：mas-remakeConstraints"><a href="#9-Masonry的重写约束：mas-remakeConstraints" class="headerlink" title="9.Masonry的重写约束：mas_remakeConstraints"></a>9.Masonry的重写约束：mas_remakeConstraints</h4><blockquote>
<p><code>mas_updateConstraints</code> is useful for updating a set of constraints, but doing anything <em>beyond updating constant values</em>  can get exhausting. That’s where <code>mas_remakeConstraints</code> comes in.</p>
<p><code>mas_remakeConstraints</code> is similar to <code>mas_updateConstraints</code>, but instead of updating constant values, it will remove all of its constraints before installing them again. This lets you provide different constraints without having to keep around references to ones which you want to remove.</p>
</blockquote>
<ol>
<li>创建一个Button属性、isExpanded属性用于记录按钮状态：</li>
</ol>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">UIButton</span> *growingButton;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>) <span class="built_in">BOOL</span> isExpanded;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>创建Button实例：</li>
</ol>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">self.isExpanded</span> = <span class="literal">NO</span>;</span><br><span class="line"><span class="attr">self.growingButton</span> = [UIButton buttonWithType:UIButtonTypeSystem];</span><br><span class="line"><span class="section">[self.growingButton setTitle:@"点我展开" forState:UIControlStateNormal]</span><span class="comment">;</span></span><br><span class="line"><span class="attr">self.growingButton.layer.borderColor</span> = UIColor.greenColor.CGColor;</span><br><span class="line"><span class="attr">self.growingButton.layer.borderWidth</span> = <span class="number">3</span>;</span><br><span class="line"><span class="attr">self.growingButton.backgroundColor</span> = [UIColor redColor];</span><br><span class="line"><span class="section">[self.growingButton addTarget:self action:@selector(onGrowButtonTaped:) forControlEvents:UIControlEventTouchUpInside]</span><span class="comment">;</span></span><br><span class="line"><span class="section">[self.view addSubview:_growingButton]</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[self.growingButton mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span></span><br><span class="line"><span class="section">    make.top.and.left.mas_equalTo(100);</span></span><br><span class="line"><span class="section">    make.bottom.mas_equalTo(-350);</span></span><br><span class="line"><span class="section">    make.right.mas_equalTo(-100);</span></span><br><span class="line"><span class="section">&#125;]</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>点击Button方法：</li>
</ol>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)onGrowButtonTaped:(<span class="built_in">UIButton</span> *)sender &#123;</span><br><span class="line">    <span class="keyword">self</span>.isExpanded = !<span class="keyword">self</span>.isExpanded;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>.isExpanded) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.growingButton setTitle:<span class="string">@"点我展开"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        [<span class="keyword">self</span>.growingButton setTitle:<span class="string">@"点我收起"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.view setNeedsUpdateConstraints];</span><br><span class="line">    [<span class="keyword">self</span>.view updateConstraintsIfNeeded];</span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:<span class="number">0.3</span> animations:^&#123;</span><br><span class="line">        [<span class="keyword">self</span>.view layoutIfNeeded];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>更新约束：</li>
</ol>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)updateViewConstraints &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%s"</span>,__func__);</span><br><span class="line">    <span class="comment">// 这里使用update也能实现效果，而remark会将之前的约束全部移除，然后重新添加</span></span><br><span class="line">    __<span class="keyword">weak</span> <span class="keyword">typeof</span> (<span class="keyword">self</span>)weakself = <span class="keyword">self</span>;</span><br><span class="line">    [<span class="keyword">self</span>.growingButton mas_remakeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        <span class="comment">// 重写全部约束</span></span><br><span class="line">        <span class="keyword">if</span> (weakself.isExpanded) &#123;</span><br><span class="line">            make.top.and.left.mas_equalTo(<span class="number">0</span>);</span><br><span class="line">            make.bottom.mas_equalTo(<span class="number">10</span>);</span><br><span class="line">            make.right.mas_equalTo(<span class="number">0</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            make.top.and.left.mas_equalTo(<span class="number">100</span>);</span><br><span class="line">            make.bottom.mas_equalTo(<span class="number">-350</span>);</span><br><span class="line">            make.right.mas_equalTo(<span class="number">-100</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    [<span class="keyword">super</span> updateViewConstraints];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实现结果：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-7f6f17b8a615be53.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><blockquote>
<p>By default, macros which support <a href="https://en.wikipedia.org/wiki/Autoboxing#Autoboxing" target="_blank" rel="noopener">autoboxing</a> are prefixed with mas_. Unprefixed versions are available by defining MAS_SHORTHAND_GLOBALS before importing Masonry.</p>
<p>​                                                            ——摘自<a href="https://github.com/SnapKit/Masonry" target="_blank" rel="noopener">Masonary:README.md</a></p>
<ul>
<li>为了增加代码的可读性这里有两个简化代码的宏：<code>#define MAS_SHORTHAND</code>和<code>#define MAS_SHORTHAND_GLOBALS</code></li>
</ul>
<ul>
<li><p><code>MAS_SHORTHAND</code>：只要在导入<strong>Masonry</strong>主头文件之前定义这个宏, 那么以后在使用<strong>Masonry</strong>框架中的属性和方法的时候, 就可以省略<strong>mas_</strong>前缀</p>
</li>
<li><p><code>MAS_SHORTHAND_GLOBALS</code>：只要在导入Masonry主头文件之前定义这个宏,那么就可以让<code>equalTo</code>函数接收基本数据类型, 内部会对基本数据类型进行包装 </p>
</li>
<li><p>注意：这两个宏如果想有效使用，必须要在添加<strong>Masonry</strong>头文件之前导入进去。在没有增加宏<code>MAS_SHORTHAND_GLOBALS</code>时，下面这句是会报错的。 </p>
</li>
<li><p><code>make.top.equalTo(42); --&gt; make.top.equalTo([NSNumber numberWithInt:42]);</code></p>
<p>​                                                    ——摘自<a href="https://www.zybuluo.com/kezhen/note/147167" target="_blank" rel="noopener">Masonry使用总结</a></p>
</li>
</ul>
</blockquote>
<p>注意：有时候写约束语法的时候 <strong>with</strong> 经常会不小心写成 <strong>width</strong>,就像这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make.bottom.mas_equalTo(self.view.mas_bottom).width.offset(-80);</span><br></pre></td></tr></table></figure>
<p>于是会报这样的错误：</p>
<blockquote>
<p>Attributes should be chained before defining the constraint relation.</p>
<p>属性应该在定义约束关系之前链接.</p>
</blockquote>
<p>记得仔细查找这种错误并改正。</p>
<h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><ul>
<li><a href="http://blog.lessfun.com/blog/2014/10/17/ios-autolayout-vs-autosizing/" target="_blank" rel="noopener">iOS AutoLayout与AutoSizing：自动布局，想说爱你真的好难</a></li>
<li><a href="http://adad184.com/2014/09/28/use-masonry-to-quick-solve-autolayout/" target="_blank" rel="noopener">Masonry介绍与使用实践(快速上手Autolayout) @里脊串的开发随笔</a> ⭐️⭐️⭐️</li>
<li><a href="https://www.zybuluo.com/kezhen/note/147167" target="_blank" rel="noopener">Masonry使用总结</a> ⭐️⭐️⭐️</li>
<li><a href="http://www.jianshu.com/p/ea74b230c70d" target="_blank" rel="noopener">简书：iOS自动布局框架-Masonry详解 @刘小壮</a></li>
<li><a href="http://hao.jobbole.com/masonry-ios/" target="_blank" rel="noopener">Masonry:使用纯代码进行iOS应用的autolayout自适应布局 @伯乐在线</a></li>
<li><a href="http://www.cocoachina.com/ios/20150702/12217.html" target="_blank" rel="noopener">iOS自适应前段库-Masonry的使用</a></li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    
      <div>
        




  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>独木舟的木</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    
    <a href="https://andy0570.com/2017/01/19/Masonry——简化自动布局代码框架/" title="Masonry——简化自动布局代码框架">https://andy0570.com/2017/01/19/Masonry——简化自动布局代码框架/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
            <a href="/tags/GitHub/" rel="tag"># GitHub</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/01/18/翻译文章：iOS-7中的自动布局教程第1部分：入门/" rel="next" title="翻译文章：iOS 7 中的自动布局教程第1部分：入门">
                <i class="fa fa-chevron-left"></i> 翻译文章：iOS 7 中的自动布局教程第1部分：入门
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/02/03/为 Windows 系统开启 Intel® Rapid Start Technology/" rel="prev" title="为 Windows 系统开启 Intel® Rapid Start Technology">
                为 Windows 系统开启 Intel® Rapid Start Technology <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg" alt="独木舟的木">
            
              <p class="site-author-name" itemprop="name">独木舟的木</p>
              <div class="site-description motion-element" itemprop="description">有时候阳光很好 有时候阳光很暗</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">317</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Masonry"><span class="nav-number">1.</span> <span class="nav-text">Masonry</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#NSLayoutConstraints-的问题"><span class="nav-number">1.0.1.</span> <span class="nav-text">NSLayoutConstraints 的问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-NSLayoutConstraints"><span class="nav-number">1.0.1.1.</span> <span class="nav-text">使用 NSLayoutConstraints</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用Masonry"><span class="nav-number">1.0.1.2.</span> <span class="nav-text">使用Masonry</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更短的写法"><span class="nav-number">1.0.1.3.</span> <span class="nav-text">更短的写法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Masonry实践"><span class="nav-number">1.0.2.</span> <span class="nav-text">Masonry实践</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#需要的源码"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">需要的源码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-居中显示一个300-300的superview"><span class="nav-number">1.0.2.2.</span> <span class="nav-text">1. 居中显示一个300*300的superview</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-让superview1略小于其superview-边距为20"><span class="nav-number">1.0.2.3.</span> <span class="nav-text">2.让superview1略小于其superview(边距为20)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-让两个高度为150的view垂直居中、等宽、等间隔排列-间隔为10-自动计算其宽度"><span class="nav-number">1.0.2.4.</span> <span class="nav-text">3.让两个高度为150的view垂直居中、等宽、等间隔排列 (间隔为10 ),自动计算其宽度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-在UIScrollView-上顺序排列一些view并自动计算contentSize"><span class="nav-number">1.0.2.5.</span> <span class="nav-text">4.在UIScrollView 上顺序排列一些view并自动计算contentSize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-横向或者纵向等间隙的排列一组view"><span class="nav-number">1.0.2.6.</span> <span class="nav-text">5.横向或者纵向等间隙的排列一组view</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-Masonry的比例使用-multipliedBy"><span class="nav-number">1.0.2.7.</span> <span class="nav-text">6.Masonry的比例使用 multipliedBy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-使用priority优先级属性来做简单的动画"><span class="nav-number">1.0.2.8.</span> <span class="nav-text">7.使用priority优先级属性来做简单的动画</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-Masonry更新约束方法：mas-updateConstraints"><span class="nav-number">1.0.2.9.</span> <span class="nav-text">8.Masonry更新约束方法：mas_updateConstraints</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#更新约束和布局的相关方法"><span class="nav-number">1.0.2.9.1.</span> <span class="nav-text">更新约束和布局的相关方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-Masonry的重写约束：mas-remakeConstraints"><span class="nav-number">1.0.2.10.</span> <span class="nav-text">9.Masonry的重写约束：mas_remakeConstraints</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他"><span class="nav-number">1.0.3.</span> <span class="nav-text">其他</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考文章"><span class="nav-number">1.0.4.</span> <span class="nav-text">参考文章</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">独木舟的木</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  
  <script src="/js/scrollspy.js?v=7.1.0"></script>
<script src="/js/post-details.js?v=7.1.0"></script>



  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  

  
  
  


  


  


  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function addCount(Counter) {
      var $visitors = $('.leancloud_visitors');
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', '/classes/Counter/' + counter.objectId, JSON.stringify({ time: { '__op': 'Increment', 'amount': 1 } }))
            
              .done(function() {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.time + 1);
              })
            
              .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
              })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! More info at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz',
                'X-LC-Key': 'brOnU8mOQvSjpipJvdKUAIbU',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            addCount(Counter);
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.scrollToMark('auto', "#更多");
  
  </script>


  

  

  


  <!-- red heart -->
  <script type="text/javascript" src="/js/src/love.js"></script>
  
</body>
</html>
