<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
<meta name="keywords" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:type" content="website">
<meta property="og:title" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:url" content="https://andy0570.com/page/15/index.html">
<meta property="og:site_name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta property="og:description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç‹¬æœ¨èˆŸçš„æœ¨">
<meta name="twitter:description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">



  <link rel="alternate" href="/atom.xml" title="ç‹¬æœ¨èˆŸçš„æœ¨" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/15/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>ç‹¬æœ¨èˆŸçš„æœ¨</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ç‹¬æœ¨èˆŸçš„æœ¨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾<span class="badge">57</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£<span class="badge">312</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>å…³äº</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>æœç´¢</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/19/å¤©å¤©å“å°iOS7ç”œç‚¹ Day16ï¼šDecoding QR Codes with AVFoundation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/19/å¤©å¤©å“å°iOS7ç”œç‚¹ Day16ï¼šDecoding QR Codes with AVFoundation/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day16ï¼šDecoding QR Codes with AVFoundation</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-19 14:17:00" itemprop="dateCreated datePublished" datetime="2017-09-19T14:17:00+08:00">2017-09-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 13:53:46" itemprop="dateModified" datetime="2019-04-17T13:53:46+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/19/å¤©å¤©å“å°iOS7ç”œç‚¹ Day16ï¼šDecoding QR Codes with AVFoundation/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day16ï¼šDecoding QR Codes with AVFoundation">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>ä½¿ç”¨ <code>AVFoundation</code> æ¡†æ¶è¯†åˆ«è§£ç äºŒç»´ç </p>
</blockquote>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/20/ios7-day-by-day-day16-decoding-qr-codes-with-avfoundation/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 16 :: Decoding QR Codes with AVFoundation</a></li>
<li><a href="http://www.cocoachina.com/ios/20180206/22170.html" target="_blank" rel="noopener">iOS-åŸç”Ÿæ‰«æç™»å½•</a> AVCaptureDeviceã€AVCaptureSessionã€AVCaptureInputã€AVCaptureOutputã€AVCaptureVideoPreviewLayer ä»‹ç»åŠç¤ºä¾‹</li>
</ul>
<h3 id="Drawing-the-code-outline-ç»™äºŒç»´ç æ·»åŠ ä¸Šçº¿æ¡†"><a href="#Drawing-the-code-outline-ç»™äºŒç»´ç æ·»åŠ ä¸Šçº¿æ¡†" class="headerlink" title="Drawing the code outline - ç»™äºŒç»´ç æ·»åŠ ä¸Šçº¿æ¡†"></a>Drawing the code outline - ç»™äºŒç»´ç æ·»åŠ ä¸Šçº¿æ¡†</h3><p>è¿™ä¸ªç±»ç”¨äºå®æ—¶ç»˜åˆ¶äºŒç»´ç è¾¹æ¡†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">// *********************************************</span><br><span class="line">// SCShapeView.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> ç»™äºŒç»´ç æ·»åŠ çº¿æ¡†</span><br><span class="line"> */</span><br><span class="line">@interface SCShapeView : UIView</span><br><span class="line"></span><br><span class="line">// å°è£…äº†ä¸€ç³»åˆ—ç‚¹</span><br><span class="line">@property (nonatomic, strong) NSArray *corners;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line">  </span><br><span class="line">// *********************************************</span><br><span class="line">// SCShapeView.m</span><br><span class="line"></span><br><span class="line">#import &quot;SCShapeView.h&quot;</span><br><span class="line"></span><br><span class="line">@interface SCShapeView () &#123;</span><br><span class="line">    CAShapeLayer *_outline; // ç”¨äºç»˜åˆ¶çº¿æ¡†çš„å›¾å±‚</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation SCShapeView</span><br><span class="line"></span><br><span class="line">- (id)initWithFrame:(CGRect)frame</span><br><span class="line">&#123;</span><br><span class="line">    self = [super initWithFrame:frame];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        // Initialization code</span><br><span class="line">        _outline = [CAShapeLayer new];</span><br><span class="line">        _outline.strokeColor = [[[UIColor greenColor] colorWithAlphaComponent:0.8] CGColor];</span><br><span class="line">        _outline.lineWidth = 2.0;</span><br><span class="line">        _outline.fillColor = [[UIColor clearColor] CGColor];</span><br><span class="line">        [self.layer addSublayer:_outline];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)setCorners:(NSArray *)corners</span><br><span class="line">&#123;</span><br><span class="line">    if(corners != _corners) &#123;</span><br><span class="line">        _corners = corners;</span><br><span class="line">        // å¦‚æœcornerså±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œå›¾å½¢å°±å°†ä¼šä½¿ç”¨æ–°çš„ä½ç½®è¿›è¡Œç»˜åˆ¶</span><br><span class="line">        _outline.path = [[self createPathFromPoints:corners] CGPath];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// é€šè¿‡å°è£…äº†CGPointå¯¹è±¡çš„æ•°ç»„å¯¹è±¡æ¥åˆ›å»º UIBezierPath</span><br><span class="line">- (UIBezierPath *)createPathFromPoints:(NSArray *)points</span><br><span class="line">&#123;</span><br><span class="line">    UIBezierPath *path = [UIBezierPath new];</span><br><span class="line">    // èµ·ç‚¹</span><br><span class="line">    [path moveToPoint:[[points firstObject] CGPointValue]];</span><br><span class="line">    </span><br><span class="line">    // æ·»åŠ çº¿</span><br><span class="line">    for (NSUInteger i = 1; i &lt; [points count]; i++) &#123;</span><br><span class="line">        [path addLineToPoint:[points[i] CGPointValue]];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // è¿”å›åˆ°èµ·ç‚¹</span><br><span class="line">    [path addLineToPoint:[[points firstObject] CGPointValue]];</span><br><span class="line">    </span><br><span class="line">    return path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h3 id="æ•è·å¹¶æ˜¾ç¤ºäºŒç»´ç "><a href="#æ•è·å¹¶æ˜¾ç¤ºäºŒç»´ç " class="headerlink" title="æ•è·å¹¶æ˜¾ç¤ºäºŒç»´ç "></a>æ•è·å¹¶æ˜¾ç¤ºäºŒç»´ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line">// *********************************************</span><br><span class="line">// SCViewController.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface SCViewController : UIViewController</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// *********************************************</span><br><span class="line">// SCViewController.m</span><br><span class="line">#import &quot;SCViewController.h&quot;</span><br><span class="line">@import AVFoundation;</span><br><span class="line">#import &quot;SCShapeView.h&quot;</span><br><span class="line"></span><br><span class="line">@interface SCViewController () &lt;AVCaptureMetadataOutputObjectsDelegate&gt; &#123;</span><br><span class="line">    AVCaptureVideoPreviewLayer *_previewLayer; // é¢„è§ˆæ˜¾ç¤ºæ‘„åƒå†…å®¹</span><br><span class="line">    SCShapeView *_boundingBox; // äºŒç»´ç è¾¹æ¡†è§†å›¾ï¼Œç”¨äºå®æ—¶ç»˜åˆ¶è¢«æ‰«æäºŒç»´ç çš„è¾¹æ¡†</span><br><span class="line">    NSTimer *_boxHideTimer;    // éšè—äºŒç»´ç è¾¹æ¡†çš„è®¡æ—¶å™¨</span><br><span class="line">    UILabel *_decodedMessage;  // labelæ ‡ç­¾ï¼Œç”¨äºæ˜¾ç¤ºè¯†åˆ«å‡ºçš„äºŒç»´ç ä¿¡æ¯</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation SCViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    // åˆ›å»º AVCaptureSession å®ä¾‹å¯¹è±¡</span><br><span class="line">    AVCaptureSession *session = [[AVCaptureSession alloc] init];</span><br><span class="line">    // åˆ›å»ºè¾“å…¥è®¾å¤‡ï¼šåç½®æ‘„åƒå¤´</span><br><span class="line">    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];</span><br><span class="line">    // åˆ›å»ºè¾“å…¥å¯¹è±¡</span><br><span class="line">    NSError *error = nil;</span><br><span class="line">    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&amp;error];</span><br><span class="line">    if(input) &#123;</span><br><span class="line">        // å°†è¾“å…¥å¯¹è±¡æ·»åŠ è¿› Session ä¼šè¯ä¸­</span><br><span class="line">        [session addInput:input];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        NSLog(@&quot;error: %@&quot;, error);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // åˆ›å»ºå¹¶æ·»åŠ è¾“å‡ºå¯¹è±¡</span><br><span class="line">    // AVCaptureMetadataOutput æ˜¯ AVCaptureOutput çš„å­ç±»,ç”¨äºè¾“å‡ºå…ƒæ•°æ®æœ¬èº«</span><br><span class="line">    AVCaptureMetadataOutput *output = [[AVCaptureMetadataOutput alloc] init];</span><br><span class="line">    // Have to add the output before setting metadata types</span><br><span class="line">    [session addOutput:output];</span><br><span class="line">    // What different things can we register to recognise?</span><br><span class="line">    NSLog(@&quot;%@&quot;, [output availableMetadataObjectTypes]);</span><br><span class="line">    // è®¾ç½®è¾“å‡ºå¯¹è±¡å…ƒæ•°æ®ç±»å‹</span><br><span class="line">    [output setMetadataObjectTypes:@[AVMetadataObjectTypeQRCode]];</span><br><span class="line">    // è®¾ç½®ä»£ç†ï¼šå½“å‰è§†å›¾æ§åˆ¶å™¨ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹è°ƒç”¨</span><br><span class="line">    [output setMetadataObjectsDelegate:self queue:dispatch_get_main_queue()];</span><br><span class="line">    </span><br><span class="line">    // æ˜¾ç¤ºå½“å‰è§†å›¾ä¸­çš„è¾“å‡ºå†…å®¹ â€”â€” å®æ—¶æ˜¾ç¤ºæ‘„åƒå†…å®¹</span><br><span class="line">    // AVCaptureVideoPreviewLayer æ˜¯ CALayer çš„å­ç±»</span><br><span class="line">    _previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:session];</span><br><span class="line">    _previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;</span><br><span class="line">    _previewLayer.bounds = self.view.bounds;</span><br><span class="line">    _previewLayer.position = CGPointMake(CGRectGetMidX(self.view.bounds), CGRectGetMidY(self.view.bounds));</span><br><span class="line">    [self.view.layer addSublayer:_previewLayer];</span><br><span class="line">    </span><br><span class="line">    // æ·»åŠ è§†å›¾æ¥ç»˜åˆ¶ UIView çš„è¾¹æ¡† â€”â€” ç»™äºŒç»´ç æ·»åŠ çº¿æ¡†</span><br><span class="line">    _boundingBox = [[SCShapeView alloc] initWithFrame:self.view.bounds];</span><br><span class="line">    _boundingBox.backgroundColor = [UIColor clearColor];</span><br><span class="line">    _boundingBox.hidden = YES;</span><br><span class="line">    [self.view addSubview:_boundingBox];</span><br><span class="line">    </span><br><span class="line">    // æ·»åŠ æ ‡ç­¾ç”¨æ¥æ˜¾ç¤ºç»“æœæ•°æ®</span><br><span class="line">    _decodedMessage = [[UILabel alloc] initWithFrame:CGRectMake(0, CGRectGetHeight(self.view.bounds) - 75, CGRectGetWidth(self.view.bounds), 75)];</span><br><span class="line">    _decodedMessage.numberOfLines = 0;</span><br><span class="line">    _decodedMessage.backgroundColor = [UIColor colorWithWhite:0.8 alpha:0.9];</span><br><span class="line">    _decodedMessage.textColor = [UIColor darkGrayColor];</span><br><span class="line">    _decodedMessage.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">    [self.view addSubview:_decodedMessage];</span><br><span class="line">    </span><br><span class="line">    // è¿è¡Œ AVSession ä¼šè¯</span><br><span class="line">    [session startRunning];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - AVCaptureMetadataOutputObjectsDelegate</span><br><span class="line">- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputMetadataObjects:(NSArray *)metadataObjects fromConnection:(AVCaptureConnection *)connection</span><br><span class="line">&#123;</span><br><span class="line">    for (AVMetadataObject *metadata in metadataObjects) &#123;</span><br><span class="line">        if ([metadata.type isEqualToString:AVMetadataObjectTypeQRCode]) &#123;</span><br><span class="line">            </span><br><span class="line">            // å°†å…ƒæ•°æ®åæ ‡è½¬æ¢ä¸ºå±å¹•åæ ‡</span><br><span class="line">            AVMetadataMachineReadableCodeObject *transformed = (AVMetadataMachineReadableCodeObject *)[_previewLayer transformedMetadataObjectForMetadataObject:metadata];</span><br><span class="line">            </span><br><span class="line">            // Update the frame on the _boundingBox view, and show it</span><br><span class="line">            _boundingBox.frame = transformed.bounds;</span><br><span class="line">            _boundingBox.hidden = NO;</span><br><span class="line">            // Now convert the corners array into CGPoints in the coordinate system</span><br><span class="line">            //  of the bounding box itself</span><br><span class="line">            NSArray *translatedCorners = [self translatePoints:transformed.corners</span><br><span class="line">                                                      fromView:self.view</span><br><span class="line">                                                        toView:_boundingBox];</span><br><span class="line">            </span><br><span class="line">            // Set the corners array</span><br><span class="line">            _boundingBox.corners = translatedCorners;</span><br><span class="line">            </span><br><span class="line">            // Update the view with the decoded text</span><br><span class="line">            _decodedMessage.text = [transformed stringValue];</span><br><span class="line">            </span><br><span class="line">            // Start the timer which will hide the overlay</span><br><span class="line">            [self startOverlayHideTimer];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Utility Methods</span><br><span class="line">- (void)startOverlayHideTimer</span><br><span class="line">&#123;</span><br><span class="line">    // Cancel it if we&apos;re already running</span><br><span class="line">    if(_boxHideTimer) &#123;</span><br><span class="line">        [_boxHideTimer invalidate];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Restart it to hide the overlay when it fires</span><br><span class="line">    // æŠŠç»˜åˆ¶å‡ºæ¥çš„çº¿æ¡†è¿‡ä¸€æ®µæ—¶é—´æ¶ˆå¤±æ‰ã€‚</span><br><span class="line">    // è¿™å°±é˜»æ­¢äº†å½“å‰æ²¡æœ‰å‘ç°äºŒç»´ç ä¿¡æ¯çš„æ—¶å€™ï¼Œçº¿æ¡†è¿˜å­˜åœ¨çš„é—®é¢˜ã€‚</span><br><span class="line">    _boxHideTimer = [NSTimer scheduledTimerWithTimeInterval:0.2</span><br><span class="line">                                                     target:self</span><br><span class="line">                                                   selector:@selector(removeBoundingBox:)</span><br><span class="line">                                                   userInfo:nil</span><br><span class="line">                                                    repeats:NO];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)removeBoundingBox:(id)sender</span><br><span class="line">&#123;</span><br><span class="line">    // Hide the box and remove the decoded text</span><br><span class="line">    _boundingBox.hidden = YES;</span><br><span class="line">    _decodedMessage.text = @&quot;&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> 1.è½¬æ¢åæ ‡æ ¼å¼</span><br><span class="line"> 2.åæ ‡ç³»æ˜ å°„ï¼Œå½“å‰é¡µé¢ -&gt; boxView</span><br><span class="line"> </span><br><span class="line"> åŸå§‹åæ ‡æ ¼å¼ï¼š</span><br><span class="line"> &#123;</span><br><span class="line"> X = &quot;115.2051412322095&quot;;</span><br><span class="line"> Y = &quot;135.4776067211339&quot;;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"> è½¬æ¢ååæ ‡æ ¼å¼ï¼š</span><br><span class="line"> &quot;NSPoint: &#123;8.58306884765625e-06, 0.95792221069336847&#125;&quot;,</span><br><span class="line">*/</span><br><span class="line">- (NSArray *)translatePoints:(NSArray *)points fromView:(UIView *)fromView toView:(UIView *)toView</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableArray *translatedPoints = [NSMutableArray new];</span><br><span class="line"></span><br><span class="line">    // The points are provided in a dictionary with keys X and Y</span><br><span class="line">    for (NSDictionary *point in points) &#123;</span><br><span class="line">        // Let&apos;s turn them into CGPoints</span><br><span class="line">        CGPoint pointValue = CGPointMake([point[@&quot;X&quot;] floatValue], [point[@&quot;Y&quot;] floatValue]);</span><br><span class="line">        // Now translate from one view to the other</span><br><span class="line">        CGPoint translatedPoint = [fromView convertPoint:pointValue toView:toView];</span><br><span class="line">        // Box them up and add to the array</span><br><span class="line">        [translatedPoints addObject:[NSValue valueWithCGPoint:translatedPoint]];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return [translatedPoints copy];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœ</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-35bf6c7e2f5db733.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="ç¬¬ä¸‰æ–¹çš„äºŒç»´ç å¼€æºåº“"><a href="#ç¬¬ä¸‰æ–¹çš„äºŒç»´ç å¼€æºåº“" class="headerlink" title="ç¬¬ä¸‰æ–¹çš„äºŒç»´ç å¼€æºåº“"></a>ç¬¬ä¸‰æ–¹çš„äºŒç»´ç å¼€æºåº“</h3><ul>
<li><a href="https://github.com/TheLevelUp/ZXingObjC" target="_blank" rel="noopener">ZXingObjC</a>â€”â€”ï¼ˆâ­ï¸2500+ï¼‰æ”¯æŒå¤šç§æ ¼å¼çš„æ¡ç åº“ã€‚</li>
<li><a href="https://github.com/MxABC/LBXScan" target="_blank" rel="noopener">LBXScan</a> â€”â€” ï¼ˆâ­ï¸2000+ï¼‰ğŸ‘ A barcode and qr code scanner (äºŒç»´ç ã€æ‰«ç ã€æ‰«ä¸€æ‰«ã€ZXingå’Œiosç³»ç»Ÿè‡ªå¸¦æ‰«ç å°è£…ï¼Œæ‰«ç ç•Œé¢æ•ˆæœå°è£…)(Objective-Cå’ŒSwiftå‡æ”¯æŒ).</li>
<li><a href="http://code.cocoachina.com/view/129108" target="_blank" rel="noopener">åŸç”Ÿå®ç°æ‰«æäºŒç»´ç æ¡ç </a> â€”â€” iOSåŸç”Ÿå®ç°æ‰«æäºŒç»´ç æ¡ç .</li>
<li><a href="https://github.com/Zirkfied/ZFScan" target="_blank" rel="noopener">ZFScan</a> â€”â€” ï¼ˆâ­ï¸85+ï¼‰ä»¿å¾®ä¿¡ äºŒç»´ç /æ¡å½¢ç  æ‰«æ.</li>
<li><a href="https://github.com/100mango/QRCatcher" target="_blank" rel="noopener">QRCatcher</a> â€”â€”ï¼ˆâ­ï¸270+ï¼‰å®Œæ•´é¡¹ç›®ï¼Œä¸€ä¸ªç®€æ´ç¾è§‚çš„äºŒç»´ç æ‰«æåº”ç”¨ï¼Œ [iOSå­¦ä¹ ï¼šAVFoundation è§†é¢‘æµå¤„ç†â€“äºŒç»´ç ].</li>
<li><a href="https://github.com/hyperoslo/BarcodeScanner" target="_blank" rel="noopener">BarcodeScanner</a> â€”â€” ï¼ˆâ­ï¸780+ï¼‰å¸¦çŠ¶æ€æ§åˆ¶çš„æ¡ç æ‰«æåº“ï¼Œæ”¯æŒå¤„ç†ç›¸æœºæƒé™ã€è‡ªå®šä¹‰é¢œè‰²å’Œæç¤ºä¿¡æ¯ï¼Œä¸ä¾èµ–å…¶ä»–ç¬¬ä¸‰æ–¹åº“)ã€<em>Swift</em></li>
<li><a href="https://github.com/zhengjinghua/MQRCodeReaderViewController" target="_blank" rel="noopener">MQRCodeReaderViewController</a> â€”â€”ï¼ˆâ­ï¸352+ï¼‰äºŒç»´ç æ‰«ææ§ä»¶.</li>
<li><a href="https://github.com/lcddhr/QRWeiXinDemo" target="_blank" rel="noopener">QRWeiXinDemo</a> â€”â€” ï¼ˆâ­ï¸221+ï¼‰ä»¿å¾®ä¿¡äºŒç»´ç æ‰«æï¼Œä¸­é—´é€æ˜åŒºåŸŸ.</li>
<li><a href="https://github.com/EyreFree/EFQRCode" target="_blank" rel="noopener">EFQRCode</a> â€”â€”ï¼ˆâ­ï¸2084+ï¼‰iOS èŠ±å¼äºŒç»´ç ç”Ÿæˆåº“ã€<em>Swift</em></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/18/å¤©å¤©å“å°iOS7ç”œç‚¹ Day15ï¼šCoreImage Filters/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/18/å¤©å¤©å“å°iOS7ç”œç‚¹ Day15ï¼šCoreImage Filters/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day15ï¼šCoreImage Filters</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-18 12:18:00" itemprop="dateCreated datePublished" datetime="2017-09-18T12:18:00+08:00">2017-09-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 14:06:50" itemprop="dateModified" datetime="2019-04-17T14:06:50+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/18/å¤©å¤©å“å°iOS7ç”œç‚¹ Day15ï¼šCoreImage Filters/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day15ï¼šCoreImage Filters">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>æœ¬æ–‡ä¸»è¦å†…å®¹ï¼š</p>
<ul>
<li>ä¸€ã€ä¸ºå›¾åƒæ·»åŠ æ»¤é•œæ•ˆæœ</li>
<li>äºŒã€å­—ç¬¦ä¸²ç”Ÿå­˜äºŒç»´ç </li>
</ul>
</blockquote>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/19/ios7-day-by-day-day15-coreimage-filters/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 15 :: CoreImage Filters</a></li>
</ul>
<h2 id="ä¸€ã€Photo-Effect-Filters-ä¸ºå›¾åƒæ·»åŠ æ»¤é•œæ•ˆæœ"><a href="#ä¸€ã€Photo-Effect-Filters-ä¸ºå›¾åƒæ·»åŠ æ»¤é•œæ•ˆæœ" class="headerlink" title="ä¸€ã€Photo Effect Filters - ä¸ºå›¾åƒæ·»åŠ æ»¤é•œæ•ˆæœ"></a>ä¸€ã€Photo Effect Filters - ä¸ºå›¾åƒæ·»åŠ æ»¤é•œæ•ˆæœ</h2><p>ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 1.åˆ›å»º CIImage å¯¹è±¡ï¼šUIImage â†’ CGImage â†’ CIImage</span><br><span class="line">UIImage *image = [UIImage imageNamed:@&quot;iu.png&quot;];</span><br><span class="line">CIImage *inputImage = [CIImage imageWithCGImage:[image CGImage]];</span><br><span class="line"></span><br><span class="line">// 2.1 åˆ›å»º CIFilter è¿‡æ»¤å™¨å¯¹è±¡</span><br><span class="line">CIFilter *filter = [CIFilter filterWithName:@&quot;CIPhotoEffectChrome&quot;];</span><br><span class="line">// 2.2 KVC è®¾ç½®è¿‡æ»¤å‚æ•°</span><br><span class="line">[filter setValue:inputImage forKey:kCIInputImageKey];</span><br><span class="line"></span><br><span class="line">// 3.1 è¾“å‡ºæ–¹æ³•ä¸€ï¼š CIImage â†’ UIImage</span><br><span class="line">UIImage *outputImage1 = [UIImage imageWithCIImage:filter.outputImage];</span><br><span class="line">self.imageView.image = outputImage1;</span><br><span class="line"></span><br><span class="line">// 3.2 è¾“å‡ºæ–¹æ³•äºŒï¼š CGImage â†’ UIImage</span><br><span class="line">CGImageRef cgImage = [[CIContext contextWithOptions:nil] createCGImage:filter.outputImage fromRect:filter.outputImage.extent];</span><br><span class="line">UIImage *outputImage2 = [UIImage imageWithCGImage:cgImage];</span><br><span class="line">CGImageRelease(cgImage);</span><br><span class="line">self.imageView.image = outputImage2;</span><br></pre></td></tr></table></figure>
<p>åŸå›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-692fe63c3ecca484.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¬è¯´ç‚¹èµâ¤ï¸å°±å¯ä»¥æŠŠIUè¿˜ç»™ä½ "></p>
<p>æ»¤é•œæ•ˆæœï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-a0c32ebf4541824b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¯¹ä¸èµ·ï¼ŒæŠŠä½ æ»¤ä¸‘äº†"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-fdd610e5ffb39470.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="è¦æ€¼å°±æ€¼å²è’‚å¤«ï¼Œè¿™æ˜¯ä»–ä»¬å®¶çš„åŸç”Ÿæ¡†æ¶ï¼Œæˆ‘åªæ˜¯ä¸ªæ¬è¿å·¥"></p>
<h3 id="CIFilter-è¿‡æ»¤å™¨ç±»å‹ï¼š"><a href="#CIFilter-è¿‡æ»¤å™¨ç±»å‹ï¼š" class="headerlink" title="CIFilter è¿‡æ»¤å™¨ç±»å‹ï¼š"></a><strong>CIFilter</strong> è¿‡æ»¤å™¨ç±»å‹ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@&quot;CIPhotoEffectChrome&quot;</span><br><span class="line">@&quot;CIPhotoEffectFade&quot;</span><br><span class="line">@&quot;CIPhotoEffectInstant&quot;</span><br><span class="line">@&quot;CIPhotoEffectMono&quot;</span><br><span class="line">@&quot;CIPhotoEffectNoir&quot;</span><br><span class="line">@&quot;CIPhotoEffectProcess&quot;</span><br><span class="line">@&quot;CIPhotoEffectTonal&quot;</span><br><span class="line">@&quot;CIPhotoEffectTransfer&quot;</span><br></pre></td></tr></table></figure>
<p>è¯¦ç»†å¯å‚é˜…å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developer.apple.com/library/content/documentation/GraphicsImaging/Reference/CoreImageFilterReference/#//apple_ref/doc/filter/ci/CIPhotoEffectChrome" target="_blank" rel="noopener">CoreImage Filter Reference</a></p>
<h2 id="äºŒã€QR-Code-Generation-ç”ŸæˆäºŒç»´ç "><a href="#äºŒã€QR-Code-Generation-ç”ŸæˆäºŒç»´ç " class="headerlink" title="äºŒã€QR Code Generation - ç”ŸæˆäºŒç»´ç "></a>äºŒã€QR Code Generation - ç”ŸæˆäºŒç»´ç </h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    // 1. å¾…ç¼–ç å­—ç¬¦ä¸²</span><br><span class="line">    NSString *string = @&quot;http://www.jianshu.com/u/84c5fadc7c18&quot;;</span><br><span class="line">    // 2. ç”ŸæˆäºŒç»´ç </span><br><span class="line">    CIImage *qrCode = [self createQRForString:string];</span><br><span class="line">    // 3. è°ƒæ•´å›¾åƒå¤§å°å¹¶æ˜¾ç¤º</span><br><span class="line">    UIImage *qrCodeImg = [self createNonInterpolatedUIImageFormCIImage:qrCode withScale:[[UIScreen mainScreen] scale] * 2];</span><br><span class="line">    self.imageView.image = qrCodeImg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç”ŸæˆäºŒç»´ç æ–¹æ³•</span><br><span class="line">- (CIImage *)createQRForString:(NSString *)qrString &#123;</span><br><span class="line">    // 1. é¦–å…ˆæŠŠ NSString å¯¹è±¡ä½¿ç”¨ UTF-8 ç¼–ç è½¬æ¢æˆ NSData å¯¹è±¡</span><br><span class="line">    NSData *stringData = [qrString dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line">    </span><br><span class="line">    // 2. åˆ›å»º CIFilter è¿‡æ»¤å™¨å¯¹è±¡</span><br><span class="line">    CIFilter *qrFilter = [CIFilter filterWithName:@&quot;CIQRCodeGenerator&quot;];</span><br><span class="line">    </span><br><span class="line">    // 3.1 è®¾ç½® inputMessage ï¼ˆå³è¾“å…¥å†…å®¹ï¼‰</span><br><span class="line">    [qrFilter setValue:stringData forKey:@&quot;inputMessage&quot;];</span><br><span class="line">    // 3.2 è®¾ç½®ç”ŸæˆäºŒç»´ç çš„è¯¯å·®ç­‰çº§</span><br><span class="line">    [qrFilter setValue:@&quot;H&quot; forKey:@&quot;inputCorrectionLevel&quot;];</span><br><span class="line">    </span><br><span class="line">    // 4. è¾“å‡ºä¸º CIImage</span><br><span class="line">    return qrFilter.outputImage;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// é»˜è®¤è¾“å‡ºçš„ CIImage æ˜¯ä¸€ä¸ª 1pt çš„æœ€å°çš„åˆ†è¾¨ç‡çš„ CIImage å¯¹è±¡ã€‚</span><br><span class="line">// æˆ‘ä»¬éœ€è¦é‡è®¾è¿™ä¸ªå›¾åƒçš„å¤§å°ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æƒ³å¯¹å®ƒè¿›è¡Œç¯¡æ”¹ã€‚</span><br><span class="line">// è°ƒæ•´å›¾åƒå¤§å°</span><br><span class="line">- (UIImage *)createNonInterpolatedUIImageFormCIImage:(CIImage *)image withScale:(CGFloat) scale &#123;</span><br><span class="line">    // Render the CIImage into a CGImage</span><br><span class="line">    CGImageRef cgImage = [[CIContext contextWithOptions:nil] createCGImage:image fromRect:image.extent];</span><br><span class="line">    </span><br><span class="line">    // Now we&apos;ll rescale using CoreGraphics</span><br><span class="line">    UIGraphicsBeginImageContext(CGSizeMake(image.extent.size.width * scale, image.extent.size.width * scale));</span><br><span class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</span><br><span class="line">    // We don&apos;t want to interpolate (since we&apos;ve got a pixel-corrent image)</span><br><span class="line">    CGContextSetInterpolationQuality(context, kCGInterpolationNone);</span><br><span class="line">    CGContextDrawImage(context, CGContextGetClipBoundingBox(context), cgImage);</span><br><span class="line">    // Get the image out</span><br><span class="line">    UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    // Tidy up</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line">    CGImageRelease(cgImage);</span><br><span class="line">    return scaledImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆçš„äºŒç»´ç ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-a09712fdc821e0b7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/620" alt></p>
<h3 id="inputCorrectionLevel-äºŒç»´ç ç­‰çº§"><a href="#inputCorrectionLevel-äºŒç»´ç ç­‰çº§" class="headerlink" title="inputCorrectionLevel - äºŒç»´ç ç­‰çº§"></a>inputCorrectionLevel - äºŒç»´ç ç­‰çº§</h3><ul>
<li>L - 7%çš„é”™è¯¯å¼¹æ€§</li>
<li>M - 15%çš„é”™è¯¯å¼¹æ€§</li>
<li>Q - 25%çš„é”™è¯¯å¼¹æ€§</li>
<li>H - 30%çš„é”™è¯¯å¼¹æ€§</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/15/å¤©å¤©å“å°iOS7ç”œç‚¹ Day14ï¼šInteractive View Controller Transitions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/15/å¤©å¤©å“å°iOS7ç”œç‚¹ Day14ï¼šInteractive View Controller Transitions/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day14ï¼šInteractive View Controller Transitions</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-15 12:32:00" itemprop="dateCreated datePublished" datetime="2017-09-15T12:32:00+08:00">2017-09-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 14:07:17" itemprop="dateModified" datetime="2019-04-17T14:07:17+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/15/å¤©å¤©å“å°iOS7ç”œç‚¹ Day14ï¼šInteractive View Controller Transitions/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day14ï¼šInteractive View Controller Transitions">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>ä¸ºæ¨¡æ€è§†å›¾æ§åˆ¶å™¨æ·»åŠ äº¤äº’å¼è§†å›¾è½¬æ¢</p>
</blockquote>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/18/ios7-day-by-day-day14-interactive-view-controller-transitions/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 14 :: Interactive View Controller Transitions</a></li>
</ul>
<p>è¿™ç¯‡æ–‡ç« å¯èƒ½ä¼šç”¨åˆ°ä¹‹å‰ä¸¤ç¯‡æ–‡ç« çš„çŸ¥è¯†ï¼š</p>
<ul>
<li><a href="http://blog.kingiol.com/2014/01/12/ios7-day-by-day-day10-custom-uiviewcontroller-transitions/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 10 :: Custom UIViewController Transitions</a> - å¯¼èˆªè§†å›¾æ§åˆ¶å™¨è‡ªå®šä¹‰è½¬åœº</li>
<li><a href="http://blog.kingiol.com/2014/01/13/ios7-day-by-day-day11-uiview-key-frame-animations/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 11 :: UIView Key-frame Animations</a> - å…³é”®å¸§åŠ¨ç”»</li>
</ul>
<h3 id="Flip-Transition-Animation-ç¿»è½¬è¿‡æ¸¡æ•ˆæœ"><a href="#Flip-Transition-Animation-ç¿»è½¬è¿‡æ¸¡æ•ˆæœ" class="headerlink" title="Flip Transition Animation - ç¿»è½¬è¿‡æ¸¡æ•ˆæœ"></a>Flip Transition Animation - ç¿»è½¬è¿‡æ¸¡æ•ˆæœ</h3><h4 id="é»˜è®¤çš„æ¨¡æ€è§†å›¾ç¿»è½¬æ•ˆæœ"><a href="#é»˜è®¤çš„æ¨¡æ€è§†å›¾ç¿»è½¬æ•ˆæœ" class="headerlink" title="é»˜è®¤çš„æ¨¡æ€è§†å›¾ç¿»è½¬æ•ˆæœ"></a>é»˜è®¤çš„æ¨¡æ€è§†å›¾ç¿»è½¬æ•ˆæœ</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-10e898d96c1c956f.gif?imageMogr2/auto-orient/strip" alt></p>
<h4 id="è‡ªå®šä¹‰æ¨¡æ€è§†å›¾ç¿»è½¬æ•ˆæœ"><a href="#è‡ªå®šä¹‰æ¨¡æ€è§†å›¾ç¿»è½¬æ•ˆæœ" class="headerlink" title="è‡ªå®šä¹‰æ¨¡æ€è§†å›¾ç¿»è½¬æ•ˆæœ"></a>è‡ªå®šä¹‰æ¨¡æ€è§†å›¾ç¿»è½¬æ•ˆæœ</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-063a3ec6cd579226.gif?imageMogr2/auto-orient/strip" alt></p>
<h4 id="å®ç°æ–¹å¼ï¼š"><a href="#å®ç°æ–¹å¼ï¼š" class="headerlink" title="å®ç°æ–¹å¼ï¼š"></a>å®ç°æ–¹å¼ï¼š</h4><ol>
<li><p>è§†å›¾å±‚æ¬¡ç»“æ„</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-1be0ede8a3c71401.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
<li><p>è‡ªå®šä¹‰æ¸å˜åŠ¨ç”»ç±»ï¼Œéµå®ˆ <code>UIViewControllerAnimatedTransitioning</code> åè®®ä»¥å®ç°å…·ä½“çš„åŠ¨ç”»æ•ˆæœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">// ********************************************</span><br><span class="line">// SCFlipAnimation.h</span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> éµå®ˆ&lt;UIViewControllerAnimatedTransitioning&gt;åè®®çš„è‡ªå®šä¹‰æ¸å˜åŠ¨ç”»</span><br><span class="line"> */</span><br><span class="line">@interface SCFlipAnimation : NSObject &lt;UIViewControllerAnimatedTransitioning&gt;</span><br><span class="line"></span><br><span class="line">/** ç¡®å®šé¡µé¢çš„ç¿»è½¬æ–¹å‘ */</span><br><span class="line">@property (nonatomic, assign) BOOL dismissal;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// ********************************************</span><br><span class="line">// SCFlipAnimation.m</span><br><span class="line">#import &quot;SCFlipAnimation.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation SCFlipAnimation</span><br><span class="line"></span><br><span class="line">- (void)animateTransition:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext</span><br><span class="line">     &#123;</span><br><span class="line">    // è·å–å„è‡ªçš„è§†å›¾æ§åˆ¶å™¨</span><br><span class="line">    UIViewController *fromVC = [transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];</span><br><span class="line">    UIViewController *toVC = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];</span><br><span class="line">    </span><br><span class="line">    // è·å–è§†å›¾</span><br><span class="line">    UIView *containerView = [transitionContext containerView];</span><br><span class="line">    UIView *fromView = fromVC.view;</span><br><span class="line">    UIView *toView = toVC.view;</span><br><span class="line">    </span><br><span class="line">    // æ·»åŠ  toView åˆ°å®¹å™¨è§†å›¾</span><br><span class="line">    [containerView addSubview:toView];</span><br><span class="line">    </span><br><span class="line">    // è®¾ç½® frames</span><br><span class="line">    CGRect initialFrame = [transitionContext initialFrameForViewController:fromVC];</span><br><span class="line">    fromView.frame = initialFrame;</span><br><span class="line">    toView.frame = initialFrame;</span><br><span class="line">    </span><br><span class="line">    // æ„å»º3Dè½¬æ¢éœ€è¦çš„è§†è§’</span><br><span class="line">    CATransform3D transform = CATransform3DIdentity;</span><br><span class="line">    transform.m34 = -1/CGRectGetHeight(initialFrame);</span><br><span class="line">    containerView.layer.sublayerTransform = transform;</span><br><span class="line">    </span><br><span class="line">    // ç¿»è½¬æ–¹å‘</span><br><span class="line">    CGFloat direction = self.dismissal ? -1.0 : 1.0;</span><br><span class="line">    </span><br><span class="line">    // toView åå‘ç¿»è½¬ pi/2</span><br><span class="line">    toView.layer.transform = CATransform3DMakeRotation(-direction * M_PI_2, 1, 0, 0);</span><br><span class="line">    </span><br><span class="line">    // å…³é”®å¸§åŠ¨ç”»</span><br><span class="line">    [UIView animateKeyframesWithDuration:[self transitionDuration:transitionContext]</span><br><span class="line">                                   delay:0.0</span><br><span class="line">                                 options:0</span><br><span class="line">                              animations:^&#123;</span><br><span class="line">                                  // First half is rotating in</span><br><span class="line">            [UIView addKeyframeWithRelativeStartTime:0.0</span><br><span class="line">                                    relativeDuration:0.5</span><br><span class="line">                                          animations:^&#123;</span><br><span class="line">        // fromView æ­£å‘ç¿»è½¬ pi/2</span><br><span class="line">        fromView.layer.transform = CATransform3DMakeRotation(direction * M_PI_2, 1, 0, 0);</span><br><span class="line">                                          &#125;];</span><br><span class="line">            [UIView addKeyframeWithRelativeStartTime:0.5</span><br><span class="line">                                    relativeDuration:0.5</span><br><span class="line">                                          animations:^&#123;</span><br><span class="line">        // toView è¿˜åŸ</span><br><span class="line">        toView.layer.transform = CATransform3DMakeRotation(0, 1, 0, 0);</span><br><span class="line">                                          &#125;];</span><br><span class="line">                              &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">                                  [transitionContext completeTransition:![transitionContext transitionWasCancelled]];</span><br><span class="line">                              &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (NSTimeInterval)transitionDuration:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext</span><br><span class="line">     &#123;</span><br><span class="line">    return 1.0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
<li><p>First View Controllerï¼Œéµå®ˆ <code>UIViewControllerTransitioningDelegate</code> åè®®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">@interface SCViewController () &lt;UIViewControllerTransitioningDelegate&gt; &#123;</span><br><span class="line">    SCFlipAnimation *_flipAnimation;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation SCViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">	// Do any additional setup after loading the view, typically from a nib.</span><br><span class="line">    _flipAnimation = [SCFlipAnimation new];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - </span><br><span class="line"></span><br><span class="line">- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender</span><br><span class="line">&#123;</span><br><span class="line">    if([segue.destinationViewController isKindOfClass:[SCModalViewController class]]) &#123;</span><br><span class="line">        SCModalViewController *vc = (SCModalViewController *)segue.destinationViewController;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIViewControllerTransitioningDelegate</span><br><span class="line"></span><br><span class="line">// å¼¹å‡ºæ¨¡æ€è§†å›¾æ§åˆ¶å™¨</span><br><span class="line">// è¿”å›éµå®ˆ UIViewControllerAnimatedTransitioning åè®®çš„å®ä¾‹</span><br><span class="line">- (id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source</span><br><span class="line">&#123;</span><br><span class="line">    _flipAnimation.dismissal = NO;</span><br><span class="line">    return _flipAnimation;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¶ˆå¤±æ¨¡æ€è§†å›¾æ§åˆ¶å™¨</span><br><span class="line">// è¿”å›éµå®ˆ UIViewControllerAnimatedTransitioning åè®®çš„å®ä¾‹</span><br><span class="line">- (id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed</span><br><span class="line">&#123;</span><br><span class="line">    _flipAnimation.dismissal = YES;</span><br><span class="line">    return _flipAnimation;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Model View Controller å®ç°æŒ‰é’®æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ä½¿æ¨¡æ€è§†å›¾æ§åˆ¶å™¨æ¶ˆå¤±</span><br><span class="line">- (IBAction)handleDismissPressed:(id)sender &#123;</span><br><span class="line">    [self dismissViewControllerAnimated:YES completion:NULL];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Interactive-transitioning-äº¤äº’å¼è½¬æ¢"><a href="#Interactive-transitioning-äº¤äº’å¼è½¬æ¢" class="headerlink" title="Interactive transitioning - äº¤äº’å¼è½¬æ¢"></a>Interactive transitioning - äº¤äº’å¼è½¬æ¢</h3><p>ç”¨æ‰‹åŠ¿ä¸Šæ»‘ã€ä¸‹æ»‘æ“ä½œå®ç°è§†å›¾è½¬æ¢</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-420374adc092ce3e.gif?imageMogr2/auto-orient/strip" alt></p>
<ol>
<li><p>è‡ªå®šä¹‰ <code>UIPercentDrivenInteractiveTransition</code> å­ç±»å¯¹è±¡ï¼Œç”¨äºæ‰‹åŠ¿å¤„ç†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">// ********************************************</span><br><span class="line">// SCFlipAnimationInteractor.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">#import &quot;SCInteractiveTransitionViewControllerDelegate.h&quot;</span><br><span class="line"></span><br><span class="line">@interface SCFlipAnimationInteractor : UIPercentDrivenInteractiveTransition</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong, readonly) UIPanGestureRecognizer *gestureRecogniser;</span><br><span class="line">@property (nonatomic, assign, readonly) BOOL interactionInProgress;</span><br><span class="line"></span><br><span class="line">// å®ç° SCInteractiveTransitionViewControllerDelegate è‡ªå®šä¹‰äº¤äº’å¼è½¬åœºåè®®çš„ä»»æ„è§†å›¾æ§åˆ¶å™¨</span><br><span class="line">@property (nonatomic, weak) UIViewController&lt;SCInteractiveTransitionViewControllerDelegate&gt; *presentingVC;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// ********************************************</span><br><span class="line">// SCFlipAnimationInteractor.m</span><br><span class="line">#import &quot;SCFlipAnimationInteractor.h&quot;</span><br><span class="line"></span><br><span class="line">@interface SCFlipAnimationInteractor ()</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong, readwrite) UIPanGestureRecognizer *gestureRecogniser;</span><br><span class="line">@property (nonatomic, assign, readwrite) BOOL interactionInProgress;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation SCFlipAnimationInteractor</span><br><span class="line"></span><br><span class="line">- (instancetype)init</span><br><span class="line">&#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        self.gestureRecogniser = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Gesture recognition</span><br><span class="line">// æ‰‹åŠ¿æ“ä½œçš„æ–¹æ³•</span><br><span class="line">- (void)handlePan:(UIPanGestureRecognizer *)pgr</span><br><span class="line">&#123;</span><br><span class="line">    CGPoint translation = [pgr translationInView:pgr.view];</span><br><span class="line">    // æ‰‹åŠ¿ç™¾åˆ†æ¯”ï¼Œç”¨ç™¾åˆ†æ¯”çš„æ–¹å¼æ¥æ¿€æ´»æŒ‡å®šçš„åŠ¨ç”»è¿‡ç¨‹ã€‚</span><br><span class="line">    CGFloat percentage  = fabs(translation.y / CGRectGetHeight(pgr.view.bounds));</span><br><span class="line">    switch (pgr.state) &#123;</span><br><span class="line">        case UIGestureRecognizerStateBegan: &#123;</span><br><span class="line">            // æ‰‹åŠ¿å¼€å§‹ï¼Œæ‰§è¡Œç¿»è½¬åŠ¨ç”»</span><br><span class="line">            self.interactionInProgress = YES;</span><br><span class="line">            // å‘ç›®æ ‡å¯¹è±¡ä¼ è¾¾æ‰§è¡ŒåŠ¨ç”»çš„å‘½ä»¤</span><br><span class="line">            [self.presentingVC proceedToNextViewController];</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        case UIGestureRecognizerStateChanged: &#123;</span><br><span class="line">            // æ‰‹åŠ¿è¿›è¡Œä¸­ï¼Œæ›´æ–°ç¿»è½¬è¿›åº¦</span><br><span class="line">            [self updateInteractiveTransition:percentage];</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        case UIGestureRecognizerStateEnded: &#123;</span><br><span class="line">            // æ‰‹åŠ¿ç»“æŸï¼Œåˆ†è¿›åº¦å€¼å¤„ç†</span><br><span class="line">            if(percentage &lt; 0.5) &#123;</span><br><span class="line">                // 1.è¿›åº¦å°äº0.5ï¼Œå–æ¶ˆè½¬åœºåŠ¨ç”»</span><br><span class="line">                [self cancelInteractiveTransition];</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // 2.è¿›åº¦å¤§äº0.5ï¼Œè‡ªåŠ¨å®Œæˆè½¬åœºåŠ¨ç”»</span><br><span class="line">                [self finishInteractiveTransition];</span><br><span class="line">            &#125;</span><br><span class="line">            self.interactionInProgress = NO;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        case UIGestureRecognizerStateCancelled: &#123;</span><br><span class="line">            // å–æ¶ˆæ‰‹åŠ¿</span><br><span class="line">            [self cancelInteractiveTransition];</span><br><span class="line">            self.interactionInProgress = NO;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        default:</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
<li><p>è‡ªå®šä¹‰äº¤äº’åè®®</p>
</li>
</ol>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">// 1.è¯¥åè®®çš„ä½œç”¨ï¼š</span><br><span class="line">// å°†æ‰‹åŠ¿ä¸ç›®æ ‡è§†å›¾ç›¸å…³è”ï¼Œæ‰‹åŠ¿å¼€å§‹æ—¶ï¼Œè‡ªå®šä¹‰çš„æ‰‹åŠ¿å¤„ç†ç±»éœ€è¦å‘ç›®æ ‡è§†å›¾å‘é€æ‰§è¡Œè§†å›¾è½¬åœºçš„å‘½ä»¤ã€‚</span><br><span class="line">// 2.ä¸ºä»€ä¹ˆè¦å°†æ‰‹åŠ¿ä¸ç›®æ ‡è§†å›¾å…³è”å‘¢ï¼Ÿ</span><br><span class="line">// å› ä¸ºæ‰‹åŠ¿æ˜¯æ·»åŠ åˆ° window ä¸Šçš„ï¼Œè¿™æ ·å°±å¯ä»¥å“åº”é¢„æœŸçš„è¡Œä¸ºã€‚</span><br><span class="line">// 3.ä¸ºä»€ä¹ˆæ‰‹åŠ¿è¦æ·»åŠ åˆ° window ä¸Šè€Œä¸æ˜¯è§†å›¾ä¸Šï¼Ÿ</span><br><span class="line">// å› ä¸ºåŠ¨ç”»å‘ç”Ÿçš„æ—¶å€™ï¼Œè§†å›¾æ§åˆ¶å™¨ä¸­çš„è§†å›¾å°†ä¼šè¢«ç§»é™¤ï¼Œå› æ­¤æ‰‹åŠ¿å°±æ²¡æœ‰åŠæ³•å“åº”è¡Œä¸ºäº†ã€‚</span><br><span class="line">@protocol SCInteractiveTransitionViewControllerDelegate &lt;NSObject&gt;</span><br><span class="line"></span><br><span class="line">- (void)proceedToNextViewController;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>   â€‹</p>
<ol start="3">
<li><p>First View Controller</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">// ********************************************</span><br><span class="line">// SCViewController.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface SCViewController : UIViewController</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// ********************************************</span><br><span class="line">// SCViewController.m</span><br><span class="line">#import &quot;SCViewController.h&quot;</span><br><span class="line">#import &quot;SCModalViewController.h&quot;</span><br><span class="line">#import &quot;SCFlipAnimationInteractor.h&quot;</span><br><span class="line">#import &quot;SCFlipAnimation.h&quot;</span><br><span class="line">#import &quot;SCInteractiveTransitionViewControllerDelegate.h&quot;</span><br><span class="line"></span><br><span class="line">@interface SCViewController () &lt;SCInteractiveTransitionViewControllerDelegate, UIViewControllerTransitioningDelegate&gt; &#123;</span><br><span class="line">    SCFlipAnimationInteractor *_animationInteractor;</span><br><span class="line">    SCFlipAnimation *_flipAnimation;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation SCViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">	// Do any additional setup after loading the view, typically from a nib.</span><br><span class="line">    _animationInteractor = [SCFlipAnimationInteractor new];</span><br><span class="line">    _flipAnimation = [SCFlipAnimation new];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)viewDidAppear:(BOOL)animated</span><br><span class="line">&#123;</span><br><span class="line">    // æ·»åŠ æ‰‹åŠ¿è¯†åˆ«å™¨åˆ°windowå¯¹è±¡ä¸­ã€‚</span><br><span class="line">    // è¿™æ˜¯å› ä¸ºåŠ¨ç”»å‘ç”Ÿçš„æ—¶å€™ï¼Œè§†å›¾æ§åˆ¶å™¨ä¸­çš„è§†å›¾å°†ä¼šè¢«ç§»é™¤ï¼Œå› æ­¤æ‰‹åŠ¿å°±æ²¡æœ‰åŠæ³•å“åº”è¡Œä¸ºäº†ã€‚</span><br><span class="line">    // æŠŠå®ƒæ·»åŠ åˆ°windowä¸Šé¢ï¼Œå°†ä¼šç¡®ä¿æˆ‘ä»¬æœŸå¾…çš„è¡Œä¸ºã€‚</span><br><span class="line">    if (![self.view.window.gestureRecognizers containsObject:_animationInteractor.gestureRecogniser]) &#123;</span><br><span class="line">        [self.view.window addGestureRecognizer:_animationInteractor.gestureRecogniser];</span><br><span class="line">    &#125;</span><br><span class="line">    // åœ¨ç¬¬ä¸€é¡µä¸­ï¼Œäº¤äº’çš„æ¥æ”¶è€…æŒ‡å‘ self è‡ªèº«</span><br><span class="line">    _animationInteractor.presentingVC = self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - </span><br><span class="line"></span><br><span class="line">- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender</span><br><span class="line">&#123;</span><br><span class="line">    if([segue.destinationViewController isKindOfClass:[SCModalViewController class]]) &#123;</span><br><span class="line">        // Set the delegate</span><br><span class="line">        SCModalViewController *vc = (SCModalViewController *)segue.destinationViewController;</span><br><span class="line">        vc.transitioningDelegate = self;</span><br><span class="line">        // æ¨¡æ€è§†å›¾çš„æ‰‹åŠ¿äº¤äº’å™¨ä¹ŸæŒ‡å‘è¿™ä¸ªç±»çš„æ‰‹åŠ¿äº¤äº’å™¨ï¼ˆå¼±å¼•ç”¨ï¼‰</span><br><span class="line">        // ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ä¸ªè§†å›¾çš„æ‰‹åŠ¿äº¤äº’å™¨æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span><br><span class="line">        vc.interactor = _animationInteractor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - SCInteractiveTransitionViewControllerDelegate</span><br><span class="line"></span><br><span class="line">- (void)proceedToNextViewController</span><br><span class="line">&#123;</span><br><span class="line">    [self performSegueWithIdentifier:@&quot;displayModal&quot; sender:self];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIViewControllerTransitioningDelegate</span><br><span class="line"></span><br><span class="line">// å¼¹å‡ºæ¨¡æ€è§†å›¾æ§åˆ¶å™¨</span><br><span class="line">- (id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source</span><br><span class="line">&#123;</span><br><span class="line">    _flipAnimation.dismissal = NO;</span><br><span class="line">    return _flipAnimation;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¶ˆå¤±æ¨¡æ€è§†å›¾æ§åˆ¶å™¨</span><br><span class="line">- (id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed</span><br><span class="line">&#123;</span><br><span class="line">    _flipAnimation.dismissal = YES;</span><br><span class="line">    return _flipAnimation;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// äº¤äº’å¼è½¬åœºæ–¹æ³•1ï¼šå±•ç¤º</span><br><span class="line">// è¿”å›ä¸€ä¸ªå®ç° UIViewControllerInteractiveTransitioning åè®®çš„å¯¹è±¡</span><br><span class="line">- (id&lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForPresentation:(id&lt;UIViewControllerAnimatedTransitioning&gt;)animator</span><br><span class="line">&#123;</span><br><span class="line">    return _animationInteractor.interactionInProgress ? _animationInteractor : nil;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// äº¤äº’å¼è½¬åœºæ–¹æ³•2ï¼šæ¶ˆå¤±</span><br><span class="line">// è¿”å›ä¸€ä¸ªå®ç° UIViewControllerInteractiveTransitioning åè®®çš„å¯¹è±¡</span><br><span class="line">- (id&lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForDismissal:(id&lt;UIViewControllerAnimatedTransitioning&gt;)animator</span><br><span class="line">&#123;</span><br><span class="line">    return _animationInteractor.interactionInProgress ? _animationInteractor : nil;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
<li><p>Model View Controller</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// ********************************************</span><br><span class="line">// SCModalViewController.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">#import &quot;SCInteractiveTransitionViewControllerDelegate.h&quot;</span><br><span class="line">#import &quot;SCFlipAnimationInteractor.h&quot;</span><br><span class="line"></span><br><span class="line">@interface SCModalViewController : UIViewController &lt;SCInteractiveTransitionViewControllerDelegate&gt;</span><br><span class="line"></span><br><span class="line">- (IBAction)handleDismissPressed:(id)sender;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, weak) SCFlipAnimationInteractor *interactor;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// ********************************************</span><br><span class="line">// SCModalViewController.m</span><br><span class="line">#import &quot;SCModalViewController.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation SCModalViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidAppear:(BOOL)animated</span><br><span class="line">&#123;</span><br><span class="line">    // é‡æ–°è®¾ç½®å“ªä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨æ˜¯äº¤äº’å¼è½¬åœºçš„æ¥æ”¶è€…</span><br><span class="line">    // åœ¨æ¨¡æ€é¡µé¢ä¸­ï¼Œäº¤äº’çš„æ¥æ”¶è€…åˆé‡æ–°è®¾ç½®ä¸ºæ¨¡æ€é¡µé¢è‡ªèº«</span><br><span class="line">    self.interactor.presentingVC = self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - IBActions</span><br><span class="line"></span><br><span class="line">// ä½¿æ¨¡æ€è§†å›¾æ§åˆ¶å™¨æ¶ˆå¤±</span><br><span class="line">- (IBAction)handleDismissPressed:(id)sender &#123;</span><br><span class="line">    [self dismissViewControllerAnimated:YES completion:NULL];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - SCInteractiveTransitionViewControllerDelegate</span><br><span class="line"></span><br><span class="line">- (void)proceedToNextViewController</span><br><span class="line">&#123;</span><br><span class="line">    [self dismissViewControllerAnimated:YES completion:NULL];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>The End.</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/14/å¤©å¤©å“å°iOS7ç”œç‚¹ Day12ï¼šDynamic Type and Font Descriptors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/14/å¤©å¤©å“å°iOS7ç”œç‚¹ Day12ï¼šDynamic Type and Font Descriptors/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day12ï¼šDynamic Type and Font Descriptors</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-14 13:48:00" itemprop="dateCreated datePublished" datetime="2017-09-14T13:48:00+08:00">2017-09-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 14:07:32" itemprop="dateModified" datetime="2019-04-17T14:07:32+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/14/å¤©å¤©å“å°iOS7ç”œç‚¹ Day12ï¼šDynamic Type and Font Descriptors/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day12ï¼šDynamic Type and Font Descriptors">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>å…³äº <strong>TextKit</strong> æ¡†æ¶ä¸­çš„åŠ¨æ€ç±»å‹å’Œå­—ä½“æè¿°ç¬¦ç‰¹æ€§ã€‚</p>
</blockquote>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/14/ios7-day-by-day-day12-dynamic-type-and-font-descriptors/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 12 :: Dynamic Type and Font Descriptors</a></li>
</ul>
<h3 id="Dynamic-Type-åŠ¨æ€ç±»å‹"><a href="#Dynamic-Type-åŠ¨æ€ç±»å‹" class="headerlink" title="Dynamic Type - åŠ¨æ€ç±»å‹"></a>Dynamic Type - åŠ¨æ€ç±»å‹</h3><p>åŠ¨æ€ç±»å‹å…è®¸ç”¨æˆ·æŒ‡å®šä»–ä»¬è®¾å¤‡ä¸­åº”ç”¨ç¨‹åºå†…éƒ¨çš„å­—ä½“ç±»å‹å¤§å°ã€‚</p>
<h4 id="UIFontTextStyle-ç±»å‹"><a href="#UIFontTextStyle-ç±»å‹" class="headerlink" title="UIFontTextStyle ç±»å‹"></a>UIFontTextStyle ç±»å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// Font text styles</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleTitle1 NS_AVAILABLE_IOS(9_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleTitle2 NS_AVAILABLE_IOS(9_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleTitle3 NS_AVAILABLE_IOS(9_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleHeadline NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleSubheadline NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleBody NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleCallout NS_AVAILABLE_IOS(9_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleFootnote NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleCaption1 NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN UIFontTextStyle const UIFontTextStyleCaption2 NS_AVAILABLE_IOS(7_0);</span><br></pre></td></tr></table></figure>
<h4 id="Interface-Builder-è®¾ç½®"><a href="#Interface-Builder-è®¾ç½®" class="headerlink" title="Interface Builder è®¾ç½®"></a>Interface Builder è®¾ç½®</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-5a807907124c3e8b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="ä»£ç è®¾ç½®"><a href="#ä»£ç è®¾ç½®" class="headerlink" title="ä»£ç è®¾ç½®"></a>ä»£ç è®¾ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// è®¾ç½®å­æ ‡ç­¾ä¸Šçš„å­—ä½“</span><br><span class="line">self.subHeadingLabel.font = [UIFont preferredFontForTextStyle:UIFontTextStyleSubheadline];</span><br></pre></td></tr></table></figure>
<h4 id="æ ·å¼å¤§å°"><a href="#æ ·å¼å¤§å°" class="headerlink" title="æ ·å¼å¤§å°"></a>æ ·å¼å¤§å°</h4><p>å½“åº”ç”¨æ”¯æŒåŠ¨æ€å­—ä½“åï¼Œæˆ‘ä»¬å¯ä»¥åˆ°ã€è®¾ç½®ã€‘- ã€æ˜¾ç¤ºä¸äº®åº¦ã€‘-ã€æ–‡å­—å¤§å°ã€‘ä¸­ä¿®æ”¹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-bad3a77a20bd5988.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h5 id="æœ€å¤§å·å­—ä½“ï¼ˆæ»‘å—ä½äºæœ€å³è¾¹ï¼‰"><a href="#æœ€å¤§å·å­—ä½“ï¼ˆæ»‘å—ä½äºæœ€å³è¾¹ï¼‰" class="headerlink" title="æœ€å¤§å·å­—ä½“ï¼ˆæ»‘å—ä½äºæœ€å³è¾¹ï¼‰"></a>æœ€å¤§å·å­—ä½“ï¼ˆæ»‘å—ä½äºæœ€å³è¾¹ï¼‰</h5><p><img src="http://upload-images.jianshu.io/upload_images/2648731-88c6185ca1f699a7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h5 id="ä¸­ç­‰å­—ä½“ï¼ˆæ»‘å—ä½äºæ­£ä¸­é—´ï¼‰"><a href="#ä¸­ç­‰å­—ä½“ï¼ˆæ»‘å—ä½äºæ­£ä¸­é—´ï¼‰" class="headerlink" title="ä¸­ç­‰å­—ä½“ï¼ˆæ»‘å—ä½äºæ­£ä¸­é—´ï¼‰"></a>ä¸­ç­‰å­—ä½“ï¼ˆæ»‘å—ä½äºæ­£ä¸­é—´ï¼‰</h5><p><img src="http://upload-images.jianshu.io/upload_images/2648731-418c17e7dc7712fb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h5 id="æœ€å°å·å­—ä½“ï¼ˆæ»‘å—ä½äºæœ€å·¦è¾¹ï¼‰"><a href="#æœ€å°å·å­—ä½“ï¼ˆæ»‘å—ä½äºæœ€å·¦è¾¹ï¼‰" class="headerlink" title="æœ€å°å·å­—ä½“ï¼ˆæ»‘å—ä½äºæœ€å·¦è¾¹ï¼‰"></a>æœ€å°å·å­—ä½“ï¼ˆæ»‘å—ä½äºæœ€å·¦è¾¹ï¼‰</h5><p><img src="http://upload-images.jianshu.io/upload_images/2648731-dffc57f4748d1009.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="Font-Descriptors-å­—ä½“æè¿°ç¬¦"><a href="#Font-Descriptors-å­—ä½“æè¿°ç¬¦" class="headerlink" title="Font Descriptors - å­—ä½“æè¿°ç¬¦"></a>Font Descriptors - å­—ä½“æè¿°ç¬¦</h3><p>å¯ä»¥åˆ©ç”¨å­—ä½“æè¿°ç¬¦æ”¹å˜å­—ä½“æ ·å¼ï¼Œè€Œä¸éœ€è¦è·å–å¹¶è®¾ç½®å½“å‰å­—ä½“å¤§å°ï¼š</p>
<h4 id="ä¿®æ”¹å­—ä½“æè¿°ç¬¦ä¿¡æ¯"><a href="#ä¿®æ”¹å­—ä½“æè¿°ç¬¦ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹å­—ä½“æè¿°ç¬¦ä¿¡æ¯"></a>ä¿®æ”¹å­—ä½“æè¿°ç¬¦ä¿¡æ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// ç”¨æè¿°ç¬¦ä¿®æ”¹å­—ä½“</span><br><span class="line">// 1.è·å¾— UIFontTextStyleBody é£æ ¼çš„å­—ä½“æè¿°ç¬¦ä¿¡æ¯ã€‚</span><br><span class="line">UIFontDescriptor *bodyFontDesciptor = [UIFontDescriptor preferredFontDescriptorWithTextStyle:UIFontTextStyleBody];</span><br><span class="line">// 2.è¦†ç›–å­—ä½“ç‰¹å¾ã€‚</span><br><span class="line">UIFontDescriptor *boldBodyFontDescriptor = [bodyFontDesciptor fontDescriptorWithSymbolicTraits:UIFontDescriptorTraitBold];</span><br><span class="line">// 3.è®¾ç½®ä¸å­—ä½“æè¿°ç¬¦åŒ¹é…çš„å­—ä½“ã€‚</span><br><span class="line">// å¦‚æœ fontSize å¤§äº0.0ï¼Œåˆ™å®ƒåœ¨ fontDescriptor ä¸­ä¼˜å…ˆäºUIFontDescriptorSizeAttributeã€‚</span><br><span class="line">self.boldBodyTextLabel.font = [UIFont fontWithDescriptor:boldBodyFontDescriptor size:0.0];</span><br></pre></td></tr></table></figure>
<h5 id="UIFontDescriptorSymbolicTraits-éƒ¨åˆ†é€‰é¡¹"><a href="#UIFontDescriptorSymbolicTraits-éƒ¨åˆ†é€‰é¡¹" class="headerlink" title="UIFontDescriptorSymbolicTraits éƒ¨åˆ†é€‰é¡¹"></a>UIFontDescriptorSymbolicTraits éƒ¨åˆ†é€‰é¡¹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UIFontDescriptorTraitItalic = 1u &lt;&lt; 0,</span><br><span class="line">UIFontDescriptorTraitBold = 1u &lt;&lt; 1,</span><br><span class="line">UIFontDescriptorTraitExpanded = 1u &lt;&lt; 5, // expanded and condensed traits are mutually exclusive</span><br><span class="line">UIFontDescriptorTraitCondensed = 1u &lt;&lt; 6,</span><br><span class="line">UIFontDescriptorTraitMonoSpace = 1u &lt;&lt; 10, // Use fixed-pitch glyphs if available. May have multiple glyph advances (most CJK glyphs may contain two spaces)</span><br><span class="line">UIFontDescriptorTraitVertical = 1u &lt;&lt; 11, // Use vertical glyph variants and metrics</span><br><span class="line">UIFontDescriptorTraitUIOptimized = 1u &lt;&lt; 12, // Synthesize appropriate attributes for UI rendering such as control titles if necessary</span><br><span class="line">UIFontDescriptorTraitTightLeading = 1u &lt;&lt; 15, // Use tighter leading values</span><br><span class="line">UIFontDescriptorTraitLooseLeading = 1u &lt;&lt; 16, // Use looser leading values</span><br></pre></td></tr></table></figure>
<h4 id="é€šè¿‡ä¼ å…¥å­—å…¸çš„æ–¹å¼åˆ›å»ºå­—ä½“æè¿°ç¬¦"><a href="#é€šè¿‡ä¼ å…¥å­—å…¸çš„æ–¹å¼åˆ›å»ºå­—ä½“æè¿°ç¬¦" class="headerlink" title="é€šè¿‡ä¼ å…¥å­—å…¸çš„æ–¹å¼åˆ›å»ºå­—ä½“æè¿°ç¬¦"></a>é€šè¿‡ä¼ å…¥å­—å…¸çš„æ–¹å¼åˆ›å»ºå­—ä½“æè¿°ç¬¦</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ªå­—ä½“æè¿°ç¬¦</span><br><span class="line">UIFontDescriptor *scriptFontDescriptor = [UIFontDescriptor</span><br><span class="line">    fontDescriptorWithFontAttributes:@&#123;</span><br><span class="line">                                       UIFontDescriptorFamilyAttribute: @&quot;Zapfino&quot;,</span><br><span class="line">                                         UIFontDescriptorSizeAttribute: @15.0</span><br><span class="line">                                       &#125;];</span><br><span class="line">self.scriptTextLabel.font = [UIFont fontWithDescriptor:scriptFontDescriptor size:0.0];</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–å¯ä»¥è®¾ç½®çš„ Attributes å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UIKIT_EXTERN NSString *const UIFontDescriptorFamilyAttribute NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN NSString *const UIFontDescriptorNameAttribute NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN NSString *const UIFontDescriptorFaceAttribute NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN NSString *const UIFontDescriptorSizeAttribute NS_AVAILABLE_IOS(7_0);</span><br><span class="line">UIKIT_EXTERN NSString *const UIFontDescriptorVisibleNameAttribute NS_AVAILABLE_IOS(7_0);</span><br></pre></td></tr></table></figure>
<p>å­—ä½“æè¿°ç¬¦æ•ˆæœï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-7dd956bfeece322d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>The End.</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/13/iOS ç¼–ç¨‹ï¼šCore Animation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/13/iOS ç¼–ç¨‹ï¼šCore Animation/" class="post-title-link" itemprop="url">iOS ç¼–ç¨‹ï¼šCore Animation</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-13 14:19:00" itemprop="dateCreated datePublished" datetime="2017-09-13T14:19:00+08:00">2017-09-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:14:29" itemprop="dateModified" datetime="2019-04-18T01:14:29+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/13/iOS ç¼–ç¨‹ï¼šCore Animation/" class="leancloud_visitors" data-flag-title="iOS ç¼–ç¨‹ï¼šCore Animation">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="UIView-åŸºæœ¬åŠ¨ç”»"><a href="#UIView-åŸºæœ¬åŠ¨ç”»" class="headerlink" title="UIView åŸºæœ¬åŠ¨ç”»"></a>UIView åŸºæœ¬åŠ¨ç”»</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// é€šè¿‡æŒ‡å®šåŠ¨ç”»æŒç»­æ—¶é—´ã€åŠ¨ç”»å»¶è¿Ÿã€æ‰§è¡ŒåŠ¨ç”»é€‰é¡¹å’ŒåŠ¨ç”»å®Œæˆåå›è°ƒçš„ Block å¯¹è±¡ æ›´æ”¹ä¸€ä¸ªæˆ–å¤šä¸ªè§†å›¾çš„åŠ¨ç”»ã€‚</span><br><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0);</span><br><span class="line"></span><br><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0); // delay = 0.0, options = 0</span><br><span class="line"></span><br><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations NS_AVAILABLE_IOS(4_0); // delay = 0.0, options = 0, completion = NULL</span><br></pre></td></tr></table></figure>
<h3 id="ç¤ºä¾‹ï¼šå¹³ç§»åŠ¨ç”»"><a href="#ç¤ºä¾‹ï¼šå¹³ç§»åŠ¨ç”»" class="headerlink" title="ç¤ºä¾‹ï¼šå¹³ç§»åŠ¨ç”»"></a>ç¤ºä¾‹ï¼šå¹³ç§»åŠ¨ç”»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(22, 22, 100, 100)];</span><br><span class="line">    view1.backgroundColor = [UIColor flatMintColor];</span><br><span class="line">    [self.view addSubview:view1];</span><br><span class="line">    </span><br><span class="line">    [UIView animateWithDuration:2.0    // åŠ¨ç”»æŒç»­æ—¶é—´</span><br><span class="line">                          delay:1.0    // åŠ¨ç”»æ‰§è¡Œçš„å»¶è¿Ÿæ—¶é—´</span><br><span class="line">                        options:UIViewAnimationOptionLayoutSubviews    // æ‰§è¡Œçš„åŠ¨ç”»é€‰é¡¹</span><br><span class="line">                     animations:^&#123;</span><br><span class="line">                         // è¦æ‰§è¡Œçš„åŠ¨ç”»ä»£ç </span><br><span class="line">                         view1.center = self.view.center;</span><br><span class="line">                     &#125;</span><br><span class="line">                     completion:^(BOOL finished) &#123;</span><br><span class="line">                         // åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åçš„è°ƒç”¨</span><br><span class="line"></span><br><span class="line">                     &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-10f6a9144dff63df.gif?imageMogr2/auto-orient/strip" alt></p>
<hr>
<h3 id="ç¤ºä¾‹ï¼šé‡å¤åŠ¨ç”»"><a href="#ç¤ºä¾‹ï¼šé‡å¤åŠ¨ç”»" class="headerlink" title="ç¤ºä¾‹ï¼šé‡å¤åŠ¨ç”»"></a>ç¤ºä¾‹ï¼šé‡å¤åŠ¨ç”»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(22, 22, 100, 100)];</span><br><span class="line">    view1.backgroundColor = [UIColor flatMintColor];</span><br><span class="line">    [self.view addSubview:view1];</span><br><span class="line">    </span><br><span class="line">    [UIView animateWithDuration:3.0</span><br><span class="line">                          delay:1.0</span><br><span class="line">                        options:UIViewAnimationOptionRepeat |</span><br><span class="line">                                UIViewAnimationOptionAutoreverse |</span><br><span class="line">                                UIViewAnimationOptionCurveEaseInOut</span><br><span class="line">                     animations:^&#123;</span><br><span class="line">                         // è¦æ‰§è¡Œçš„åŠ¨ç”»ä»£ç </span><br><span class="line">                         view1.center = self.view.center;</span><br><span class="line">                         view1.backgroundColor = [UIColor flatSkyBlueColor];</span><br><span class="line">                     &#125;</span><br><span class="line">                     completion:^(BOOL finished) &#123;</span><br><span class="line">                         // åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åçš„è°ƒç”¨</span><br><span class="line"></span><br><span class="line">                     &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-ce3c1fe80f7d6734.gif?imageMogr2/auto-orient/strip" alt></p>
<hr>
<h3 id="ç¤ºä¾‹ï¼šæ—‹è½¬åŠ¨ç”»"><a href="#ç¤ºä¾‹ï¼šæ—‹è½¬åŠ¨ç”»" class="headerlink" title="ç¤ºä¾‹ï¼šæ—‹è½¬åŠ¨ç”»"></a>ç¤ºä¾‹ï¼šæ—‹è½¬åŠ¨ç”»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[UIView animateWithDuration:0.25 animations:^&#123;</span><br><span class="line">   cell.arrow.transform = CGAffineTransformMakeRotation(M_PI);</span><br><span class="line">&#125; completion:^(BOOL finished) &#123;</span><br><span class="line"></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h3 id="ç¤ºä¾‹ï¼šåµŒå¥—åŠ¨ç”»"><a href="#ç¤ºä¾‹ï¼šåµŒå¥—åŠ¨ç”»" class="headerlink" title="ç¤ºä¾‹ï¼šåµŒå¥—åŠ¨ç”»"></a>ç¤ºä¾‹ï¼šåµŒå¥—åŠ¨ç”»</h3><blockquote>
<p>æ‘˜è‡ª<a href="https://github.com/ibireme/YYText" target="_blank" rel="noopener">YYText Demo</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">- (void)showMessage:(NSString *)msg &#123;</span><br><span class="line">    CGFloat padding = 10;</span><br><span class="line">    </span><br><span class="line">    YYLabel *label = [YYLabel new];</span><br><span class="line">    label.text = msg;</span><br><span class="line">    label.font = [UIFont systemFontOfSize:16];</span><br><span class="line">    label.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">    label.textColor = [UIColor whiteColor];</span><br><span class="line">    label.backgroundColor = [UIColor colorWithRed:0.033 green:0.685 blue:0.978 alpha:0.730];</span><br><span class="line">    label.textContainerInset = UIEdgeInsetsMake(padding, padding, padding, padding);</span><br><span class="line">    label.width = self.view.width;</span><br><span class="line">    label.height = [msg heightForFont:label.font width:label.width] + 2 * padding;</span><br><span class="line">    label.bottom = (kiOS7Later ? 64 : 0);</span><br><span class="line">    [self.view addSubview:label];</span><br><span class="line">    </span><br><span class="line">    // æ˜¾ç¤ºlabelåŠ¨ç”»</span><br><span class="line">    [UIView animateWithDuration:0.3 animations:^&#123;</span><br><span class="line">        label.top = (kiOS7Later ? 64 : 0);</span><br><span class="line">    &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">        </span><br><span class="line">        // åµŒå¥—åŠ¨ç”»ï¼Œ2ç§’åéšè—labelåŠ¨ç”»</span><br><span class="line">        [UIView animateWithDuration:0.2 delay:2 options:UIViewAnimationOptionCurveEaseInOut animations:^&#123;</span><br><span class="line">            label.bottom = (kiOS7Later ? 64 : 0);</span><br><span class="line">        &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">            [label removeFromSuperview];</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-9f387b6bcdd352a2.gif?imageMogr2/auto-orient/strip" alt></p>
<hr>
<h2 id="Spring-åŠ¨ç”»"><a href="#Spring-åŠ¨ç”»" class="headerlink" title="Spring åŠ¨ç”»"></a>Spring åŠ¨ç”»</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/* Performs `animations` using a timing curve described by the motion of a spring. When `dampingRatio` is 1, the animation will smoothly decelerate to its final model values without oscillating. Damping ratios less than 1 will oscillate more and more before coming to a complete stop. You can use the initial spring velocity to specify how fast the object at the end of the simulated spring was moving before it was attached. It&apos;s a unit coordinate system, where 1 is defined as travelling the total animation distance in a second. So if you&apos;re changing an object&apos;s position by 200pt in this animation, and you want the animation to behave as if the object was moving at 100pt/s before the animation started, you&apos;d pass 0.5. You&apos;ll typically want to pass 0 for the velocity. </span><br><span class="line"></span><br><span class="line">å¤§æ„ï¼šä½¿ç”¨å¼¹ç°§è¿åŠ¨æè¿°çš„æ—¶åºæ›²çº¿æ‰§è¡ŒåŠ¨ç”»ã€‚å½“ dampingRatio (é˜»å°¼æ¯”)ä¸º1æ—¶ï¼ŒåŠ¨ç”»å°†å¹³ç¨³å‡é€Ÿåˆ°å…¶æœ€ç»ˆæ¨¡å‹æ²¡æœ‰æŒ¯è¡ã€‚å°äº1çš„é˜»å°¼æ¯”åœ¨è¾¾åˆ°å®Œå…¨åœæ­¢ä¹‹å‰ä¼šè¶Šæ¥è¶Šæ³¢åŠ¨ã€‚ä½ å¯ä»¥ä½¿ç”¨åˆå§‹çš„å¼¹ç°§é€Ÿåº¦æ¥æŒ‡å®šæ¨¡æ‹Ÿå¼¹ç°§åœ¨åˆ°è¾¾ç»ˆç‚¹ä¹‹å‰ç§»åŠ¨çš„é€Ÿåº¦æœ‰å¤šå¿«ã€‚velocityï¼ˆåŠ¨ç”»é€Ÿç‡ï¼‰æ˜¯ä¸€ä¸ªå•ä½åæ ‡ç³»ï¼Œå…¶ä¸­1å®šä¹‰ä¸ºåœ¨ä¸€ç§’é’Ÿå†…ç§»åŠ¨æ€»åŠ¨ç”»è·ç¦»ã€‚æ‰€ä»¥åœ¨åŠ¨ç”»æ‰§è¡Œè¿‡ç¨‹ä¸­,å¦‚æœä½ æƒ³æ”¹å˜å¯¹è±¡çš„ç§»åŠ¨è·ç¦»ä¸º200ptï¼Œå¹¶ä¸”ä½ æƒ³è¦åŠ¨ç”»è¡¨ç°å¾—åƒç‰©ä½“ä¸€æ · ä»¥100pt / s çš„é€Ÿåº¦è¿åŠ¨ï¼Œé‚£ä¹ˆä½ åº”è¯¥è®¾ç½®å¼¹ç°§çš„é€Ÿç‡ä¸º0.5ã€‚ä½ é€šå¸¸æƒ³é€šè¿‡0çš„é€Ÿåº¦ã€‚*/ </span><br><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay usingSpringWithDamping:(CGFloat)dampingRatio initialSpringVelocity:(CGFloat)velocity options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0);</span><br></pre></td></tr></table></figure>
<h3 id="ä¸¤ä¸ªé¢å¤–å‚æ•°ï¼š"><a href="#ä¸¤ä¸ªé¢å¤–å‚æ•°ï¼š" class="headerlink" title="ä¸¤ä¸ªé¢å¤–å‚æ•°ï¼š"></a>ä¸¤ä¸ªé¢å¤–å‚æ•°ï¼š</h3><ul>
<li><code>dampingRatio</code>ï¼šå¼¹ç°§åŠ¨ç”»ä¸­çš„é˜»å°¼æ¯”ã€‚ç›¸å½“äºå¼¹ç°§çš„ç¡¬åº¦ï¼Œæ•°å€¼åœ¨ 0.0 åˆ° 1.0 ä¹‹é—´ï¼Œæ•°å€¼è¶Šå°ï¼Œå¼¹ç°§è¶Šè½¯ï¼Œæ³¢åŠ¨å¹…åº¦è¶Šå¤§ï¼›åä¹‹ç›¸åã€‚</li>
<li><code>velocity</code>ï¼šå¼¹ç°§çš„é€Ÿç‡ã€‚æ•°å€¼è¶Šå°ï¼ŒåŠ¨åŠ›è¶Šå°ï¼Œå¼¹ç°§çš„æ‹‰ä¼¸å¹…åº¦å°±è¶Šå°ã€‚åä¹‹ç›¸åã€‚æ¯”å¦‚ï¼šæ€»å…±çš„åŠ¨ç”»è¿è¡Œè·ç¦»æ˜¯200 pointsï¼Œä½ å¸Œæœ›æ¯ç§’ 100pt ï¼Œå€¼ä¸º 0.5ï¼›</li>
</ul>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIView</span> *view1 = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="keyword">self</span>.view.frame.size.width / <span class="number">2</span> - <span class="number">50</span>, <span class="number">22</span>, <span class="number">100</span>, <span class="number">100</span>)];</span><br><span class="line">    view1.backgroundColor = [<span class="built_in">UIColor</span> flatMintColor];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:view1];</span><br><span class="line">    </span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:<span class="number">3.0</span></span><br><span class="line">                          delay:<span class="number">1.0</span></span><br><span class="line">         usingSpringWithDamping:<span class="number">0.4</span>    <span class="comment">// å¼¹ç°§é˜»å°¼æ¯”</span></span><br><span class="line">          initialSpringVelocity:<span class="number">0.3</span>    <span class="comment">// é€Ÿåº¦</span></span><br><span class="line">                        options:<span class="built_in">UIViewAnimationOptionLayoutSubviews</span></span><br><span class="line">                     animations:^&#123;</span><br><span class="line">                         view1.center = <span class="keyword">self</span>.view.center;</span><br><span class="line">                     &#125;</span><br><span class="line">                     completion:^(<span class="built_in">BOOL</span> finished) &#123;</span><br><span class="line">                         </span><br><span class="line">                     &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-bc5482327e63cd42.gif?imageMogr2/auto-orient/strip" alt></p>
<hr>
<h2 id="Transitions-è½¬åœºåŠ¨ç”»"><a href="#Transitions-è½¬åœºåŠ¨ç”»" class="headerlink" title="Transitions è½¬åœºåŠ¨ç”»"></a>Transitions è½¬åœºåŠ¨ç”»</h2><p>å¸¸ç”¨äºæ·»åŠ ã€åˆ é™¤å­è§†å›¾æˆ–éšè—ã€æ˜¾ç¤ºå­è§†å›¾æ—¶çš„åŠ¨ç”»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/** ä¸ºæŒ‡å®šçš„å®¹å™¨è§†å›¾åˆ›å»ºè½¬æ¢åŠ¨ç”» */  </span><br><span class="line">+ (void)transitionWithView:(UIView *)view duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^ __nullable)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0);  </span><br><span class="line">  </span><br><span class="line">/** ä½¿ç”¨ç»™å®šçš„å‚æ•°åœ¨æŒ‡å®šè§†å›¾ä¹‹é—´åˆ›å»ºè½¬æ¢åŠ¨ç”» */  </span><br><span class="line">+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0); // toView added to fromView.superview, fromView removed from its superview</span><br></pre></td></tr></table></figure>
<h3 id="ç¤ºä¾‹ä¸€ï¼š"><a href="#ç¤ºä¾‹ä¸€ï¼š" class="headerlink" title="ç¤ºä¾‹ä¸€ï¼š"></a>ç¤ºä¾‹ä¸€ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    [self.view addSubview:self.containerView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)viewDidAppear:(BOOL)animated &#123;</span><br><span class="line">    [super viewDidAppear:animated];</span><br><span class="line">    [UIView transitionWithView:self.containerView</span><br><span class="line">                      duration:1.0</span><br><span class="line">                       options:UIViewAnimationOptionTransitionFlipFromLeft |</span><br><span class="line">     UIViewAnimationOptionRepeat |</span><br><span class="line">     UIViewAnimationOptionAutoreverse</span><br><span class="line">                    animations:^&#123;</span><br><span class="line">                        [self.containerView addSubview:self.subView];</span><br><span class="line">                    &#125;</span><br><span class="line">                    completion:^(BOOL finished) &#123;</span><br><span class="line">                        </span><br><span class="line">                    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Custom Accessors</span><br><span class="line"></span><br><span class="line">- (UIView *)containerView &#123;</span><br><span class="line">    if (!_containerView) &#123;</span><br><span class="line">        _containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 250, 250)];</span><br><span class="line">        _containerView.center = self.view.center;</span><br><span class="line">    &#125;</span><br><span class="line">    return _containerView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIView *)subView &#123;</span><br><span class="line">    if (!_subView) &#123;</span><br><span class="line">        _subView = [[UIView alloc] initWithFrame:self.containerView.bounds];</span><br><span class="line">        _subView.backgroundColor = [UIColor flatGreenColor];</span><br><span class="line">    &#125;</span><br><span class="line">    return _subView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-84204eae0af7e78e.gif?imageMogr2/auto-orient/strip" alt></p>
<hr>
<h3 id="ç¤ºä¾‹äºŒï¼š"><a href="#ç¤ºä¾‹äºŒï¼š" class="headerlink" title="ç¤ºä¾‹äºŒï¼š"></a>ç¤ºä¾‹äºŒï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    [self.view addSubview:self.view1];</span><br><span class="line">    [self.view addSubview:self.button];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Custom Accessors</span><br><span class="line"></span><br><span class="line">- (UIView *)view1 &#123;</span><br><span class="line">    if (!_view1) &#123;</span><br><span class="line">        _view1 = [[UIView alloc] initWithFrame:CGRectMake(0, [UIScreen mainScreen].bounds.size.height - 450, [UIScreen mainScreen].bounds.size.width, 450)];</span><br><span class="line">        _view1.backgroundColor = [UIColor flatWatermelonColor];</span><br><span class="line">    &#125;</span><br><span class="line">    return _view1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIView *)view2 &#123;</span><br><span class="line">    if (!_view2) &#123;</span><br><span class="line">        _view2 = [[UIView alloc] initWithFrame:CGRectMake(0, [UIScreen mainScreen].bounds.size.height - 450, [UIScreen mainScreen].bounds.size.width, 450)];</span><br><span class="line">        _view2.backgroundColor = [UIColor flatGreenColor];</span><br><span class="line">    &#125;</span><br><span class="line">    return _view2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - IBActions</span><br><span class="line"></span><br><span class="line">- (void)startAnimation:(id)sender &#123;    </span><br><span class="line">    // è½¬åœºåŠ¨ç”»</span><br><span class="line">    [UIView transitionFromView:self.view1</span><br><span class="line">                        toView:self.view2</span><br><span class="line">                      duration:0.25</span><br><span class="line">                       options:UIViewAnimationOptionTransitionFlipFromRight</span><br><span class="line">                    completion:^(BOOL finished) &#123;</span><br><span class="line">                        </span><br><span class="line">                    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b46ed3961dc56d2a.gif?imageMogr2/auto-orient/strip" alt></p>
<p>å¦å¤–ï¼Œå…³äº <strong>UINavigationController</strong> çš„ pushã€pop åŠ¨ç”»ï¼š</p>
<p><a href="http://www.jianshu.com/p/75d7b0341bc5" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 10 :: Custom UIViewController Transitions</a></p>
<hr>
<h2 id="Keyframe-åŠ¨ç”»"><a href="#Keyframe-åŠ¨ç”»" class="headerlink" title="Keyframe åŠ¨ç”»"></a>Keyframe åŠ¨ç”»</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/** UIView çš„å…³é”®å¸§åŠ¨ç”» */</span><br><span class="line">@interface UIView (UIViewKeyframeAnimations)</span><br><span class="line"></span><br><span class="line">/** åˆ›å»ºä¸€ä¸ªåŠ¨ç”»å—å¯¹è±¡ï¼Œå¯ç”¨äºä¸ºå½“å‰è§†å›¾è®¾ç½®åŸºäºå…³é”®å¸§çš„åŠ¨ç”» */ </span><br><span class="line">+ (void)animateKeyframesWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewKeyframeAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0);</span><br><span class="line"></span><br><span class="line">/** æ·»åŠ æŒ‡å®šå¼€å§‹æ—¶é—´ã€æŒç»­æ—¶é—´çš„å…³é”®å¸§åŠ¨ç”»(èµ·å§‹å’ŒæŒç»­æ—¶é—´æ˜¯0.0å’Œ1.0ä¹‹é—´çš„å€¼) */ </span><br><span class="line">+ (void)addKeyframeWithRelativeStartTime:(double)frameStartTime relativeDuration:(double)frameDuration animations:(void (^)(void))animations NS_AVAILABLE_IOS(7_0); // start time and duration are values between 0.0 and 1.0 specifying time and duration relative to the overall time of the keyframe animation</span><br><span class="line">// å¼€å§‹æ—¶é—´å’ŒæŒç»­æ—¶é—´æ˜¯ç›¸å¯¹äºå…³é”®å¸§åŠ¨ç”»çš„æ€»æ—¶é—´çš„ä½äº0å’Œ1ä¹‹é—´çš„å€¼ </span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h3 id="ç¤ºä¾‹ä¸€ï¼š-1"><a href="#ç¤ºä¾‹ä¸€ï¼š-1" class="headerlink" title="ç¤ºä¾‹ä¸€ï¼š"></a>ç¤ºä¾‹ä¸€ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    [self.view addSubview:self.view1];</span><br><span class="line">    </span><br><span class="line">    [UIView animateKeyframesWithDuration:4.0</span><br><span class="line">                                   delay:1.0</span><br><span class="line">                                 options:UIViewKeyframeAnimationOptionRepeat</span><br><span class="line">                              animations:^&#123;</span><br><span class="line">                                  </span><br><span class="line">      [UIView addKeyframeWithRelativeStartTime:0.0</span><br><span class="line">                              relativeDuration:0.25</span><br><span class="line">                                    animations:^&#123;</span><br><span class="line">                                        self.view1.frame = CGRectMake(50, 250, 100, 100);</span><br><span class="line">                                    &#125;];</span><br><span class="line">      [UIView addKeyframeWithRelativeStartTime:0.25</span><br><span class="line">                              relativeDuration:0.25</span><br><span class="line">                                    animations:^&#123;</span><br><span class="line">                                        self.view1.frame = CGRectMake(250, 250, 100, 100);</span><br><span class="line">                                    &#125;];</span><br><span class="line">      [UIView addKeyframeWithRelativeStartTime:0.5</span><br><span class="line">                              relativeDuration:0.25</span><br><span class="line">                                    animations:^&#123;</span><br><span class="line">                                        self.view1.frame = CGRectMake(250, 50, 100, 100);</span><br><span class="line">                                    &#125;];</span><br><span class="line">      [UIView addKeyframeWithRelativeStartTime:0.75</span><br><span class="line">                              relativeDuration:0.25</span><br><span class="line">                                    animations:^&#123;</span><br><span class="line">                                        self.view1.frame = CGRectMake(50, 50, 100, 100);</span><br><span class="line">                                    &#125;];</span><br><span class="line">                              &#125;</span><br><span class="line">                              completion:^(BOOL finished) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Custom Accessors</span><br><span class="line"></span><br><span class="line">- (UIView *)view1 &#123;</span><br><span class="line">    if (!_view1) &#123;</span><br><span class="line">        _view1 = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 100, 100)];</span><br><span class="line">        _view1.backgroundColor = [UIColor flatWatermelonColor];</span><br><span class="line">    &#125;</span><br><span class="line">    return _view1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-05101b9ec529665a.gif?imageMogr2/auto-orient/strip" alt></p>
<p>å…³é”®å¸§åŠ¨ç”»çš„å…¶ä»–ç¤ºä¾‹ï¼š</p>
<p><a href="http://www.jianshu.com/p/a60f029e5c72" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 11 :: UIView Key-frame Animations</a></p>
<hr>
<h2 id="Layer-åŠ¨ç”»"><a href="#Layer-åŠ¨ç”»" class="headerlink" title="Layer åŠ¨ç”»"></a>Layer åŠ¨ç”»</h2><h3 id="ç¤ºä¾‹ä¸€ï¼šCABasicAnimation"><a href="#ç¤ºä¾‹ä¸€ï¼šCABasicAnimation" class="headerlink" title="ç¤ºä¾‹ä¸€ï¼šCABasicAnimation"></a>ç¤ºä¾‹ä¸€ï¼šCABasicAnimation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CABasicAnimation *basicAnimation = [CABasicAnimation animationWithKeyPath:@&quot;position.x&quot;];</span><br><span class="line">basicAnimation.fromValue = @10;</span><br><span class="line">basicAnimation.toValue = @200;</span><br><span class="line">basicAnimation.duration = 2.0;</span><br><span class="line">// åœ¨åŠ¨ç”»æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿ç•™æœ€åä¸€å¸§</span><br><span class="line">basicAnimation.fillMode = kCAFillModeForwards;</span><br><span class="line">basicAnimation.removedOnCompletion = NO;</span><br><span class="line">[self.view1.layer addAnimation:basicAnimation forKey:nil];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-662500c0ca03318a.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="ç¤ºä¾‹äºŒï¼šCAKeyframeAnimation"><a href="#ç¤ºä¾‹äºŒï¼šCAKeyframeAnimation" class="headerlink" title="ç¤ºä¾‹äºŒï¼šCAKeyframeAnimation"></a>ç¤ºä¾‹äºŒï¼šCAKeyframeAnimation</h3><p><strong>UILabel</strong> çš„è·‘é©¬ç¯æ•ˆæœï¼š</p>
<blockquote>
<p>æ‘˜è‡ªï¼š<a href="https://github.com/dsxNiubility/Wonderful" target="_blank" rel="noopener">Wonderful</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">- (void)moveAction &#123;</span><br><span class="line">    // ä»¥ Label çš„ä¸­å¿ƒç‚¹è¿åŠ¨</span><br><span class="line">    // è´å¡å°”æ›²çº¿ èµ·ç‚¹</span><br><span class="line">    CGPoint fromPoint = CGPointMake(self.frame.size.width + self.marqueeLbl.frame.size.width/2, self.frame.size.height/2);</span><br><span class="line">    // è´å¡å°”æ›²çº¿ ç»ˆç‚¹</span><br><span class="line">    CGPoint toPoint = CGPointMake(-self.marqueeLbl.frame.size.width/2, self.frame.size.height/2);</span><br><span class="line">    </span><br><span class="line">    self.marqueeLbl.center = fromPoint;</span><br><span class="line">    UIBezierPath *movePath = [UIBezierPath bezierPath];</span><br><span class="line">    [movePath moveToPoint:fromPoint];</span><br><span class="line">    [movePath addLineToPoint:toPoint];</span><br><span class="line">    </span><br><span class="line">    // åˆ›å»ºåŠ¨ç”»å®ä¾‹</span><br><span class="line">    CAKeyframeAnimation *moveAnim = [CAKeyframeAnimation animationWithKeyPath:@&quot;position&quot;];</span><br><span class="line">    // è®¾ç½®åŠ¨ç”»è·¯å¾„</span><br><span class="line">    moveAnim.path = movePath.CGPath;</span><br><span class="line">    // è®¾ç½®åŠ¨ç”»æ—¶é•¿</span><br><span class="line">    moveAnim.duration = self.marqueeLbl.frame.size.width * self.speedLevel * 0.01;</span><br><span class="line">    // å§”æ‰˜åè®®ï¼ŒåŠ¨ç”»å®Œæˆåé‡å¤è¯¥åŠ¨ç”»</span><br><span class="line">    moveAnim.delegate = self;</span><br><span class="line">    // åœ¨å›¾å±‚ä¸Šæ·»åŠ åŠ¨ç”»</span><br><span class="line">    [self.marqueeLbl.layer addAnimation:moveAnim forKey:nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - CAAnimationDelegate</span><br><span class="line"></span><br><span class="line">- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag&#123;</span><br><span class="line">    if (flag) &#123;</span><br><span class="line">        [self moveAction];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="UIView-h-æºç è§£ææ³¨é‡Š"><a href="#UIView-h-æºç è§£ææ³¨é‡Š" class="headerlink" title="UIView.h æºç è§£ææ³¨é‡Š"></a>UIView.h æºç è§£ææ³¨é‡Š</h2><blockquote>
<p>æ‘˜è‡ªï¼š<a href="http://blog.csdn.net/zeng_zhiming/article/details/73469182" target="_blank" rel="noopener">ioså¼€å‘ ä¹‹ UIViewè¯¦è§£</a>ï¼Œéƒ¨åˆ†ä¿®æ”¹ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br></pre></td><td class="code"><pre><span class="line">//  UIView.h</span><br><span class="line">//  UIKit</span><br><span class="line">//</span><br><span class="line">//  Copyright (c) 2005-2016 Apple Inc. All rights reserved.</span><br><span class="line">//  Created by ZengZhiming on 2017/5/22.  </span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;  </span><br><span class="line">#import &lt;QuartzCore/QuartzCore.h&gt;  </span><br><span class="line">#import &lt;UIKit/UIResponder.h&gt;  </span><br><span class="line">#import &lt;UIKit/UIInterface.h&gt;  </span><br><span class="line">#import &lt;UIKit/UIKitDefines.h&gt;  </span><br><span class="line">#import &lt;UIKit/UIAppearance.h&gt;  </span><br><span class="line">#import &lt;UIKit/UIDynamicBehavior.h&gt;  </span><br><span class="line">#import &lt;UIKit/NSLayoutConstraint.h&gt;  </span><br><span class="line">#import &lt;UIKit/UITraitCollection.h&gt;  </span><br><span class="line">#import &lt;UIKit/UIFocus.h&gt;  </span><br><span class="line">  </span><br><span class="line">NS_ASSUME_NONNULL_BEGIN  </span><br><span class="line">  </span><br><span class="line">/** åŠ¨ç”»çš„æ›²çº¿æšä¸¾ */  </span><br><span class="line">typedef NS_ENUM(NSInteger, UIViewAnimationCurve) &#123;  </span><br><span class="line">    UIViewAnimationCurveEaseInOut,  //!&lt; æ…¢è¿›æ…¢å‡ºï¼ˆé»˜è®¤å€¼ï¼‰.  </span><br><span class="line">    UIViewAnimationCurveEaseIn,     //!&lt; æ…¢è¿›.  </span><br><span class="line">    UIViewAnimationCurveEaseOut,    //!&lt; æ…¢å‡º.  </span><br><span class="line">    UIViewAnimationCurveLinear,     //!&lt; åŒ€é€Ÿ.  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line">/** UIView å†…å®¹å¡«å……æ¨¡å¼ */</span><br><span class="line">typedef NS_ENUM(NSInteger, UIViewContentMode) &#123;  </span><br><span class="line">    UIViewContentModeScaleToFill,       //!&lt; ç¼©æ”¾å†…å®¹åˆ°åˆé€‚æ¯”ä¾‹å¤§å°.  </span><br><span class="line">    UIViewContentModeScaleAspectFit,    //!&lt; ç¼©æ”¾å†…å®¹åˆ°åˆé€‚çš„å¤§å°ï¼Œè¾¹ç•Œå¤šä½™éƒ¨åˆ†é€æ˜.  </span><br><span class="line">    UIViewContentModeScaleAspectFill,   //!&lt; ç¼©æ”¾å†…å®¹å¡«å……åˆ°æŒ‡å®šå¤§å°ï¼Œè¾¹ç•Œå¤šä½™çš„éƒ¨åˆ†çœç•¥.  </span><br><span class="line">    UIViewContentModeRedraw,            //!&lt; é‡ç»˜è§†å›¾è¾¹ç•Œ (éœ€è°ƒç”¨ -setNeedsDisplay).  </span><br><span class="line">    UIViewContentModeCenter,            //!&lt; è§†å›¾ä¿æŒç­‰æ¯”ç¼©æ”¾.  </span><br><span class="line">    UIViewContentModeTop,               //!&lt; è§†å›¾é¡¶éƒ¨å¯¹é½.  </span><br><span class="line">    UIViewContentModeBottom,            //!&lt; è§†å›¾åº•éƒ¨å¯¹é½.  </span><br><span class="line">    UIViewContentModeLeft,              //!&lt; è§†å›¾å·¦ä¾§å¯¹é½.  </span><br><span class="line">    UIViewContentModeRight,             //!&lt; è§†å›¾å³ä¾§å¯¹é½.  </span><br><span class="line">    UIViewContentModeTopLeft,           //!&lt; è§†å›¾å·¦ä¸Šè§’å¯¹é½.  </span><br><span class="line">    UIViewContentModeTopRight,          //!&lt; è§†å›¾å³ä¸Šè§’å¯¹é½.  </span><br><span class="line">    UIViewContentModeBottomLeft,        //!&lt; è§†å›¾å·¦ä¸‹è§’å¯¹é½.  </span><br><span class="line">    UIViewContentModeBottomRight,       //!&lt; è§†å›¾å³ä¸‹è§’å¯¹é½.  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line">/** UIView åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ */  </span><br><span class="line">typedef NS_ENUM(NSInteger, UIViewAnimationTransition) &#123;  </span><br><span class="line">    UIViewAnimationTransitionNone,          //!&lt; æ— æ•ˆæœ.  </span><br><span class="line">    UIViewAnimationTransitionFlipFromLeft,  //!&lt; æ²¿è§†å›¾å‚ç›´ä¸­å¿ƒè½´å·¦åˆ°å³ç§»åŠ¨.  </span><br><span class="line">    UIViewAnimationTransitionFlipFromRight, //!&lt; æ²¿è§†å›¾å‚ç›´ä¸­å¿ƒè½´å³åˆ°å·¦ç§»åŠ¨.  </span><br><span class="line">    UIViewAnimationTransitionCurlUp,        //!&lt; ç”±åº•éƒ¨å‘ä¸Šå·èµ·.  </span><br><span class="line">    UIViewAnimationTransitionCurlDown,      //!&lt; ç”±é¡¶éƒ¨å‘ä¸‹å±•å¼€.  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line">/** è‡ªåŠ¨è°ƒæ•´å¤§å°æ–¹å¼ */  </span><br><span class="line">typedef NS_OPTIONS(NSUInteger, UIViewAutoresizing) &#123;  </span><br><span class="line">    UIViewAutoresizingNone                 = 0,     //!&lt; ä¸è‡ªåŠ¨è°ƒæ•´.  </span><br><span class="line">    UIViewAutoresizingFlexibleLeftMargin   = 1 &lt;&lt; 0,//!&lt; è‡ªåŠ¨è°ƒæ•´ä¸superViewå·¦è¾¹çš„è·ç¦»ï¼Œä¿è¯ä¸superViewå³è¾¹çš„è·ç¦»ä¸å˜.  </span><br><span class="line">    UIViewAutoresizingFlexibleWidth        = 1 &lt;&lt; 1,//!&lt; è‡ªåŠ¨è°ƒæ•´è‡ªå·±çš„å®½åº¦ï¼Œä¿è¯ä¸superViewå·¦è¾¹å’Œå³è¾¹çš„è·ç¦»ä¸å˜.  </span><br><span class="line">    UIViewAutoresizingFlexibleRightMargin  = 1 &lt;&lt; 2,//!&lt; è‡ªåŠ¨è°ƒæ•´ä¸superViewçš„å³è¾¹è·ç¦»ï¼Œä¿è¯ä¸superViewå·¦è¾¹çš„è·ç¦»ä¸å˜.  </span><br><span class="line">    UIViewAutoresizingFlexibleTopMargin    = 1 &lt;&lt; 3,//!&lt; è‡ªåŠ¨è°ƒæ•´ä¸superViewé¡¶éƒ¨çš„è·ç¦»ï¼Œä¿è¯ä¸superViewåº•éƒ¨çš„è·ç¦»ä¸å˜.  </span><br><span class="line">    UIViewAutoresizingFlexibleHeight       = 1 &lt;&lt; 4,//!&lt; è‡ªåŠ¨è°ƒæ•´è‡ªå·±çš„é«˜åº¦ï¼Œä¿è¯ä¸superViewé¡¶éƒ¨å’Œåº•éƒ¨çš„è·ç¦»ä¸å˜.  </span><br><span class="line">    UIViewAutoresizingFlexibleBottomMargin = 1 &lt;&lt; 5 //!&lt; è‡ªåŠ¨è°ƒæ•´ä¸superViewåº•éƒ¨çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸superViewé¡¶éƒ¨çš„è·ç¦»ä¸å˜.  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line">/** UIViewåŠ¨ç”»é€‰é¡¹ */  </span><br><span class="line">typedef NS_OPTIONS(NSUInteger, UIViewAnimationOptions) &#123;</span><br><span class="line">    </span><br><span class="line">    // ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">    // 1.å¸¸è§„åŠ¨ç”»å±æ€§è®¾ç½®ï¼ˆå¯ä»¥åŒæ—¶é€‰æ‹©å¤šä¸ªè¿›è¡Œè®¾ç½®ï¼‰</span><br><span class="line">    UIViewAnimationOptionLayoutSubviews            = 1 &lt;&lt;  0, // åŠ¨ç”»è¿‡ç¨‹ä¸­ä¿è¯å­è§†å›¾è·Ÿéšè¿åŠ¨ã€‚**æäº¤åŠ¨ç”»çš„æ—¶å€™å¸ƒå±€å­æ§ä»¶ï¼Œè¡¨ç¤ºå­æ§ä»¶å°†å’Œçˆ¶æ§ä»¶ä¸€åŒåŠ¨ç”»ã€‚**</span><br><span class="line">    UIViewAnimationOptionAllowUserInteraction      = 1 &lt;&lt;  1, // åŠ¨ç”»è¿‡ç¨‹ä¸­å…è®¸ç”¨æˆ·äº¤äº’ã€‚</span><br><span class="line">    UIViewAnimationOptionBeginFromCurrentState     = 1 &lt;&lt;  2, // æ‰€æœ‰è§†å›¾ä»å½“å‰çŠ¶æ€å¼€å§‹è¿è¡Œ,è€Œä¸æ˜¯ä»åˆå§‹çŠ¶æ€å¼€å§‹è¿è¡Œã€‚</span><br><span class="line">    UIViewAnimationOptionRepeat                    = 1 &lt;&lt;  3, // æ— é™é‡å¤åŠ¨ç”»</span><br><span class="line">    UIViewAnimationOptionAutoreverse               = 1 &lt;&lt;  4, // åŠ¨ç”»è¿è¡Œåˆ°ç»“æŸç‚¹åä»ç„¶ä»¥åŠ¨ç”»æ–¹å¼å›åˆ°åˆå§‹ç‚¹ã€‚**æ¥å›è¿è¡ŒåŠ¨ç”»,å‰ææ˜¯è®¾ç½®åŠ¨ç”»æ— é™é‡å¤**</span><br><span class="line">    UIViewAnimationOptionOverrideInheritedDuration = 1 &lt;&lt;  5, // å¿½ç•¥åµŒå¥—åŠ¨ç”»æ—¶é—´è®¾ç½®ã€‚**å¿½ç•¥å¤–å±‚åŠ¨ç”»åµŒå¥—çš„æ—¶é—´å˜åŒ–æ›²çº¿**</span><br><span class="line">    UIViewAnimationOptionOverrideInheritedCurve    = 1 &lt;&lt;  6, // å¿½ç•¥åµŒå¥—åŠ¨ç”»é€Ÿåº¦è®¾ç½®ã€‚**é€šè¿‡æ”¹å˜å±æ€§å’Œé‡ç»˜å®ç°åŠ¨ç”»æ•ˆæœï¼Œå¦‚æœkeyæ²¡æœ‰æäº¤åŠ¨ç”»å°†ä½¿ç”¨å¿«ç…§**</span><br><span class="line">    UIViewAnimationOptionAllowAnimatedContent      = 1 &lt;&lt;  7, // åŠ¨ç”»è¿‡ç¨‹ä¸­é‡ç»˜è§†å›¾ï¼ˆæ³¨æ„ä»…ä»…é€‚ç”¨äºè½¬åœºåŠ¨ç”»ï¼‰ã€‚</span><br><span class="line">    UIViewAnimationOptionShowHideTransitionViews   = 1 &lt;&lt;  8, // è§†å›¾åˆ‡æ¢æ—¶ç›´æ¥éšè—æ—§è§†å›¾ã€æ˜¾ç¤ºæ–°è§†å›¾ï¼Œè€Œä¸æ˜¯å°†æ—§è§†å›¾ä»çˆ¶è§†å›¾ç§»é™¤ï¼ˆä»…ä»…é€‚ç”¨äºè½¬åœºåŠ¨ç”»ï¼‰**ç”¨æ˜¾éšçš„æ–¹å¼æ›¿ä»£æ·»åŠ ç§»é™¤å›¾å±‚çš„åŠ¨ç”»æ•ˆæœ**</span><br><span class="line">    UIViewAnimationOptionOverrideInheritedOptions  = 1 &lt;&lt;  9, // ä¸ç»§æ‰¿çˆ¶åŠ¨ç”»è®¾ç½®æˆ–åŠ¨ç”»ç±»å‹ã€‚**å¿½ç•¥åµŒå¥—ç»§æ‰¿çš„é€‰é¡¹**</span><br><span class="line">    </span><br><span class="line">    // ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">    // 2.åŠ¨ç”»é€Ÿåº¦æ§åˆ¶ï¼ˆå¯ä»å…¶ä¸­é€‰æ‹©ä¸€ä¸ªè®¾ç½®ï¼‰æ—¶é—´å‡½æ•°æ›²çº¿ç›¸å…³**æ—¶é—´æ›²çº¿å‡½æ•°**</span><br><span class="line">    UIViewAnimationOptionCurveEaseInOut            = 0 &lt;&lt; 16, // é»˜è®¤ï¼ŒåŠ¨ç”»å…ˆç¼“æ…¢ï¼Œç„¶åé€æ¸åŠ é€Ÿã€‚</span><br><span class="line">    UIViewAnimationOptionCurveEaseIn               = 1 &lt;&lt; 16, // åŠ¨ç”»é€æ¸å˜æ…¢ã€‚</span><br><span class="line">    UIViewAnimationOptionCurveEaseOut              = 2 &lt;&lt; 16, // åŠ¨ç”»é€æ¸åŠ é€Ÿã€‚</span><br><span class="line">    UIViewAnimationOptionCurveLinear               = 3 &lt;&lt; 16, // åŠ¨ç”»åŒ€é€Ÿæ‰§è¡Œã€‚</span><br><span class="line">    </span><br><span class="line">    // ğŸ“Œ-----------------------------------------------------------------------------</span><br><span class="line">    // 3.è½¬åœºç±»å‹ï¼ˆä»…é€‚ç”¨äºè½¬åœºåŠ¨ç”»è®¾ç½®ï¼Œå¯ä»¥ä»ä¸­é€‰æ‹©ä¸€ä¸ªè¿›è¡Œè®¾ç½®ï¼ŒåŸºæœ¬åŠ¨ç”»ã€å…³é”®å¸§åŠ¨ç”»ä¸éœ€è¦è®¾ç½®ï¼‰**è½¬åœºåŠ¨ç”»ç›¸å…³**</span><br><span class="line">    UIViewAnimationOptionTransitionNone            = 0 &lt;&lt; 20, // é»˜è®¤ï¼Œæ²¡æœ‰è½¬åœºåŠ¨ç”»æ•ˆæœã€‚</span><br><span class="line">    UIViewAnimationOptionTransitionFlipFromLeft    = 1 &lt;&lt; 20, // ä»å·¦ä¾§ç¿»è½¬æ•ˆæœã€‚</span><br><span class="line">    UIViewAnimationOptionTransitionFlipFromRight   = 2 &lt;&lt; 20, // ä»å³ä¾§ç¿»è½¬æ•ˆæœã€‚</span><br><span class="line">    UIViewAnimationOptionTransitionCurlUp          = 3 &lt;&lt; 20, // å‘åç¿»é¡µçš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœã€‚</span><br><span class="line">    UIViewAnimationOptionTransitionCurlDown        = 4 &lt;&lt; 20, // å‘å‰ç¿»é¡µçš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœã€‚</span><br><span class="line">    UIViewAnimationOptionTransitionCrossDissolve   = 5 &lt;&lt; 20, // æ—§è§†å›¾æº¶è§£æ¶ˆå¤±æ˜¾ç¤ºä¸‹ä¸€ä¸ªæ–°è§†å›¾çš„æ•ˆæœã€‚</span><br><span class="line">    UIViewAnimationOptionTransitionFlipFromTop     = 6 &lt;&lt; 20, // ä»ä¸Šæ–¹ç¿»è½¬æ•ˆæœã€‚</span><br><span class="line">    UIViewAnimationOptionTransitionFlipFromBottom  = 7 &lt;&lt; 20, // ä»åº•éƒ¨ç¿»è½¬æ•ˆæœã€‚</span><br><span class="line">    </span><br><span class="line">    // ğŸ“Œ-----------------------------------------------------------------------------</span><br><span class="line">    // 4.è®¾ç½®å¸§é€Ÿç‡</span><br><span class="line">    UIViewAnimationOptionPreferredFramesPerSecondDefault     = 0 &lt;&lt; 24, // é»˜è®¤çš„å¸§æ¯ç§’.</span><br><span class="line">    UIViewAnimationOptionPreferredFramesPerSecond60          = 3 &lt;&lt; 24, // 60å¸§æ¯ç§’çš„å¸§é€Ÿç‡.</span><br><span class="line">    UIViewAnimationOptionPreferredFramesPerSecond30          = 7 &lt;&lt; 24, // 30å¸§æ¯ç§’çš„å¸§é€Ÿç‡.</span><br><span class="line">    </span><br><span class="line">    /*</span><br><span class="line">      è¡¥å……ï¼šå…³äºè½¬åœºåŠ¨ç”»,å®ƒä¸€èˆ¬æ˜¯ç”¨åœ¨è¿™ä¸ªæ–¹æ³•ä¸­çš„:</span><br><span class="line">     </span><br><span class="line">    ã€€[UIView transitionFromView: toView: duration: options:  completion:^(****BOOL****finished) &#123;&#125;];</span><br><span class="line">     è¯¥æ–¹æ³•æ•ˆæœæ˜¯æ’å…¥ä¸€é¢è§†å›¾ç§»é™¤ä¸€é¢è§†å›¾ï¼ŒæœŸé—´å¯ä»¥ä½¿ç”¨ä¸€äº›è½¬åœºåŠ¨ç”»æ•ˆæœã€‚</span><br><span class="line">     */</span><br><span class="line">&#125; NS_ENUM_AVAILABLE_IOS(4_0);</span><br><span class="line"></span><br><span class="line">/** UIView å…³é”®å¸§åŠ¨ç”» */ </span><br><span class="line">typedef NS_OPTIONS(NSUInteger, UIViewKeyframeAnimationOptions) &#123;  </span><br><span class="line">    UIViewKeyframeAnimationOptionLayoutSubviews            = UIViewAnimationOptionLayoutSubviews, //!&lt; åŠ¨ç”»è¿‡ç¨‹ä¸­ä¿è¯å­è§†å›¾è·Ÿéšè¿åŠ¨.  </span><br><span class="line">    UIViewKeyframeAnimationOptionAllowUserInteraction      = UIViewAnimationOptionAllowUserInteraction, //!&lt; åŠ¨ç”»è¿‡ç¨‹ä¸­å…è®¸ç”¨æˆ·äº¤äº’.  </span><br><span class="line">    UIViewKeyframeAnimationOptionBeginFromCurrentState     = UIViewAnimationOptionBeginFromCurrentState, //!&lt; æ‰€æœ‰è§†å›¾ä»å½“å‰çŠ¶æ€å¼€å§‹è¿è¡Œ.  </span><br><span class="line">    UIViewKeyframeAnimationOptionRepeat                    = UIViewAnimationOptionRepeat, //!&lt; é‡å¤è¿è¡ŒåŠ¨ç”».  </span><br><span class="line">    UIViewKeyframeAnimationOptionAutoreverse               = UIViewAnimationOptionAutoreverse, //!&lt; åŠ¨ç”»è¿è¡Œåˆ°ç»“æŸç‚¹åä»ç„¶ä»¥åŠ¨ç”»æ–¹å¼å›åˆ°åˆå§‹ç‚¹.  </span><br><span class="line">    UIViewKeyframeAnimationOptionOverrideInheritedDuration = UIViewAnimationOptionOverrideInheritedDuration, //!&lt; å¿½ç•¥åµŒå¥—åŠ¨ç”»æ—¶é—´è®¾ç½®.  </span><br><span class="line">    UIViewKeyframeAnimationOptionOverrideInheritedOptions  = UIViewAnimationOptionOverrideInheritedOptions, //!&lt; ä¸ç»§æ‰¿çˆ¶åŠ¨ç”»è®¾ç½®æˆ–åŠ¨ç”»ç±»å‹.  </span><br><span class="line">      </span><br><span class="line">    UIViewKeyframeAnimationOptionCalculationModeLinear     = 0 &lt;&lt; 10, //!&lt; è¿ç»­è¿ç®—æ¨¡å¼, é»˜è®¤.  </span><br><span class="line">    UIViewKeyframeAnimationOptionCalculationModeDiscrete   = 1 &lt;&lt; 10, //!&lt; ç¦»æ•£è¿ç®—æ¨¡å¼.  </span><br><span class="line">    UIViewKeyframeAnimationOptionCalculationModePaced      = 2 &lt;&lt; 10, //!&lt; å‡åŒ€æ‰§è¡Œè¿ç®—æ¨¡å¼.  </span><br><span class="line">    UIViewKeyframeAnimationOptionCalculationModeCubic      = 3 &lt;&lt; 10, //!&lt; å¹³æ»‘è¿ç®—æ¨¡å¼.  </span><br><span class="line">    UIViewKeyframeAnimationOptionCalculationModeCubicPaced = 4 &lt;&lt; 10  //!&lt; å¹³æ»‘å‡åŒ€è¿ç®—æ¨¡å¼.  </span><br><span class="line">&#125; NS_ENUM_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">typedef NS_ENUM(NSUInteger, UISystemAnimation) &#123;  </span><br><span class="line">    UISystemAnimationDelete,    //!&lt; ç³»ç»Ÿåˆ é™¤åŠ¨ç”»  </span><br><span class="line">&#125; NS_ENUM_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">typedef NS_ENUM(NSInteger, UIViewTintAdjustmentMode) &#123;  </span><br><span class="line">    UIViewTintAdjustmentModeAutomatic,  //!&lt; è‡ªåŠ¨çš„ï¼Œä¸çˆ¶è§†å›¾ç›¸åŒ.  </span><br><span class="line">      </span><br><span class="line">    UIViewTintAdjustmentModeNormal,     //!&lt; æœªç»ä¿®æ”¹çš„.  </span><br><span class="line">    UIViewTintAdjustmentModeDimmed,     //!&lt; é¥±å’Œã€æš—æ·¡çš„åŸå§‹è‰².  </span><br><span class="line">&#125; NS_ENUM_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">typedef NS_ENUM(NSInteger, UISemanticContentAttribute) &#123;  </span><br><span class="line">    UISemanticContentAttributeUnspecified = 0,  //!&lt; æœªæŒ‡å®šï¼Œé»˜è®¤å€¼  </span><br><span class="line">    UISemanticContentAttributePlayback,         //!&lt; æ‰“å¼€/ RW / FFç­‰æ’­æ”¾æ§åˆ¶æŒ‰é’®  </span><br><span class="line">    UISemanticContentAttributeSpatial,          //!&lt; æ§åˆ¶å¯¼è‡´æŸç§å½¢å¼çš„å®šå‘æ”¹å˜UIä¸­,å¦‚åˆ†æ®µæ§åˆ¶æ–‡æœ¬å¯¹é½æ–¹å¼æˆ–åœ¨æ¸¸æˆä¸­æ–¹å‘é”®  </span><br><span class="line">    UISemanticContentAttributeForceLeftToRight, //!&lt; è§†å›¾æ€»æ˜¯ä»å·¦å‘å³å¸ƒå±€.  </span><br><span class="line">    UISemanticContentAttributeForceRightToLeft  //!&lt; è§†å›¾æ€»æ˜¯ä»å³å‘å·¦å¸ƒå±€.  </span><br><span class="line">&#125; NS_ENUM_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">@protocol UICoordinateSpace &lt;NSObject&gt;  </span><br><span class="line">  </span><br><span class="line">/** å°†åƒç´ pointç”±pointæ‰€åœ¨è§†å›¾è½¬æ¢åˆ°ç›®æ ‡è§†å›¾viewä¸­ï¼Œè¿”å›åœ¨ç›®æ ‡è§†å›¾viewä¸­çš„åƒç´ å€¼ */  </span><br><span class="line">- (CGPoint)convertPoint:(CGPoint)point toCoordinateSpace:(id &lt;UICoordinateSpace&gt;)coordinateSpace NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">/** å°†åƒç´ pointç”±pointæ‰€åœ¨è§†å›¾è½¬æ¢åˆ°ç›®æ ‡è§†å›¾viewä¸­ï¼Œè¿”å›åœ¨ç›®æ ‡è§†å›¾viewä¸­çš„åƒç´ å€¼ */  </span><br><span class="line">- (CGPoint)convertPoint:(CGPoint)point fromCoordinateSpace:(id &lt;UICoordinateSpace&gt;)coordinateSpace NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">/** å°†rectç”±rectæ‰€åœ¨è§†å›¾è½¬æ¢åˆ°ç›®æ ‡è§†å›¾viewä¸­ï¼Œè¿”å›åœ¨ç›®æ ‡è§†å›¾viewä¸­çš„rect */  </span><br><span class="line">- (CGRect)convertRect:(CGRect)rect toCoordinateSpace:(id &lt;UICoordinateSpace&gt;)coordinateSpace NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">/** å°†rectä»viewä¸­è½¬æ¢åˆ°å½“å‰è§†å›¾ä¸­ï¼Œè¿”å›åœ¨å½“å‰è§†å›¾ä¸­çš„rect */  </span><br><span class="line">- (CGRect)convertRect:(CGRect)rect fromCoordinateSpace:(id &lt;UICoordinateSpace&gt;)coordinateSpace NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">  </span><br><span class="line">/** è·å–bounds */  </span><br><span class="line">@property (readonly, nonatomic) CGRect bounds NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line">  </span><br><span class="line">@class UIBezierPath, UIEvent, UIWindow, UIViewController, UIColor, UIGestureRecognizer, UIMotionEffect, CALayer, UILayoutGuide;  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView </span><br><span class="line">NS_CLASS_AVAILABLE_IOS(2_0) @interface UIView : UIResponder &lt;NSCoding, UIAppearance, UIAppearanceContainer, UIDynamicItem, UITraitEnvironment, UICoordinateSpace, UIFocusItem, CALayerDelegate&gt;  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›ä¸» layer æ‰€ä½¿ç”¨çš„ç±» */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(class, nonatomic, readonly) Class layerClass;  </span><br><span class="line">#else  </span><br><span class="line">+ (Class)layerClass;  </span><br><span class="line">#endif  </span><br><span class="line">  </span><br><span class="line">/** é€šè¿‡è®¾ç½® Frame åˆå§‹åŒ– UIView å¯¹è±¡ */  </span><br><span class="line">- (instancetype)initWithFrame:(CGRect)frame NS_DESIGNATED_INITIALIZER;  </span><br><span class="line">/** ç”¨äºxibåˆå§‹åŒ– */  </span><br><span class="line">- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder NS_DESIGNATED_INITIALIZER;  </span><br><span class="line">  </span><br><span class="line">/** è®¾ç½®ç”¨æˆ·äº¤äº’ï¼Œé»˜è®¤YESå…è®¸ç”¨æˆ·äº¤äº’ */  </span><br><span class="line">@property(nonatomic,getter=isUserInteractionEnabled) BOOL userInteractionEnabled;  </span><br><span class="line">/** æ§ä»¶æ ‡è®°(çˆ¶æ§ä»¶å¯ä»¥é€šè¿‡tagæ‰¾åˆ°å¯¹åº”çš„å­æ§ä»¶)ï¼Œé»˜è®¤ä¸º0 */  </span><br><span class="line">@property(nonatomic)                                 NSInteger tag;  </span><br><span class="line">/** è§†å›¾å›¾å±‚(å¯ä»¥ç”¨æ¥è®¾ç½®åœ†è§’æ•ˆæœ/é˜´å½±æ•ˆæœ) */  </span><br><span class="line">@property(nonatomic,readonly,strong)                 CALayer  *layer;  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›æ˜¯å¦å¯ä»¥æˆä¸ºç„¦ç‚¹, é»˜è®¤NO */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(nonatomic,readonly) BOOL canBecomeFocused NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">#else  </span><br><span class="line">- (BOOL)canBecomeFocused NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">#endif  </span><br><span class="line">/** æ˜¯å¦å¯ä»¥è¢«èšç„¦ */  </span><br><span class="line">@property (readonly, nonatomic, getter=isFocused) BOOL focused NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">/** å·¦å³æ»‘åŠ¨ç¿»è½¬æ•ˆæœ */  </span><br><span class="line">@property (nonatomic) UISemanticContentAttribute semanticContentAttribute NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">/** è·å–è§†å›¾çš„æ–¹å‘ */  </span><br><span class="line">+ (UIUserInterfaceLayoutDirection)userInterfaceLayoutDirectionForSemanticContentAttribute:(UISemanticContentAttribute)attribute NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">/** è·å–ç›¸å¯¹äºæŒ‡å®šè§†å›¾çš„ç•Œé¢æ–¹å‘ */  </span><br><span class="line">+ (UIUserInterfaceLayoutDirection)userInterfaceLayoutDirectionForSemanticContentAttribute:(UISemanticContentAttribute)semanticContentAttribute relativeToLayoutDirection:(UIUserInterfaceLayoutDirection)layoutDirection NS_AVAILABLE_IOS(10_0);  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›å³æ—¶å†…å®¹çš„å¸ƒå±€çš„æ–¹å‘ */  </span><br><span class="line">@property (readonly, nonatomic) UIUserInterfaceLayoutDirection effectiveUserInterfaceLayoutDirection NS_AVAILABLE_IOS(10_0);  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼Œå‡ ä½• </span><br><span class="line">@interface UIView(UIViewGeometry)  </span><br><span class="line">  </span><br><span class="line">/** ä½ç½®å’Œå°ºå¯¸(ä»¥çˆ¶æ§ä»¶çš„å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹(0, 0)) */  </span><br><span class="line">@property(nonatomic) CGRect            frame;  </span><br><span class="line">  </span><br><span class="line">/** ä½ç½®å’Œå°ºå¯¸(ä»¥è‡ªå·±çš„å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹(0, 0)) */  </span><br><span class="line">@property(nonatomic) CGRect            bounds;  </span><br><span class="line">/** ä¸­å¿ƒç‚¹(ä»¥çˆ¶æ§ä»¶çš„å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹(0, 0)) */  </span><br><span class="line">@property(nonatomic) CGPoint           center;  </span><br><span class="line">/** å˜å½¢å±æ€§(å¹³ç§»\ç¼©æ”¾\æ—‹è½¬) */  </span><br><span class="line">@property(nonatomic) CGAffineTransform transform;  </span><br><span class="line">/** è§†å›¾å†…å®¹çš„ç¼©æ”¾æ¯”ä¾‹ */  </span><br><span class="line">@property(nonatomic) CGFloat           contentScaleFactor NS_AVAILABLE_IOS(4_0);  </span><br><span class="line">  </span><br><span class="line">/** æ˜¯å¦æ”¯æŒå¤šç‚¹è§¦æ‘¸ï¼Œé»˜è®¤NO */  </span><br><span class="line">@property(nonatomic,getter=isMultipleTouchEnabled) BOOL multipleTouchEnabled __TVOS_PROHIBITED;  </span><br><span class="line">/** æ˜¯å¦ç‹¬å æ•´ä¸ªTouchäº‹ä»¶ï¼Œé»˜è®¤NO */  </span><br><span class="line">@property(nonatomic,getter=isExclusiveTouch) BOOL       exclusiveTouch __TVOS_PROHIBITED;  </span><br><span class="line">  </span><br><span class="line">/** åœ¨æŒ‡å®šç‚¹ä¸Šç‚¹å‡»æµ‹è¯•æŒ‡å®šäº‹ä»¶ */  </span><br><span class="line">- (nullable UIView *)hitTest:(CGPoint)point withEvent:(nullable UIEvent *)event;  </span><br><span class="line">/** åˆ¤æ–­å½“å‰çš„ç‚¹å‡»æˆ–è€…è§¦æ‘¸äº‹ä»¶çš„ç‚¹æ˜¯å¦åœ¨å½“å‰çš„viewä¸­ï¼Œé»˜è®¤è¿”å›YES */  </span><br><span class="line">- (BOOL)pointInside:(CGPoint)point withEvent:(nullable UIEvent *)event;  </span><br><span class="line">  </span><br><span class="line">/** å°†åƒç´ pointç”±pointæ‰€åœ¨è§†å›¾è½¬æ¢åˆ°ç›®æ ‡è§†å›¾viewä¸­ï¼Œè¿”å›åœ¨ç›®æ ‡è§†å›¾viewä¸­çš„åƒç´ å€¼ */  </span><br><span class="line">- (CGPoint)convertPoint:(CGPoint)point toView:(nullable UIView *)view;  </span><br><span class="line">/** å°†åƒç´ pointç”±pointæ‰€åœ¨è§†å›¾è½¬æ¢åˆ°ç›®æ ‡è§†å›¾viewä¸­ï¼Œè¿”å›åœ¨ç›®æ ‡è§†å›¾viewä¸­çš„åƒç´ å€¼ */  </span><br><span class="line">- (CGPoint)convertPoint:(CGPoint)point fromView:(nullable UIView *)view;  </span><br><span class="line">/** å°†rectç”±rectæ‰€åœ¨è§†å›¾è½¬æ¢åˆ°ç›®æ ‡è§†å›¾viewä¸­ï¼Œè¿”å›åœ¨ç›®æ ‡è§†å›¾viewä¸­çš„rect */  </span><br><span class="line">- (CGRect)convertRect:(CGRect)rect toView:(nullable UIView *)view;  </span><br><span class="line">/** å°†rectä»viewä¸­è½¬æ¢åˆ°å½“å‰è§†å›¾ä¸­ï¼Œè¿”å›åœ¨å½“å‰è§†å›¾ä¸­çš„rect */  </span><br><span class="line">- (CGRect)convertRect:(CGRect)rect fromView:(nullable UIView *)view;  </span><br><span class="line">  </span><br><span class="line">/** è‡ªåŠ¨è°ƒæ•´å­è§†å›¾å°ºå¯¸ï¼Œé»˜è®¤YESï¼Œå¦‚æœ self.bounds æ”¹å˜äº†ï¼Œåˆ™ä¼šæ ¹æ® autoresizingMask å±æ€§è‡ªåŠ¨è°ƒæ•´å­è§†å›¾å°ºå¯¸ */  </span><br><span class="line">@property(nonatomic) BOOL               autoresizesSubviews;  </span><br><span class="line">/** è‡ªåŠ¨è°ƒæ•´å­è§†å›¾ä¸çˆ¶è§†å›¾çš„ä½ç½®ï¼Œé»˜è®¤ UIViewAutoresizingNone */  </span><br><span class="line">@property(nonatomic) UIViewAutoresizing autoresizingMask;  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›â€œæœ€ä½³â€å°ºå¯¸ä»¥é€‚åº”ç»™å®šå°ºå¯¸ã€‚ä¸å®é™…è°ƒæ•´è§†å›¾å¤§å°ã€‚é»˜è®¤ä¸ºè¿”å›ç°æœ‰è§†å›¾å¤§å°ã€‚*/  </span><br><span class="line">- (CGSize)sizeThatFits:(CGSize)size;  </span><br><span class="line">/** è°ƒæ•´ä¸ºåˆšå¥½åˆé€‚å­è§†å›¾å¤§å° */  </span><br><span class="line">- (void)sizeToFit;  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼Œè§†å›¾å±‚æ¬¡ç»“æ„</span><br><span class="line">@interface UIView(UIViewHierarchy)  </span><br><span class="line">  </span><br><span class="line">/** è·å–çˆ¶è§†å›¾ */  </span><br><span class="line">@property(nullable, nonatomic,readonly) UIView       *superview;  </span><br><span class="line">/** è·å–æ‰€æœ‰å­è§†å›¾ */  </span><br><span class="line">@property(nonatomic,readonly,copy) NSArray&lt;__kindof UIView *&gt; *subviews;  </span><br><span class="line">/** è·å–è§†å›¾æ‰€åœ¨çš„Window */  </span><br><span class="line">@property(nullable, nonatomic,readonly) UIWindow     *window;  </span><br><span class="line">  </span><br><span class="line">/** ä»çˆ¶è§†å›¾ä¸­ç§»é™¤æ§ä»¶ */  </span><br><span class="line">- (void)removeFromSuperview;  </span><br><span class="line">/** æ’å…¥å­è§†å›¾(å°†å­è§†å›¾æ’å…¥åˆ°subviewsæ•°ç»„ä¸­indexè¿™ä¸ªä½ç½®) */  </span><br><span class="line">- (void)insertSubview:(UIView *)view atIndex:(NSInteger)index;  </span><br><span class="line">/** äº¤æ¢subviewsæ•°ç»„ä¸­æ‰€å­˜æ”¾å­è§†å›¾çš„ä½ç½® */  </span><br><span class="line">- (void)exchangeSubviewAtIndex:(NSInteger)index1 withSubviewAtIndex:(NSInteger)index2;  </span><br><span class="line">  </span><br><span class="line">/** æ·»åŠ å­è§†å›¾(æ–°æ·»åŠ çš„è§†å›¾åœ¨subviewsæ•°ç»„çš„åé¢, æ˜¾ç¤ºåœ¨æœ€ä¸Šé¢) */  </span><br><span class="line">- (void)addSubview:(UIView *)view;  </span><br><span class="line">/** æ’å…¥å­è§†å›¾(å°†å­è§†å›¾æ’åˆ°siblingSubviewä¹‹ä¸‹) */  </span><br><span class="line">- (void)insertSubview:(UIView *)view belowSubview:(UIView *)siblingSubview;  </span><br><span class="line">/** æ’å…¥å­è§†å›¾(å°†å­è§†å›¾æ’åˆ°siblingSubviewä¹‹ä¸Š) */  </span><br><span class="line">- (void)insertSubview:(UIView *)view aboveSubview:(UIView *)siblingSubview;  </span><br><span class="line">  </span><br><span class="line">/** å°†å­è§†å›¾æ‹‰åˆ°æœ€ä¸Šé¢æ¥æ˜¾ç¤º */  </span><br><span class="line">- (void)bringSubviewToFront:(UIView *)view;  </span><br><span class="line">/** å°†å­è§†å›¾æ‹‰åˆ°æœ€ä¸‹é¢æ¥æ˜¾ç¤º */  </span><br><span class="line">- (void)sendSubviewToBack:(UIView *)view;  </span><br><span class="line">  </span><br><span class="line">#pragma mark - ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨(ç•™ç»™å­ç±»å»å®ç°)  </span><br><span class="line">/** æ·»åŠ å­è§†å›¾å®Œæˆåè°ƒç”¨ */  </span><br><span class="line">- (void)didAddSubview:(UIView *)subview;  </span><br><span class="line">/** å°†è¦ç§»é™¤å­è§†å›¾æ—¶è°ƒç”¨ */  </span><br><span class="line">- (void)willRemoveSubview:(UIView *)subview;  </span><br><span class="line">  </span><br><span class="line">/** å°†è¦ç§»åŠ¨åˆ°æ–°çˆ¶è§†å›¾æ—¶è°ƒç”¨ */  </span><br><span class="line">- (void)willMoveToSuperview:(nullable UIView *)newSuperview;  </span><br><span class="line">/** ç§»åŠ¨åˆ°æ–°çˆ¶è§†å›¾å®Œæˆåè°ƒç”¨ */  </span><br><span class="line">- (void)didMoveToSuperview;  </span><br><span class="line">/** å°†è¦ç§»åŠ¨åˆ°æ–° Window æ—¶è°ƒç”¨ */  </span><br><span class="line">- (void)willMoveToWindow:(nullable UIWindow *)newWindow;  </span><br><span class="line">/** ç§»åŠ¨åˆ°æ–° Window å®Œæˆåè°ƒç”¨ */  </span><br><span class="line">- (void)didMoveToWindow;  </span><br><span class="line">  </span><br><span class="line">/** åˆ¤æ–­viewæ˜¯å¦ä¸ºå­ç±» */  </span><br><span class="line">- (BOOL)isDescendantOfView:(UIView *)view;  </span><br><span class="line">/** é€šè¿‡tagè·å¾—å¯¹åº”çš„å­è§†å›¾ */  </span><br><span class="line">- (nullable __kindof UIView *)viewWithTag:(NSInteger)tag;  </span><br><span class="line">  </span><br><span class="line">/** å¯¹ç°åœ¨æœ‰å¸ƒå±€æœ‰è°ƒæ•´æ›´æ”¹åï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ›´æ–° */  </span><br><span class="line">- (void)setNeedsLayout;  </span><br><span class="line">/** å¼ºåˆ¶è¿›è¡Œæ›´æ–°layout */  </span><br><span class="line">- (void)layoutIfNeeded;  </span><br><span class="line">  </span><br><span class="line">/** æ§ä»¶çš„frameå‘ç”Ÿæ”¹å˜çš„æ—¶å€™å°±ä¼šè°ƒç”¨,ä¸€èˆ¬åœ¨è¿™é‡Œé‡å†™å¸ƒå±€å­æ§ä»¶çš„ä½ç½®å’Œå°ºå¯¸ */  </span><br><span class="line">- (void)layoutSubviews;  </span><br><span class="line">  </span><br><span class="line">/** è®¾ç½®viewä¹‹é—´çš„é—´è·ï¼Œè¯¥å±æ€§åªå¯¹autolayoutå¸ƒå±€æœ‰æ•ˆ */  </span><br><span class="line">@property (nonatomic) UIEdgeInsets layoutMargins NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">/** æ˜¯å¦å°†å½“å‰è§†å›¾çš„é—´è·å’Œçˆ¶è§†å›¾ç›¸åŒï¼Œé»˜è®¤æ˜¯NO */  </span><br><span class="line">@property (nonatomic) BOOL preservesSuperviewLayoutMargins NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">/** æ”¹å˜viewçš„layoutMarginsè¿™ä¸ªå±æ€§æ—¶ï¼Œä¼šè§¦å‘è¿™ä¸ªæ–¹æ³• */  </span><br><span class="line">- (void)layoutMarginsDidChange NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">  </span><br><span class="line">/** è§†å›¾é—´è·å¼•å¯¼ */  </span><br><span class="line">@property(readonly,strong) UILayoutGuide *layoutMarginsGuide NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">/** è·å–æ­¤åŒºåŸŸçš„å†…çš„å¸ƒå±€å¼•å¯¼ */  </span><br><span class="line">@property (nonatomic, readonly, strong) UILayoutGuide *readableContentGuide  NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼Œè§†å›¾æ¸²æŸ“</span><br><span class="line">@interface UIView(UIViewRendering)  </span><br><span class="line">  </span><br><span class="line">/** é‡å†™drawRectæ–¹æ³•ï¼Œåœ¨å¯ä»¥è¿™é‡Œè¿›è¡Œç»˜å›¾æ“ä½œã€‚*/  </span><br><span class="line">- (void)drawRect:(CGRect)rect;  </span><br><span class="line">  </span><br><span class="line">/** æ ‡è®°æ•´ä¸ªè§†å›¾çš„è¾¹ç•ŒçŸ©å½¢éœ€è¦é‡ç»˜, è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨drawRectæ–¹æ³• */  </span><br><span class="line">- (void)setNeedsDisplay;  </span><br><span class="line">/** æ ‡è®°åœ¨æŒ‡å®šåŒºåŸŸå†…çš„è§†å›¾çš„è¾¹ç•Œéœ€è¦é‡ç»˜, è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨drawRectæ–¹æ³• */  </span><br><span class="line">- (void)setNeedsDisplayInRect:(CGRect)rect;  </span><br><span class="line">  </span><br><span class="line">/** æ˜¯å¦è£å‰ªè¶…å‡ºBoundsèŒƒå›´çš„å­æ§ä»¶ï¼Œé»˜è®¤NO */  </span><br><span class="line">@property(nonatomic)                 BOOL              clipsToBounds;  </span><br><span class="line">/** è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼Œé»˜è®¤nil */  </span><br><span class="line">@property(nullable, nonatomic,copy)  UIColor          *backgroundColor UI_APPEARANCE_SELECTOR;  </span><br><span class="line">/** è®¾ç½®é€æ˜åº¦(èŒƒå›´0.0~1.0)ï¼Œé»˜è®¤1.0 */  </span><br><span class="line">@property(nonatomic)                 CGFloat           alpha;  </span><br><span class="line">/** è®¾ç½®æ˜¯å¦ä¸é€æ˜ï¼Œé»˜è®¤YESä¸é€æ˜ */  </span><br><span class="line">@property(nonatomic,getter=isOpaque) BOOL              opaque;  </span><br><span class="line">/** è§†å›¾é‡ç»˜å‰æ˜¯å¦å…ˆæ¸…ç†ä»¥å‰çš„å†…å®¹ï¼Œé»˜è®¤YES */  </span><br><span class="line">@property(nonatomic)                 BOOL              clearsContextBeforeDrawing;  </span><br><span class="line">/** è®¾ç½®æ˜¯å¦éšè—ï¼Œé»˜è®¤NOä¸éšè— */  </span><br><span class="line">@property(nonatomic,getter=isHidden) BOOL              hidden;  </span><br><span class="line">/** å†…å®¹æ˜¾ç¤ºçš„æ¨¡å¼ï¼Œé»˜è®¤UIViewContentModeScaleToFill */  </span><br><span class="line">@property(nonatomic)                 UIViewContentMode contentMode;  </span><br><span class="line">/** æ‹‰ä¼¸å±æ€§ï¼Œå¦‚å›¾ç‰‡æ‹‰ä¼¸ */  </span><br><span class="line">@property(nonatomic)                 CGRect            contentStretch NS_DEPRECATED_IOS(3_0,6_0) __TVOS_PROHIBITED;  </span><br><span class="line">  </span><br><span class="line">/** è’™æ¿view */  </span><br><span class="line">@property(nullable, nonatomic,strong)          UIView           *maskView NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">  </span><br><span class="line">/** æ”¹å˜åº”ç”¨ç¨‹åºçš„å¤–è§‚çš„é¢œè‰²ã€‚é»˜è®¤ä¸ºnil */  </span><br><span class="line">@property(null_resettable, nonatomic, strong) UIColor *tintColor NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">/** å¯ä»¥ä½¿tintColorå˜æš—ï¼Œå› æ­¤æ•´ä¸ªè§†å›¾å±‚æ¬¡å˜æš— */  </span><br><span class="line">@property(nonatomic) UIViewTintAdjustmentMode tintAdjustmentMode NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">/** è¦†ç›–è¿™ä¸ªæ–¹æ³•çš„ç›®çš„æ˜¯ä¸ºäº†å½“tintColoræ”¹å˜çš„æ—¶å€™è‡ªå®šä¹‰ä¸€äº›è¡Œä¸º */  </span><br><span class="line">- (void)tintColorDidChange NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼Œè§†å›¾åŠ¨ç”»</span><br><span class="line">@interface UIView(UIViewAnimation)  </span><br><span class="line">  </span><br><span class="line">/** å¼€å§‹åŠ¨ç”» */  </span><br><span class="line">+ (void)beginAnimations:(nullable NSString *)animationID context:(nullable voidvoid *)context;  </span><br><span class="line">/** æäº¤åŠ¨ç”» */  </span><br><span class="line">+ (void)commitAnimations;  </span><br><span class="line">  </span><br><span class="line">/** è®¾ç½®åŠ¨ç”»ä»£ç†, é»˜è®¤nil */  </span><br><span class="line">+ (void)setAnimationDelegate:(nullable id)delegate;  </span><br><span class="line">/** åŠ¨ç”»å°†è¦å¼€å§‹æ—¶æ‰§è¡Œæ–¹æ³•ï¼ˆå¿…é¡»è¦å…ˆè®¾ç½®åŠ¨ç”»ä»£ç†ï¼‰, é»˜è®¤NULL */  </span><br><span class="line">+ (void)setAnimationWillStartSelector:(nullable SEL)selector;  </span><br><span class="line">/** åŠ¨ç”»å·²ç»“æŸæ—¶æ‰§è¡Œæ–¹æ³•ï¼ˆå¿…é¡»è¦å…ˆè®¾ç½®åŠ¨ç”»ä»£ç†ï¼‰, é»˜è®¤NULL */  </span><br><span class="line">+ (void)setAnimationDidStopSelector:(nullable SEL)selector;  </span><br><span class="line">/** è®¾ç½®åŠ¨ç”»æ—¶é•¿, é»˜è®¤0.2ç§’ */  </span><br><span class="line">+ (void)setAnimationDuration:(NSTimeInterval)duration;  </span><br><span class="line">/** åŠ¨ç”»å»¶è¿Ÿæ‰§è¡Œæ—¶é—´, é»˜è®¤0.0ç§’ */  </span><br><span class="line">+ (void)setAnimationDelay:(NSTimeInterval)delay;  </span><br><span class="line">/** è®¾ç½®åœ¨åŠ¨ç”»å—å†…éƒ¨åŠ¨ç”»å±æ€§æ”¹å˜çš„å¼€å§‹æ—¶é—´, é»˜è®¤now ([NSDate date]) */  </span><br><span class="line">+ (void)setAnimationStartDate:(NSDate *)startDate;  </span><br><span class="line">/** è®¾ç½®åŠ¨ç”»æ›²çº¿, é»˜è®¤UIViewAnimationCurveEaseInOut */  </span><br><span class="line">+ (void)setAnimationCurve:(UIViewAnimationCurve)curve;  </span><br><span class="line">/** åŠ¨ç”»çš„é‡å¤æ’­æ”¾æ¬¡æ•°ï¼Œ é»˜è®¤0 */  </span><br><span class="line">+ (void)setAnimationRepeatCount:(float)repeatCount;  </span><br><span class="line">/** è®¾ç½®æ˜¯å¦è‡ªå®šç¿»è½¬å½“å‰çš„åŠ¨ç”»æ•ˆæœ, é»˜è®¤NO */  </span><br><span class="line">+ (void)setAnimationRepeatAutoreverses:(BOOL)repeatAutoreverses;  </span><br><span class="line">/** è®¾ç½®åŠ¨ç”»ä»å½“å‰çŠ¶æ€å¼€å§‹æ’­æ”¾, é»˜è®¤NO */  </span><br><span class="line">+ (void)setAnimationBeginsFromCurrentState:(BOOL)fromCurrentState;  </span><br><span class="line">  </span><br><span class="line">/** åœ¨åŠ¨ç”»å—ä¸­ä¸ºè§†å›¾è®¾ç½®è¿‡æ¸¡åŠ¨ç”» */  </span><br><span class="line">+ (void)setAnimationTransition:(UIViewAnimationTransition)transition forView:(UIView *)view cache:(BOOL)cache;  </span><br><span class="line">  </span><br><span class="line">/** è®¾ç½®æ˜¯å¦æ¿€æ´»åŠ¨ç”» */  </span><br><span class="line">+ (void)setAnimationsEnabled:(BOOL)enabled;  </span><br><span class="line">/** è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼è¡¨ç¤ºåŠ¨ç”»æ˜¯å¦ç»“æŸ */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(class, nonatomic, readonly) BOOL areAnimationsEnabled;  </span><br><span class="line">#else  </span><br><span class="line">+ (BOOL)areAnimationsEnabled;  </span><br><span class="line">#endif  </span><br><span class="line">/** å…ˆæ£€æŸ¥åŠ¨ç”»å½“å‰æ˜¯å¦å¯ç”¨ï¼Œç„¶åç¦æ­¢åŠ¨ç”»ï¼Œæ‰§è¡Œblockå†…çš„æ–¹æ³•ï¼Œæœ€åé‡æ–°å¯ç”¨åŠ¨ç”»ï¼Œè€Œä¸”è¿™ä¸ªæ–¹æ³•ä¸ä¼šé˜»å¡åŸºäºCoreAnimationçš„åŠ¨ç”» */  </span><br><span class="line">+ (void)performWithoutAnimation:(void (NS_NOESCAPE ^)(void))actionsWithoutAnimation NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">/** å½“å‰åŠ¨ç”»çš„æŒç»­æ—¶é—´ */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(class, nonatomic, readonly) NSTimeInterval inheritedAnimationDuration NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">#else  </span><br><span class="line">+ (NSTimeInterval)inheritedAnimationDuration NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">#endif  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼Œç”¨ Blocks æ–¹å¼å®ç°è§†å›¾åŠ¨ç”»</span><br><span class="line">@interface UIView(UIViewAnimationWithBlocks)  </span><br><span class="line"></span><br><span class="line">/** </span><br><span class="line">  é€šè¿‡æŒ‡å®šåŠ¨ç”»æŒç»­æ—¶é—´ã€åŠ¨ç”»å»¶è¿Ÿã€æ‰§è¡ŒåŠ¨ç”»é€‰é¡¹å’ŒåŠ¨ç”»å®Œæˆåå›è°ƒçš„ Block å¯¹è±¡,æ›´æ”¹ä¸€ä¸ªæˆ–å¤šä¸ªè§†å›¾çš„åŠ¨ç”»ã€‚</span><br><span class="line">*/</span><br><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0);  </span><br><span class="line">  </span><br><span class="line">/** </span><br><span class="line">  é€šè¿‡æŒ‡å®šåŠ¨ç”»æŒç»­æ—¶é—´ã€åŠ¨ç”»å®Œæˆåå›è°ƒçš„ Block å¯¹è±¡,æ›´æ”¹ä¸€ä¸ªæˆ–å¤šä¸ªè§†å›¾çš„åŠ¨ç”»ã€‚</span><br><span class="line">  </span><br><span class="line">  é»˜è®¤ï¼šdelay = 0.0, options = 0 </span><br><span class="line">*/  </span><br><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0);  </span><br><span class="line">  </span><br><span class="line">/** </span><br><span class="line">  é€šè¿‡æŒ‡å®šåŠ¨ç”»æŒç»­æ—¶é—´æ›´æ”¹ä¸€ä¸ªæˆ–å¤šä¸ªè§†å›¾çš„åŠ¨ç”»ã€‚</span><br><span class="line">  </span><br><span class="line">  é»˜è®¤ï¼šdelay = 0.0, options = 0, completion = NULL </span><br><span class="line">*/</span><br><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations NS_AVAILABLE_IOS(4_0);  </span><br><span class="line">  </span><br><span class="line">/** ä½¿ç”¨ä¸ç‰©ç†å¼¹ç°§è¿åŠ¨ç›¸å¯¹åº”çš„å®šæ—¶æ›²çº¿æ‰§è¡Œè§†å›¾åŠ¨ç”» */  </span><br><span class="line">+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay usingSpringWithDamping:(CGFloat)dampingRatio initialSpringVelocity:(CGFloat)velocity options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">/** ä¸ºæŒ‡å®šçš„å®¹å™¨è§†å›¾åˆ›å»ºè½¬æ¢åŠ¨ç”» */  </span><br><span class="line">+ (void)transitionWithView:(UIView *)view duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^ __nullable)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0);  </span><br><span class="line">  </span><br><span class="line">/** ä½¿ç”¨ç»™å®šçš„å‚æ•°åœ¨æŒ‡å®šè§†å›¾ä¹‹é—´åˆ›å»ºè½¬æ¢åŠ¨ç”» */  </span><br><span class="line">+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0); // toView added to fromView.superview, fromView removed from its superview  </span><br><span class="line">  </span><br><span class="line">/** åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªè§†å›¾ä¸Šæ‰§è¡ŒæŒ‡å®šçš„ç³»ç»Ÿæä¾›çš„åŠ¨ç”»ï¼Œä»¥åŠå®šä¹‰çš„å¯é€‰å¹¶è¡ŒåŠ¨ç”» */  </span><br><span class="line">+ (void)performSystemAnimation:(UISystemAnimation)animation onViews:(NSArray&lt;__kindof UIView *&gt; *)views options:(UIViewAnimationOptions)options animations:(void (^ __nullable)(void))parallelAnimations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line">  </span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView çš„å…³é”®å¸§åŠ¨ç”»</span><br><span class="line">@interface UIView (UIViewKeyframeAnimations)  </span><br><span class="line">  </span><br><span class="line">/** åˆ›å»ºä¸€ä¸ªåŠ¨ç”»å—å¯¹è±¡ï¼Œå¯ç”¨äºä¸ºå½“å‰è§†å›¾è®¾ç½®åŸºäºå…³é”®å¸§çš„åŠ¨ç”» */  </span><br><span class="line">+ (void)animateKeyframesWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewKeyframeAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0);  </span><br><span class="line"></span><br><span class="line">/** æ·»åŠ æŒ‡å®šå¼€å§‹æ—¶é—´ã€æŒç»­æ—¶é—´çš„å…³é”®å¸§åŠ¨ç”»(èµ·å§‹å’ŒæŒç»­æ—¶é—´æ˜¯0.0å’Œ1.0ä¹‹é—´çš„å€¼) */  </span><br><span class="line">+ (void)addKeyframeWithRelativeStartTime:(double)frameStartTime relativeDuration:(double)frameDuration animations:(void (^)(void))animations NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼Œæ‰‹åŠ¿è¯†åˆ«</span><br><span class="line">@interface UIView (UIViewGestureRecognizers)  </span><br><span class="line">  </span><br><span class="line">/** å½“å‰è§†å›¾æ‰€é™„åŠ çš„æ‰€æœ‰æ‰‹åŠ¿è¯†åˆ«å™¨ */  </span><br><span class="line">@property(nullable, nonatomic,copy) NSArray&lt;__kindof UIGestureRecognizer *&gt; *gestureRecognizers NS_AVAILABLE_IOS(3_2);  </span><br><span class="line">  </span><br><span class="line">/** æ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨ */  </span><br><span class="line">- (void)addGestureRecognizer:(UIGestureRecognizer*)gestureRecognizer NS_AVAILABLE_IOS(3_2);  </span><br><span class="line">/** ç§»é™¤ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨ */  </span><br><span class="line">- (void)removeGestureRecognizer:(UIGestureRecognizer*)gestureRecognizer NS_AVAILABLE_IOS(3_2);  </span><br><span class="line">  </span><br><span class="line">/** æ˜¯å¦å¼€å§‹ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨ */  </span><br><span class="line">- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView è¿åŠ¨æ•ˆæœ</span><br><span class="line">@interface UIView (UIViewMotionEffects)  </span><br><span class="line">  </span><br><span class="line">/** æ·»åŠ è¿åŠ¨æ•ˆæœï¼Œå½“å€¾æ–œè®¾å¤‡æ—¶è§†å›¾ç¨å¾®æ”¹å˜å…¶ä½ç½® */  </span><br><span class="line">- (void)addMotionEffect:(UIMotionEffect *)effect NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">/** ç§»é™¤è¿åŠ¨æ•ˆæœ */  </span><br><span class="line">- (void)removeMotionEffect:(UIMotionEffect *)effect NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">/** æ‰€æœ‰æ·»åŠ çš„è¿åŠ¨æ•ˆæœ */  </span><br><span class="line">@property (copy, nonatomic) NSArray&lt;__kindof UIMotionEffect *&gt; *motionEffects NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">typedef NS_ENUM(NSInteger, UILayoutConstraintAxis) &#123;  </span><br><span class="line">    UILayoutConstraintAxisHorizontal = 0,   //!&lt; æ°´å¹³çº¦æŸ.  </span><br><span class="line">    UILayoutConstraintAxisVertical = 1      //!&lt; ç«–ç›´çº¦æŸ.  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView å¸ƒå±€çº¦æŸè®¾ç½®  </span><br><span class="line">@interface UIView (UIConstraintBasedLayoutInstallingConstraints)  </span><br><span class="line">  </span><br><span class="line">/** è·å–æ‰€æœ‰çº¦æŸ */  </span><br><span class="line">@property(nonatomic,readonly) NSArray&lt;__kindof NSLayoutConstraint *&gt; *constraints NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">  </span><br><span class="line">/** æ·»åŠ ä¸€ä¸ªçº¦æŸ */  </span><br><span class="line">- (void)addConstraint:(NSLayoutConstraint *)constraint NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** æ·»åŠ å¤šä¸ªçº¦æŸ */  </span><br><span class="line">- (void)addConstraints:(NSArray&lt;__kindof NSLayoutConstraint *&gt; *)constraints NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** ç§»é™¤ä¸€ä¸ªçº¦æŸ */  </span><br><span class="line">- (void)removeConstraint:(NSLayoutConstraint *)constraint NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** ç§»é™¤å¤šä¸ªçº¦æŸ */  </span><br><span class="line">- (void)removeConstraints:(NSArray&lt;__kindof NSLayoutConstraint *&gt; *)constraints NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView åŸºäºçº¦æŸçš„å¸ƒå±€æ ¸å¿ƒæ–¹æ³•</span><br><span class="line">@interface UIView (UIConstraintBasedLayoutCoreMethods)  </span><br><span class="line">/** æ›´æ–°è§†å›¾å’Œå…¶å­è§†å›¾çš„çº¦æŸ */  </span><br><span class="line">- (void)updateConstraintsIfNeeded NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** ä¸ºè§†å›¾æ›´æ–°çº¦æŸï¼Œå¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•æ¥è®¾ç½®å½“å‰viewå±€éƒ¨çš„å¸ƒå±€çº¦æŸ */  </span><br><span class="line">- (void)updateConstraints NS_AVAILABLE_IOS(6_0) NS_REQUIRES_SUPER;  </span><br><span class="line">/** è§†å›¾çš„çº¦æŸæ˜¯å¦éœ€è¦æ›´æ–° */  </span><br><span class="line">- (BOOL)needsUpdateConstraints NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** è®¾ç½®è§†å›¾çš„çº¦æŸéœ€è¦æ›´æ–°ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç³»ç»Ÿä¼šè°ƒç”¨updateConstraintså»æ›´æ–°å¸ƒå±€ */  </span><br><span class="line">- (void)setNeedsUpdateConstraints NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView çº¦æŸå…¼å®¹æ€§è®¾ç½®</span><br><span class="line">@interface UIView (UIConstraintBasedCompatibility)  </span><br><span class="line">  </span><br><span class="line">/** æ˜¯å¦å¯ç”¨è‡ªåŠ¨å¸ƒå±€çº¦æŸï¼Œé»˜è®¤YES. IBé»˜è®¤æ˜¯NO */  </span><br><span class="line">@property(nonatomic) BOOL translatesAutoresizingMaskIntoConstraints NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">  </span><br><span class="line">/** æ˜¯å¦ä½¿ç”¨çº¦æŸå¸ƒå±€ */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(class, nonatomic, readonly) BOOL requiresConstraintBasedLayout NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">#else  </span><br><span class="line">+ (BOOL)requiresConstraintBasedLayout NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">#endif  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView å¸ƒå±€å›¾å±‚çº¦æŸ  </span><br><span class="line">@interface UIView (UIConstraintBasedLayoutLayering)  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›ç»™å®šæ¡†æ¶çš„è§†å›¾çš„å¯¹é½çŸ©é˜µ */  </span><br><span class="line">- (CGRect)alignmentRectForFrame:(CGRect)frame NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** è¿”å›ç»™å®šå¯¹é½çŸ©å½¢çš„è§†å›¾çš„frame */  </span><br><span class="line">- (CGRect)frameForAlignmentRect:(CGRect)alignmentRect NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›ä»è§†å›¾çš„frameä¸Šå®šä¹‰çš„å¯¹é½çŸ©é˜µçš„è¾¹æ¡† */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(nonatomic, readonly) UIEdgeInsets alignmentRectInsets NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">#else  </span><br><span class="line">- (UIEdgeInsets)alignmentRectInsets NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">#endif  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›æ»¡è¶³åŸºçº¿çº¦æŸæ¡ä»¶çš„è§†å›¾ */  </span><br><span class="line">- (UIView *)viewForBaselineLayout NS_DEPRECATED_IOS(6_0, 9_0, &quot;Override -viewForFirstBaselineLayout or -viewForLastBaselineLayout as appropriate, instead&quot;) __TVOS_PROHIBITED;  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›ç”¨äºæ»¡è¶³ç¬¬ä¸€åŸºçº¿çº¦æŸçš„è§†å›¾ */  </span><br><span class="line">@property(readonly,strong) UIView *viewForFirstBaselineLayout NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">/** è¿”å›ç”¨äºæ»¡è¶³ä¸Šæ¬¡åŸºçº¿çº¦æŸçš„è§†å›¾ */  </span><br><span class="line">@property(readonly,strong) UIView *viewForLastBaselineLayout NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">UIKIT_EXTERN const CGFloat UIViewNoIntrinsicMetric NS_AVAILABLE_IOS(6_0); // -1  </span><br><span class="line">/** è¿”å›æ¥æ”¶å¯¹è±¡çš„åŸæœ¬å¤§å° */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(nonatomic, readonly) CGSize intrinsicContentSize NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">#else  </span><br><span class="line">- (CGSize)intrinsicContentSize NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">#endif  </span><br><span class="line">/** åºŸé™¤è§†å›¾åŸæœ¬å†…å®¹çš„size */  </span><br><span class="line">- (void)invalidateIntrinsicContentSize NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">  </span><br><span class="line">/** è®¾ç½®å½“è§†å›¾è¦å˜å¤§æ—¶ï¼Œè§†å›¾çš„å‹ç¼©æ”¹å˜æ–¹å¼ï¼Œè¿”å›ä¸€ä¸ªä¼˜å…ˆæƒï¼ˆç¡®å®šviewæœ‰å¤šå¤§çš„ä¼˜å…ˆçº§é˜»æ­¢è‡ªå·±å˜å¤§ï¼‰ */  </span><br><span class="line">- (UILayoutPriority)contentHuggingPriorityForAxis:(UILayoutConstraintAxis)axis NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** è®¾ç½®æ”¾å…ˆæƒ */  </span><br><span class="line">- (void)setContentHuggingPriority:(UILayoutPriority)priority forAxis:(UILayoutConstraintAxis)axis NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">  </span><br><span class="line">/** è®¾ç½®å½“è§†å›¾è¦å˜å°æ—¶ï¼Œè§†å›¾çš„å‹ç¼©æ”¹å˜æ–¹å¼ï¼Œæ˜¯æ°´å¹³ç¼©å°è¿˜æ˜¯å‚ç›´ç¼©å°ï¼Œå¹¶è¿”å›ä¸€ä¸ªä¼˜å…ˆæƒï¼ˆç¡®å®šæœ‰å¤šå¤§çš„ä¼˜å…ˆçº§é˜»æ­¢è‡ªå·±å˜å°ï¼‰ */  </span><br><span class="line">- (UILayoutPriority)contentCompressionResistancePriorityForAxis:(UILayoutConstraintAxis)axis NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** è®¾ç½®ä¼˜å…ˆæƒ */  </span><br><span class="line">- (void)setContentCompressionResistancePriority:(UILayoutPriority)priority forAxis:(UILayoutConstraintAxis)axis NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">@end  </span><br><span class="line">  </span><br><span class="line">// Size To Fit  </span><br><span class="line">  </span><br><span class="line">UIKIT_EXTERN const CGSize UILayoutFittingCompressedSize NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">UIKIT_EXTERN const CGSize UILayoutFittingExpandedSize NS_AVAILABLE_IOS(6_0);  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView å¸ƒå±€æ‹Ÿåˆå°ºå¯¸ </span><br><span class="line">@interface UIView (UIConstraintBasedLayoutFittingSize)  </span><br><span class="line">/** è¿”å›æ»¡è¶³æŒæœ‰çº¦æŸçš„è§†å›¾çš„size */  </span><br><span class="line">- (CGSize)systemLayoutSizeFittingSize:(CGSize)targetSize NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** è¿”å›æ»¡è¶³å®ƒæ‰€åŒ…å«çš„çº¦æŸçš„è§†å›¾çš„å¤§å° */  </span><br><span class="line">- (CGSize)systemLayoutSizeFittingSize:(CGSize)targetSize withHorizontalFittingPriority:(UILayoutPriority)horizontalFittingPriority verticalFittingPriority:(UILayoutPriority)verticalFittingPriority NS_AVAILABLE_IOS(8_0);  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView å¸ƒå±€æŒ‡å—æ”¯æŒ </span><br><span class="line">@interface UIView (UILayoutGuideSupport)  </span><br><span class="line">  </span><br><span class="line">/** æ­¤è§†å›¾æ‹¥æœ‰å¸ƒå±€å‘å¯¼å¯¹è±¡çš„æ•°ç»„ */  </span><br><span class="line">@property(nonatomic,readonly,copy) NSArray&lt;__kindof UILayoutGuide *&gt; *layoutGuides NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">/** å‘è§†å›¾ä¸­æ·»åŠ å¸ƒå±€å‘å¯¼ */  </span><br><span class="line">- (void)addLayoutGuide:(UILayoutGuide *)layoutGuide NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">/** å‘è§†å›¾ä¸­æ·»åŠ å¸ƒå±€å‘å¯¼ */  </span><br><span class="line">- (void)removeLayoutGuide:(UILayoutGuide *)layoutGuide NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">@end  </span><br><span class="line">  </span><br><span class="line">@class NSLayoutXAxisAnchor,NSLayoutYAxisAnchor,NSLayoutDimension;  </span><br><span class="line">@interface UIView (UIViewLayoutConstraintCreation)  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„å‰ç¼˜æ¡†çš„å¸ƒå±€é”šç‚¹ */  </span><br><span class="line">@property(readonly, strong) NSLayoutXAxisAnchor *leadingAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„åç¼˜è¾¹æ¡†çš„å¸ƒå±€é”šç‚¹ */  </span><br><span class="line">@property(readonly, strong) NSLayoutXAxisAnchor *trailingAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„å·¦è¾¹æ¡†çš„å¸ƒå±€é”šç‚¹ */  </span><br><span class="line">@property(readonly, strong) NSLayoutXAxisAnchor *leftAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„å³è¾¹æ¡†çš„å¸ƒå±€é”šç‚¹ */  </span><br><span class="line">@property(readonly, strong) NSLayoutXAxisAnchor *rightAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„é¡¶è¾¹æ¡†çš„å¸ƒå±€é”šç‚¹ */  </span><br><span class="line">@property(readonly, strong) NSLayoutYAxisAnchor *topAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„åº•è¾¹æ¡†çš„å¸ƒå±€é”šç‚¹ */  </span><br><span class="line">@property(readonly, strong) NSLayoutYAxisAnchor *bottomAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„å®½åº¦ */  </span><br><span class="line">@property(readonly, strong) NSLayoutDimension *widthAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„é«˜åº¦ */  </span><br><span class="line">@property(readonly, strong) NSLayoutDimension *heightAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„æ°´å¹³ä¸­å¿ƒè½´ */  </span><br><span class="line">@property(readonly, strong) NSLayoutXAxisAnchor *centerXAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** å¸ƒå±€è§†å›¾çš„å‚ç›´ä¸­å¿ƒè½´ */  </span><br><span class="line">@property(readonly, strong) NSLayoutYAxisAnchor *centerYAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** ä¸€ä¸ªä»£è¡¨å¯¹è§†å›¾ä¸­çš„æ–‡æœ¬çš„æœ€é«˜çº¿åŸºçº¿å¸ƒç½®é”š */  </span><br><span class="line">@property(readonly, strong) NSLayoutYAxisAnchor *firstBaselineAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">/** ä¸€ä¸ªä»£è¡¨å¯¹è§†å›¾ä¸­çš„æ–‡æœ¬çš„æœ€ä½çº¿åŸºçº¿å¸ƒç½®é”š */  </span><br><span class="line">@property(readonly, strong) NSLayoutYAxisAnchor *lastBaselineAnchor NS_AVAILABLE_IOS(9_0);  </span><br><span class="line">  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">// UIView èŒƒç•´ç±»ï¼ŒUIView å¸ƒå±€è°ƒè¯•   </span><br><span class="line">@interface UIView (UIConstraintBasedLayoutDebugging)  </span><br><span class="line">  </span><br><span class="line">/** è·å¾—å®ä½“åœ¨ä¸åŒæ–¹å‘ä¸Šæ‰€æœ‰çš„å¸ƒå±€çº¦æŸ */  </span><br><span class="line">- (NSArray&lt;__kindof NSLayoutConstraint *&gt; *)constraintsAffectingLayoutForAxis:(UILayoutConstraintAxis)axis NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">  </span><br><span class="line">/** å¯ä»¥çŸ¥é“å½“å‰è§†å›¾çš„å¸ƒå±€æ˜¯å¦ä¼šæœ‰æ­§ä¹‰ */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(nonatomic, readonly) BOOL hasAmbiguousLayout NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">#else  </span><br><span class="line">- (BOOL)hasAmbiguousLayout NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">#endif  </span><br><span class="line">  </span><br><span class="line">/** è¿™ä¸ªæ–¹æ³•ä¼šéšæœºæ”¹å˜è§†å›¾çš„layoutåˆ°å¦å¤–ä¸€ä¸ªæœ‰æ•ˆçš„layoutã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°å“ªä¸€ä¸ªlayoutå¯¼è‡´äº†æ•´ä½“çš„å¸ƒå±€çº¦æŸå‡ºç°äº†é”™è¯¯ï¼Œæˆ–è€…æˆ‘ä»¬åº”è¯¥å¢åŠ æ›´å¤šçš„å¸ƒå±€çº¦æŸ */  </span><br><span class="line">- (void)exerciseAmbiguityInLayout NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">/** çº¦æŸè°ƒè¯•ï¼Œåªåœ¨DEBUGç¯å¢ƒä¸‹è¢«è°ƒç”¨ */  </span><br><span class="line">@interface UILayoutGuide (UIConstraintBasedLayoutDebugging)  </span><br><span class="line">  </span><br><span class="line">/** è·å¾—å®ä½“åœ¨ä¸åŒæ–¹å‘ä¸Šæ‰€æœ‰çš„å¸ƒå±€çº¦æŸ */  </span><br><span class="line">- (NSArray&lt;__kindof NSLayoutConstraint *&gt; *)constraintsAffectingLayoutForAxis:(UILayoutConstraintAxis)axis NS_AVAILABLE_IOS(10_0);  </span><br><span class="line">  </span><br><span class="line">/** å¯ä»¥çŸ¥é“å½“å‰è§†å›¾çš„å¸ƒå±€æ˜¯å¦ä¼šæœ‰æ­§ä¹‰ */  </span><br><span class="line">#if UIKIT_DEFINE_AS_PROPERTIES  </span><br><span class="line">@property(nonatomic, readonly) BOOL hasAmbiguousLayout NS_AVAILABLE_IOS(10_0);  </span><br><span class="line">#else  </span><br><span class="line">- (BOOL)hasAmbiguousLayout NS_AVAILABLE_IOS(10_0);  </span><br><span class="line">#endif  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------</span><br><span class="line">#pragma mark - ViewçŠ¶æ€ä¿å­˜æ¢å¤  </span><br><span class="line">@interface UIView (UIStateRestoration)  </span><br><span class="line">/** æ ‡ç¤ºæ˜¯å¦æ”¯æŒä¿å­˜,æ¢å¤è§†å›¾çŠ¶æ€ä¿¡æ¯ */  </span><br><span class="line">@property (nullable, nonatomic, copy) NSString *restorationIdentifier NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** ä¿å­˜è§†å›¾çŠ¶æ€ç›¸å…³çš„ä¿¡æ¯ */  </span><br><span class="line">- (void) encodeRestorableStateWithCoder:(NSCoder *)coder NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">/** æ¢å¤å’Œä¿æŒè§†å›¾çŠ¶æ€ç›¸å…³ä¿¡æ¯ */  </span><br><span class="line">- (void) decodeRestorableStateWithCoder:(NSCoder *)coder NS_AVAILABLE_IOS(6_0);  </span><br><span class="line">@end  </span><br><span class="line"></span><br><span class="line">// ğŸ“Œ----------------------------------------------------------------------------  </span><br><span class="line">#pragma mark - Viewå¿«ç…§  </span><br><span class="line">@interface UIView (UISnapshotting)  </span><br><span class="line">/** å°†å½“å‰æ˜¾ç¤ºçš„viewæˆªå–æˆä¸€ä¸ªæ–°çš„view */  </span><br><span class="line">- (nullable UIView *)snapshotViewAfterScreenUpdates:(BOOL)afterUpdates NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">/** ç¼©æ”¾ä¸€ä¸ªviewé»˜è®¤æ˜¯ä»ä¸­å¿ƒç‚¹è¿›è¡Œç¼©æ”¾çš„ */  </span><br><span class="line">- (nullable UIView *)resizableSnapshotViewFromRect:(CGRect)rect afterScreenUpdates:(BOOL)afterUpdates withCapInsets:(UIEdgeInsets)capInsets NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">/** å±å¹•å¿«ç…§ */  </span><br><span class="line">- (BOOL)drawViewHierarchyInRect:(CGRect)rect afterScreenUpdates:(BOOL)afterUpdates NS_AVAILABLE_IOS(7_0);  </span><br><span class="line">@end  </span><br><span class="line">  </span><br><span class="line">NS_ASSUME_NONNULL_END</span><br></pre></td></tr></table></figure>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://zsisme.gitbooks.io/ios-/" target="_blank" rel="noopener">iOS Core Animation: Advanced Techniquesä¸­æ–‡è¯‘æœ¬</a></li>
<li><a href="http://blog.wangtuyao.com/post/2015/12/10/ios-animation-tutorial-1.html" target="_blank" rel="noopener">iOSåŠ¨ç”»æ•™ç¨‹ï¼ˆ1ï¼‰â€”ç‹åœŸåšçš„åšå®¢</a></li>
<li><a href="http://blog.wangtuyao.com/post/2015/12/19/ios-animation-tutorial-2.html" target="_blank" rel="noopener">iOSåŠ¨ç”»æ•™ç¨‹ï¼ˆ2ï¼‰â€”ç‹åœŸåšçš„åšå®¢</a></li>
<li><a href="http://blog.csdn.net/zeng_zhiming/article/details/73469182" target="_blank" rel="noopener">ioså¼€å‘ ä¹‹ UIViewè¯¦è§£</a></li>
<li><a href="http://www.jianshu.com/p/8c1c1697c0ce" target="_blank" rel="noopener">iOSå¼€å‘åŸºç¡€çŸ¥è¯†ï¼šCore Animation(æ ¸å¿ƒåŠ¨ç”»)</a></li>
<li><a href="http://bihongbo.com/2016/01/03/memoryGhostdrawRect/" target="_blank" rel="noopener">å†…å­˜æ¶é¬¼drawRect</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/13/å¤©å¤©å“å°iOS7ç”œç‚¹ Day11ï¼šUIView Key-frame Animations/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/13/å¤©å¤©å“å°iOS7ç”œç‚¹ Day11ï¼šUIView Key-frame Animations/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day11ï¼šUIView Key-frame Animations</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-13 11:12:00" itemprop="dateCreated datePublished" datetime="2017-09-13T11:12:00+08:00">2017-09-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 14:07:45" itemprop="dateModified" datetime="2019-04-17T14:07:45+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/13/å¤©å¤©å“å°iOS7ç”œç‚¹ Day11ï¼šUIView Key-frame Animations/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day11ï¼šUIView Key-frame Animations">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>è§†å›¾å…³é”®å¸§åŠ¨ç”»</p>
</blockquote>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/13/ios7-day-by-day-day11-uiview-key-frame-animations/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 11 :: UIView Key-frame Animations</a></li>
</ul>
<h3 id="2ä¸ªæ–¹æ³•"><a href="#2ä¸ªæ–¹æ³•" class="headerlink" title="2ä¸ªæ–¹æ³•"></a>2ä¸ªæ–¹æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@interface UIView (UIViewKeyframeAnimations)</span><br><span class="line"></span><br><span class="line">// å…³é”®å¸§åŠ¨ç”»æ–¹æ³•</span><br><span class="line">+ (void)animateKeyframesWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewKeyframeAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0);</span><br><span class="line"></span><br><span class="line">// å†…éƒ¨å—æ–¹æ³•</span><br><span class="line">+ (void)addKeyframeWithRelativeStartTime:(double)frameStartTime relativeDuration:(double)frameDuration animations:(void (^)(void))animations NS_AVAILABLE_IOS(7_0); // start time and duration are values between 0.0 and 1.0 specifying time and duration relative to the overall time of the keyframe animation</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h3 id="UIViewKeyframeAnimationOptions-éƒ¨åˆ†é€‰é¡¹å‚æ•°"><a href="#UIViewKeyframeAnimationOptions-éƒ¨åˆ†é€‰é¡¹å‚æ•°" class="headerlink" title="UIViewKeyframeAnimationOptions éƒ¨åˆ†é€‰é¡¹å‚æ•°"></a>UIViewKeyframeAnimationOptions éƒ¨åˆ†é€‰é¡¹å‚æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UIViewKeyframeAnimationOptionCalculationModeLinear     = 0 &lt;&lt; 10, // çº¿æ€§åŠ¨ç”»ï¼Œé»˜è®¤</span><br><span class="line">UIViewKeyframeAnimationOptionCalculationModeDiscrete   = 1 &lt;&lt; 10, // åˆ†ç¦»åŠ¨ç”»</span><br><span class="line">UIViewKeyframeAnimationOptionCalculationModePaced      = 2 &lt;&lt; 10, // è¿›åº¦åŠ¨ç”»</span><br><span class="line">UIViewKeyframeAnimationOptionCalculationModeCubic      = 3 &lt;&lt; 10, // ç«‹ä½“åŠ¨ç”»</span><br><span class="line">UIViewKeyframeAnimationOptionCalculationModeCubicPaced = 4 &lt;&lt; 10  // ç«‹ä½“+è¿›åº¦åŠ¨ç”»</span><br></pre></td></tr></table></figure>
<h4 id="ä¸åŒé€‰é¡¹çš„è¡Œä¸ºç¤ºæ„å›¾"><a href="#ä¸åŒé€‰é¡¹çš„è¡Œä¸ºç¤ºæ„å›¾" class="headerlink" title="ä¸åŒé€‰é¡¹çš„è¡Œä¸ºç¤ºæ„å›¾"></a>ä¸åŒé€‰é¡¹çš„è¡Œä¸ºç¤ºæ„å›¾</h4><p>æ°´å¹³è½´ä»£è¡¨äº†åŠ¨ç”»çš„æ—¶é•¿ï¼Œè€Œç«–ç›´è½´ä»£è¡¨åŠ¨ç”»çš„å‚æ•°(å¯ä»¥æ˜¯è§†å›¾çš„é€æ˜åº¦ï¼Œå®½åº¦)ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-37db268084e27c83.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="Rainbow-Changer-å½©è™¹å˜è‰²å™¨"><a href="#Rainbow-Changer-å½©è™¹å˜è‰²å™¨" class="headerlink" title="Rainbow Changer - å½©è™¹å˜è‰²å™¨"></a>Rainbow Changer - å½©è™¹å˜è‰²å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">// å½©è™¹å˜è‰²å™¨æ–¹æ³•</span><br><span class="line">- (IBAction)handleRainbow:(id)sender &#123;</span><br><span class="line">    [self enableToolbarItems:NO];</span><br><span class="line">    </span><br><span class="line">    // æ‰§è¡ŒåŠ¨ç”»çš„ block</span><br><span class="line">    void (^animationBlock)() = ^&#123;</span><br><span class="line">        NSArray *rainbowColors = @[[UIColor orangeColor],</span><br><span class="line">                                   [UIColor yellowColor],</span><br><span class="line">                                   [UIColor greenColor],</span><br><span class="line">                                   [UIColor blueColor],</span><br><span class="line">                                   [UIColor purpleColor],</span><br><span class="line">                                   [UIColor redColor]];</span><br><span class="line">        </span><br><span class="line">        NSUInteger colorCount = [rainbowColors count];</span><br><span class="line">        for (NSUInteger i=0; i&lt;colorCount; i++) &#123;</span><br><span class="line">            // â‡ï¸ å†…éƒ¨å—æ–¹æ³•ï¼ŒæŒ‡å®šæ¯ä¸€å¸§åŠ¨ç”»çš„ç›¸å¯¹èµ·å§‹æ—¶é—´ã€ç›¸å¯¹æŒç»­æ—¶é—´</span><br><span class="line">            [UIView addKeyframeWithRelativeStartTime:i/(CGFloat)colorCount</span><br><span class="line">                                    relativeDuration:1/(CGFloat)colorCount</span><br><span class="line">                                          animations:^&#123;</span><br><span class="line">                                              self.rainbowView.backgroundColor = rainbowColors[i];</span><br><span class="line">                                          &#125;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    // â‡ï¸ å…³é”®å¸§åŠ¨ç”»æ–¹æ³•</span><br><span class="line">    [UIView animateKeyframesWithDuration:4.0</span><br><span class="line">                                   delay:0.0</span><br><span class="line">                                 options:UIViewKeyframeAnimationOptionCalculationModeLinear | UIViewAnimationCurveLinear //çº¿æ€§ã€æ›²çº¿</span><br><span class="line">                              animations:animationBlock</span><br><span class="line">                              completion:^(BOOL finished) &#123;</span><br><span class="line">                                  [self enableToolbarItems:YES];</span><br><span class="line">                              &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Private</span><br><span class="line"></span><br><span class="line">- (void)enableToolbarItems:(BOOL)enabled &#123;</span><br><span class="line">    for (UIBarButtonItem *item in self.toolbar.items) &#123;</span><br><span class="line">        item.enabled = enabled;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-ac63a9580d17f4d8.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="Rotation-Directions-æ—‹è½¬æ–¹å‘"><a href="#Rotation-Directions-æ—‹è½¬æ–¹å‘" class="headerlink" title="Rotation Directions - æ—‹è½¬æ–¹å‘"></a>Rotation Directions - æ—‹è½¬æ–¹å‘</h3><h4 id="1-é¡ºæ—¶é’ˆæ—‹è½¬"><a href="#1-é¡ºæ—¶é’ˆæ—‹è½¬" class="headerlink" title="1. é¡ºæ—¶é’ˆæ—‹è½¬"></a>1. é¡ºæ—¶é’ˆæ—‹è½¬</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)handleRotateCW:(id)sender &#123;</span><br><span class="line">    [self enableToolbarItems:NO];</span><br><span class="line">    [UIView animateKeyframesWithDuration:2.0</span><br><span class="line">                                   delay:0.0</span><br><span class="line">                                 options:UIViewKeyframeAnimationOptionCalculationModeLinear</span><br><span class="line">                              animations:^&#123;</span><br><span class="line">          // 0 ~ 2Ï€/3</span><br><span class="line">          [UIView addKeyframeWithRelativeStartTime:0.0</span><br><span class="line">                                  relativeDuration:1/3.0</span><br><span class="line">                                        animations:^&#123;</span><br><span class="line">                                            self.rotatingImageView.transform = CGAffineTransformMakeRotation(2.0 * M_PI / 3.0);</span><br><span class="line">                                        &#125;];</span><br><span class="line">          // 2Ï€/3 ~ 4Ï€/3</span><br><span class="line">          [UIView addKeyframeWithRelativeStartTime:1/3.0</span><br><span class="line">                                  relativeDuration:1/3.0</span><br><span class="line">                                        animations:^&#123;</span><br><span class="line">                                            self.rotatingImageView.transform = CGAffineTransformMakeRotation(4.0 * M_PI / 3.0);</span><br><span class="line">                                        &#125;];</span><br><span class="line">          // 4Ï€/3 ~ 0</span><br><span class="line">          [UIView addKeyframeWithRelativeStartTime:2/3.0</span><br><span class="line">                                  relativeDuration:1/3.0</span><br><span class="line">                                        animations:^&#123;</span><br><span class="line">                                            self.rotatingImageView.transform = CGAffineTransformMakeRotation(0);</span><br><span class="line">                                        &#125;];</span><br><span class="line">                              &#125;</span><br><span class="line">                              completion:^(BOOL finished) &#123;</span><br><span class="line">                                  [self enableToolbarItems:YES];</span><br><span class="line">                              &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœ:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-2e30d3f2c8cb81a0.gif?imageMogr2/auto-orient/strip" alt></p>
<h4 id="2-é€†æ—¶é’ˆæ—‹è½¬"><a href="#2-é€†æ—¶é’ˆæ—‹è½¬" class="headerlink" title="2. é€†æ—¶é’ˆæ—‹è½¬"></a>2. é€†æ—¶é’ˆæ—‹è½¬</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)handleRotateCCW:(id)sender &#123;</span><br><span class="line">    [self enableToolbarItems:NO];</span><br><span class="line">    [UIView animateKeyframesWithDuration:2.0</span><br><span class="line">                                   delay:0.0</span><br><span class="line">                                 options:UIViewKeyframeAnimationOptionCalculationModeLinear</span><br><span class="line">                              animations:^&#123;</span><br><span class="line">          // 0 ~ 4Ï€/3</span><br><span class="line">          [UIView addKeyframeWithRelativeStartTime:0.0</span><br><span class="line">                                  relativeDuration:1/3.0</span><br><span class="line">                                        animations:^&#123;</span><br><span class="line">                                            self.rotatingImageView.transform = CGAffineTransformMakeRotation(4.0 * M_PI / 3.0);</span><br><span class="line">                                        &#125;];</span><br><span class="line">          // 4Ï€/3 ~ 2Ï€/3</span><br><span class="line">          [UIView addKeyframeWithRelativeStartTime:1/3.0</span><br><span class="line">                                  relativeDuration:1/3.0</span><br><span class="line">                                        animations:^&#123;</span><br><span class="line">                                            self.rotatingImageView.transform = CGAffineTransformMakeRotation(2.0 * M_PI / 3.0);</span><br><span class="line">                                        &#125;];</span><br><span class="line">          // 2Ï€/3 ~ 0</span><br><span class="line">          [UIView addKeyframeWithRelativeStartTime:2/3.0</span><br><span class="line">                                  relativeDuration:1/3.0</span><br><span class="line">                                        animations:^&#123;</span><br><span class="line">                                            self.rotatingImageView.transform = CGAffineTransformMakeRotation(0);</span><br><span class="line">                                        &#125;];</span><br><span class="line">                              &#125;</span><br><span class="line">                              completion:^(BOOL finished) &#123;</span><br><span class="line">                                  [self enableToolbarItems:YES];</span><br><span class="line">                              &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-c8c72779a633aaa9.gif?imageMogr2/auto-orient/strip" alt></p>
<hr>
<p>The End.</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/12/å¤©å¤©å“å°iOS7ç”œç‚¹ Day10ï¼šCustom UIViewController Transitions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/12/å¤©å¤©å“å°iOS7ç”œç‚¹ Day10ï¼šCustom UIViewController Transitions/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day10ï¼šCustom UIViewController Transitions</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-12 17:42:00" itemprop="dateCreated datePublished" datetime="2017-09-12T17:42:00+08:00">2017-09-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 14:25:50" itemprop="dateModified" datetime="2019-04-17T14:25:50+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/12/å¤©å¤©å“å°iOS7ç”œç‚¹ Day10ï¼šCustom UIViewController Transitions/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day10ï¼šCustom UIViewController Transitions">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>è‡ªå®šä¹‰è§†å›¾æ§åˆ¶å™¨è½¬åœº</p>
</blockquote>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/12/ios7-day-by-day-day10-custom-uiviewcontroller-transitions/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 10 :: Custom UIViewController Transitions</a></li>
</ul>
<h3 id="è½¬åœºæ•ˆæœ"><a href="#è½¬åœºæ•ˆæœ" class="headerlink" title="è½¬åœºæ•ˆæœ"></a>è½¬åœºæ•ˆæœ</h3><p>é»˜è®¤çš„ <strong>UINavigationController</strong> è½¬åœº push/pop æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-7ae4510fe6bab92b.gif?imageMogr2/auto-orient/strip" alt></p>
<p>ç°åœ¨æˆ‘ä»¬è¦å®ç°è‡ªå®šä¹‰å®ç°è§†å›¾æ§åˆ¶å™¨è½¬åœºæ•ˆæœï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-21ea04ffcb2db9c4.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="è§†å›¾å±‚æ¬¡ç»“æ„"><a href="#è§†å›¾å±‚æ¬¡ç»“æ„" class="headerlink" title="è§†å›¾å±‚æ¬¡ç»“æ„"></a>è§†å›¾å±‚æ¬¡ç»“æ„</h3><p>è§†å›¾å±‚æ¬¡ç»“æ„å¾ˆç®€å•ï¼šä¸€ä¸ª UINavigationController ä½œä¸ºçª—å£çš„æ ¹è§†å›¾æ§åˆ¶å™¨ã€è€Œé¦–é¡µæ˜¯ UINavigationController çš„æ ¹è§†å›¾æ§åˆ¶å™¨ã€é¦–é¡µå¯ä»¥ push åˆ°ç¬¬äºŒé¡µï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-26712bd54b654430.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="è¦æƒ³å®ç°è‡ªå®šä¹‰è§†å›¾æ§åˆ¶å™¨è½¬åœºæ•ˆæœï¼Œéœ€è¦å®ç°-UINavigationControllerDelegate-åè®®ã€‚"><a href="#è¦æƒ³å®ç°è‡ªå®šä¹‰è§†å›¾æ§åˆ¶å™¨è½¬åœºæ•ˆæœï¼Œéœ€è¦å®ç°-UINavigationControllerDelegate-åè®®ã€‚" class="headerlink" title="è¦æƒ³å®ç°è‡ªå®šä¹‰è§†å›¾æ§åˆ¶å™¨è½¬åœºæ•ˆæœï¼Œéœ€è¦å®ç° UINavigationControllerDelegate åè®®ã€‚"></a>è¦æƒ³å®ç°è‡ªå®šä¹‰è§†å›¾æ§åˆ¶å™¨è½¬åœºæ•ˆæœï¼Œéœ€è¦å®ç° <code>UINavigationControllerDelegate</code> åè®®ã€‚</h4><p>åœ¨ <strong>UINavigationController</strong> å®ä¾‹å¯¹è±¡ä¸­å£°æ˜æŸä¸ªç±»ï¼ˆ<code>HQLNavControllerDelegate</code>ï¼‰å®ç°äº†<code>UINavigationControllerDelegate</code> åè®®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;HQLNavigationController.h&quot;</span><br><span class="line">#import &quot;HQLNavControllerDelegate.h&quot;</span><br><span class="line"></span><br><span class="line">@interface HQLNavigationController () &#123;</span><br><span class="line">    id&lt;UINavigationControllerDelegate&gt; _navDelegate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation HQLNavigationController</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithCoder:(NSCoder *)aDecoder &#123;</span><br><span class="line">    self = [super initWithCoder:aDecoder];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        _navDelegate = [HQLNavControllerDelegate new];</span><br><span class="line">        self.delegate = _navDelegate;</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸Šé¢ä»£ç ä¸­æŠŠå®ç°è½¬åœºæ•ˆæœçš„åè®®æ–¹æ³•å°è£…æˆäº†ä¸€ä¸ªç±»HQLNavControllerDelegateï¼š"><a href="#ä¸Šé¢ä»£ç ä¸­æŠŠå®ç°è½¬åœºæ•ˆæœçš„åè®®æ–¹æ³•å°è£…æˆäº†ä¸€ä¸ªç±»HQLNavControllerDelegateï¼š" class="headerlink" title="ä¸Šé¢ä»£ç ä¸­æŠŠå®ç°è½¬åœºæ•ˆæœçš„åè®®æ–¹æ³•å°è£…æˆäº†ä¸€ä¸ªç±»HQLNavControllerDelegateï¼š"></a>ä¸Šé¢ä»£ç ä¸­æŠŠå®ç°è½¬åœºæ•ˆæœçš„åè®®æ–¹æ³•å°è£…æˆäº†ä¸€ä¸ªç±»<code>HQLNavControllerDelegate</code>ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// ****************************************************</span><br><span class="line">//  HQLNavControllerDelegate.h</span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface HQLNavControllerDelegate : NSObject &lt;UINavigationControllerDelegate&gt;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ****************************************************</span><br><span class="line">//  HQLNavControllerDelegate.m</span><br><span class="line">#import &quot;HQLNavControllerDelegate.h&quot;</span><br><span class="line">#import &quot;HQLFadeTransition.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation HQLNavControllerDelegate</span><br><span class="line"></span><br><span class="line">- (nullable id &lt;UIViewControllerAnimatedTransitioning&gt;)navigationController:(UINavigationController *)navigationController</span><br><span class="line">                                            animationControllerForOperation:(UINavigationControllerOperation)operation</span><br><span class="line">                                                         fromViewController:(UIViewController *)fromVC</span><br><span class="line">                                                           toViewController:(UIViewController *)toVC&#123;</span><br><span class="line">    return [HQLFadeTransition new];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h4 id="è€Œåœ¨-HQLNavControllerDelegate-ç±»ä¸­åˆæŠŠå®ç°è‡ªå®šä¹‰è½¬åœºæ•ˆæœçš„è½¬åœºåŠ¨ç”»å°è£…æˆäº†ä¸€ä¸ªç±»-HQLFadeTransition"><a href="#è€Œåœ¨-HQLNavControllerDelegate-ç±»ä¸­åˆæŠŠå®ç°è‡ªå®šä¹‰è½¬åœºæ•ˆæœçš„è½¬åœºåŠ¨ç”»å°è£…æˆäº†ä¸€ä¸ªç±»-HQLFadeTransition" class="headerlink" title="è€Œåœ¨ HQLNavControllerDelegate ç±»ä¸­åˆæŠŠå®ç°è‡ªå®šä¹‰è½¬åœºæ•ˆæœçš„è½¬åœºåŠ¨ç”»å°è£…æˆäº†ä¸€ä¸ªç±» HQLFadeTransition"></a>è€Œåœ¨ <code>HQLNavControllerDelegate</code> ç±»ä¸­åˆæŠŠå®ç°è‡ªå®šä¹‰è½¬åœºæ•ˆæœçš„è½¬åœºåŠ¨ç”»å°è£…æˆäº†ä¸€ä¸ªç±» <code>HQLFadeTransition</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">// ****************************************************</span><br><span class="line">//  HQLFadeTransition.h</span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface HQLFadeTransition : NSObject &lt;UIViewControllerAnimatedTransitioning&gt;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">// ****************************************************</span><br><span class="line">//  HQLFadeTransition.m</span><br><span class="line">#import &quot;HQLFadeTransition.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation HQLFadeTransition</span><br><span class="line"></span><br><span class="line">// @required æ–¹æ³•ï¼šè¿”å›åŠ¨ç”»çš„æ—¶é•¿</span><br><span class="line">- (NSTimeInterval)transitionDuration:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext &#123;</span><br><span class="line">    return 2.0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// @required æ–¹æ³•ï¼šå®ç°è§†å›¾æ§åˆ¶å™¨ä¹‹é—´çš„è½¬åœºæ•ˆæœ</span><br><span class="line">- (void)animateTransition:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext &#123;</span><br><span class="line">    </span><br><span class="line">    // 1ï¸âƒ£ viewControllerForKey:è·å–ä¸è½¬åœºç›¸å…³çš„ä¸¤ä¸ªè§†å›¾æ§åˆ¶å™¨</span><br><span class="line">    // UITransitionContextFromViewControllerKey</span><br><span class="line">    UIViewController *fromVC = [transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];</span><br><span class="line">    // UITransitionContextToViewControllerKey</span><br><span class="line">    UIViewController *toVC = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];</span><br><span class="line">    </span><br><span class="line">    // 2ï¸âƒ£ containerView - åŠ¨ç”»å‘ç”Ÿçš„å®¹å™¨è§†å›¾</span><br><span class="line">    UIView *containerView = [transitionContext containerView];</span><br><span class="line">    </span><br><span class="line">    // 3ï¸âƒ£ å°†ä¸¤ä¸ªè§†å›¾æ§åˆ¶å™¨çš„å­è§†å›¾æ·»åŠ åˆ°å®¹å™¨è§†å›¾</span><br><span class="line">    [containerView addSubview:fromVC.view];</span><br><span class="line">    [containerView addSubview:toVC.view];</span><br><span class="line">    // 4ï¸âƒ£ å°†è¦è½¬æ¢åˆ°çš„é‚£ä¸ªè§†å›¾è®¾ç½®ä¸ºé€æ˜</span><br><span class="line">    toVC.view.alpha = 0.0;</span><br><span class="line">    </span><br><span class="line">    // 5ï¸âƒ£ æ‰§è¡ŒåŠ¨ç”»</span><br><span class="line">    [UIView animateWithDuration:[self transitionDuration:transitionContext]</span><br><span class="line">                          delay:0</span><br><span class="line">                        options:0</span><br><span class="line">                     animations:^&#123;</span><br><span class="line">                         // åŠ¨ç”»æ•ˆæœ</span><br><span class="line">                         toVC.view.alpha = 1.f;</span><br><span class="line">                     &#125;</span><br><span class="line">                     completion:^(BOOL finished) &#123;</span><br><span class="line">                         // ç§»é™¤æ—§è§†å›¾æ§åˆ¶å™¨è§†å›¾</span><br><span class="line">                         [fromVC.view removeFromSuperview];</span><br><span class="line">                         // å‘Šè¯‰ transitionContext ä¸Šä¸‹æ–‡ï¼ŒåŠ¨ç”»å®Œæˆå•¦!</span><br><span class="line">                         [transitionContext completeTransition:YES];</span><br><span class="line">                     &#125;];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è½¬æ¢å®Œæˆåè°ƒç”¨</span><br><span class="line">- (void)animationEnded:(BOOL) transitionCompleted &#123;</span><br><span class="line">    NSLog(@&quot;Transition Completed!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The end.</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/12/å¤©å¤©å“å°iOS7ç”œç‚¹ Day9ï¼šDevice Identification/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/12/å¤©å¤©å“å°iOS7ç”œç‚¹ Day9ï¼šDevice Identification/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day9ï¼šDevice Identification</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-12 10:24:00" itemprop="dateCreated datePublished" datetime="2017-09-12T10:24:00+08:00">2017-09-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 14:26:32" itemprop="dateModified" datetime="2019-04-17T14:26:32+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/12/å¤©å¤©å“å°iOS7ç”œç‚¹ Day9ï¼šDevice Identification/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day9ï¼šDevice Identification">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
<li><a href="http://blog.kingiol.com/2014/01/10/ios7-day-by-day-day9-device-identification/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 9 :: Device Identification</a></li>
</ul>
<h3 id="Vendor-Identification"><a href="#Vendor-Identification" class="headerlink" title="Vendor Identification"></a>Vendor Identification</h3><p><code>UIDevice</code>ä¸­çš„<code>identifierForVendor</code>æ–¹æ³•æ˜¯æœ€æ¥è¿‘æ›¿ä»£<code>uniqueIdentifier</code>çš„å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒè¿”å›<code>NSUUID</code>ã€‚åœ¨ç›¸åŒçš„è®¾å¤‡ä¸­ç›¸åŒä¾›åº”å•†çš„appå…±äº«ä¸€ä¸ªUUIDã€‚ä¸åŒçš„ä¾›åº”å•†åœ¨åŒä¸€ä¸ªè®¾å¤‡ä¸Šé¢å°†ä¼šè¿”å›ä¸åŒçš„<code>identifierForVendor</code>å€¼ï¼Œå°±åƒç›¸åŒä¾›åº”å•†åœ¨ä¸åŒè®¾å¤‡ä¸Šé¢ä¸€æ ·ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œè¿™ä¸ªå€¼æä¾›äº†å’ŒåŸæ¥ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œè€Œä¸”æ²¡æœ‰ç”¨æˆ·éšç§çš„é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯ç¾ä¸­ä¸è¶³çš„æ˜¯<strong>å¦‚æœç”¨å¸è½½äº†ä¾›åº”å•†ä¸‹é¢æ‰€æœ‰çš„appï¼Œè¿™ä¸ªidå°±ä¼šè¢«é”€æ¯ï¼Œé‡æ–°å®‰è£…ä¹‹åå°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ä¾›åº”å•†IDã€‚</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString *identifeir = [[[UIDevice currentDevice] identifierForVendor] UUIDString];</span><br></pre></td></tr></table></figure>
<h3 id="Advertising-Identification"><a href="#Advertising-Identification" class="headerlink" title="Advertising Identification"></a>Advertising Identification</h3><p><code>ADSupprt</code>æ¨¡å—åŒ…å«äº†<code>ASIdentifierManager</code>ç±»ï¼Œå®ƒæœ‰ä¸€ä¸ª<code>advertisingIdentifier</code>æ–¹æ³•ã€‚å®ƒè¿”å›ä¸€ä¸ª<code>NSUUID</code>å¯ä»¥ç”¨æ¥è¾¾åˆ°è¿½è¸ªå¹¿å‘Šçš„ç›®çš„ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•<code>avertisingTrackingEnable</code>.å®ƒè¿”å›ä¸€ä¸ªBOOLç±»å‹çš„æ•°æ®ç”¨æ¥æŒ‡å®šæ˜¯å¦ç”¨æˆ·å…è®¸è¿›è¡Œå¹¿å‘Šè¿½è¸ªã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@import AdSupport;</span><br><span class="line">// ...</span><br><span class="line"></span><br><span class="line">NSString *identifier = [[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString];</span><br><span class="line"></span><br><span class="line">NSString *isEnabled = [[ASIdentifierManager sharedManager] isAdvertisingTrackingEnabled] ? @&quot;YES&quot; : @&quot;NO&quot;;</span><br></pre></td></tr></table></figure>
<h3 id="Network-Identification"><a href="#Network-Identification" class="headerlink" title="Network Identification"></a>Network Identification</h3><p>å½“ <code>uniqueIdentifier</code> è¢«å¼ƒç”¨äº†ï¼Œé€šè¿‡ä½¿ç”¨MACåœ°å€å˜å¾—å¾ˆæµè¡Œã€‚ä¸€ä¸ªMACåœ°å€æ˜¯æ’å®šä¸å˜çš„ä¸”å”¯ä¸€çš„ï¼Œå¯ä»¥ç”¨æ¥è·Ÿè¸ªç”¨æˆ·ã€‚ä½†æ˜¯åœ¨iOS7ä¸­Appleå¯¹è¿™ä¸ªä¹Ÿæ·»åŠ äº†é™åˆ¶ï¼Œæ‰€ä»¥å®é™…è¿”å›çš„MACåœ°å€ä¸º: 02:00:00:00:00:00. å…³é—­è¿™ä¸ªâ€œæ¼æ´â€ï¼Œå°†ä¼šæ¨åŠ¨å¼€å‘è€…è¿ç”¨Appleæä¾›çš„ä¼˜å…ˆæ–¹æ³•æ¥è¿›è¡Œè·å¾—è®¾å¤‡æ ‡è¯†.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;sys/socket.h&gt;</span><br><span class="line">#include &lt;sys/sysctl.h&gt;</span><br><span class="line">#include &lt;net/if.h&gt;</span><br><span class="line">#include &lt;net/if_dl.h&gt;</span><br><span class="line"></span><br><span class="line">//...</span><br><span class="line"></span><br><span class="line">- (NSString *)getMacAddress &#123;</span><br><span class="line">    int                 mgmtInfoBase[6];</span><br><span class="line">    char                *msgBuffer = NULL;</span><br><span class="line">    NSString            *errorFlag = NULL;</span><br><span class="line">    size_t              length;</span><br><span class="line">    </span><br><span class="line">    // Setup the management Information Base (mib)</span><br><span class="line">    mgmtInfoBase[0] = CTL_NET;        // Request network subsystem</span><br><span class="line">    mgmtInfoBase[1] = AF_ROUTE;       // Routing table info</span><br><span class="line">    mgmtInfoBase[2] = 0;</span><br><span class="line">    mgmtInfoBase[3] = AF_LINK;        // Request link layer information</span><br><span class="line">    mgmtInfoBase[4] = NET_RT_IFLIST;  // Request all configured interfaces</span><br><span class="line">    </span><br><span class="line">    // With all configured interfaces requested, get handle index</span><br><span class="line">    if ((mgmtInfoBase[5] = if_nametoindex(&quot;en0&quot;)) == 0)</span><br><span class="line">        errorFlag = @&quot;if_nametoindex failure&quot;;</span><br><span class="line">    // Get the size of the data available (store in len)</span><br><span class="line">    else if (sysctl(mgmtInfoBase, 6, NULL, &amp;length, NULL, 0) &lt; 0)</span><br><span class="line">        errorFlag = @&quot;sysctl mgmtInfoBase failure&quot;;</span><br><span class="line">    // Alloc memory based on above call</span><br><span class="line">    else if ((msgBuffer = malloc(length)) == NULL)</span><br><span class="line">        errorFlag = @&quot;buffer allocation failure&quot;;</span><br><span class="line">    // Get system information, store in buffer</span><br><span class="line">    else if (sysctl(mgmtInfoBase, 6, msgBuffer, &amp;length, NULL, 0) &lt; 0)</span><br><span class="line">    &#123;</span><br><span class="line">        free(msgBuffer);</span><br><span class="line">        errorFlag = @&quot;sysctl msgBuffer failure&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        // Map msgbuffer to interface message structure</span><br><span class="line">        struct if_msghdr *interfaceMsgStruct = (struct if_msghdr *) msgBuffer;</span><br><span class="line">        </span><br><span class="line">        // Map to link-level socket structure</span><br><span class="line">        struct sockaddr_dl *socketStruct = (struct sockaddr_dl *) (interfaceMsgStruct + 1);</span><br><span class="line">        </span><br><span class="line">        // Copy link layer address data in socket structure to an array</span><br><span class="line">        unsigned char macAddress[6];</span><br><span class="line">        memcpy(&amp;macAddress, socketStruct-&gt;sdl_data + socketStruct-&gt;sdl_nlen, 6);</span><br><span class="line">        </span><br><span class="line">        // Read from char array into a string object, into traditional Mac address format</span><br><span class="line">        NSString *macAddressString = [NSString stringWithFormat:@&quot;%02X:%02X:%02X:%02X:%02X:%02X&quot;,</span><br><span class="line">                                      macAddress[0], macAddress[1], macAddress[2], macAddress[3], macAddress[4], macAddress[5]];</span><br><span class="line">        </span><br><span class="line">        // Release the buffer memory</span><br><span class="line">        free(msgBuffer);</span><br><span class="line">        </span><br><span class="line">        return macAddressString;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return errorFlag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…³äº-identity"><a href="#å…³äº-identity" class="headerlink" title="å…³äº identity"></a>å…³äº identity</h3><p>å…³äº UUID ï¼ˆè®¾å¤‡å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰æˆ‘ä¹‹å‰ä¹Ÿæœ‰ç ”ç©¶è¿‡ï¼Œå¯ä»¥æˆ³è¿™é‡Œï¼š</p>
<p><a href="http://www.jianshu.com/p/40b9f8ec1c78" target="_blank" rel="noopener">iOSâ€”è·å–è®¾å¤‡å‹å·å’ŒAppç‰ˆæœ¬å·ç­‰ä¿¡æ¯</a></p>
<p>å¾—åˆ°çš„æœ€ç»ˆæ–¹æ¡ˆæ˜¯ï¼š <code>UIDevice</code>ä¸­çš„<code>identifierForVendor</code>æ–¹æ³•é…åˆ keychainï¼ˆé’¥åŒ™ä¸²ï¼‰å­˜å‚¨æ ‡è¯†ç¬¦ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/08/å¤©å¤©å“å°iOS7ç”œç‚¹ Day7ï¼šTaking Snapshots of UIViews/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/08/å¤©å¤©å“å°iOS7ç”œç‚¹ Day7ï¼šTaking Snapshots of UIViews/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day7ï¼šTaking Snapshots of UIViews</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-08 17:31:00" itemprop="dateCreated datePublished" datetime="2017-09-08T17:31:00+08:00">2017-09-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-17 14:27:53" itemprop="dateModified" datetime="2019-04-17T14:27:53+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/08/å¤©å¤©å“å°iOS7ç”œç‚¹ Day7ï¼šTaking Snapshots of UIViews/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day7ï¼šTaking Snapshots of UIViews">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>è·å–UIViewå¯¹è±¡çš„å¿«ç…§</p>
</blockquote>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
</ul>
<ul>
<li><a href="http://blog.kingiol.com/2014/01/09/ios7-day-by-day-day7-taking-snapshots-of-uiviews/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 7 :: Taking Snapshots of UIViews</a></li>
</ul>
<h2 id="APIæ–¹æ³•"><a href="#APIæ–¹æ³•" class="headerlink" title="APIæ–¹æ³•"></a>APIæ–¹æ³•</h2><h3 id="UIScreen"><a href="#UIScreen" class="headerlink" title="UIScreen"></a>UIScreen</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- <span class="params">(UIView *)</span>snapshotViewAfterScreenUpdates:<span class="params">(BOOL)</span>afterUpdates;</span><br></pre></td></tr></table></figure>
<h3 id="UIView"><a href="#UIView" class="headerlink" title="UIView"></a>UIView</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å½“å‰æ–‡æœ¬çš„å¿«ç…§è§†å›¾</span></span><br><span class="line"><span class="selector-tag">-</span> (UIView *)<span class="selector-tag">snapshotViewAfterScreenUpdates</span><span class="selector-pseudo">:(BOOL)afterUpdates</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™å®šä¸€ä¸ªå¯ä¼¸ç¼©æ’å€¼ï¼Œè¿”å›åŸºäºå½“å‰è§†å›¾çš„æŒ‡å®šå†…å®¹çš„å¿«ç…§è§†å›¾ï¼Œ</span></span><br><span class="line"><span class="selector-tag">-</span> (UIView *)<span class="selector-tag">resizableSnapshotViewFromRect</span><span class="selector-pseudo">:(CGRect)rect</span> <span class="selector-tag">afterScreenUpdates</span><span class="selector-pseudo">:(BOOL)afterUpdates</span> <span class="selector-tag">withCapInsets</span><span class="selector-pseudo">:(UIEdgeInsets)capInsets</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å®Œæ•´è§†å›¾å±‚æ¬¡ç»“æ„çš„å¿«ç…§å‘ˆç°åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­ã€‚</span></span><br><span class="line"><span class="selector-tag">-</span> (BOOL)<span class="selector-tag">drawViewHierarchyInRect</span><span class="selector-pseudo">:(CGRect)rect</span> <span class="selector-tag">afterScreenUpdates</span><span class="selector-pseudo">:(BOOL)afterUpdates</span>;</span><br></pre></td></tr></table></figure>
<h2 id="Demo-ç¤ºä¾‹"><a href="#Demo-ç¤ºä¾‹" class="headerlink" title="Demo ç¤ºä¾‹"></a>Demo ç¤ºä¾‹</h2><h3 id="Snapshotting-for-Animation-åŠ¨ç”»å¿«ç…§"><a href="#Snapshotting-for-Animation-åŠ¨ç”»å¿«ç…§" class="headerlink" title="Snapshotting for Animation - åŠ¨ç”»å¿«ç…§"></a>Snapshotting for Animation - åŠ¨ç”»å¿«ç…§</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-7b49a1cfa02d24b4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>è‡ªå®šä¹‰è§†å›¾ç»˜åˆ¶æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// ç”Ÿæˆæ—‹è½¬è§†å›¾</span><br><span class="line">- (void)generateRotations &#123;</span><br><span class="line">    for (CGFloat angle = 0; angle &lt; 2 * M_PI; angle += M_PI / 20.0) &#123;</span><br><span class="line">        UIView *newView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 250)];</span><br><span class="line">        newView.center = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));</span><br><span class="line">        newView.layer.borderColor = [UIColor grayColor].CGColor;</span><br><span class="line">        newView.layer.borderWidth = 1;</span><br><span class="line">        newView.backgroundColor = [UIColor colorWithWhite:0.8 alpha:0.4];</span><br><span class="line">        newView.transform = CGAffineTransformMakeRotation(angle);</span><br><span class="line">        newView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;</span><br><span class="line">        [self addSubview:newView];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°è®¾ç½®æ‰€æœ‰å­è§†å›¾çš„èƒŒæ™¯è‰²:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (void)recolorSubviews:(UIColor *)newColor &#123;</span><br><span class="line">    for (UIView *subview in self.subviews) &#123;</span><br><span class="line">        subview.backgroundColor = newColor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨åŠ¨ç”»ä¸­ä½¿ç”¨UIViewå¿«ç…§ä»¥ç®€åŒ–å¤æ‚çš„è§†å›¾"><a href="#åœ¨åŠ¨ç”»ä¸­ä½¿ç”¨UIViewå¿«ç…§ä»¥ç®€åŒ–å¤æ‚çš„è§†å›¾" class="headerlink" title="åœ¨åŠ¨ç”»ä¸­ä½¿ç”¨UIViewå¿«ç…§ä»¥ç®€åŒ–å¤æ‚çš„è§†å›¾"></a>åœ¨åŠ¨ç”»ä¸­ä½¿ç”¨UIViewå¿«ç…§ä»¥ç®€åŒ–å¤æ‚çš„è§†å›¾</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line">#import &quot;HQLRotatingViews.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ViewController ()</span><br><span class="line">@property (weak, nonatomic) IBOutlet UIView *containerView;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController &#123;</span><br><span class="line">    HQLRotatingViews *_complexView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // Do any additional setup after loading the view, typically from a nib.</span><br><span class="line">    [self createComplexView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Utility methods</span><br><span class="line"></span><br><span class="line">// å‘å®¹å™¨è§†å›¾ä¸­æ·»åŠ æ—‹è½¬è§†å›¾</span><br><span class="line">- (void)createComplexView &#123;</span><br><span class="line">    _complexView = [[HQLRotatingViews alloc] initWithFrame:self.view.bounds];</span><br><span class="line">    [self.containerView addSubview:_complexView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)animateViewAwayAndReset:(UIView *)view &#123;</span><br><span class="line">    [UIView animateWithDuration:2.0</span><br><span class="line">                     animations:^&#123;</span><br><span class="line">                         view.bounds = CGRectZero;</span><br><span class="line">                     &#125;</span><br><span class="line">                     completion:^(BOOL finished) &#123;</span><br><span class="line">                         // åŠ¨ç”»å®Œæˆååˆ é™¤è§†å›¾å¹¶åˆ›å»ºæ–°è§†å›¾</span><br><span class="line">                         [view removeFromSuperview];</span><br><span class="line">                         [self performSelector:@selector(createComplexView)</span><br><span class="line">                                    withObject:nil</span><br><span class="line">                                    afterDelay:1];</span><br><span class="line">                     &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - IBActions</span><br><span class="line"></span><br><span class="line">/** </span><br><span class="line"> è¿™ä¸¤ä¸ªæ–¹æ³•æ¼”ç¤ºäº†å¦‚ä½•åœ¨åŠ¨ç”»ä¸­ä½¿ç”¨UIViewå¿«ç…§ä»¥ç®€åŒ–å¤æ‚çš„è§†å›¾</span><br><span class="line"> */</span><br><span class="line">// â‡ï¸ Animate æŒ‰é’®â€”â€”ç›´æ¥å¯¹ UIView è¿›è¡Œæ—‹è½¬</span><br><span class="line">- (IBAction)handleAnimate:(id)sender &#123;</span><br><span class="line">    [self animateViewAwayAndReset:_complexView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// â‡ï¸ ç”Ÿæˆå½“å‰ UIView çš„å¿«ç…§ä¹‹åï¼Œå¯¹å¿«ç…§è¿›è¡Œæ—‹è½¬</span><br><span class="line">- (IBAction)handleSnapshot:(id)sender &#123;</span><br><span class="line">    // åˆ›å»ºå¤åˆè§†å›¾çš„å¿«ç…§</span><br><span class="line">    UIView *snapshotView = [_complexView snapshotViewAfterScreenUpdates:NO];</span><br><span class="line">    [self.containerView addSubview:snapshotView];</span><br><span class="line">    [_complexView removeFromSuperview];</span><br><span class="line">    [self animateViewAwayAndReset:snapshotView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¤ºä¾‹ä¸€ï¼šAnimate-æŒ‰é’®â€”â€”ç›´æ¥å¯¹-UIView-è¿›è¡Œæ—‹è½¬"><a href="#ç¤ºä¾‹ä¸€ï¼šAnimate-æŒ‰é’®â€”â€”ç›´æ¥å¯¹-UIView-è¿›è¡Œæ—‹è½¬" class="headerlink" title="ç¤ºä¾‹ä¸€ï¼šAnimate æŒ‰é’®â€”â€”ç›´æ¥å¯¹ UIView è¿›è¡Œæ—‹è½¬"></a>ç¤ºä¾‹ä¸€ï¼šAnimate æŒ‰é’®â€”â€”ç›´æ¥å¯¹ UIView è¿›è¡Œæ—‹è½¬</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-9434f6d5613c3eeb.gif?imageMogr2/auto-orient/strip" alt></p>
<h4 id="ç¤ºä¾‹äºŒï¼šç”Ÿæˆå½“å‰-UIView-çš„å¿«ç…§ä¹‹åï¼Œå¯¹å¿«ç…§è¿›è¡Œæ—‹è½¬"><a href="#ç¤ºä¾‹äºŒï¼šç”Ÿæˆå½“å‰-UIView-çš„å¿«ç…§ä¹‹åï¼Œå¯¹å¿«ç…§è¿›è¡Œæ—‹è½¬" class="headerlink" title="ç¤ºä¾‹äºŒï¼šç”Ÿæˆå½“å‰ UIView çš„å¿«ç…§ä¹‹åï¼Œå¯¹å¿«ç…§è¿›è¡Œæ—‹è½¬"></a>ç¤ºä¾‹äºŒï¼šç”Ÿæˆå½“å‰ UIView çš„å¿«ç…§ä¹‹åï¼Œå¯¹å¿«ç…§è¿›è¡Œæ—‹è½¬</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-d98f3ab67eb52dfd.gif?imageMogr2/auto-orient/strip" alt></p>
<p>å¿«ç…§æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (nullable UIView *)snapshotViewAfterScreenUpdates:(BOOL)afterUpdates;</span><br></pre></td></tr></table></figure>
<h3 id="æµ‹è¯•å¿«ç…§æ–¹æ³•ä¸­çš„-BOOL-å‚æ•°"><a href="#æµ‹è¯•å¿«ç…§æ–¹æ³•ä¸­çš„-BOOL-å‚æ•°" class="headerlink" title="æµ‹è¯•å¿«ç…§æ–¹æ³•ä¸­çš„ BOOL å‚æ•°"></a>æµ‹è¯•å¿«ç…§æ–¹æ³•ä¸­çš„ BOOL å‚æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> è¿™ä¸¤ç§æ–¹æ³•æ¯”è¾ƒäº†æ˜¯å¦å…è®¸å±å¹•æ›´æ–°çš„åŒºåˆ«</span><br><span class="line"> - (nullable UIView *)snapshotViewAfterScreenUpdates:(BOOL)afterUpdates;</span><br><span class="line"> */</span><br><span class="line">- (IBAction)handlePreUpdateSnapshot:(id)sender &#123;</span><br><span class="line">    // æ›´æ–°è§†å›¾</span><br><span class="line">    [_complexView recolorSubviews:[[UIColor redColor] colorWithAlphaComponent:0.3]];</span><br><span class="line">    // åˆ›å»ºå¿«ç…§ï¼Œä¸ç­‰å¾…æ›´æ”¹è¢«åº”ç”¨ã€‚</span><br><span class="line">    UIView *snapshotView = [_complexView snapshotViewAfterScreenUpdates:NO];</span><br><span class="line">    [self.containerView addSubview:snapshotView];</span><br><span class="line">    [_complexView removeFromSuperview];</span><br><span class="line">    [self animateViewAwayAndReset:snapshotView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (IBAction)handlePostUpdateSnapshot:(id)sender &#123;</span><br><span class="line">    // æ›´æ–°è§†å›¾</span><br><span class="line">    [_complexView recolorSubviews:[[UIColor redColor] colorWithAlphaComponent:0.3]];</span><br><span class="line">    // åˆ›å»ºå¿«ç…§ï¼Œç­‰å¾…æ¸²æŸ“å®Œæˆã€‚</span><br><span class="line">    UIView *snapshotView = [_complexView snapshotViewAfterScreenUpdates:YES];</span><br><span class="line">    [self.containerView addSubview:snapshotView];</span><br><span class="line">    [_complexView removeFromSuperview];</span><br><span class="line">    [self animateViewAwayAndReset:snapshotView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Pre-æŒ‰é’®â€”â€”è®¾ç½®ä¸º-NO"><a href="#Pre-æŒ‰é’®â€”â€”è®¾ç½®ä¸º-NO" class="headerlink" title="Pre æŒ‰é’®â€”â€”è®¾ç½®ä¸º NO"></a>Pre æŒ‰é’®â€”â€”è®¾ç½®ä¸º NO</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-ee922968161e66d2.gif?imageMogr2/auto-orient/strip" alt></p>
<h4 id="Post-æŒ‰é’®â€”â€”è®¾ç½®ä¸º-YES"><a href="#Post-æŒ‰é’®â€”â€”è®¾ç½®ä¸º-YES" class="headerlink" title="Post æŒ‰é’®â€”â€”è®¾ç½®ä¸º YES"></a>Post æŒ‰é’®â€”â€”è®¾ç½®ä¸º YES</h4><p><img src="http://upload-images.jianshu.io/upload_images/2648731-d3f6cffc78a9039e.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="ç”Ÿæˆå¿«ç…§å›¾ç‰‡"><a href="#ç”Ÿæˆå¿«ç…§å›¾ç‰‡" class="headerlink" title="ç”Ÿæˆå¿«ç…§å›¾ç‰‡"></a>ç”Ÿæˆå¿«ç…§å›¾ç‰‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> æ­¤æ–¹æ³•æ¼”ç¤ºäº†å¦‚ä½•å‘UIViewå¿«ç…§æ·»åŠ å›¾åƒæ•ˆæœ</span><br><span class="line"> */</span><br><span class="line">- (IBAction)handleImageSnapshot:(id)sender &#123;</span><br><span class="line">    // åˆ›å»ºä¸€ä¸ªå›¾åƒä¸Šä¸‹æ–‡ - å¤åˆè§†å›¾çš„å¤§å°å’Œç¼©æ”¾æ¯”ä¾‹</span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(_complexView.bounds.size, NO, 0.0);</span><br><span class="line">    // å°†å¿«ç…§æ¸²æŸ“åˆ°å›¾åƒä¸Šä¸‹æ–‡ä¸­</span><br><span class="line">    [_complexView drawViewHierarchyInRect:_complexView.bounds afterScreenUpdates:NO];</span><br><span class="line">    </span><br><span class="line">    // ä»å›¾åƒä¸Šä¸‹æ–‡ä¸­æŠ“å–å›¾åƒ</span><br><span class="line">    UIImage *complexViewImage = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    // ç»“æŸä½¿ç”¨å›¾åƒä¸Šä¸‹æ–‡</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line">    </span><br><span class="line">    // åœ¨ç”Ÿæˆå¿«ç…§ä¹‹å‰è®©å½“å‰çš„è§†å›¾æ¨¡ç³ŠåŒ–</span><br><span class="line">    UIImageView *iv = [[UIImageView alloc] initWithImage:[self applyBlurToImage:complexViewImage]];</span><br><span class="line">    iv.center = _complexView.center;</span><br><span class="line">    [self.containerView addSubview:iv];</span><br><span class="line">    [_complexView removeFromSuperview];</span><br><span class="line">    [self performSelector:@selector(animateViewAwayAndReset:)</span><br><span class="line">               withObject:iv</span><br><span class="line">               afterDelay:1.0];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ¨¡ç³ŠåŒ–UIImage</span><br><span class="line">- (UIImage *)applyBlurToImage:(UIImage *)image &#123;</span><br><span class="line">    CIContext *context = [CIContext contextWithOptions:nil];</span><br><span class="line">    CIImage *ci_image = [CIImage imageWithCGImage:image.CGImage];</span><br><span class="line">    CIFilter *filter = [CIFilter filterWithName:@&quot;CIGaussianBlur&quot;];</span><br><span class="line">    [filter setValue:ci_image forKey:kCIInputImageKey];</span><br><span class="line">    [filter setValue:@5 forKey:kCIInputRadiusKey];</span><br><span class="line">    CIImage *result = [filter valueForKey:kCIOutputImageKey];</span><br><span class="line">    CGImageRef cgImage = [context createCGImage:result fromRect:[result extent]];</span><br><span class="line">    return [UIImage imageWithCGImage:cgImage</span><br><span class="line">                               scale:image.scale</span><br><span class="line">                         orientation:image.imageOrientation];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-d5876cc900745051.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="Limitaions-å±€é™æ€§"><a href="#Limitaions-å±€é™æ€§" class="headerlink" title="Limitaions - å±€é™æ€§"></a>Limitaions - å±€é™æ€§</h3><p>åˆ›å»ºçš„å¿«ç…§å¿…é¡»åœ¨å±å¹•èŒƒå›´ä¹‹å†…</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/09/07/å¤©å¤©å“å°iOS7ç”œç‚¹ Day6ï¼šTint Color/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
      <meta itemprop="description" content="æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç‹¬æœ¨èˆŸçš„æœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/09/07/å¤©å¤©å“å°iOS7ç”œç‚¹ Day6ï¼šTint Color/" class="post-title-link" itemprop="url">å¤©å¤©å“å°iOS7ç”œç‚¹ Day6ï¼šTint Color</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-07 16:00:00" itemprop="dateCreated datePublished" datetime="2017-09-07T16:00:00+08:00">2017-09-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-04-18 01:04:38" itemprop="dateModified" datetime="2019-04-18T01:04:38+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/09/07/å¤©å¤©å“å°iOS7ç”œç‚¹ Day6ï¼šTint Color/" class="leancloud_visitors" data-flag-title="å¤©å¤©å“å°iOS7ç”œç‚¹ Day6ï¼šTint Color">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>å­¦ä¹ ä½¿ç”¨ <code>tintColor</code> å±æ€§ </p>
</blockquote>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://github.com/ShinobiControls/iOS7-day-by-day" target="_blank" rel="noopener">GitHub æºç ï¼šshinobicontrols/iOS7-day-by-day</a></li>
</ul>
<ul>
<li><a href="http://blog.kingiol.com/2014/01/09/ios7-day-by-day-day6-tint-color/" target="_blank" rel="noopener">å¤©å¤©å“å°iOS7ç”œç‚¹ :: Day 6 :: Tint Color</a></li>
</ul>
<h3 id="tintColor-å±æ€§"><a href="#tintColor-å±æ€§" class="headerlink" title="tintColor å±æ€§"></a>tintColor å±æ€§</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@property(null_resettable, nonatomic, strong) UIColor *tintColor NS_AVAILABLE_IOS(7_0);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>tintColor</code> å±æ€§æ˜¯ iOS 7.0 æ–°å¢å±æ€§ï¼Œè¢«ä½¿ç”¨åœ¨<code>UIView</code>ä¸­ä»¥æ”¹å˜åº”ç”¨ç¨‹åºçš„å¤–è§‚ï¼ˆæˆ‘çš„ç†è§£æ˜¯ï¼Œç±»ä¼¼äºç»™æ‰€æœ‰ UI æ§ä»¶ç»Ÿä¸€è®¾ç½®ä¸»é¢˜è‰²æ•ˆæœï¼‰ï¼›</li>
<li>è¯¥å±æ€§æ˜¯ <code>UIColor</code> ç±»å‹ï¼Œé»˜è®¤ä¸ºç³»ç»Ÿé¢œè‰²ï¼ˆè“è‰²ï¼‰ï¼›</li>
<li>å®ƒå°†ä¼šè¿ç”¨çˆ¶è§†å›¾å±‚æ¬¡çš„é¢œè‰²æ¥è¿›è¡Œç€è‰²ã€‚å¯ä»¥é€šè¿‡è®¾ç½® root view controller çš„ <code>tintColor</code> æ¥æ”¹å˜ç³»ç»Ÿæ•´ä½“çš„é¢œè‰²ã€‚</li>
</ul>
<h3 id="ç‰¹ç‚¹ï¼šç»§æ‰¿ã€é‡å†™ã€ä¼ æ’­ã€‚"><a href="#ç‰¹ç‚¹ï¼šç»§æ‰¿ã€é‡å†™ã€ä¼ æ’­ã€‚" class="headerlink" title="ç‰¹ç‚¹ï¼šç»§æ‰¿ã€é‡å†™ã€ä¼ æ’­ã€‚"></a>ç‰¹ç‚¹ï¼š<strong>ç»§æ‰¿</strong>ã€<strong>é‡å†™</strong>ã€<strong>ä¼ æ’­</strong>ã€‚</h3><blockquote>
<ul>
<li><p><strong>ç»§æ‰¿</strong>ï¼šåªè¦ä¸€ä¸ª <strong>UIView</strong> çš„ subview æ²¡æœ‰æ˜ç¡®æŒ‡å®š <code>tintColor</code>ï¼Œé‚£ä¹ˆè¿™ä¸ª <strong>UIView</strong> çš„ <code>tintColor</code> å°±ä¼šè¢«å®ƒçš„ subview æ‰€ç»§æ‰¿ï¼åœ¨ä¸€ä¸ª App ä¸­ï¼Œæœ€é¡¶å±‚çš„ view å°±æ˜¯ windowï¼Œå› æ­¤ï¼Œåªè¦ä¿®æ”¹ window çš„ <code>tintColor</code>ï¼Œé‚£ä¹ˆæ‰€æœ‰ view çš„ <code>tintColor</code> å°±éƒ½ä¼šè·Ÿç€æ”¹å˜ã€‚(è¿™ç§è¯´æ³•å…¶å®å¹¶ä¸ä¸¥è°¨ï¼Œè¯·è€å¿ƒç»§ç»­çœ‹ä¸‹å»^_^)ã€‚</p>
</li>
<li><p><strong>é‡å†™</strong>ï¼šå¦‚æœæ˜ç¡®æŒ‡å®šäº†æŸä¸ª view çš„ <code>tintColor</code>ï¼Œ é‚£ä¹ˆè¿™ä¸ª view å°±ä¸ä¼šç»§æ‰¿å…¶ superview çš„ <code>tintColor</code>ã€‚è€Œä¸”è‡ªæ­¤, è¿™ä¸ª view çš„ subview çš„ <code>tintColor</code> ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>
</li>
<li><p>ä¼ æ’­ï¼šä¸€ä¸ª view çš„ <code>tintColor</code> çš„æ”¹å˜ä¼šç«‹å³å‘ä¸‹ä¼ æ’­, å½±å“å…¶æ‰€æœ‰çš„ subviewï¼Œç›´è‡³å®ƒçš„ä¸€ä¸ª subview æ˜ç¡®æŒ‡å®šäº† <code>tintColor</code> ä¸ºæ­¢ã€‚</p>
<p>â€”â€”<a href="http://www.jianshu.com/p/4bcaf6349133" target="_blank" rel="noopener">UIViewå¹¶æ²¡æƒ³çš„é‚£ä¹ˆç®€å• - tintColoræ­ç§˜</a></p>
</li>
</ul>
</blockquote>
<h3 id="Tint-color-of-existing-iOS-controller-ä½¿ç”¨tint-colorä¸ºiOSä¸­å·²ç»å­˜åœ¨çš„æ§ä»¶è¿›è¡Œç€è‰²"><a href="#Tint-color-of-existing-iOS-controller-ä½¿ç”¨tint-colorä¸ºiOSä¸­å·²ç»å­˜åœ¨çš„æ§ä»¶è¿›è¡Œç€è‰²" class="headerlink" title="Tint color of existing iOS controller - ä½¿ç”¨tint colorä¸ºiOSä¸­å·²ç»å­˜åœ¨çš„æ§ä»¶è¿›è¡Œç€è‰²"></a>Tint color of existing iOS controller - ä½¿ç”¨tint colorä¸ºiOSä¸­å·²ç»å­˜åœ¨çš„æ§ä»¶è¿›è¡Œç€è‰²</h3><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)changeColorHandle:(id)sender &#123;</span><br><span class="line">    // ç”Ÿæˆéšæœºè‰²</span><br><span class="line">    CGFloat hue = ( arc4random() % 256 / 256.0 );</span><br><span class="line">    CGFloat saturation = ( arc4random() % 128 / 256.0 ) + 0.5;</span><br><span class="line">    CGFloat brightness = ( arc4random() % 128 / 256.0 ) + 0.5;</span><br><span class="line">    UIColor *color = [UIColor colorWithHue:hue saturation:saturation brightness:brightness alpha:1];</span><br><span class="line">    // è®¾ç½® tintColor</span><br><span class="line">    self.view.tintColor = color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼šåªè¦ä¿®æ”¹æ ¹è§†å›¾æ§åˆ¶å™¨çš„ <code>tintColor</code> å±æ€§ï¼Œè¯¥é¡µé¢ä¸‹çš„æ‰€æœ‰ UI æ§ä»¶é¢œè‰²éƒ½ä¼šéšä¹‹æ”¹å˜ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-ae94855287241127.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="å…³äº-UIProgressView"><a href="#å…³äº-UIProgressView" class="headerlink" title="å…³äº UIProgressView"></a>å…³äº UIProgressView</h3><p>å‚è€ƒçš„æ–‡ç« ç§° <code>tintColor</code> å±æ€§å¹¶ä¸ä¼šå½±å“ UIProgressViewï¼Œå› ä¸ºå…¶æœ‰ä¸¤ä¸ªæè¿° <code>tintColor</code> çš„å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å¡«å……è¿›åº¦æ¡çš„é¢œè‰²</span><br><span class="line">@property(nonatomic, strong, nullable) UIColor* progressTintColor;</span><br><span class="line">// æœªå¡«å……è¿›åº¦æ¡çš„é¢œè‰²</span><br><span class="line">@property(nonatomic, strong, nullable) UIColor* trackTintColor;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦è¿›è¡Œé¢å¤–è®¾ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (void)updateProgressViewTint &#123;</span><br><span class="line">    self.progressView.progressTintColor = self.view.tintColor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="âœï¸-æ›´æ­£"><a href="#âœï¸-æ›´æ­£" class="headerlink" title="âœï¸ æ›´æ­£"></a>âœï¸ æ›´æ­£</h4><p>æ³¨é‡Šä»¥ä¸Šä»£ç åæµ‹è¯•ï¼Œç»“æœå¹¶ä¸æ˜¯è¿™æ ·ï¼ŒUIProgressView çš„ <code>progressTintColor</code> å€¼æ˜¯ä¼šè·Ÿéš <code>tintColor</code> çš„å˜åŒ–è€Œå˜åŒ–çš„ã€‚</p>
<h3 id="Tint-Dimming-é¢œè‰²å˜æš—"><a href="#Tint-Dimming-é¢œè‰²å˜æš—" class="headerlink" title="Tint Dimming - é¢œè‰²å˜æš—"></a>Tint Dimming - é¢œè‰²å˜æš—</h3><h4 id="UIViewTintAdjustmentMode"><a href="#UIViewTintAdjustmentMode" class="headerlink" title="UIViewTintAdjustmentMode"></a>UIViewTintAdjustmentMode</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, UIViewTintAdjustmentMode) &#123;</span><br><span class="line">    UIViewTintAdjustmentModeAutomatic,</span><br><span class="line">    </span><br><span class="line">    UIViewTintAdjustmentModeNormal,</span><br><span class="line">    UIViewTintAdjustmentModeDimmed,</span><br><span class="line">&#125; NS_ENUM_AVAILABLE_IOS(7_0);</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)dimTintHandle:(id)sender &#123;</span><br><span class="line">    if (self.dimTintSwitch.isOn) &#123;</span><br><span class="line">        self.view.tintAdjustmentMode = UIViewTintAdjustmentModeDimmed;</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        self.view.tintAdjustmentMode = UIViewTintAdjustmentModeNormal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼šè®¾ç½®<code>UIViewTintAdjustmentModeDimmed</code> å±æ€§ä»¥åï¼Œæ‰€æœ‰ UI æ§ä»¶çš„é¢œè‰²ä¼šå˜æš—ï¼Œé€‚åˆæ²‰æµ¸å¼ä½“éªŒçš„åœºæ™¯ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-a1d0b4b0ee48936f.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="Using-tint-color-in-custom-views-ç»™è‡ªå®šä¹‰è§†å›¾è¿›è¡Œç€è‰²"><a href="#Using-tint-color-in-custom-views-ç»™è‡ªå®šä¹‰è§†å›¾è¿›è¡Œç€è‰²" class="headerlink" title="Using tint color in custom views - ç»™è‡ªå®šä¹‰è§†å›¾è¿›è¡Œç€è‰²"></a>Using tint color in custom views - ç»™è‡ªå®šä¹‰è§†å›¾è¿›è¡Œç€è‰²</h3><p>è‡ªå®šä¹‰ UIView å­ç±»éœ€è¦è¦†ç›–ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> The -tintColorDidChange message is sent to appropriate subviews of a view when its tintColor is changed by client code or to subviews in the view hierarchy of a view whose tintColor is implicitly changed when its superview or tintAdjustmentMode changes.</span><br><span class="line"> */</span><br><span class="line">- (void)tintColorDidChange NS_AVAILABLE_IOS(7_0);</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰è§†å›¾ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">//  ***********************************</span><br><span class="line">//  HQLCustomView.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">@interface HQLCustomView : UIView</span><br><span class="line">@end</span><br><span class="line">  </span><br><span class="line">//  ***********************************</span><br><span class="line">//  HQLCustomView.m</span><br><span class="line">#import &quot;HQLCustomView.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation HQLCustomView &#123;</span><br><span class="line">    UIView *_tintColorBlock;</span><br><span class="line">    UILabel *_greyLabel;</span><br><span class="line">    UILabel *_tintColorLabel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (id)initWithCoder:(NSCoder *)aDecoder &#123;</span><br><span class="line">    self = [super initWithCoder:aDecoder];</span><br><span class="line">    if (!self) &#123;</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    self.backgroundColor = [UIColor clearColor];</span><br><span class="line">    [self prepareSubviews];</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)prepareSubviews &#123;</span><br><span class="line">    _tintColorBlock = [[UIView alloc] init];</span><br><span class="line">    _tintColorBlock.backgroundColor = self.tintColor;</span><br><span class="line">    [self addSubview:_tintColorBlock];</span><br><span class="line">    </span><br><span class="line">    _greyLabel = [UILabel new];</span><br><span class="line">    _greyLabel.text = @&quot;Grey Label&quot;;</span><br><span class="line">    _greyLabel.textColor = [UIColor grayColor];</span><br><span class="line">    [_greyLabel sizeToFit];</span><br><span class="line">    [self addSubview:_greyLabel];</span><br><span class="line">    </span><br><span class="line">    _tintColorLabel = [UILabel new];</span><br><span class="line">    _tintColorLabel.text = @&quot;Tint Color Label&quot;;</span><br><span class="line">    _tintColorLabel.textColor = self.tintColor;</span><br><span class="line">    [_tintColorLabel sizeToFit];</span><br><span class="line">    [self addSubview:_tintColorLabel];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)layoutSubviews &#123;</span><br><span class="line">    _tintColorBlock.frame = CGRectMake(0, 0, CGRectGetWidth(self.bounds) / 3, CGRectGetHeight(self.bounds));</span><br><span class="line">    </span><br><span class="line">    CGRect frame = _greyLabel.frame;</span><br><span class="line">    frame.origin.x = CGRectGetWidth(self.bounds) / 3 + 10;</span><br><span class="line">    frame.origin.y = 0;</span><br><span class="line">    _greyLabel.frame = frame;</span><br><span class="line">    </span><br><span class="line">    frame = _tintColorLabel.frame;</span><br><span class="line">    frame.origin.x = CGRectGetWidth(self.bounds) / 3 + 10;</span><br><span class="line">    frame.origin.y = CGRectGetHeight(self.bounds) / 2;</span><br><span class="line">    _tintColorLabel.frame = frame;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å½“tintColoræˆ–è€…tintAdjustmentModeå±æ€§å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨</span><br><span class="line">- (void)tintColorDidChange &#123;</span><br><span class="line">    _tintColorBlock.backgroundColor = self.tintColor;</span><br><span class="line">    _tintColorLabel.textColor = self.tintColor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-6174f42818ec8b61.gif?imageMogr2/auto-orient/strip" alt></p>
<h3 id="Tinting-images-with-tintColor-ç»™å›¾åƒç€è‰²"><a href="#Tinting-images-with-tintColor-ç»™å›¾åƒç€è‰²" class="headerlink" title="Tinting images with tintColor - ç»™å›¾åƒç€è‰²"></a>Tinting images with tintColor - ç»™å›¾åƒç€è‰²</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// åŠ è½½å›¾ç‰‡</span><br><span class="line">UIImage *gitHubImg = [UIImage imageNamed:@&quot;gitHub&quot;];</span><br><span class="line">// è®¾ç½®å›¾ç‰‡æ¸²æŸ“æ¨¡å¼</span><br><span class="line">gitHubImg = [gitHubImg imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];</span><br><span class="line">// æ·»åŠ åˆ°è§†å›¾</span><br><span class="line">self.tintedImageView.image = gitHubImg;</span><br><span class="line">self.tintedImageView.contentMode = UIViewContentModeScaleAspectFit;</span><br></pre></td></tr></table></figure>
<p>åŸå›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-6d989755b29f8caa.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>å®é™…æ•ˆæœï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-fc6008938b1e272f.gif?imageMogr2/auto-orient/strip" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/16/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg" alt="ç‹¬æœ¨èˆŸçš„æœ¨">
            
              <p class="site-author-name" itemprop="name">ç‹¬æœ¨èˆŸçš„æœ¨</p>
              <div class="site-description motion-element" itemprop="description">æœ‰æ—¶å€™é˜³å…‰å¾ˆå¥½ æœ‰æ—¶å€™é˜³å…‰å¾ˆæš—</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">312</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">54</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ç‹¬æœ¨èˆŸçš„æœ¨</span>

  

  
</div>


  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/15/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz',
                'X-LC-Key': 'brOnU8mOQvSjpipJvdKUAIbU',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  


  <!-- red heart -->
  <script type="text/javascript" src="/js/src/love.js"></script>
  
</body>
</html>
