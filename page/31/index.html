<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="有时候阳光很好 有时候阳光很暗">
<meta name="keywords" content="独木舟的木">
<meta property="og:type" content="website">
<meta property="og:title" content="独木舟的木">
<meta property="og:url" content="https://andy0570.com/page/31/index.html">
<meta property="og:site_name" content="独木舟的木">
<meta property="og:description" content="有时候阳光很好 有时候阳光很暗">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="独木舟的木">
<meta name="twitter:description" content="有时候阳光很好 有时候阳光很暗">



  <link rel="alternate" href="/atom.xml" title="独木舟的木" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/31/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>独木舟的木</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">独木舟的木</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">57</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">312</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/18/iOS 编程：UILabel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/18/iOS 编程：UILabel/" class="post-title-link" itemprop="url">iOS 编程：UILabel</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-18 17:59:00" itemprop="dateCreated datePublished" datetime="2016-08-18T17:59:00+08:00">2016-08-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:30:07" itemprop="dateModified" datetime="2019-04-18T00:30:07+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/18/iOS 编程：UILabel/" class="leancloud_visitors" data-flag-title="iOS 编程：UILabel">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p><strong>UILabel</strong> 显示一行或多行只读文本的视图，通常与其他控件一起使用以描述其预期目的。</p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><h3 id="Core-attributes-核心属性"><a href="#Core-attributes-核心属性" class="headerlink" title="Core attributes 核心属性"></a>Core attributes 核心属性</h3><p>Text（ <code>text</code>、<code>attributedText</code> ）、<code>textColor</code>、<code>font</code>、<code>textAligment</code>、Lines（ <code>numberOfLines</code> ）、Behavior（  <code>enabled</code>、<code>highlighted</code> ）。</p>
<ul>
<li><p><code>font</code> ：默认字体为：system font 17 plain</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 通常的几种设置方法</span><br><span class="line">label.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label.font = [UIFont boldSystemFontOfSize:20];</span><br><span class="line">label.font = [UIFont italicSystemFontOfSize:20];</span><br><span class="line">label.font = [UIFont fontWithName:@&quot;Arial&quot; size:20]; // PS：字体名可以打开「字体册」应用查找</span><br><span class="line">label.font = [UIFont systemFontOfSize:20 weight:UIFontWeightUltraLight];</span><br></pre></td></tr></table></figure>
<p>系统字体参考：<a href="https://blog.csdn.net/u013943420/article/details/82776026" target="_blank" rel="noopener">iOS 查看系统所有字体 (带效果图)</a></p>
<p>以下为字体大小为20 号时的显示情况：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-3f8468cceb702616.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
</ul>
<ul>
<li><p><code>textAligment</code> ：文本对齐方式，默认设置为 <code>NSTextAlignmentNatural</code>，实际测试默认为左对齐，即<code>NSTextAlignmentLeft</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    /* Values for NSTextAlignment */</span><br><span class="line">    typedef NS_ENUM(NSInteger, NSTextAlignment) &#123;</span><br><span class="line">        NSTextAlignmentLeft      = 0,    // 左对齐</span><br><span class="line">#if TARGET_OS_iPhone</span><br><span class="line">        NSTextAlignmentCenter    = 1,    // 居中</span><br><span class="line">        NSTextAlignmentRight     = 2,    // 右对齐</span><br><span class="line">#else /* !TARGET_OS_iPhone */</span><br><span class="line">        NSTextAlignmentRight     = 1,    // 右对齐</span><br><span class="line">        NSTextAlignmentCenter    = 2,    // 居中</span><br><span class="line">#endif</span><br><span class="line">        NSTextAlignmentJustified = 3,    // Fully-justified. The last line in a paragraph is natural-aligned.</span><br><span class="line">        NSTextAlignmentNatural   = 4,    // Indicates the default alignment for script</span><br><span class="line">    &#125; NS_ENUM_AVAILABLE_IOS(6_0);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><code>numberOfLines</code>：默认为1行。如果设置为 0，则代表不限制行数。</p>
</li>
<li><p><code>enabled</code> ：此属性仅确定标签的绘制方式。 禁用时文字有些暗淡，表示它处于非活动状态。 此属性默认设置为YES。</p>
<p> 如图所示：上方为 <code>enabled = NO</code>,下方为  <code>enabled = YES</code>。</p>
<p> <img src="http://upload-images.jianshu.io/upload_images/2648731-591635bd3ba14397.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
</ul>
<ul>
<li><p><code>highlighted</code>: 高亮属性，该属性用于当 UILabel 作为其他控件的子视图时，作为按下状态时的属性。</p>
<blockquote>
<p>the ‘highlight’ property is used by subclasses for such things as pressed states. it’s useful to make it part of the base class as a user property.</p>
</blockquote>
</li>
<li><p><code>userInteractionEnabled</code>: 是否能与用户交互？</p>
</li>
</ul>
<h3 id="Spacing-attributes-间距属性"><a href="#Spacing-attributes-间距属性" class="headerlink" title="Spacing attributes 间距属性"></a>Spacing attributes 间距属性</h3><p>Baseline ( <code>baselineAdjustment</code> )、LineBreaks （ <code>lineBreakMode</code>）、Autoshrink （ <code>minimumScaleFactor</code>、<code>allowsDefaultTighteningForTruncation</code> ）</p>
<ul>
<li><p><code>baselineAdjustment</code>  ：文本基线对齐方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 控制文本的基线位置，只有文本的行数为1时有效</span><br><span class="line">// adjustsFontSizeToFitWidth = YES 并且文本需要缩小时才会起作用。</span><br><span class="line">typedef NS_ENUM(NSInteger, UIBaselineAdjustment) &#123;</span><br><span class="line">    UIBaselineAdjustmentAlignBaselines = 0, // default. used when shrinking text to position based on the original baseline     </span><br><span class="line">    UIBaselineAdjustmentAlignCenters,       // 文本中线与label中线对齐</span><br><span class="line">    UIBaselineAdjustmentNone,               // 文本最低端与label中线对齐</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>​      从左至右分别为：0、1、2 三种情况：</p>
<p>​      <img src="http://upload-images.jianshu.io/upload_images/2648731-8080621c80879a87.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ul>
<li><p><code>lineBreakMode</code>：超出 label 边界的文字截取方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, NSLineBreakMode) &#123;</span><br><span class="line">    NSLineBreakByWordWrapping = 0,  // 默认，以单词为边界 &quot;my word&quot;</span><br><span class="line">    NSLineBreakByCharWrapping,		// 以字符为边界 &quot;my wor&quot;</span><br><span class="line">    NSLineBreakByClipping,		    // 到边界为止，碰到边界就剪辑</span><br><span class="line">    NSLineBreakByTruncatingHead,	// 省略开头: &quot;...wxyz&quot;</span><br><span class="line">    NSLineBreakByTruncatingTail,	// 省略结尾: &quot;abcd...&quot;</span><br><span class="line">    NSLineBreakByTruncatingMiddle	// 省略中间:  &quot;ab...yz&quot;,多行时作用于最后一行</span><br><span class="line">&#125; NS_ENUM_AVAILABLE(10_0, 6_0);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Advanced-appearance-attributes-高级外观属性"><a href="#Advanced-appearance-attributes-高级外观属性" class="headerlink" title="Advanced appearance attributes 高级外观属性"></a>Advanced appearance attributes 高级外观属性</h3><p><code>highlightedTextColor</code>、<code>shadowColor</code>、<code>shadowOffset</code></p>
<h2 id="使用-UILabel"><a href="#使用-UILabel" class="headerlink" title="使用 UILabel"></a>使用 UILabel</h2><h3 id="通常的使用方式"><a href="#通常的使用方式" class="headerlink" title="通常的使用方式"></a>通常的使用方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 创建 UILabel 对象</span><br><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line">label.frame = CGRectMake(15, 100, 125, 24);</span><br><span class="line">label.tag = 5;</span><br><span class="line">label.text = @&quot;Hello World！&quot;;</span><br><span class="line">label.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label.textColor = [UIColor blueColor];</span><br><span class="line">label.backgroundColor = [UIColor lightGrayColor];</span><br><span class="line">label.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line">label.numberOfLines = 0;</span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-417f7e1b641cd040.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="设置自动缩小文本字体以适应-label-宽度"><a href="#设置自动缩小文本字体以适应-label-宽度" class="headerlink" title="设置自动缩小文本字体以适应 label 宽度"></a>设置自动缩小文本字体以适应 label 宽度</h3><ul>
<li><code>adjustsFontSizeToFitWidth</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(15, 150, 80, 35)];</span><br><span class="line">label2.text = @&quot;Hello World！&quot;;</span><br><span class="line">label2.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label2.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label2.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line"></span><br><span class="line">// 当 Label 的宽度小于完整字符串宽度时，缩小文本字体以适应宽度</span><br><span class="line">label2.adjustsFontSizeToFitWidth = YES;</span><br><span class="line"></span><br><span class="line">// 当 adjustsFontSizeToFitWidth = YES 时，如果文本 font 要缩小时,</span><br><span class="line">// 可以设置 baselineAdjustment来控制文本的基线位置，只有文本行数为1时有效。</span><br><span class="line">label2.baselineAdjustment = UIBaselineAdjustmentAlignCenters;</span><br><span class="line">label2.numberOfLines = 1; // 默认为1，可以省略</span><br><span class="line"></span><br><span class="line">// 字体最小比例因子</span><br><span class="line">// 当文本字体缩小时，缩放比例 &gt;= minimumScaleFactor</span><br><span class="line">label2.minimumScaleFactor = 0.5;</span><br><span class="line"></span><br><span class="line">[self.view addSubview:label2];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-21fbbd3f02cd87bd.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="如何根据字符串长度设置-label-的frame-？"><a href="#如何根据字符串长度设置-label-的frame-？" class="headerlink" title="如何根据字符串长度设置 label 的frame ？"></a>如何根据字符串长度设置 label 的<code>frame</code> ？</h3><p>根据字符串长度计算出 <code>CGSize</code>，然后赋值给 label 的<code>frame</code>：</p>
<p>计算字符串长度有2个可用的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (CGSize)sizeWithAttributes:(nullable NSDictionary&lt;NSString *, id&gt; *)attrs NS_AVAILABLE(10_0, 7_0);</span><br><span class="line"></span><br><span class="line">- (CGRect)boundingRectWithSize:(CGSize)size options:(NSStringDrawingOptions)options attributes:(nullable NSDictionary&lt;NSString *, id&gt; *)attributes context:(nullable NSStringDrawingContext *)context NS_AVAILABLE(10_11, 7_0);</span><br></pre></td></tr></table></figure>
<h4 id="方法一示例代码："><a href="#方法一示例代码：" class="headerlink" title="方法一示例代码："></a>方法一示例代码：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 需要显示的字符串</span><br><span class="line">NSString *string = @&quot;Hello World！&quot;;</span><br><span class="line">// 字符串在  UILabel 上显示时所使用的字体</span><br><span class="line">UIFont *font = [UIFont systemFontOfSize:20];</span><br><span class="line">// 计算20号字体下，该字符串的宽度和高度</span><br><span class="line">CGSize stringSize = [string sizeWithAttributes:@&#123;NSFontAttributeName:font&#125;];</span><br><span class="line">NSLog(@&quot;(%f,%f)&quot;,stringSize.width,stringSize.height); // (123.651484,23.867188)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>⚠️ </p>
<p>需要注意的是，该方法返回的 <code>CGSize</code> 是行数为1的情况下，计算出来的 Size。当它超过屏幕的宽度（<code>[UIScreen mainScreen].bounds.size.width</code>）时，还会存在文本显示不完全的问题。</p>
<p>因此，该方法仅适用于短文本，还有一种情况是做跑马灯效果时会用到这种方法。</p>
</blockquote>
<h4 id="方法二示例代码1："><a href="#方法二示例代码1：" class="headerlink" title="方法二示例代码1："></a>方法二示例代码1：</h4><p>相对于上者，此方法需要传入一个 <code>CGSize</code> 参数来限制最大宽高尺寸，可以处理多行文本情况。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)resizeUILabelWidth:(UILabel *)label &#123;</span><br><span class="line">    label.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line"></span><br><span class="line">    CGRect <span class="built_in">rect</span> = label.frame;</span><br><span class="line">    NSString *<span class="built_in">str</span> = label.<span class="built_in">text</span>;</span><br><span class="line">    UIFont *font = label.font;</span><br><span class="line">    CGSize <span class="built_in">size</span> = CGSizeMake(<span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">width</span>, <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">height</span>);</span><br><span class="line">    NSDictionary *attributes = @&#123;NSFontAttributeName:font&#125;;</span><br><span class="line">    <span class="comment">// 计算大小</span></span><br><span class="line">    CGRect labelSize = [<span class="built_in">str</span> boundingRectWithSize:<span class="built_in">size</span></span><br><span class="line">                                         options:NSStringDrawingUsesLineFragmentOrigin</span><br><span class="line">                                      attributes:attributes</span><br><span class="line">                                         context:nil];</span><br><span class="line">    <span class="comment">// 调整frame</span></span><br><span class="line">    <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">width</span> = labelSize.<span class="built_in">size</span>.<span class="built_in">width</span>;</span><br><span class="line">    <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">height</span> = labelSize.<span class="built_in">size</span>.<span class="built_in">height</span>;</span><br><span class="line">    label.frame = <span class="built_in">rect</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="方法二示例代码2："><a href="#方法二示例代码2：" class="headerlink" title="方法二示例代码2："></a>方法二示例代码2：</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">CGSize</span>)sizeForFont:(<span class="built_in">UIFont</span> *)font size:(<span class="built_in">CGSize</span>)size mode:(<span class="built_in">NSLineBreakMode</span>)lineBreakMode &#123;</span><br><span class="line">    <span class="built_in">CGSize</span> result;</span><br><span class="line">    <span class="keyword">if</span> (!font) font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">12</span>];</span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> respondsToSelector:<span class="keyword">@selector</span>(boundingRectWithSize:options:attributes:context:)]) &#123;</span><br><span class="line">        <span class="built_in">NSMutableDictionary</span> *attr = [<span class="built_in">NSMutableDictionary</span> new];</span><br><span class="line">        attr[<span class="built_in">NSFontAttributeName</span>] = font;</span><br><span class="line">        <span class="keyword">if</span> (lineBreakMode != <span class="built_in">NSLineBreakByWordWrapping</span>) &#123;</span><br><span class="line">            <span class="built_in">NSMutableParagraphStyle</span> *paragraphStyle = [<span class="built_in">NSMutableParagraphStyle</span> new];</span><br><span class="line">            paragraphStyle.lineBreakMode = lineBreakMode;</span><br><span class="line">            attr[<span class="built_in">NSParagraphStyleAttributeName</span>] = paragraphStyle;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">CGRect</span> rect = [<span class="keyword">self</span> boundingRectWithSize:size</span><br><span class="line">                                         options:<span class="built_in">NSStringDrawingUsesLineFragmentOrigin</span> | <span class="built_in">NSStringDrawingUsesFontLeading</span></span><br><span class="line">                                      attributes:attr context:<span class="literal">nil</span>];</span><br><span class="line">        result = rect.size;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="meta">#pragma clang diagnostic push</span></span><br><span class="line"><span class="meta">#pragma clang diagnostic ignored <span class="meta-string">"-Wdeprecated-declarations"</span></span></span><br><span class="line">        result = [<span class="keyword">self</span> sizeWithFont:font constrainedToSize:size lineBreakMode:lineBreakMode];</span><br><span class="line"><span class="meta">#pragma clang diagnostic pop</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上述方法摘自 <a href="https://github.com/ibireme/YYKit" target="_blank" rel="noopener">YYKit</a> :NSString+YYAdd<br>该类中有三个计算字符串大小的方法：</p>
<ul>
<li>-(CGSize)sizeForFont:(UIFont *)font size:(CGSize)size mode:(NSLineBreakMode)lineBreakMode;</li>
<li>-(CGFloat)widthForFont:(UIFont *)font;</li>
<li>-(CGFloat)heightForFont:(UIFont *)font width:(CGFloat)width;</li>
</ul>
</blockquote>
<h3 id="根据文本内容调整UILabel对象的大小"><a href="#根据文本内容调整UILabel对象的大小" class="headerlink" title="根据文本内容调整UILabel对象的大小"></a>根据文本内容调整UILabel对象的大小</h3><p><strong>UIView</strong> 中的两个方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (CGSize)sizeThatFits:(CGSize)size;     </span><br><span class="line">// return &apos;best&apos; size to fit given size. does not actually resize view. Default is return existing view size</span><br><span class="line">// 返回“最佳”大小以适应给定的大小,默认返回已经存在的视图 size</span><br><span class="line"></span><br><span class="line">- (void)sizeToFit;                       </span><br><span class="line">// calls sizeThatFits: with current view bounds and changes bounds size.</span><br><span class="line">// 调用这个方法会改变当前 view 的 bounds.size</span><br></pre></td></tr></table></figure>
<h4 id="sizeToFit-代码示例一："><a href="#sizeToFit-代码示例一：" class="headerlink" title="sizeToFit 代码示例一："></a><code>sizeToFit</code> 代码示例一：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 代码示例三：label 大小自适应文本</span><br><span class="line">UILabel *label3 = [[UILabel alloc] init];</span><br><span class="line">label3.frame = CGRectMake(15, 150, 125, 24);</span><br><span class="line">label3.text = @&quot;Hello iOS! Hello World！&quot;;</span><br><span class="line">label3.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label3.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label3.textColor = [UIColor blueColor];</span><br><span class="line">label3.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">label3.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line"></span><br><span class="line">// 设置 sizeToFit</span><br><span class="line">[label3 sizeToFit];</span><br><span class="line">label3.numberOfLines = 0;</span><br><span class="line">[self.view addSubview:label3];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-25f1387c1b76ed74.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="sizeToFit-代码示例二："><a href="#sizeToFit-代码示例二：" class="headerlink" title="sizeToFit 代码示例二："></a><code>sizeToFit</code> 代码示例二：</h4><p>当文本非常长的情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UILabel *label3 = [[UILabel alloc] init];</span><br><span class="line">label3.frame = CGRectMake(15, 150, 125, 24);</span><br><span class="line">label3.text = @&quot;透过覆盖着我的夜幕  黑暗层层无底 感谢万能的上苍 赐给我不可征服的灵魂 就算被地狱牢牢抓住 我不会畏縮 也不会哭叫 任凭命运百般作弄 我头破血流但不低头 在这充满愤怒和眼泪的土地之上 恐怖阴影阴森的逼近 不过,即使岁月不停恐吓 亦将发现我毫不畏惧 无论大门何等狭窄 无论承受多么深重的责罚 我是我命运的主宰 我是我灵魂的统帅&quot;;</span><br><span class="line">label3.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label3.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label3.textColor = [UIColor blueColor];</span><br><span class="line">label3.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">label3.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line"></span><br><span class="line">[label3 sizeToFit];</span><br><span class="line">label3.numberOfLines = 0;</span><br><span class="line">[self.view addSubview:label3];</span><br></pre></td></tr></table></figure>
<p>测试发现，当文本太长显示不完全时，<code>sizeToFit</code> 并不会自动换行。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-fbfd4769dcada102.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id><a href="#" class="headerlink" title=" "></a> </h3><h4 id="sizeThatFits-代码示例一："><a href="#sizeThatFits-代码示例一：" class="headerlink" title="sizeThatFits: 代码示例一："></a><code>sizeThatFits:</code> 代码示例一：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">UILabel *label3 = [[UILabel alloc] init];</span><br><span class="line">label3.frame = CGRectMake(15, 150, 125, 24);</span><br><span class="line">label3.text = @&quot;透过覆盖着我的夜幕  黑暗层层无底 感谢万能的上苍 赐给我不可征服的灵魂 就算被地狱牢牢抓住 我不会畏縮 也不会哭叫 任凭命运百般作弄 我头破血流但不低头 在这充满愤怒和眼泪的土地之上 恐怖阴影阴森的逼近 不过,即使岁月不停恐吓 亦将发现我毫不畏惧 无论大门何等狭窄 无论承受多么深重的责罚 我是我命运的主宰 我是我灵魂的统帅&quot;;</span><br><span class="line">label3.font = [UIFont systemFontOfSize:20];</span><br><span class="line">label3.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label3.textColor = [UIColor blueColor];</span><br><span class="line">label3.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">label3.lineBreakMode = NSLineBreakByTruncatingTail;</span><br><span class="line">label3.numberOfLines = 0;</span><br><span class="line"></span><br><span class="line">// 限定 label 的宽度和高度，让 label 在此范围内自适应</span><br><span class="line">CGSize size = [label3 sizeThatFits:CGSizeMake([UIScreen mainScreen].bounds.size.width - 15*2, MAXFLOAT)];</span><br><span class="line">label3.frame = CGRectMake(15, 150, size.width, size.height);</span><br><span class="line"></span><br><span class="line">[self.view addSubview:label3];</span><br></pre></td></tr></table></figure>
<p>🎉🎉🎉  你看，它做到了，真棒！</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-0bc50fa9fd5d6c9b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h4 id="sizeThatFits-代码示例二："><a href="#sizeThatFits-代码示例二：" class="headerlink" title="sizeThatFits: 代码示例二："></a><code>sizeThatFits:</code> 代码示例二：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 初始化标签对象</span><br><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line">// 给标签对象设置一段较长的文本内容</span><br><span class="line">label.text = @&quot;The appearance of labels is configurable, and they can display attributed strings, allowing you to customize the appearance of substrings within a label. You can add labels to your interface programmatically or by using Interface Builder.&quot;;</span><br><span class="line">// 设置标签文字的颜色</span><br><span class="line">label.textColor = [UIColor flatSkyBlueColor];</span><br><span class="line">// 设置标签文字的对齐方式</span><br><span class="line">label.textAlignment = NSTextAlignmentLeft;</span><br><span class="line">// 设置标签文字的换行方式为以空格为界，保留整个单词</span><br><span class="line">label.lineBreakMode = NSLineBreakByWordWrapping;</span><br><span class="line">// 设置标签不限制行数</span><br><span class="line">label.numberOfLines = 0;</span><br><span class="line">// 设置标签的背景颜色</span><br><span class="line">label.backgroundColor = [UIColor lightGrayColor];</span><br><span class="line">// 限定 label 的宽度和高度，让 label 在此范围内自适应</span><br><span class="line">CGSize size = [label sizeThatFits:CGSizeMake([UIScreen mainScreen].bounds.size.width - 15*2, MAXFLOAT)];</span><br><span class="line">label.frame = CGRectMake(15, 150, size.width, size.height);</span><br><span class="line">// 将标签对象，添加到当前视图控制器的根视图</span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-15ec805152d3e6a8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="实例模仿："><a href="#实例模仿：" class="headerlink" title="实例模仿："></a>实例模仿：</h3><p>参考淘票票的 TableViewCell：</p>
<ul>
<li>样式一：影城卡、卡、惠；</li>
<li>样式二：小食、巨幕厅；</li>
<li>样式三：25.8 元起</li>
<li>样式四：3DIMAX tag</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-22f288b22f9e2e9e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="设置圆角"><a href="#设置圆角" class="headerlink" title="设置圆角"></a>设置圆角</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line">label.frame = CGRectMake(15, 100, 55, 25);</span><br><span class="line">label.text = @&quot;影城卡&quot;;</span><br><span class="line">label.font = [UIFont boldSystemFontOfSize:15];</span><br><span class="line">label.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label.textColor = [UIColor whiteColor];</span><br><span class="line">label.backgroundColor = HexColor(@&quot;#62C067&quot;);</span><br><span class="line"></span><br><span class="line">// 设置圆角（老方法）</span><br><span class="line">label.layer.cornerRadius = 3;</span><br><span class="line">label.layer.masksToBounds = YES;</span><br><span class="line"></span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p>201712更新：优化设置(参考<a href="http://www.cocoachina.com/ios/20171204/21407.html" target="_blank" rel="noopener">iOS 常用组件-高效切圆角方法总结</a>)：<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UILabel *<span class="keyword">label</span><span class="bash"> = [[UILabel alloc] init];</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">frame = CGRectMake(15, 100, 55, 25);</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">text = @<span class="string">"影城卡"</span>;</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">font = [UIFont boldSystemFontOfSize:15];</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">textAlignment = NSTextAlignmentCenter;</span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">textColor = [UIColor whiteColor];</span></span><br><span class="line"></span><br><span class="line">// 💡💡💡优化设置圆角（推荐方法）💡💡💡</span><br><span class="line">// 设置 layer 的背景颜色,这样就可以避免离屏渲染问题</span><br><span class="line"><span class="keyword">label</span>.<span class="bash">layer.backgroundColor = UIColorHex(62C067).CGColor; </span></span><br><span class="line"><span class="keyword">label</span>.<span class="bash">layer.cornerRadius = 3;</span></span><br><span class="line"></span><br><span class="line">[self.view addSubview:<span class="keyword">label</span><span class="bash">];</span></span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b1b3782f400ed7da.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="设置圆角和边框"><a href="#设置圆角和边框" class="headerlink" title="设置圆角和边框"></a>设置圆角和边框</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 创建 UILabel 对象</span><br><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line">label.frame = CGRectMake(15, 100, 54, 25);</span><br><span class="line">label.text = @&quot;小食&quot;;</span><br><span class="line">label.font = [UIFont systemFontOfSize:15];</span><br><span class="line">label.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">label.textColor = [UIColor flatSkyBlueColor];</span><br><span class="line">// 设置圆角</span><br><span class="line">label.layer.cornerRadius = 12;</span><br><span class="line">label.layer.masksToBounds = YES;</span><br><span class="line">// 设置边框</span><br><span class="line">label.layer.borderWidth = 1.0;</span><br><span class="line">label.layer.borderColor = [UIColor flatSkyBlueColor].CGColor;</span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-b32be9eaf2bdd7bc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="设置-attributedText"><a href="#设置-attributedText" class="headerlink" title="设置 attributedText"></a>设置 <code>attributedText</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 创建 UILabel 对象</span><br><span class="line">UILabel *label = [[UILabel alloc] init];</span><br><span class="line"></span><br><span class="line">// 设置 attributedText</span><br><span class="line">NSString *string = @&quot;25.8元起&quot;;</span><br><span class="line">NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:string];</span><br><span class="line">UIFont *font = [UIFont systemFontOfSize:15];</span><br><span class="line">NSDictionary *attributes1 = @&#123;</span><br><span class="line">                             NSForegroundColorAttributeName:HexColor(@&quot;#FF4359&quot;),</span><br><span class="line">                             NSFontAttributeName:font</span><br><span class="line">                             &#125;;</span><br><span class="line">[attributedString setAttributes:attributes1 range:NSMakeRange(0, 4)];</span><br><span class="line"></span><br><span class="line">NSDictionary *attributes2 = @&#123;</span><br><span class="line">                              NSForegroundColorAttributeName:HexColor(@&quot;#7E7B93&quot;),</span><br><span class="line">                              NSFontAttributeName:font</span><br><span class="line">                              &#125;;</span><br><span class="line">[attributedString setAttributes:attributes2 range:NSMakeRange(4, 2)];</span><br><span class="line">label.attributedText = attributedString;</span><br><span class="line"></span><br><span class="line">// 限定 label 的宽度和高度，让 label 在此范围内自适应</span><br><span class="line">CGSize size = [label sizeThatFits:CGSizeMake([UIScreen mainScreen].bounds.size.width - 15*2, MAXFLOAT)];</span><br><span class="line">label.frame = CGRectMake(15, 150, size.width, size.height);</span><br><span class="line"></span><br><span class="line">[self.view addSubview:label];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-bb87fd515de5a85a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="设置标题-Tag"><a href="#设置标题-Tag" class="headerlink" title="设置标题 Tag"></a>设置标题 Tag</h3><p><img src="http://upload-images.jianshu.io/upload_images/2648731-32bc1a8021691468.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">- (void)<span class="keyword">add3DIMAXTag </span>&#123;</span><br><span class="line"></span><br><span class="line">    UIView *tag = [[UIView alloc] initWithFrame:CGRectMake((MaxX(self.titleLabel)+<span class="number">6</span>), MinY(self.titleLabel)+<span class="number">2</span>, <span class="number">45</span>, <span class="number">13</span>)]<span class="comment">;</span></span><br><span class="line">    tag.<span class="keyword">backgroundColor </span>= COLOR_RGB(<span class="number">185</span>, <span class="number">183</span>, <span class="number">197</span>)<span class="comment">;</span></span><br><span class="line">    tag.layer.<span class="keyword">borderWidth </span>= <span class="number">1</span><span class="comment">;</span></span><br><span class="line">    tag.layer.<span class="keyword">borderColor </span>= COLOR_RGB(<span class="number">185</span>, <span class="number">183</span>, <span class="number">197</span>).CGColor<span class="comment">;</span></span><br><span class="line">    tag.layer.cornerRadius = <span class="number">2</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    UILabel *leftPart = [[UILabel alloc] initWithFrame:CGRectMake(<span class="number">0</span>, <span class="number">0</span>, <span class="number">15</span>, <span class="number">13</span>)]<span class="comment">;</span></span><br><span class="line">    leftPart.layer.<span class="keyword">borderWidth </span>= <span class="number">1</span><span class="comment">;</span></span><br><span class="line">    leftPart.layer.<span class="keyword">borderColor </span>= COLOR_RGB(<span class="number">185</span>, <span class="number">183</span>, <span class="number">197</span>).CGColor<span class="comment">;</span></span><br><span class="line">    leftPart.layer.cornerRadius = <span class="number">2</span><span class="comment">;</span></span><br><span class="line">    leftPart.<span class="keyword">backgroundColor </span>= [UIColor clearColor]<span class="comment">;</span></span><br><span class="line">    leftPart<span class="meta">.text</span> = @<span class="string">"3D"</span><span class="comment">;</span></span><br><span class="line">    leftPart.textAlignment = NSTextAlignmentCenter<span class="comment">;</span></span><br><span class="line">    leftPart.textColor = [UIColor whiteColor]<span class="comment">;</span></span><br><span class="line">    leftPart.font = [UIFont systemFontOfSize:<span class="number">6</span>]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    UILabel *rightPart = [[UILabel alloc] initWithFrame:CGRectMake(<span class="number">17</span>, <span class="number">0</span>, <span class="number">28</span>, <span class="number">13</span>)]<span class="comment">;</span></span><br><span class="line">    rightPart.<span class="keyword">backgroundColor </span>= [UIColor whiteColor]<span class="comment">;</span></span><br><span class="line">    rightPart<span class="meta">.text</span> = @<span class="string">"IMAX"</span><span class="comment">;</span></span><br><span class="line">    rightPart.textAlignment = NSTextAlignmentCenter<span class="comment">;</span></span><br><span class="line">    rightPart.textColor = COLOR_RGB(<span class="number">185</span>, <span class="number">183</span>, <span class="number">197</span>)<span class="comment">;</span></span><br><span class="line">    rightPart.font = [UIFont systemFontOfSize:<span class="number">6</span>]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [tag <span class="keyword">addSubview:leftPart];</span></span><br><span class="line"><span class="keyword"> </span>   [tag <span class="keyword">addSubview:rightPart];</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword"> </span>   [self.contentView <span class="keyword">addSubview:tag];</span></span><br><span class="line"><span class="keyword">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="设置阴影："><a href="#设置阴影：" class="headerlink" title="设置阴影："></a>设置阴影：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 设置阴影颜色</span><br><span class="line">label.shadowColor = [UIColor flatBlueColor];</span><br><span class="line"></span><br><span class="line">// 设置阴影偏移量，默认为 CGSizeMake(0, -1) ——向上偏移</span><br><span class="line">// CGSize 宽度控制这阴影横向的位移，高度控制着纵向的位移。</span><br><span class="line">label.shadowOffset = CGSizeMake(1.5, 1.5);</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-a7b47474c2a414a5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="分散对齐标题文字"><a href="#分散对齐标题文字" class="headerlink" title="分散对齐标题文字"></a>分散对齐标题文字</h3><p>为 <strong>UILabel</strong> 添加一个 Category 类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;UILabel+ChangeRightAndLeftAlignment.h&quot;</span><br><span class="line">#import &lt;CoreText/CoreText.h&gt;</span><br><span class="line"></span><br><span class="line">@implementation UILabel (ChangeRightAndLeftAlignment)</span><br><span class="line"></span><br><span class="line">- (void)hql_changeRightAndLeftAlignment:(CGFloat)labelWidth &#123;</span><br><span class="line">    // 计算文本占据的宽度</span><br><span class="line">    CGSize testSize = [self.text boundingRectWithSize:CGSizeMake(labelWidth, MAXFLOAT) options:NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingTruncatesLastVisibleLine| NSStringDrawingUsesFontLeading attributes:@&#123;NSFontAttributeName :self.font&#125; context:nil].size;</span><br><span class="line">    </span><br><span class="line">    // 文本之间的距离 = （Label的宽度 - 文本宽度）/ （文字个数 - 1）</span><br><span class="line">    CGFloat margin = (labelWidth - testSize.width)/(self.text.length - 1);</span><br><span class="line">    NSNumber *number = [NSNumber numberWithFloat:margin];</span><br><span class="line">    NSMutableAttributedString *attribute = [[NSMutableAttributedString alloc] initWithString:self.text];</span><br><span class="line">    </span><br><span class="line">    // 字间距 :NSKernAttributeName</span><br><span class="line">    [attribute addAttribute: NSKernAttributeName value:number range:NSMakeRange(0, self.text.length - 1 )];</span><br><span class="line">    self.attributedText = attribute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>💡Tips: 如果标题文字末尾带冒号(：)，而你想让【最后一个字】和【冒号】之间不要有空格 那么上面的代码中 <code>self.text.length - 1</code> 这两处应修改为<code>self.text.length - 2</code> ，这样就可以排除最后一个间距了。</p>
</blockquote>
<p>效果：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-f91a55417a5ba990.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<hr>
<h3 id="给文字添加描边效果"><a href="#给文字添加描边效果" class="headerlink" title="给文字添加描边效果"></a>给文字添加描边效果</h3><p>UILabel 自定义文本样式，在文件夹上点击右键，弹出右键菜单，选择添加新文件选项,创建一个以UILabel为父类的子类。</p>
<p><strong>NewUILabel.h</strong> 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 演示给标签文字，添加描边效果</span><br><span class="line"> </span><br><span class="line"> 在文件夹上点击右键，弹出右键菜单，选择添加新文件选项,创建一个以UILabel为父类的子类</span><br><span class="line"> */</span><br><span class="line">@interface NewUILabel : UILabel</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>NewUILabel.m</strong> 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;NewUILabel.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation NewUILabel</span><br><span class="line"></span><br><span class="line">// 首先重载父类的绘图方法，这样就可以从底层自定义标签</span><br><span class="line">// 如果你需要执行自定义绘图，只需要覆盖 drawRect：方法</span><br><span class="line">// 一个空的实现在动画过程中会影响性能。</span><br><span class="line">- (void)drawRect:(CGRect)rect &#123;</span><br><span class="line">    // 获取图形的上下文</span><br><span class="line">    CGContextRef c = UIGraphicsGetCurrentContext();</span><br><span class="line">    // 设置在上下文中，文字的渲染模式为描边模式</span><br><span class="line">    CGContextSetTextDrawingMode(c, kCGTextStroke);</span><br><span class="line">    </span><br><span class="line">    // 设置文字描边的边框宽度</span><br><span class="line">    CGContextSetLineWidth(c, 2.0);</span><br><span class="line">    // 设置文字描边顶点连接方式</span><br><span class="line">    CGContextSetLineJoin(c, kCGLineJoinRound);</span><br><span class="line">    // 设置文字的描边颜色：白色</span><br><span class="line">    self.textColor = [UIColor whiteColor];</span><br><span class="line">    // 将文字的描边，绘制在指定区域内</span><br><span class="line">    [super drawTextInRect:rect];</span><br><span class="line">    </span><br><span class="line">    // 设置上下文文字渲染模式为填充</span><br><span class="line">    CGContextSetTextDrawingMode(c, kCGTextFill);</span><br><span class="line">    // 创建一个颜色为黑色的颜色对象</span><br><span class="line">    UIColor *textColor = [UIColor blackColor];</span><br><span class="line">    // 设置文字颜色为黑色</span><br><span class="line">    self.textColor = textColor;</span><br><span class="line">    // 将文字的填充，绘制在指定区域内</span><br><span class="line">    [super drawRect:rect];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p> 调用：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 初始化一个自定义标签对象，并指定其位置和尺寸</span><br><span class="line">CGRect labelFrame = CGRectMake(100, 100, 150, 60);</span><br><span class="line">NewUILabel *label = [[NewUILabel alloc] initWithFrame:labelFrame];</span><br><span class="line">// 设置标签对象的文本内容</span><br><span class="line">label.text = @&quot;Apple&quot;;</span><br><span class="line">// 设置文字的字体和大小</span><br><span class="line">label.font = [UIFont fontWithName:@&quot;Arial&quot; size:48];</span><br><span class="line">// 将标签对象，添加到当前视图控制器的根视图</span><br><span class="line">[self.view addSubview:label];</span><br><span class="line"></span><br><span class="line">self.view.backgroundColor = [UIColor purpleColor];;</span><br></pre></td></tr></table></figure>
<p>效果：</p>
<p>  <img src="http://upload-images.jianshu.io/upload_images/2648731-bd561e8c256ec619.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="添加自定义字体包"><a href="#添加自定义字体包" class="headerlink" title="添加自定义字体包"></a>添加自定义字体包</h3><p>如果系统提供的标准字体无法满足需求，也可以添加自定义字体包，步骤：</p>
<ol>
<li>拖拽所需要的 .ttf 格式文件的字体（字体查询：<a href="https://fonts.google.com）到项目中，如果你的字体包文件是" target="_blank" rel="noopener">https://fonts.google.com）到项目中，如果你的字体包文件是</a> .otf 格式的，也可以去<a href="https://www.fontsquirrel.com/tools/webfont-generator" target="_blank" rel="noopener">这个网站</a>上进行转换，先上传 .otf 格式文件，再转换为 TrueType 类型并下载：<blockquote>
<p>Tips：下载的字体可能三种后缀格式，分别为：ttc/ttf/otf：</p>
<ol>
<li>TTC 是几个 TTF 合成的字型，例如包含粗体、细体两种字型，TTF 就只有一种字型。</li>
<li>TTF 是 apple 和微软共同推出的字体文件格式，只有一种字型。</li>
<li>OTF 是 TTF 的升级版，支持更高级特性的字体。 </li>
</ol>
<p>💡据说 iOS 9 支持了 .otf 格式字体，你可以试试看。</p>
</blockquote>
</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-fbb25c49bd840647.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ol start="2">
<li><p>配置 Info.plist 文件，添加 <strong>Fonts provided by application</strong> 数组字段，将需要的字体包文件名（***.ttf）作为value 添加到该数组中：<br><img src="http://upload-images.jianshu.io/upload_images/2648731-90e3eeb6385b4f9a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
<li><p>将字体文件添加编译，设置 <strong>TARGETS -&gt; Build Phases -&gt; Copy Bundle Resources</strong> 添加 ***.ttf 字体文件：<br><img src="http://upload-images.jianshu.io/upload_images/2648731-87672ee006a62d92.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
</li>
</ol>
<ol start="4">
<li>使用：</li>
</ol>
<pre><code>UILabel *label = [[UILabel alloc] init];
label.text = @&quot;Stay Hungry,Stay Foolish.&quot;;
label.font = [UIFont fontWithName:@&quot;Sacramento-Regular&quot; size:32.0f];
[label sizeToFit];
label.center = self.view.center;
[self.view addSubview:label];
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/2648731-f27afec30ac0ca3e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ol start="5">
<li>如果以上步骤均设置无误，字体效果出不来，可能是 <code>[UIFont fontWithName:@&quot;&quot; size:];</code> 方法中的字体名设置不正确（💡因为字体名和字体包的文件名不一定相等！！！），所以你可以用以下方法遍历打印一下字体名看看：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[familyNames enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</span><br><span class="line">    NSLog(@&quot;familyNames: %@&quot;,(NSString *)obj);</span><br><span class="line">    NSArray *fontNames = [UIFont fontNamesForFamilyName:(NSString *)obj];</span><br><span class="line">    [fontNames enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</span><br><span class="line">        NSLog(@&quot;\tfontNames: %@&quot;, (NSString *)obj);</span><br><span class="line">    &#125;];</span><br><span class="line">    NSLog(@&quot;--------------------------&quot;);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>​    </p>
<h3 id="附-不同苹方字体San-Francisco的Label尺寸"><a href="#附-不同苹方字体San-Francisco的Label尺寸" class="headerlink" title="附:不同苹方字体San Francisco的Label尺寸"></a>附:不同苹方字体San Francisco的Label尺寸</h3><p>测试字体：<code>[UIFont systemFontOfSize:font weight:UIFontWeightRegular]</code></p>
<p>测试方法：<code>sizeThatFits:</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">Font</th>
<th style="text-align:center">width</th>
<th style="text-align:center">height</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">9.5</td>
<td style="text-align:center">11</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">10.5</td>
<td style="text-align:center">12</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">12.5</td>
<td style="text-align:center">14.5</td>
</tr>
<tr>
<td style="text-align:center">14</td>
<td style="text-align:center">14.5</td>
<td style="text-align:center">17</td>
</tr>
<tr>
<td style="text-align:center">15</td>
<td style="text-align:center">15.5</td>
<td style="text-align:center">18</td>
</tr>
<tr>
<td style="text-align:center">16</td>
<td style="text-align:center">16.5</td>
<td style="text-align:center">19.5</td>
</tr>
<tr>
<td style="text-align:center">17</td>
<td style="text-align:center">17.5</td>
<td style="text-align:center">20.5</td>
</tr>
<tr>
<td style="text-align:center">18</td>
<td style="text-align:center">18.5</td>
<td style="text-align:center">21.5</td>
</tr>
<tr>
<td style="text-align:center">19</td>
<td style="text-align:center">19.5</td>
<td style="text-align:center">23</td>
</tr>
<tr>
<td style="text-align:center">20</td>
<td style="text-align:center">20.5</td>
<td style="text-align:center">24</td>
</tr>
<tr>
<td style="text-align:center">30</td>
<td style="text-align:center">30.5</td>
<td style="text-align:center">36</td>
</tr>
</tbody>
</table>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul>
<li><a href="http://colachan.com/post/3463" target="_blank" rel="noopener">苹果旧金山字体的秘密 @可乐橙</a></li>
<li><a href="http://colachan.com/post/3552" target="_blank" rel="noopener">表单设计:一页只做一件事 @可乐橙</a></li>
<li><a href="http://colachan.com/post/3529" target="_blank" rel="noopener">表单设计优化 @可乐橙</a></li>
<li><a href="http://www.jianshu.com/p/4a3aad22f356" target="_blank" rel="noopener">写一个iOS复杂表单的正确姿势</a><br> <img src="http://upload-images.jianshu.io/upload_images/988593-c5a11178cace2ad4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300" alt></li>
<li><a href="http://www.jianshu.com/p/962ab0cd9bce" target="_blank" rel="noopener">UILabel使用总结</a></li>
<li><a href="https://www.jianshu.com/p/f8a3400836b5" target="_blank" rel="noopener">iOS 常用组件-高效切圆角方法总结</a></li>
<li><a href="https://www.jianshu.com/p/b7f04f2a09d4" target="_blank" rel="noopener">iOS App 导入自定义字体</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/18/《iOS编程（第四版）》Demo6：HQLHypnoNerd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/18/《iOS编程（第四版）》Demo6：HQLHypnoNerd/" class="post-title-link" itemprop="url">《iOS编程（第四版）》Demo6：HQLHypnoNerd</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-18 17:56:00" itemprop="dateCreated datePublished" datetime="2016-08-18T17:56:00+08:00">2016-08-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-17 17:25:35" itemprop="dateModified" datetime="2019-04-17T17:25:35+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/18/《iOS编程（第四版）》Demo6：HQLHypnoNerd/" class="leancloud_visitors" data-flag-title="《iOS编程（第四版）》Demo6：HQLHypnoNerd">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h1 id="HQLHypnoNerd"><a href="#HQLHypnoNerd" class="headerlink" title="HQLHypnoNerd"></a>HQLHypnoNerd</h1><p>这是参照 <strong>《iOS编程（第四版）》</strong> 第6、7章写的非常杂乱的 Demo 笔记，</p>
<ul>
<li><a href="https://github.com/Andy0570/HQLHypnoNerd" target="_blank" rel="noopener">GitHub源码</a></li>
</ul>
<h1 id="窗口、视图控制器、添加视图、访问视图"><a href="#窗口、视图控制器、添加视图、访问视图" class="headerlink" title="窗口、视图控制器、添加视图、访问视图"></a>窗口、视图控制器、添加视图、访问视图</h1><h2 id="main-与UIApplication"><a href="#main-与UIApplication" class="headerlink" title="main() 与UIApplication"></a>main() 与UIApplication</h2><p>用 Objective-C 语言编写的程序的执行入口与C语言相同，都是 main() 函数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int main(int argc, char * argv[]) &#123;</span><br><span class="line">    @autoreleasepool &#123;</span><br><span class="line">        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="UIApplicationMain-函数"><a href="#UIApplicationMain-函数" class="headerlink" title="UIApplicationMain 函数:"></a><strong>UIApplicationMain</strong> 函数:</h3><ul>
<li><p>1️⃣ 创建一个 <strong>UIApplication</strong> 对象（每个iOS应用都有且只有一个该对象）。</p>
<p>作用:维护运行循环。</p>
</li>
<li><p>2️⃣ <strong>UIApplicationMain</strong> 函数还会创建某个指定类的对象，并将其设置为 <strong>UIApplication</strong> 对象的 delegate，该对象的类是由 <strong>UIApplicationMain</strong> 函数得最后一个实参指定的，该实参的类型是 <strong>NSString</strong> 对象，代表的某个类的类名。</p>
<ul>
<li>所以以上代码块中，<strong>UIApplicationMain</strong> 会创建一个 <strong>AppDelegate</strong> 对象，并将其设置为 <strong>UIApplication</strong> 对象的 delegate。</li>
<li>在应用启动运行循环并开始接收事件前，UIApplication对象会向其委托发送一个特定的消息（<code>didFinishLaunchingWithOptions:</code>）完成相应的初始化工作，该方法只会在应用启动完毕后调用一次。</li>
</ul>
</li>
</ul>
<p>初始化方法实现在 <strong>AppDelegate.m</strong> 文件中： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</span><br></pre></td></tr></table></figure>
<h2 id="UIWindow"><a href="#UIWindow" class="headerlink" title="UIWindow"></a>UIWindow</h2><p>见 <a href="http://www.jianshu.com/p/92d077d82d0f" target="_blank" rel="noopener">UIWindow</a></p>
<h2 id="视图控制器"><a href="#视图控制器" class="headerlink" title="视图控制器"></a>视图控制器</h2><ul>
<li><p>视图控制器是 <strong>UIViewController</strong> 类或其子类的对象。每个视图控制器都负责管理一个视图层次结构，包括视图层次结构中的视图并处理相关用户事件，以及将整个视图层次结构添加到应用窗口。</p>
</li>
<li><p><strong>根视图控制器</strong><br> <strong>UIWindow</strong> 对象提供了一个方法将视图控制器的视图层次结构加入应用窗口：<code>setRootViewController</code>,当程序将某个视图控制器设置为 <strong>UIWindow</strong> 对象的 rootViewControl 时，<strong>UIWindow</strong> 对象会将该视图控制器的view作为子视图加入窗口，此外，还会自动调整view的大小，将其设置为与窗口的大小相同。<code>rootViewControl</code> 的 view 需要在应用启动完毕之后就显示，所以 <strong>UIWindow</strong> 对象会在设置完<code>rootViewControl</code> 后立刻加载其 view 。</p>
</li>
<li><p><strong>根视图控制器创建步骤：</strong></p>
<ol>
<li>创建 <strong>UIViewController</strong> 的子类<br><code>@interface myViewController : UIViewController</code></li>
<li>在 <strong>AppDelegate.h</strong> 中声明属性<br><code>@property (strong,nonatomic) UIViewController *viewController;</code></li>
<li>在 <strong>AppDelegate.m</strong> 中实现初始化</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 方法一：</span><br><span class="line">// 设置根视图控制器</span><br><span class="line">BNRMyViewController *mvc = [[BNRyViewController alloc]init]; </span><br><span class="line">self.window.rootViewController = mvc;</span><br><span class="line"></span><br><span class="line">// 方法二：</span><br><span class="line">// 获取指向 NSbundle 对象的指针，该 NSBundle 对象代表应用程序的主程序包</span><br><span class="line">// mainBundle 主程序包对应于文件系统中项目的根目录</span><br><span class="line">NSBundle *appBundle = [NSBundle mainBundle];</span><br><span class="line">// 告诉初始化方法在 appBundle 中查找 HQLReminderViewController.xib 文件</span><br><span class="line">self.viewController = [[myViewController alloc] initWithNibName:@&quot;HQLReminderViewController&quot; bundle: appBundle];</span><br><span class="line">//将 viewController 作为 window 的根视图控制器</span><br><span class="line">self.window.rootViewController =self.viewController;</span><br></pre></td></tr></table></figure>
<p>上述方法二中对【对象是通过 XIB 文件创建的根视图控制器】设置同样可使用方法一实现，即：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HQLReminderViewController *rvc = [[HQLReminderViewController alloc] init];</span><br><span class="line">self.window.rootViewController = rvc;</span><br></pre></td></tr></table></figure></p>
<p>为什么向一个需要使用 NIB 文件的视图控制器发送 <code>init</code> 消息也能成功加载对应的视图？</p>
<p><strong>原因</strong>：</p>
<ul>
<li><code>initWithNibName：bundle：</code> 是 <strong>UIViewController</strong> 的指定初始化方法。</li>
<li>向视图控制器发送 <code>init</code> 消息会调用指定初始化方法  <code>initWithNibName：bundle：</code> 并为两个参数都传入nil。</li>
<li>即使向一个需要使用 NIB 文件的视图控制器发送 <code>init</code> 消息，<strong>UIViewControl</strong> 对象仍然会在应用程序中查找和当前 <code>UIViewControl</code> 子类同名的 XIB 文件。</li>
<li>⚠️ 因此建议为 【<strong>UIViewController</strong> 子类】和【该子类需要载入的NIB文件】取相同的名称，这样当视图控制器需要加载视图时，会自动载入正确的XIB文件。    </li>
</ul>
<h3 id="lazy-loading-延迟加载视图"><a href="#lazy-loading-延迟加载视图" class="headerlink" title="lazy loading 延迟加载视图"></a>lazy loading 延迟加载视图</h3><ul>
<li>视图控制器不会在其被创建出来的那一刻马上创建并载入相应的视图，只有当应用需要将某个视图控制器的视图显示到屏幕上时，相应的视图控制器才会创建其视图。</li>
<li>也就是说，视图控制器刚被创建时，其 <code>view</code> 属性会被初始化为 <strong>nil</strong>。之后，当应用需要将视图控制器的视图显示到屏幕上时，如果 <code>view</code> 属性是 <strong>nil</strong>,就会自动调用 <code>loadview</code> 方法。</li>
<li>⚠️ 为了实现视图延迟加载，<code>在initWithNibName：bundle：</code>中不应该访问 <code>view</code> 或 <code>View</code> 的任何子视图。凡是和 <code>view</code>或 <code>view</code>的子视图有关的代码，都应该在 <code>viewDidLoad</code> 方法中实现，避免加载不需要在屏幕上显示的视图。</li>
<li>视图控制器可以通过两种方式创建视图层次结构<ul>
<li>代码方式：覆盖 <strong>UIViewController</strong> 中的 <code>loadView</code> 方法</li>
<li>文件方式：使用 interface builder 创建一个 NIB 文件，然后加入所需的视图层次结构，最后视图控制器会在运行时加载由该 NIB 文件编译而成的 XIB 文件。</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> - (void)loadView &#123;  </span><br><span class="line"></span><br><span class="line">//创建一个 HQLHypnosisView 对象</span><br><span class="line">HQLHypnosisView *backgroundView = [[HQLHypnosisView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];</span><br><span class="line">self.view = backgroundView;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>上述代码中，将 HQLHypnosisView 对象赋值给视图控制器的 <code>view</code> 属性。</p>
</li>
<li><p><code>view</code> 属性继承自 <strong>UIViewControl</strong> :</p>
<p>   <code>@property(null_resettable, nonatomic,strong) UIView *view;</code><br>   如果视图还没有被设置，那么get方法会首先调用自身的 loadView 方法，如果重写了 setter 或 getter 方法，子类必须调用父类。</p>
</li>
</ul>
<h3 id="运行循环和重绘视图"><a href="#运行循环和重绘视图" class="headerlink" title="运行循环和重绘视图"></a>运行循环和重绘视图</h3><ul>
<li>iOS 应用启动时会开始一个运行循环（run loop）。运行循环的工作是监听事件，当事件发生时运行循环会为相应的事件找到合适的处理方法（类似于单片机中的中断处理机制）,只有当调用的处理方法都执行完毕时，控制权才会再次回到运行循环。</li>
<li>当应用将控制权交回给运行循环时，运行循环首先会检查是否有等待重绘的视图（即在当前循环收到 <code>setNeedsDisplay</code> 消息的视图），然后向所有等待重绘的视图发送  <code>drawRect</code>  消息，最后视图层次结构中所有视图的图层再次组合成一幅完整的图像并绘制到屏幕上。</li>
<li>iOS 做了两方面来保证用户界面的流畅性<ol>
<li>不重绘显示的内容没有改变的视图；</li>
<li>在每次事件处理周期（event handing cycle）中只发送一次 <code>drawRect:</code> 消息。iOS 会在运行循环的最后阶段集中处理所有需要重绘的视图。</li>
</ol>
</li>
</ul>
<h2 id="UIView"><a href="#UIView" class="headerlink" title="UIView"></a>UIView</h2><h3 id="添加视图"><a href="#添加视图" class="headerlink" title="添加视图"></a>添加视图</h3><p><strong>frame</strong>:用于确定与视图层次结构中其他视图的相对位置，从而将自己的图层与其他视图的图层正确组合屏幕上的图像。<br><strong>bounds</strong>:用于确定绘制区域，避免将自己绘制到图层边界之外。<br><strong>frame </strong>是从父视图的坐标系统来看的，而 <strong>bounds</strong> 是从本身的坐标系统来看的.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-6b0e6cf74b47e40a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="frame与bounds的区别"></p>
<p>视图的相关结构：<br>Core Graphics( CG )</p>
<ul>
<li><p><strong>CGPoint</strong>：2D空间中的位置坐标,（x,y）<br>  生成函数：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* **CGSize**：某个对象的尺寸：width、height</span><br><span class="line">   生成函数：```CGSizeMake(width,height)</span><br></pre></td></tr></table></figure></p>
</li>
<li><p><strong>CGRect</strong>：位置和尺寸：origin 和 size<br> 生成函数：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">//创建一个CGRect结构</span><br><span class="line">//CGRect firstFrame = CGRectMake(160, 240, 100, 150);</span><br><span class="line"></span><br><span class="line">CGRect firstFrame = self.window.bounds;</span><br><span class="line"></span><br><span class="line">//创建HQLHypnosisView对象</span><br><span class="line">HQLHypnosisView *firstView = [[HQLHypnosisView alloc] initWithFrame:firstFrame];</span><br><span class="line"></span><br><span class="line">//设置HQLHypnosisView背景色</span><br><span class="line">firstView.backgroundColor = [UIColor greenColor];</span><br><span class="line"></span><br><span class="line">//将HQLHypnosisView对象加入UIWindow对象</span><br><span class="line">[self.window addSubview:firstView];</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<p>也可以在 <strong>HQLHypnosisView.m</strong> 中复写 <strong>initWithFrame:</strong> 方法设置 HQLHypnosisView 背景色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">self =[super initWithFrame:frame];</span><br><span class="line">if (self) &#123;</span><br><span class="line">    //设置HQLHyponsisView对象的背景颜色为透明</span><br><span class="line">    self.backgroundColor = [UIColor clearColor];</span><br><span class="line">	&#125;</span><br><span class="line">return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="视图层次的嵌套"><a href="#视图层次的嵌套" class="headerlink" title="视图层次的嵌套"></a>视图层次的嵌套</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HQLHypnosisView *secondView = [[HQLHypnosisView alloc] <span class="string">initWithFrame:</span>secondFrame];</span><br><span class="line">secondView.backgroundColor = [UIColor blueColor];</span><br><span class="line"></span><br><span class="line"><span class="comment">//将 secondView 添加到 window 上</span></span><br><span class="line">[self.window <span class="string">addSubview:</span>secondView];</span><br><span class="line"></span><br><span class="line"><span class="comment">//视图层次嵌套</span></span><br><span class="line"><span class="comment">//视图的frame所代表的位置是相对于其父视角的</span></span><br><span class="line"><span class="comment">//将 secondView 添加到 firstview 上</span></span><br><span class="line">[firstView <span class="string">addSubview:</span>secondView];</span><br></pre></td></tr></table></figure>
<h3 id="访问视图"><a href="#访问视图" class="headerlink" title="访问视图"></a>访问视图</h3><p>通常情况下，在用户看到创建的视图之前需要对它们做一些额外的初始化工作。<br>两种访问NIB文件视图的方法：</p>
<ul>
<li><code>-viewDidLoad:</code> 该方法会在视图控制器加载完视图之后被调用，此时视图控制器中所有视图属性都已经指向了正确的视图对象。</li>
<li><code>-viewWillAppear:</code>该方法会在视图控制器的 view 添加到应用窗口之前被调用。<br><strong>区别：</strong> ⚠️ <strong>如果只需要在应用启动后设置一次视图对象，就选择 <code>viewDidLoad</code>；如果用户每次看到视图控制器的 view 时都需要对其进行设置，则选择 <code>viewWillAppear</code>。</strong></li>
<li><p>相反，<code>viewWillDisappear:</code> 和 <code>viewDidDisappear</code>方法会在每次视图控制器的 view 从屏幕上消失时被调用。</p>
</li>
<li><p><a href="http://www.cnblogs.com/mjios/archive/2013/02/26/2933667.html" target="_blank" rel="noopener">loadView、viewDidLoad及viewDidUnload的关系</a></p>
</li>
</ul>
<h3 id="设置启动页面延时"><a href="#设置启动页面延时" class="headerlink" title="设置启动页面延时"></a>设置启动页面延时</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//延时3秒</span><br><span class="line">[NSThread sleepForTimeInterval:3.0];</span><br></pre></td></tr></table></figure>
<h1 id="运动效果"><a href="#运动效果" class="headerlink" title="运动效果"></a>运动效果</h1><p>iOS 设备内嵌了许多功能强大的传感器，例如加速传感器，磁场传感器和三轴陀螺仪等。应用可以通过这些传感器了解设备的速度、方向和角度，并实现有用的功能。</p>
<p>例如，应用可以根据设备的方向自动将界面调整为横排模式或竖排模式。从iOS 7开始，Apple 引入了一些新API，可以轻松为应用添加一种通过感应器实现的视差（parallax）效果。</p>
<p>在 <strong>HQLHyponViewController.m</strong> 中修改<code>drawHyponticMessage:</code>方法，为 <strong>UILabel</strong> 对象分别添加水平方向和垂直方向的视差效果，使 <strong>UILabel</strong> 对象的中心点坐标在每个方向上最多移动25点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">//在屏幕随机位置绘制20个UILabel对象</span><br><span class="line">- (void)drawHypnoticMessage:(NSString *)message &#123;</span><br><span class="line"></span><br><span class="line">for (int i =0; i&lt;20; i++) &#123;</span><br><span class="line">    UILabel *messageLabel = [[UILabel alloc] init];</span><br><span class="line">    //设置UILabel对象的文字和颜色</span><br><span class="line">    messageLabel.backgroundColor = [UIColor clearColor];</span><br><span class="line">    messageLabel.textColor = [UIColor whiteColor];</span><br><span class="line">    messageLabel.text = message;</span><br><span class="line">    //根据需要显示的文字调整UILabel对象的大小</span><br><span class="line">    [messageLabel sizeToFit];</span><br><span class="line">    </span><br><span class="line">    //获取随机x坐标</span><br><span class="line">    //使UILabel对象的宽度不超出HQLHyponsisViewController的view的宽度</span><br><span class="line">    int width = (int)(self.view.bounds.size.width - messageLabel.bounds.size.width);</span><br><span class="line">    int x = arc4random() % width;</span><br><span class="line">    </span><br><span class="line">    //获取随机y坐标</span><br><span class="line">    //使UILabel对象的高度不超出HQLHyponsisViewController的view的高度</span><br><span class="line">    int height = (int)(self.view.bounds.size.width - messageLabel.bounds.size.height);</span><br><span class="line">    int y =184 + arc4random() % height;</span><br><span class="line">    </span><br><span class="line">    //设置UILabel对象的frame</span><br><span class="line">    CGRect frame = messageLabel.frame;</span><br><span class="line">    frame.origin = CGPointMake(x, y);</span><br><span class="line">    messageLabel.frame = frame;</span><br><span class="line">    </span><br><span class="line">    //将UILabel对象添加到HQLHyponsisViewController的view中</span><br><span class="line">    [self.view addSubview:messageLabel];</span><br><span class="line">    </span><br><span class="line">    //运行效果:水平方向和垂直方向的视差效果</span><br><span class="line">  	//设置UILabel 对象的中心点坐标在每个方向上最多移动25点</span><br><span class="line">    UIInterpolatingMotionEffect *motionEffect;</span><br><span class="line">    motionEffect = [[UIInterpolatingMotionEffect alloc] initWithKeyPath:@&quot;center.x&quot; type:UIInterpolatingMotionEffectTypeTiltAlongHorizontalAxis];</span><br><span class="line">    motionEffect.minimumRelativeValue = @(-25);</span><br><span class="line">    motionEffect.maximumRelativeValue = @(25);</span><br><span class="line">    [messageLabel addMotionEffect:motionEffect];</span><br><span class="line">    </span><br><span class="line">    motionEffect = [[UIInterpolatingMotionEffect alloc] initWithKeyPath:@&quot;center.y&quot; type:UIInterpolatingMotionEffectTypeTiltAlongVerticalAxis];</span><br><span class="line">    motionEffect.minimumRelativeValue = @(-25);</span><br><span class="line">    motionEffect.maximumRelativeValue = @(25);</span><br><span class="line">    [messageLabel addMotionEffect:motionEffect];  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="LocalNotification（本地通知）"><a href="#LocalNotification（本地通知）" class="headerlink" title="LocalNotification（本地通知）"></a>LocalNotification（本地通知）</h1><p><strong>本地通知</strong>（local notification）用于向用户提示一条消息，即使应用没有运行，用户也可以收到本地通知。<br>应用还可以通过后台服务器实现推送通知（push notification）.有关推送通知的技术细节请参考Apple的Local and Push Notification Programming Guide（本地通知和推送通知编程指南）。<br>Demo:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-5bd235356d1e2922.gif?imageMogr2/auto-orient/strip" alt="locolNotification.gif"></p>
<p>实现本地通知方法代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)addReminder:(id)sender &#123;</span><br><span class="line">    </span><br><span class="line">    NSDate *date = self.datePicker.date;</span><br><span class="line">    NSLog(@&quot;Setting a reminder for %@&quot;,date);</span><br><span class="line">    </span><br><span class="line">    if ([UIApplication instancesRespondToSelector:@selector(registerUserNotificationSettings:)])&#123;</span><br><span class="line">        </span><br><span class="line">        [[UIApplication sharedApplication] registerUserNotificationSettings:[UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeAlert|UIUserNotificationTypeBadge|UIUserNotificationTypeSound categories:nil]];</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 创建 UILocalNotification 对象</span><br><span class="line">    UILocalNotification *note = [[UILocalNotification alloc] init];</span><br><span class="line">    // 设置显示内容</span><br><span class="line">    note.alertBody = @&quot;Hypnotize me!&quot;;</span><br><span class="line">    // 设置提醒时间</span><br><span class="line">    note.fireDate = date;</span><br><span class="line">    </span><br><span class="line">    // 使用 scheduleLocalNotification: 方法注册通知</span><br><span class="line">    [[UIApplication sharedApplication] scheduleLocalNotification:note];</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;addReminder run over&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UITabBarController"><a href="#UITabBarController" class="headerlink" title="UITabBarController"></a>UITabBarController</h1><p>参考： <a href="http://www.jianshu.com/p/33d3300afd91" target="_blank" rel="noopener">UITabBarController（标签栏）</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="http://www.jianshu.com/p/2e8ef223efef" target="_blank" rel="noopener">天才第一步，从UIWindow谈起 @吴白</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/18/《iOS编程（第四版）》Demo1：Quiz/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/18/《iOS编程（第四版）》Demo1：Quiz/" class="post-title-link" itemprop="url">《iOS编程（第四版）》Demo1：Quiz</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-18 17:08:00" itemprop="dateCreated datePublished" datetime="2016-08-18T17:08:00+08:00">2016-08-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-17 17:26:08" itemprop="dateModified" datetime="2019-04-17T17:26:08+08:00">2019-04-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/18/《iOS编程（第四版）》Demo1：Quiz/" class="leancloud_visitors" data-flag-title="《iOS编程（第四版）》Demo1：Quiz">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>《iOS编程》Demo应用：Quiz</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-dac10288198f7605.gif?imageMogr2/auto-orient/strip" alt="Quiz应用"></p>
<p> 功能：在视图中显示一个问题，用户点击视图下方的按钮，可以显示相应的答案，用户点击上方的按钮，则会显示一个新的问题   </p>
<h1 id="第1章-第一个简单的iOS应用"><a href="#第1章-第一个简单的iOS应用" class="headerlink" title="第1章 第一个简单的iOS应用"></a>第1章 第一个简单的iOS应用</h1><h2 id="1-1-创建Xcode项目"><a href="#1-1-创建Xcode项目" class="headerlink" title="1.1 创建Xcode项目"></a>1.1 创建Xcode项目</h2><ul>
<li>位于工作空间窗口左侧的是导航面板区域（navigator area），负责显示各种不同的导航面板。</li>
<li>项目导航面板（project navigator）：显示项目中的文件。</li>
<li>项目导航面板中的组只用来整理文件，与文件系统无关。</li>
<li>一个类（class）表示一种对象（object）。iOS开发是面向对象的，每个iOS应用都可以看成是由一系列协同工作的对象构成的。</li>
</ul>
<h2 id="1-2-模型-视图-控制器"><a href="#1-2-模型-视图-控制器" class="headerlink" title="1.2 模型-视图-控制器"></a>1.2 模型-视图-控制器</h2><p><strong>MVC设计模式</strong>的含义：应用创建的任何一个对象，其类型必定是模型对象、视图对象或者控制器对象三种类型中的一个。</p>
<ul>
<li>【视图对象】是用户可以看见的对象，用来构建用户界面。</li>
<li>【模型对象】负责存储数据，与用户界面无关。通常情况下，【模型对象】表示真实世界中与用户相关的事物。</li>
<li>【控制器对象】扮演“管家”的角色，它用于控制【视图对象】为用户呈现的内容，以及负责确保【视图对象】和【模型对象】的数据保持一致。</li>
</ul>
<blockquote>
<p>⚠️  【模型对象】和【视图对象】之间没有直接产生联系，而是由【控制器对象】负责彼此间的消息发送和数据传递。</p>
</blockquote>
<h2 id="1-3-设计Quiz"><a href="#1-3-设计Quiz" class="headerlink" title="1.3 设计Quiz"></a>1.3 设计Quiz</h2><p>开发中需要使用的对象：</p>
<ul>
<li>四个视图对象：<strong>UILabel</strong> 和 <strong>UIButton</strong>；</li>
<li>两个控制器对象：<strong>AppDelegate</strong>、<strong>QuizViewControl</strong>的对象各一个；</li>
<li>两个模型对象：<strong>NSArray</strong> 的对象两个；</li>
</ul>
<h2 id="1-4-创建视图控制器"><a href="#1-4-创建视图控制器" class="headerlink" title="1.4 创建视图控制器"></a>1.4 创建视图控制器</h2><h2 id="1-5-创建界面"><a href="#1-5-创建界面" class="headerlink" title="1.5 创建界面"></a>1.5 创建界面</h2><ul>
<li><p>Xcode 会使用 Interface Builder （界面创建工具）打开 XIB 文件。Interface Builder 是一种可视化编辑器，可以用拖动对象的方式创建图形用户界面。</p>
</li>
<li><p>XIB 的全称就是 XML Interface Builder。</p>
</li>
</ul>
<h3 id="创建视图对象"><a href="#创建视图对象" class="headerlink" title="创建视图对象"></a>创建视图对象</h3><h3 id="NIB文件"><a href="#NIB文件" class="headerlink" title="NIB文件"></a>NIB文件</h3><p>构建项目时，所有XIB文件都会被编译成NIB文件（NIB文件体积更小，更容易解析），然后Xcode会将NIB文件拷贝至应用的程序包（bundle）中。</p>
<h2 id="1-6-创建关联"><a href="#1-6-创建关联" class="headerlink" title="1.6 创建关联"></a>1.6 创建关联</h2><p>在 Interface Builder中可以创建两种关联</p>
<ul>
<li><strong>插座变量</strong>（outlets）:指向对象的指针；</li>
<li><strong>动作</strong>（actions）：一种方法，在视图对象和用户发生交互时被调用。</li>
</ul>
<h3 id="设置插座变量"><a href="#设置插座变量" class="headerlink" title="设置插座变量"></a>设置插座变量</h3><h2 id="1-7-创建模型对象"><a href="#1-7-创建模型对象" class="headerlink" title="1.7 创建模型对象"></a>1.7 创建模型对象</h2><p><a href="https://github.com/Andy0570/QUIZ.git" target="_blank" rel="noopener">gitHub下载</a></p>
<h3 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h3><ul>
<li><a href="http://www.infoq.com/cn/articles/rethinking-mvc-mvvm" target="_blank" rel="noopener">被误解的MVC和被神化的MVVM</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_Foundation框架/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_Foundation框架/" class="post-title-link" itemprop="url">Objective-C_Foundation框架</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:36:47" itemprop="dateModified" datetime="2019-04-18T00:36:47+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_Foundation框架/" class="leancloud_visitors" data-flag-title="Objective-C_Foundation框架">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="Foundation框架"><a href="#Foundation框架" class="headerlink" title="Foundation框架"></a>Foundation框架</h3><ul>
<li><strong>框架</strong>是由许多类、方法、函数组成的一个类库。以便于开发者更方便的开发程序。</li>
<li>许多框架的集合构成了<strong>SDK（开发工具包）</strong>。</li>
<li><strong>Foundation</strong>是OC语言的基础类库。此框架中的类都以 “NS” 为前缀,便于与其他类区分开。</li>
<li><strong>UIKit框架</strong>是UI界面的基础库<br>Foundation中的大部分类都提供了两种方式创建对象:<ul>
<li>alloc创建：<code>NSNumber *number1 = [[NSNumber alloc] initWithInt:100];</code></li>
<li>类方法创建：<code>NSNumber *number2 = [NSNumber numberWithInt:100];</code> </li>
</ul>
</li>
</ul>
<h3 id="NSObject类、延迟调用"><a href="#NSObject类、延迟调用" class="headerlink" title="NSObject类、延迟调用"></a>NSObject类、延迟调用</h3><p><strong>NSObject</strong>类是一切类的根类(基类),它是没有父类,它是所有对象的“生命”方法,也是了对象生终的“终结”。</p>
<h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><ul>
<li>比较两个指针是否指向同一个对象(指针是否指向同一个内存区域)<br>  <code>- (BOOL)isEqual:(id)object;</code></li>
<li>调用一个方法<br>  <code>- (id)performSelector:(SEL)aSelector;</code></li>
<li>调用一个方法,并且传递一个参数<br>  <code>- (id)performSelector:(SEL)aSelector withObject:(id)object;</code></li>
<li>调用一个方法,并且传递2个参数<br>  <code>- (id)performSelector:(SEL)aSelector withObject:(id)object1 withObject:(id)object2;</code></li>
<li>某一个对象是否派生或属于某一类<br>  <code>- (BOOL)isKindOfClass:(Class)aClass;</code></li>
<li>某一个对象是否属于某类<br>  <code>- (BOOL)isMemberOfClass:(Class)aClass;</code></li>
<li>某对象是否响应指定的方法<br>  <code>- (BOOL)respondsToSelector:(SEL)aSelector;</code></li>
<li><p>返回指定对象的父类和本类<br>  <code>- (Class)superclass;  - (Class)class;</code></p>
<p>  例：假设 demo1 是一个私有方法（在 .m 文件中实现，但在 .h 文件中没有声明的方法）</p>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//创建了一个方法选择器，封装demo1方法   </span></span><br><span class="line">	SEL selector1 = <span class="meta">@selector</span>(demo1);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//在performSelector方法中调用selector1方法选择器，也就是demo1</span></span><br><span class="line">   [<span class="keyword">super</span> <span class="string">performSelector:</span>selector1];</span><br><span class="line">	[self <span class="string">performSelector:</span>selector1];  <span class="comment">//同上</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//perform调用带1个参数的方法，@"hello"传给了demo2:的形参</span></span><br><span class="line">    [self <span class="string">performSelector:</span><span class="meta">@selector</span>(<span class="string">demo2:</span>)</span><br><span class="line"><span class="symbol">               withObject:</span>@<span class="string">"hello"</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用带2个参数的方法</span></span><br><span class="line">	[self <span class="string">performSelector:</span>(SEL)</span><br><span class="line"><span class="symbol">	              withObject:</span>(id)</span><br><span class="line"><span class="symbol">	               withObject:</span>(id)];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//延迟调用</span></span><br><span class="line">    [self demo1];  <span class="comment">//没有延迟，立马调用demo1方法</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//延迟调用demo1，但是代码执行到此处时，不会停在此处3秒钟</span></span><br><span class="line">    [self <span class="string">performSelector:</span><span class="meta">@selector</span>(demo1) <span class="string">withObject:</span>nil <span class="string">afterDelay:</span><span class="number">3.0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>//让程序保持运行状态
[[NSRunLoop currentRunLoop] run];
</code></pre><hr>
<h4 id="NSString"><a href="#NSString" class="headerlink" title="NSString"></a>NSString</h4><ul>
<li><a href="http://www.jianshu.com/p/c4eadf54cd25" target="_blank" rel="noopener">第16章——NSString</a></li>
</ul>
<hr>
<h4 id="NSMutableString"><a href="#NSMutableString" class="headerlink" title="NSMutableString"></a>NSMutableString</h4><ul>
<li><a href="http://www.jianshu.com/p/b628c48be542" target="_blank" rel="noopener">第16章——NSMutableString</a></li>
</ul>
<hr>
<h4 id="NSArray"><a href="#NSArray" class="headerlink" title="NSArray"></a>NSArray</h4><ul>
<li><a href="http://www.jianshu.com/p/aaa89e070f84" target="_blank" rel="noopener">第17章——NSArray</a></li>
</ul>
<hr>
<h4 id="NSMutableArray"><a href="#NSMutableArray" class="headerlink" title="NSMutableArray"></a>NSMutableArray</h4><ul>
<li><a href="http://www.jianshu.com/p/64443aecc4dd" target="_blank" rel="noopener">第17章——NSMutableArray</a></li>
</ul>
<hr>
<h4 id="Collection-类"><a href="#Collection-类" class="headerlink" title="Collection 类"></a>Collection 类</h4><ul>
<li><a href="http://www.jianshu.com/p/d84d570fe6a9" target="_blank" rel="noopener">第24章——Collection 类</a></li>
</ul>
<hr>
<h4 id="NSNumber"><a href="#NSNumber" class="headerlink" title="NSNumber"></a>NSNumber</h4><ul>
<li><a href="http://www.jianshu.com/p/6fa0926dd478" target="_blank" rel="noopener">NSNumber</a></li>
</ul>
<hr>
<h4 id="NSValue"><a href="#NSValue" class="headerlink" title="NSValue"></a>NSValue</h4><ul>
<li><a href="http://www.jianshu.com/p/928502aba37a" target="_blank" rel="noopener">NSValue</a></li>
</ul>
<hr>
<h4 id="NSNull"><a href="#NSNull" class="headerlink" title="NSNull"></a>NSNull</h4><p>我们之前提到,不能在集合(collection) 中存储nil值,因为字典和数组中nil都有特殊的含义,但有时候你确实需要存储一个表示“什么都没有”的值。那就用 <strong>NSNull</strong> 代替,表示什么都不是,什么都没有。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [zhangsan,lisi,  ,zhaoliu];</span></span><br><span class="line">NSNull *<span class="keyword">null</span> = [NSNull <span class="keyword">null</span>];</span><br><span class="line">NSArray *<span class="keyword">array</span> = @[@<span class="string">"zhagnsan"</span>,@<span class="string">"lisi"</span>,<span class="keyword">null</span>,@<span class="string">"zhaoliu"</span>];</span><br></pre></td></tr></table></figure>
<h5 id="线上的一个实际例子："><a href="#线上的一个实际例子：" class="headerlink" title="线上的一个实际例子："></a>线上的一个实际例子：</h5><p>本意：如果用户已经成功登录，就获取存储在磁盘上的用户名：<br> <code>NSDictionary *dictionary = @{@&quot;username&quot;:_username};</code><br>实际生产环境中，发生了这样的情况：判断用户已经登录成功，但是无法获取用户名导致应用crash。<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">attachDatas:</span></span><br><span class="line"><span class="symbol">Exception:</span>&#123;</span><br><span class="line">    Name = NSInvalidArgumentException<span class="comment">;</span></span><br><span class="line">    Reason = <span class="string">"*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0]"</span><span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最初的修复方法是，判断为nil,就传入一个空字符串： @””：<br><code>NSDictionary *dictionary = @{@&quot;username&quot;:_username?:@&quot;&quot;};</code><br>规范的方法是传入一个空对象：<br> <code>NSDictionary *dictionary = @{@&quot;username&quot;:_username?:[NSNull null]};</code><br>参考：<a href="http://nshipster.cn/nil/" target="_blank" rel="noopener">nshipster: nil / Nil / NULL / NSNull</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_KVO、KVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_KVO、KVC/" class="post-title-link" itemprop="url">Objective-C_KVO、KVC</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:38:21" itemprop="dateModified" datetime="2019-04-18T00:38:21+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_KVO、KVC/" class="leancloud_visitors" data-flag-title="Objective-C_KVO、KVC">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="KVC"><a href="#KVC" class="headerlink" title="KVC"></a>KVC</h2><h3 id="键值编码的基本概念"><a href="#键值编码的基本概念" class="headerlink" title="键值编码的基本概念"></a>键值编码的基本概念</h3><ol>
<li><strong>KVC</strong> 是 <strong>KeyValue Coding</strong> 的简称，它是一种可以直接通过字符串的名字(key)来访问属性的机制。使用该机制不需要调用存取方法和变量实例就可访问对象属性。本质上讲，键-值编码定义了你的程序存取方法需要实现的样式及方法签名。</li>
<li>在应用程序中实现键-值编码兼容性是一项重要的设计原则。存取方法可以加<br>强合适的数据封装，而键-值编码方法在多数情况下可简化程序代码。</li>
<li>键-值编码方法在 Objective-C 非标准协议（类目）<strong>NSKeyValueCoding</strong>中被声明，默认的实现方法由 <strong>NSObject</strong> 提供，所以凡是继承自 <strong>NSObject</strong> 的类都具备 KVC 功能。</li>
<li>键-值编码支持带有对象值的属性，同时也支持纯数值类型和结构。非对象参<br>数和返回类型会被识别并自动封装/解封。</li>
</ol>
<h3 id="设置和访问"><a href="#设置和访问" class="headerlink" title="设置和访问"></a>设置和访问</h3><ul>
<li>键/值编码中的基本调用包括 <code>-valueForKey：</code> 和 <code>-setValue：forkey：</code> 这两个<br>方法，它们以字符串的形式向对象发送消息，字符串是我们关注属性的关键。</li>
</ul>
<p>示例1：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">BNRAppliance *a = [[BNRAppliance alloc] init];</span><br><span class="line"></span><br><span class="line">[a <span class="string">setProductName:</span>@<span class="string">"Washing Machine"</span>];</span><br><span class="line"><span class="comment">// 使用 KVC 重写以上代码</span></span><br><span class="line"> [a <span class="string">setValue:</span>@<span class="string">"Washing Machine"</span> <span class="string">forKey:</span>@<span class="string">"productName"</span>];</span><br><span class="line">        </span><br><span class="line">[a <span class="string">setVoltage:</span><span class="number">240</span>];</span><br><span class="line"><span class="comment">// 使用 KVC 重写以上代码</span></span><br><span class="line">[a <span class="string">setValue:</span>[NSNumber <span class="string">numberWithInt:</span><span class="number">240</span>] <span class="string">forKey:</span>@<span class="string">"voltage"</span>];</span><br><span class="line">        </span><br><span class="line"> NSLog(@<span class="string">"a is %@"</span>,a);</span><br><span class="line"> <span class="comment">// 使用 KVC 重写以上代码</span></span><br><span class="line"> NSLog(@<span class="string">"the product name is %@"</span>,[a <span class="string">valueForKey:</span>@<span class="string">"productName"</span>]);</span><br></pre></td></tr></table></figure></p>
<p>示例2：<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Person *<span class="keyword">jack </span>= [[Person alloc] init]<span class="comment">;</span></span><br><span class="line">NSMutableString *name = [[NSMutableString alloc] initWithFormat:@<span class="string">"jack"</span>]<span class="comment">;</span></span><br><span class="line">[<span class="keyword">jack </span>setValue:name forKey:@<span class="string">"name"</span>]<span class="comment">;</span></span><br><span class="line">NSLog(@<span class="string">"jack name : %@"</span>, [<span class="keyword">jack </span>valueForKey:@<span class="string">"name"</span>])<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>使用KVC，编译器会查找是否存在 <strong>setter</strong>、<strong>getter</strong> 方法，如果不存在，它将在内部查找名为 <strong>_key</strong> 或 <strong>key</strong> 的实例变量。通过 KVC，可以获取不存在<strong>getter</strong>方法的对象值，无需通过对象指针直接访问。</li>
<li>KVC 能够在没有存取方法的情况下直接存取实例变量。</li>
<li>⚠️非对象类型：当我们通过 <code>setValue：forKey：</code> 设置对象的值，或通过<br><code>valueForKey</code> 来获取对象的值时，如果对象的实例变量为基本数据类型（<strong>char、int、float、BOOL</strong>）时，我们需要使用 <strong>NSNumber</strong> 对象对数据进行 <strong>封装</strong>。</li>
</ul>
<h3 id="key路径"><a href="#key路径" class="headerlink" title="key路径"></a>key路径</h3><ul>
<li>除了通过键设置值外，键/值编码还支持指定路径，像文件系统一样。用“点”<br>号隔开。</li>
<li>使用 key path 可以一次性遍历复杂的对象表。</li>
<li>注意顺序，第一个想要遍历的对象放在第一个。</li>
</ul>
<p>示例：<br><code>BNRDepartment. manager</code> 指向 <code>BNREmployee. emergencyContact</code> 指向 <code>BNRPerson. phoneNumber</code></p>
<pre><code>BNRDepartment *sales = ...;
BNREmployee *sickEmployee = [sales valueForKey:@&quot;manager&quot;];
BNRPerson *personToCall = [sickEmployee valueForKey:@&quot;emergencyContact&quot;];
[personToCall setValue:@&quot;555-606-0842&quot; forKey:@&quot;phoneNumber&quot;];

// 使用 Key路径 重写以上代码
BNRDepartment *sales = ...;
[personToCall setValue:@&quot;555-606-0842&quot;
            forKeyPath:@&quot;manager.emergencyContact.phoneNumber&quot;];
</code></pre><h3 id="一对多的关系"><a href="#一对多的关系" class="headerlink" title="一对多的关系"></a>一对多的关系</h3><ul>
<li>如果向 <strong>NSArray</strong> 请求一个键值，它实际上会查询数组中的每个对象来查找这个<br>键值，然后将查询结果打包到另一个数组中并返回给你。</li>
</ul>
<pre><code>NSArray *booksArray = [NSArray arrayWithObjects:book1, book2, nil];
[book1 release];
[book2 release];
[book setValue:booksArray forKey:@&quot;relativeBooks&quot;];
NSLog(@&quot;books 2: %@&quot;, [book valueForKeyPath:@&quot;relativeBooks.price&quot;]);
</code></pre><h3 id="实现简单的运算"><a href="#实现简单的运算" class="headerlink" title="实现简单的运算"></a>实现简单的运算</h3><pre><code>NSString *count = [book valueForKeyPath:@&quot;relativeBooks.@count&quot;];
NSLog(@&quot;count : %@&quot;, count);
NSString *sum = [book valueForKeyPath:@&quot;relativeBooks.@sum._price&quot;];
NSLog(@&quot;sum : %@&quot;, sum);
NSString *avg = [book valueForKeyPath:@&quot;relativeBooks.@avg._price&quot;];
NSLog(@&quot;avg : %@&quot;, avg);
NSString *min = [book valueForKeyPath:@&quot;relativeBooks.@min._price&quot;];
NSLog(@&quot;min : %@&quot;, min);
NSString *max = [book valueForKeyPath:@&quot;relativeBooks.@max._price&quot;];
NSLog(@&quot;max : %@&quot;, max);
</code></pre><h2 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ol>
<li><strong>Key Value Observing</strong>，直译为：基于键值的观察者。它提供一种机制，当指定的对象的属性被修改后，则对象就会接受到通知。简单的说就是每次指定的被观察对象的属性被修改后，KVO就会自动通知相应的观察者了。</li>
<li>与 <strong>NSNotification</strong>不同，键-值观察中并没有所谓的中心对象来为所有观察者提供变化通知。取而代之地，当有变化发生时，通知被直接发送至处于观察状态的对象。<strong>NSObject</strong> 提供这种基础的键-值观察实现方法。   </li>
<li>你可以观察任意对象属性，包括简单属性，对一或是对多关系。对多关系的观察者将会被告知发生变化的类型-也就是任意发生变化的对象。</li>
<li>键-值观察为所有对象提供自动观察兼容性。你可以通过禁用自动观察通知并<br>实现手动通知来筛选通知。</li>
</ol>
<h3 id="注册观察者"><a href="#注册观察者" class="headerlink" title="注册观察者"></a>注册观察者</h3><p>为了正确接收属性的变更通知，观察对象必须首先发送一个<br><code>addObserver:forKeyPath:options:context:</code>消息至被观察对象，用以传送观察<br>对象和需要观察的属性的关键路径，以便与其注册。选项参数指定了发送变更通知时提供给观察者的信息。 使用<code>NSKeyValueObservingOptionOld</code>选项可以将<br>初始对象值 以变更字典中的一个项的形式提供给观察者。指定<br><code>NSKeyValueObservingOptionNew</code>选项可以将新的值以一个项的形式 添加至<br>变更字典。你可以使用逐位“|”这两个常量来指定接收上述两种类型的值。<br>示例：</p>
<pre><code>BNRLogger *logger = [[BNRLogger alloc] init];
__unused NSTimer *timer =
            [NSTimer scheduledTimerWithTimeInterval:2.0
                                             target:logger
                                           selector:@selector(updateLastTime:)
                                           userInfo:nil
                                            repeats:YES];

BNRObserver *observer = [[BNRObserver alloc] init];
// 无论 lastTime 何时发生变化，都要通知我它改变的新值以及改变之前的旧值
[logger addObserver:observer
         forKeyPath:@&quot;lastTime&quot;
            options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld
            context:nil];

[[NSRunLoop mainRunLoop] run];
</code></pre><h3 id="接受变更后通知"><a href="#接受变更后通知" class="headerlink" title="接受变更后通知"></a>接受变更后通知</h3><ul>
<li>当对象的一个被观察属性发生变动时，观察者收到一个<br><code>observeValueForKeyPath:ofObject:change:context:</code>消息。所有观察者都必须<br>实现这一方法。触发观察通知的对象和键路径、包含变更细节的字典，以及观察者<br>注册时提交的上下文指针均被提交给观察者，<code>context</code>可以为任意类型参数。<br>示例：</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)observeValueForKeyPath:(<span class="built_in">NSString</span> *)keyPath</span><br><span class="line">                      ofObject:(<span class="keyword">id</span>)object</span><br><span class="line">                        change:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSKeyValueChangeKey</span>,<span class="keyword">id</span>&gt; *)change</span><br><span class="line">                       context:(<span class="keyword">void</span> *)context &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *oldValue = [change objectForKey:<span class="built_in">NSKeyValueChangeOldKey</span>];</span><br><span class="line">    <span class="built_in">NSString</span> *newValue = [change objectForKey:<span class="built_in">NSKeyValueChangeNewKey</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Observed:%@ of %@ was changed from %@ to %@"</span>,</span><br><span class="line">          keyPath,object,oldValue,newValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="移除观察者身份"><a href="#移除观察者身份" class="headerlink" title="移除观察者身份"></a>移除观察者身份</h3><ul>
<li>你可以发送一条指定观察方对象和键路径的<code>removeObserver:forKeyPath:</code><br>消息至被观察的对象，来移除一个键-值观察者。（当我们达到目的时）<br>示例：</li>
</ul>
<pre><code>[child removeObserver:self forKeyPath:@&quot;key&quot;];
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_异常处理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_异常处理/" class="post-title-link" itemprop="url">Objective-C_异常处理</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:36:42" itemprop="dateModified" datetime="2019-04-18T00:36:42+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_异常处理/" class="leancloud_visitors" data-flag-title="Objective-C_异常处理">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><hr>
<p><strong>异常</strong>：当程序执行时，发生的某种特殊状况,打断了正常的运转流程。</p>
<ul>
<li>Objective-C 的异常处理语法与Java和C++类似。通过使用 <strong>NSException</strong>, <strong>NSError</strong> 以及自定义的异常处理类来处理这些异常。</li>
<li>Objective-C 对异常的支持包括四个编译器指令: <strong>@try</strong>、<strong>@catch</strong>、<strong>@throw</strong> 以及 <strong>@finally</strong>。使用规则:              </li>
<li>如果这句或这部分代码有可能出现问题,就把它放在<code>@try{}</code>中.</li>
<li><code>@catch</code> 捕获异常,出现了问题后,会执行到这里,然后你就可以对错误进行另外的处理,比如记录日志或者提醒用户哪错了。</li>
<li><code>@finally</code> 无论是否会抛出异常,这个块中的代码都会执行。 </li>
<li><code>@throw</code>指令允许你抛出自己的异常。可以使用该指令抛出特定的异常。</li>
</ul>
<p><strong>异常分类:</strong></p>
<ol>
<li>数组越界;</li>
<li>不能识别的方法选择器;</li>
<li>野指针调用：指针指向销毁的对象;</li>
</ol>
<p>示例：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@try</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @try 块中写有可能出错的代码段</span></span><br><span class="line">    <span class="built_in">NSArray</span> *array = [<span class="built_in">NSArray</span> array];</span><br><span class="line">    [array objectAtIndex:<span class="number">1</span>];  <span class="comment">//数组越界</span></span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">@catch</span> (<span class="built_in">NSException</span> *exception) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @catch 块内处理异常代码</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"捕获到异常：%@%@"</span>,exception.name, exception.reason);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">@finally</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//可选项，不管是否出现异常，都会执行此代码段</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"始终执行的代码！"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Hello, World!"</span>);</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>Demo[17328:3652315] 捕获到异常：NSRangeException*** -[__NSArray0 objectAtIndex:]: index 1 beyond bounds for empty NSArray<br>Demo[17328:3652315] 始终执行的代码！<br>Demo[17328:3652315] Hello, World!</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_方法调用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_方法调用/" class="post-title-link" itemprop="url">Objective-C_方法调用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:36:04" itemprop="dateModified" datetime="2019-04-18T00:36:04+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_方法调用/" class="leancloud_visitors" data-flag-title="Objective-C_方法调用">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="方法调用"><a href="#方法调用" class="headerlink" title="方法调用"></a>方法调用</h3><p>OC语言中采用特定的语言调用类或者实例(对象)的方法称为<strong>发送消息</strong>或<strong>方法调用</strong>。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法调用格式：[对象 方法名];</span></span><br><span class="line">[<span class="meta">Person1 shopping</span>];   </span><br><span class="line"><span class="comment">// 调用带参数的方法 </span></span><br><span class="line">[<span class="meta">Person2 goshopping:200.0</span>];</span><br></pre></td></tr></table></figure></p>
<h3 id="set、get方法"><a href="#set、get方法" class="headerlink" title="set、get方法"></a>set、get方法</h3><p>set、get方法用来访问和修改对象里面的属性值。</p>
<ul>
<li>set方法是对某一个属性设值。</li>
<li>get方法是获取某一个属性值。<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.定义设置器方法   </span></span><br><span class="line"><span class="comment">//年龄的设置器方法：给对象的年龄设置的   </span></span><br><span class="line">-(<span class="keyword">void</span>)<span class="string">setAge:</span>(NSInteger)age;   </span><br><span class="line">-(<span class="keyword">void</span>)<span class="string">setName:</span>(NSString *)name;   </span><br><span class="line">-(<span class="keyword">void</span>)<span class="string">setWeight:</span>(<span class="keyword">float</span>)weight;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.定义多个参数的设置器方法   </span></span><br><span class="line"><span class="comment">//方法名：setName:setAge:setweight:   </span></span><br><span class="line">-(<span class="keyword">void</span>)<span class="string">setAge:</span>(NSInteger)age   <span class="string">setName:</span>(NSString *)name   <span class="string">setWeight:</span>(<span class="keyword">float</span>)weight;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.定义访问器方法   </span></span><br><span class="line"><span class="comment">//访问器方法：用于访问对象的属性值   </span></span><br><span class="line"><span class="comment">//OC里的命名规范:get方法名不需要加get前缀   </span></span><br><span class="line">-(NSInteger)age;   </span><br><span class="line">-(NSString *)name;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><p>在类的外部如：<em>main.m</em> 文件中想要给对象设置属性，要通过调用相应的设置器方法<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式：[对象 方法名]</span></span><br><span class="line"><span class="comment">// set 方法</span></span><br><span class="line">[Person setAge:<span class="number">34</span>];   </span><br><span class="line">[Person setName:<span class="string">@"张三"</span>];   </span><br><span class="line">[Person setWeight:<span class="number">80</span>];&lt;br /&gt;    </span><br><span class="line"></span><br><span class="line"><span class="comment">// get 方法  </span></span><br><span class="line"><span class="comment">// 用age变量接收调用的方法返回值   </span></span><br><span class="line"><span class="built_in">NSInteger</span> age = [Person age ];   </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"person的年龄：%ld"</span>,age);   </span><br><span class="line"><span class="built_in">NSString</span> *name = [Person name];   </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"person的名字：%@"</span>,name);   </span><br><span class="line">    </span><br><span class="line"><span class="comment">// 点语法</span></span><br><span class="line"><span class="comment">//点语法只能调用 set 和 get 方法</span></span><br><span class="line">Person.age = <span class="number">34</span>;   <span class="comment">//等效于 [Person setAge:34]; </span></span><br><span class="line"><span class="built_in">NSInteger</span> age = Person.age; <span class="comment">//等效于 NSInteger age = [Person age ];</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>字符串<br>  OC中字符串都是以@开头的,比如@<code>&quot;Hello&quot;</code>是OC中的字符串。</li>
<li>控制台打印<br>   C语言中使用<code>printf(&quot;Hello&quot;)</code>打印字符串, OC中使用NSLog函数打印字符串:<code>NSLog(@&quot;Hello&quot;)</code>;</li>
<li>把一个对象使用%@打印，实际上是调用了此对象的description，然后取的此方法的返回值打印。   <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,book);     </span><br><span class="line"><span class="comment">//与下面的方法等价       </span></span><br><span class="line"><span class="built_in">NSString</span> *desc = [book description];        </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,desc);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="初始化方法"><a href="#初始化方法" class="headerlink" title="初始化方法"></a>初始化方法</h3><ul>
<li>对象必须先创建,然后初始化,才能使用。如：<code>NSObject *object = [[NSObject alloc] init];</code>；</li>
<li>OC中的对象通过指针来声明。如：<code>Person *p</code> ；</li>
<li>初始化方法，是创建对象alloc之后调用，并且只能调用一次；</li>
<li>方法名必须以init开头；</li>
<li>返回值类型是id类型；<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义初始化方法，将姓名传入   </span></span><br><span class="line"><span class="selector-tag">-</span> (id)<span class="selector-tag">initWithName</span><span class="selector-pseudo">:(NSString</span> *)<span class="selector-tag">name</span>;</span><br><span class="line"><span class="comment">//多个参数的初始化方法的定义   </span></span><br><span class="line"><span class="selector-tag">-</span> (id)<span class="selector-tag">initWithName</span><span class="selector-pseudo">:(NSString</span> *)<span class="selector-tag">name</span> <span class="selector-tag">WithAge</span><span class="selector-pseudo">:(NSInteger)age</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="自定义初始化方法的实现"><a href="#自定义初始化方法的实现" class="headerlink" title="自定义初始化方法的实现"></a>自定义初始化方法的实现</h4><p>在<strong>init方法</strong>中,若要父类完成所需的一次性初始化,需要调用<code>[super init]</code>,init方法返回的值,描述了被初始化的对象。<br>将<code>[super init]</code>的结果赋给<code>self</code>是<strong>Objective-C</strong>的标准惯例,这么做是为了防止父类在初始化过程中返回的对象不同于原先创建的对象。</p>
<pre><code>- (id)initWithName:(NSString *)name{
//使用super可以调用父类中定义的方法
self = [super init];
if (self) {
    //赋值
    _name = name;
} 
return self;
</code></pre><p>}</p>
<p>####调用初始化方法</p>
<pre><code>Person *p1 = [[Person alloc] init];
Person *p2 = [[Person alloc] initWithName:@&quot;jack&quot;];
Person *p3 = [[Person alloc] initWithName:@&quot;Tom&quot; WithAge:22];
</code></pre><p><strong>initWithCString</strong>: c语言的字符串转换成OC的字符串<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *outputValue = [[<span class="built_in">NSString</span> alloc] initWithCString:inputValue encoding: <span class="built_in">NSUTF8StringEncoding</span>];</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_面向对象—封装、继承、多态/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_面向对象—封装、继承、多态/" class="post-title-link" itemprop="url">Objective-C_面向对象—封装、继承、多态</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:36:36" itemprop="dateModified" datetime="2019-04-18T00:36:36+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_面向对象—封装、继承、多态/" class="leancloud_visitors" data-flag-title="Objective-C_面向对象—封装、继承、多态">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="面向对象的三大特征"><a href="#面向对象的三大特征" class="headerlink" title="面向对象的三大特征:"></a>面向对象的三大特征:</h3><ol>
<li>封装 (Encapsulation) </li>
<li>继承 (Inheritance)</li>
<li>多态 (Polymorphism)</li>
</ol>
<h3 id="封装、权限修饰符（-public、-private、-protected）"><a href="#封装、权限修饰符（-public、-private、-protected）" class="headerlink" title="封装、权限修饰符（@public、@private、@protected）"></a>封装、权限修饰符（@public、@private、@protected）</h3><ul>
<li>隐藏属性、方法或者实现细节的过程称之为<strong>封装</strong>。   </li>
<li><strong>权限修饰符</strong>用来修饰<strong>实例变量</strong>,用来控制实例变量的访问权限。</li>
<li>在语法上，不存在私有<strong>方法</strong>。但约定：在 .m 文件中实现，但在 .h 文件中没有声明的方法称之为<strong>私有方法</strong>。</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Car</span> : <span class="title">NSObject</span> </span>&#123;</span><br><span class="line"><span class="comment">/*    属性的封装</span></span><br><span class="line"><span class="comment"> *   1.使类的属性不让外部直接访问</span></span><br><span class="line"><span class="comment"> */</span>  <span class="number">2.</span>外部使用这个类时，不需要关心这个类具有哪些属性</span><br><span class="line">   </span><br><span class="line"><span class="comment">//@public 修饰的成员变量，外部可以直接访问</span></span><br><span class="line"><span class="comment">//不建议直接使用，因为破坏了属性的封装性</span></span><br><span class="line"><span class="keyword">@public</span></span><br><span class="line">   <span class="built_in">NSString</span> *_name;    <span class="comment">//名称</span></span><br><span class="line">   <span class="built_in">NSString</span> *_color;   <span class="comment">//颜色</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@private 是私有属性，只能在类的内部访问</span></span><br><span class="line"><span class="comment">// 子类不能访问private修饰的属性</span></span><br><span class="line"><span class="keyword">@private</span></span><br><span class="line">   <span class="keyword">float</span> width;    <span class="comment">//车宽</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@protected 受保护的属性，</span></span><br><span class="line"><span class="comment">//类的内部，子类都可以访问，类的外部不能访问</span></span><br><span class="line"><span class="keyword">@protected</span>  <span class="comment">//默认的修饰</span></span><br><span class="line">   <span class="keyword">float</span> _capcity; <span class="comment">//耗油量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@package</span>  <span class="comment">//修饰的变量只能在当前所在的框架中访问</span></span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*方法的封装</span></span><br><span class="line"><span class="comment">1.对功能实现的细节隐藏于封装</span></span><br><span class="line"><span class="comment">2.保护属性</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">- (<span class="keyword">void</span>)run;</span><br><span class="line"></span><br><span class="line"><span class="comment">//封装还可以保护属性值的有效性</span></span><br><span class="line">- (<span class="keyword">void</span>)setCapicity:(<span class="keyword">float</span>)capicity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<pre><code>//.m 文件实现中
//调用方法时可以对属性值的有效性进行判断
- (void)setCapicity:(float)capicity{
if (capicity &lt; 0) {
    //给出错误处理
    return 0;
}
_capcity = capicity;
}
</code></pre><p>​    </p>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><ul>
<li>子类具有父类的一般特性（包括属性和行为），以及自身特殊的特性。</li>
<li>定义一个通用的类,它有基本的实例变量。子类可以继承了该类,就可以拥有这些实例变量。子类也可以定义自己的实例变量。</li>
<li>被继承的类叫<strong>超类</strong>或<strong>父类</strong>(<strong>superclass</strong>),继承超类的类叫<strong>子类</strong>或<strong>派生类</strong>(s<strong>ubclass</strong>)。</li>
<li>OC中继承的语法规则为: <code>@interface 子类 :父类</code></li>
<li>子类自动继承父类的属性和方法</li>
<li>OC语言的类都是<strong>单继承</strong>，即一个子类只能有一个父类。</li>
<li>（<em>多继承即一个子类可以有多个父类，它继承了多个父类的特性</em>）</li>
</ul>
<p><strong>父类：</strong></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@interface</span> <span class="string">ClassA :</span> NSObject</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> x;</span><br><span class="line">&#125; </span><br><span class="line">- (<span class="keyword">void</span>) run; </span><br><span class="line"><span class="meta">@end</span></span><br></pre></td></tr></table></figure>
<p><strong>子类：</strong></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@interface</span> <span class="string">ClassB :</span> ClassA  </span><br><span class="line">- (<span class="keyword">void</span>) printVar;</span><br><span class="line"><span class="meta">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h3><ul>
<li>通过方法重写，子类可以改变从父类继承的行为。</li>
<li>被重写的方法定义必须与父类中的方法完全一样。</li>
<li>方法重写必须满足两个条件1.必须要有继承关系；2.重写方法的方法名、参数列表必须都一致；<br>例如：重写 init 初始化方法。</li>
</ul>
<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><ul>
<li>多态是指同一种类型,具有多种表现形态。</li>
<li>多态的条件：1.必须存在继承关系。2.子类重写父类的方法。3.父类声明的变量指向子类对象。</li>
</ul>
<ul>
<li><strong>多态</strong>能够使来自不同类的对象定义相同名称的方法（不同的类可以有相同的方法名）。</li>
<li><strong>动态类型</strong>能使程序直到执行时才确定对象所属的类。</li>
<li><strong>动态绑定</strong>能使程序直到执行时才确定实际要调用的对象方法。<blockquote>
<p>Objective-C 系统总是跟踪对象所属的类:<br>含义：先判定对象所属的类，然后在运行时确定需要动态调用的方法，而不是在编译的时候。</p>
</blockquote>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-842d1057e0081625.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h3 id="isKindOfClass-amp-isMemberOfClass"><a href="#isKindOfClass-amp-isMemberOfClass" class="headerlink" title="isKindOfClass:&amp;isMemberOfClass:"></a><code>isKindOfClass:</code>&amp;<code>isMemberOfClass:</code></h3><ul>
<li><code>isKindOfClass:</code>确定一个对象是否是一个类的成员,或者是派生自该类的成员。</li>
<li><code>isMemberOfClass:</code>确定一个对象是否是当前类的成员。</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/Objective-C_SandBox&NSFileManager/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/Objective-C_SandBox&NSFileManager/" class="post-title-link" itemprop="url">Objective-C_SandBox&NSFileManager</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:38:42" itemprop="dateModified" datetime="2019-04-18T00:38:42+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/Objective-C_SandBox&NSFileManager/" class="leancloud_visitors" data-flag-title="Objective-C_SandBox&NSFileManager">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p><a href="http://www.jianshu.com/p/a30ae4746aca" target="_blank" rel="noopener">APP的沙盒文档结构、获取沙盒目录</a></p>
<h4 id="SandBox"><a href="#SandBox" class="headerlink" title="SandBox"></a>SandBox</h4><ul>
<li>iOS中每个应用程序都有一个单独封闭的文件夹，这个文件夹称为沙盒（sandbox）</li>
<li>沙盒目录用来存放App的本地文件</li>
<li>当前APP应用程序没有权限访问其他APP的沙盒。</li>
<li>沙盒目录：<ul>
<li>Docunments :存放长期使用的文件。</li>
<li>Library :系统存放文。</li>
<li>tmp : 临时文件，App重启时，该目录下的文件清空。</li>
</ul>
</li>
</ul>
<h5 id="获取沙盒Home路径"><a href="#获取沙盒Home路径" class="headerlink" title="获取沙盒Home路径"></a>获取沙盒Home路径</h5><p><code>NSString *homeDir = NSHomeDirectory();</code></p>
<h5 id="文件路径的追加"><a href="#文件路径的追加" class="headerlink" title="文件路径的追加"></a>文件路径的追加</h5><pre><code>NSString *homeDir = NSHomeDirectory(); 

NSString *documents = [homeDir stringByAppendingString:@&quot;/Documents&quot;];   
NSString *documents = [homeDir stringByAppendingPathComponent:@&quot;Documents&quot;]; //注意：不需要加‘/’
</code></pre><h5 id="获取沙盒下的Documents目录"><a href="#获取沙盒下的Documents目录" class="headerlink" title="获取沙盒下的Documents目录"></a>获取沙盒下的Documents目录</h5><pre><code>NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documents = [paths lastObject];
NSLog(@&quot;documents = %@&quot;,documents);
</code></pre><h5 id="NSString处理路径"><a href="#NSString处理路径" class="headerlink" title="NSString处理路径"></a>NSString处理路径</h5><pre><code>//演示路径 
NSString *path = @&quot;/Users/apple/file.text&quot;;

1.获取路径的组成部分  结果: (“/”,”Users”, “apple”, “file.text”) 
NSArray *components = [path pathComponents];

2.路径的最后一个组成部分   结果: file.text
NSString *lastName = [path lastPathComponent]；

3.追加文件或目录  结果: /Users/apple/file.text/app.text
NSString *filePath = [path stringByAppendingPathComponent:@&quot;app.text&quot;];

4.删除最后部分的组成部分 结果: /Users/apple
NSString *filePath = [path stringByDeletingLastPathComponent];

5. 取路径最后部分的扩展名 结果: text
NSString *extName = [path pathExtension];

6. 追加扩展名   结果: /Users/apple/file.text.jpg
NSString *filePath = [path stringByAppendingPathExtension:@&quot;jpg&quot;];
</code></pre><p>​    </p>
<h4 id="NSData"><a href="#NSData" class="headerlink" title="NSData"></a>NSData</h4><ul>
<li><strong>NSData</strong> 是对数据的一种抽象.</li>
<li><p>任何数据都可以通过 <strong>NSData</strong> 来存储,<strong>NSMutableData</strong> 是可变的,继承于NSData.</p>
<h5 id="NSString-NSData"><a href="#NSString-NSData" class="headerlink" title="NSString  NSData"></a>NSString <-> NSData</-></h5><pre><code>NSString *s = @&quot;NSData是对数据的一种抽象&quot;;

//NSString -&gt; NSData
NSData *data1 = [s dataUsingEncoding:NSUTF8StringEncoding];

//NSData -&gt; NSString
NSString *s2 =[[NSString alloc] initWithData:data1 encoding:NSUTF8StringEncoding];
</code></pre></li>
</ul>
<h4 id="NSFileManager"><a href="#NSFileManager" class="headerlink" title="NSFileManager"></a>NSFileManager</h4><ul>
<li><strong>NSFileManager</strong> 主要对文件进行管理,主要有如下功能:创建、复制、删除、剪切等</li>
</ul>
<h5 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h5><pre><code>//创建 NSFileManager 对象
NSFileManager *fileManager = [[NSFileManager alloc] init];    
NSFileManager *fileManager = [NSFileManager defaultManager];  //同上

//1.构造文件的路径
NSString *homePath = NSHomeDirectory();
NSString *filePath = [homePath stringByAppendingPathComponent:@&quot;file.txt&quot;];

//2.构造数据
NSString *string = @&quot;Hello World!&quot;;

//3.将字符串中的文本数据存储到Data对象中
NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding];

//4.创建文件
//createFileAtPath 创建文件，如果文件已经存在，那么新创建的文件会将原文件覆盖
BOOL success = [fileManager createFileAtPath:filePath //路径
                                        contents:data //数据
                                      attributes:nil]; //属性
if (success) {
        NSLog(@&quot;create file success&quot;);
    }
</code></pre><h5 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h5><pre><code>[fileManager createDirectoryAtPath:(NSString *) withIntermediateDirectories:(BOOL) attributes:(NSDictionary *) error:(NSError *__autoreleasing *)] 
</code></pre><h5 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h5><pre><code>//创建 NSFileManager 对象
NSFileManager *fileManager = [NSFileManager defaultManager]; 

//构造文件的路径
NSString *homePath = NSHomeDirectory();
NSString *filePath = [homePath stringByAppendingPathComponent:@&quot;file.txt&quot;];

//根据路径读取文件
NSData *fileData = [fileManager contentsAtPath:filePath];

//将NSData转NSString
NSString *content = [[NSString alloc] initWithData:fileData
                             encoding:NSUTF8StringEncoding];
</code></pre><h5 id="移动，剪切文件"><a href="#移动，剪切文件" class="headerlink" title="移动，剪切文件"></a>移动，剪切文件</h5><pre><code>NSFileManager *fileManager = [NSFileManager defaultManager];

//构造路径
//文件的原路径
NSString *srcPath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;file.txt&quot;];     
//文件剪切之后的路径
NSString *toPath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;temp/file.txt&quot;];

//注意：如果目标路径已经存在此文件，那么会导致操作失败
NSError *error = nil;
BOOL success = [fileManager moveItemAtPath:srcPath
                                        toPath:toPath
                                         error:&amp;error];
if (!success) {
    NSLog(@&quot;剪切失败,%@&quot;,error);
    }
</code></pre><h5 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h5><pre><code>NSFileManager *fileManager = [NSFileManager defaultManager];

//1.构造路径
//文件的原路径
NSString *srcPath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;temp/file.txt&quot;];    
//文件复制之后的路径
NSString *toPath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;file.txt&quot;];

BOOL success = [fileManager copyItemAtPath:srcPath
                                        toPath:toPath
                                         error:nil];
/注意：如果目标路径已经存在此文件，那么会导致操作失败
if (!success) {
        NSLog(@&quot;复制失败&quot;);
    }
</code></pre><h5 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h5><pre><code>NSFileManager *fileManager = [NSFileManager defaultManager];

//1.构造文件路径
NSString *toPath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;file.txt&quot;];

//2.判断文件是否存在
BOOL exist = [fileManager fileExistsAtPath:toPath];
if (exist) {
//3.删除文件
    if ([fileManager removeItemAtPath:toPath error:nil]) {
            NSLog(@&quot;删除文件成功&quot;);
        }
    }
</code></pre><h5 id="删除文件夹"><a href="#删除文件夹" class="headerlink" title="删除文件夹"></a>删除文件夹</h5><pre><code>NSString *dir = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;temp&quot;];
[fileManager removeItemAtPath:dir error:nil];
</code></pre><h5 id="文件属性"><a href="#文件属性" class="headerlink" title="文件属性"></a>文件属性</h5><pre><code>NSFileManager *fileManager = [NSFileManager defaultManager];

//1.构造文件路径    
NSString *filePath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;file.txt&quot;];

//获得文件的属性字典     
NSDictionary *fileAttribute = [fileManager attributesOfItemAtPath:filePath error:nil];
NSLog(@&quot;%@&quot;,fileAttribute);

//获取文件大小    
NSNumber *fileSize = [fileAttribute objectForKey:@&quot;NSFileSize&quot;];
long size = [fileSize longValue];
NSLog(@&quot;size = %ld&quot;,size);
</code></pre><h5 id="获取文件夹中所有的文件"><a href="#获取文件夹中所有的文件" class="headerlink" title="获取文件夹中所有的文件"></a>获取文件夹中所有的文件</h5><pre><code>NSFileManager *fileManager = [NSFileManager defaultManager];

//1.构造路径
NSString *filePath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;壁纸&quot;];

//2.获取文件夹中所有的子文件路径(路径是相对路径)
NSArray *subPaths = [fileManager subpathsOfDirectoryAtPath:filePath error:nil];

//3.遍历每一个子路径
long sum = 0;
for (NSString *subpath in subPaths) {

//4.子路径与父路径拼接
NSString *path = [filePath stringByAppendingPathComponent:subpath];

//5.获取文件的属性，计算所有文件占用内存大小
NSDictionary *fileAttribute = [fileManager attributesOfItemAtPath:path error:nil];

NSNumber *filesize = fileAttribute[@&quot;NSFileSize&quot;];
long size = [filesize longValue];
sum += size;
}
//6.单位换算
float result = sum / (1000*1000.0);
NSLog(@&quot;result = %.1f&quot;,result);
</code></pre><h5 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h5><ul>
<li>数组、字典、字符串、NSData都是容纳数据的,他们都有一个writeToFile方法, 将数据写入文件。</li>
<li>数组、字典写入的文件叫属性列表 (plist) 文件,可以用xcode打开编辑。</li>
<li>数组只能将如下数据类型写入文件,如果包含其他对象,将写入失败。NSNumber、NSString、NSData、NSDate、NSArray、NSDictionary</li>
</ul>
<pre><code>//数组写文件
NSString *s1 = @&quot;zhangsan&quot;; 
NSString *s2 = @&quot;lisi&quot;; 
NSArray *array = [NSArray arrayWithObjects:s1,s2, nil];
</code></pre><p>​<br>​    //将数组中的数据写入文件<br>​    [array writeToFile:path atomically:YES]; </p>
<h5 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h5><pre><code>//数组读文件
//1.通过alloc创建，并读入文件数据
NSArray *alloc = [[NSArray alloc] initWithContentsOfFile:path]; 

//2.通过类方法创建，并读入文件数据
MSArray *array = [NSArray arrayWithContentsofFile:path];
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2016/08/08/iOS 编程：NSDate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/08/iOS 编程：NSDate/" class="post-title-link" itemprop="url">iOS 编程：NSDate</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-08 10:48:00" itemprop="dateCreated datePublished" datetime="2016-08-08T10:48:00+08:00">2016-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-18 00:29:47" itemprop="dateModified" datetime="2019-04-18T00:29:47+08:00">2019-04-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2016/08/08/iOS 编程：NSDate/" class="leancloud_visitors" data-flag-title="iOS 编程：NSDate">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<blockquote>
<p>💡<br>推荐使用的时间类框架：<br><a href="https://github.com/MatthewYork/DateTools" target="_blank" rel="noopener">DateTools</a> | <a href="https://www.jianshu.com/p/10c5a9e60880" target="_blank" rel="noopener">DateTools 使用「日期工具库」</a></p>
</blockquote>
<h1 id="NSDate"><a href="#NSDate" class="headerlink" title="NSDate"></a>NSDate</h1><ul>
<li><strong>NSDate</strong>: 用于处理日期的类，它提供日期的创建、比较、计算时间间隔等功能。</li>
<li><strong>NSDate</strong> 是一个类簇，我们所使用的 <strong>NSDate</strong> 对象，都是 <strong>NSDate</strong> 的私有子类的实体。</li>
<li><strong>NSDate</strong> 存储的是 <strong>GMT</strong> 时间，使用的时候会根据当前应用指定的 <strong>时区</strong> 进行时间上的增减，以供计算或显示。</li>
</ul>
<h3 id="创建时间对象"><a href="#创建时间对象" class="headerlink" title="创建时间对象"></a>创建时间对象</h3><ul>
<li>当前时间</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 现在时间</span><br><span class="line">NSDate *now1 = [NSDate date];</span><br><span class="line">// 现在时间（同上）</span><br><span class="line">NSDate *now2 = [[NSDate alloc] init];</span><br><span class="line">NSDate *now3 = [NSDate new];</span><br></pre></td></tr></table></figure>
<ul>
<li>未来时间和过去时间</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 可以表示的最远的未来时间 : 4001-01-01 00:00:00 +0000</span><br><span class="line">NSDate *distantFuture = [NSDate distantFuture];</span><br><span class="line">// 可以表示的最早的过去时间 : 0000-12-30 00:00:00 +0000</span><br><span class="line">NSDate *distantPast = [NSDate distantPast];</span><br></pre></td></tr></table></figure>
<ul>
<li>创建相对时间 = 某个时间节点 + 时间戳（<strong>NSTimeInterval</strong>）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// ----------------------------- 类方法 --------------------------------</span><br><span class="line">// 相对于当前时间</span><br><span class="line">NSDate *dateFromNow = [NSDate dateWithTimeIntervalSinceNow:0];</span><br><span class="line">// 相对于给定的某个已知时间</span><br><span class="line">NSDate *dateFromAnotherDate = [NSDate dateWithTimeInterval:0 sinceDate:now];</span><br><span class="line">// 相对于2001年1月1日0时0分0秒</span><br><span class="line">NSDate *dateFromReferenceDate = [NSDate dateWithTimeIntervalSinceReferenceDate:0];</span><br><span class="line">// 相对于1970年1月1日0时0分0秒</span><br><span class="line">NSDate *dateFrom1970 = [NSDate dateWithTimeIntervalSince1970:0];</span><br><span class="line"></span><br><span class="line">// ------------------------------ 实例化方法 (同上)-------------------------------</span><br><span class="line">// 相对于当前时间</span><br><span class="line">NSDate *dateFromNow2 = [[NSDate alloc] initWithTimeIntervalSinceNow:0];</span><br><span class="line">// 相对于给定的某个已知时间</span><br><span class="line">NSDate *dateFromAnotherDate2 = [[NSDate alloc] initWithTimeInterval:0 sinceDate:now];</span><br><span class="line">// 相对于2001年1月1日0时0分0秒</span><br><span class="line">NSDate *dateFromReferenceDate2 = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:0];</span><br><span class="line">// 相对于1970年1月1日0时0分0秒</span><br><span class="line">NSDate *dateFrom19702 = [[NSDate alloc] initWithTimeIntervalSince1970:0];</span><br></pre></td></tr></table></figure>
<ul>
<li>昨天、今天、明天</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 24H 的时间戳值</span><br><span class="line">NSTimeInterval time = 24 * 60 * 60;  </span><br><span class="line"></span><br><span class="line">//昨天此刻的时间</span><br><span class="line">NSDate *yesterday = [[NSDate alloc] initWithTimeIntervalSinceNow:- time];</span><br><span class="line">//现在的时间</span><br><span class="line">NSDate *today = [[NSDate alloc] initWithTimeIntervalSinceNow:0]; </span><br><span class="line">//明天此刻的时间</span><br><span class="line">NSDate 	*tomorrow = [[NSDate alloc] initWithTimeIntervalSinceNow:time];</span><br></pre></td></tr></table></figure>
<ul>
<li>日期的比较</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 1. 通过 compare: 比较</span><br><span class="line">NSComparisonResult result = [tomorrow compare:yesterday];</span><br><span class="line">switch (result) &#123;</span><br><span class="line">    case NSOrderedAscending:</span><br><span class="line">        // 升序</span><br><span class="line">        NSLog(@&quot;tomorrow &lt; yesterday&quot;);</span><br><span class="line">        break;</span><br><span class="line">    case NSOrderedSame:</span><br><span class="line">        // 相同</span><br><span class="line">        NSLog(@&quot;tomorrow = yesterday&quot;);</span><br><span class="line">        break;</span><br><span class="line">    case NSOrderedDescending:</span><br><span class="line">        // 降序</span><br><span class="line">        NSLog(@&quot;tomorrow &gt; yesterday&quot;);</span><br><span class="line">        break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 2. 通过时间戳值比较</span><br><span class="line">if ([date1 timeIntervalSince1970] &gt;</span><br><span class="line">    [date3 timeIntervalSince1970])&#123;</span><br><span class="line">    NSLog(@&quot;date1 &gt; date3&quot;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    NSLog(@&quot;date1 &lt; date3&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 3. isEqualToDate:</span><br><span class="line">if (![yesterday isEqualToDate:tomorrow]) &#123;</span><br><span class="line">NSLog(@&quot;不同的一天&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 4. earlierDate:</span><br><span class="line">// 比较两个给定日期并返回更早的日期</span><br><span class="line">NSDate *earlierDate = [tomorrow earlierDate:yesterday];</span><br><span class="line">NSLog(@&quot;earlierDate: %@&quot;,earlierDate);	// earlierDate: Wed Apr 12 12:30:36 2017</span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 5. laterDate:</span><br><span class="line">// 比较两个给定日期并返回更晚的日期</span><br><span class="line">NSDate *laterDate = [tomorrow laterDate:yesterday];</span><br><span class="line">NSLog(@&quot;laterDate: %@&quot;,laterDate);	// laterDate: Fri Apr 14 12:30:36 2017</span><br></pre></td></tr></table></figure>
<ul>
<li>创建某个指定日期</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//mikey.hireDate = [NSDate dateWithNaturalLanguageString:@&quot;Aug 2nd,2010&quot;];</span><br><span class="line"></span><br><span class="line">//Specifying date</span><br><span class="line">NSDateComponents *components = [NSDateComponents new];</span><br><span class="line">[components setYear:2010];</span><br><span class="line">[components setDay:2];</span><br><span class="line">[components setMonth:8];</span><br><span class="line">//We need this calendar so that we can use -dateFromComponents function:)</span><br><span class="line">NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSCalendarIdentifierGregorian];</span><br><span class="line">//Assigning final date to our Object/Employee</span><br><span class="line">mikey.hireDate = [gregorian dateFromComponents: components];</span><br><span class="line">//Giving date nice look (Aug %day, %year)</span><br><span class="line">NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];</span><br><span class="line">dateFormatter.timeStyle = NSDateFormatterNoStyle;</span><br><span class="line">dateFormatter.dateStyle = NSDateFormatterMediumStyle;</span><br><span class="line">//Displays time in ENG (or localization), i get russian output by default without these two lines: Август 2, 2010</span><br><span class="line">NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@&quot;en_US&quot;];</span><br><span class="line">[dateFormatter setLocale:usLocale];</span><br><span class="line">//Applying dateFormatter to our date(mikey.hireDate), because it needs to look fancy... the result will be string, i just don&apos;t know how to make mikey.hireDate look right (%month %day, %year) without converting it to String    :&#125;</span><br><span class="line">NSString *finalDateItsStringNow = [dateFormatter stringFromDate:mikey.hireDate];</span><br><span class="line"></span><br><span class="line">//----------</span><br><span class="line">NSCalendar *calendar = [NSCalendar currentCalendar];</span><br><span class="line">NSDateComponents *components = [[NSDateComponents alloc] init];</span><br><span class="line">[components setYear:1998];</span><br><span class="line">[components setMonth:5];</span><br><span class="line">[components setDay:1];</span><br><span class="line">NSDate *birthday = [calendar dateFromComponents:components];</span><br></pre></td></tr></table></figure>
<h1 id="NSTimeInterval"><a href="#NSTimeInterval" class="headerlink" title="NSTimeInterval"></a>NSTimeInterval</h1><ul>
<li><strong>NSTimeInterval（时间戳）</strong>：用于指定两个时间节点之间的时间间隔（以秒为单位）。</li>
<li><strong>NSTimeInterval</strong> 始终以 <strong>秒</strong> 为单位指定; 它在10,000年的范围内产生了亚毫秒的精度。</li>
</ul>
<h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typedef double NSTimeInterval;</span><br></pre></td></tr></table></figure>
<ul>
<li>获取时间戳</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 给定时间 相对于 现在时间 的时间戳</span><br><span class="line">NSDate *now = [NSDate date];</span><br><span class="line">NSTimeInterval timeInterval = [now timeIntervalSinceNow];</span><br><span class="line">NSLog(@&quot;timeInterval is %f&quot;,timeInterval); // timeInterval is -0.000023</span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 两个给定时间节点 之间的时间戳</span><br><span class="line">NSDate *distantFuture = [NSDate distantFuture];</span><br><span class="line">NSDate *distantPast = [NSDate distantPast];</span><br><span class="line">NSTimeInterval timeInterval = [distantFuture timeIntervalSinceDate:distantPast];</span><br><span class="line">NSLog(@&quot;timeInterval is %.f&quot;,timeInterval);	// timeInterval is 126227980800</span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 2001年1月1日0时0分0秒 与 现在时间 之间的时间戳</span><br><span class="line">NSDate *now = [NSDate date];</span><br><span class="line">NSTimeInterval timeInterval = [now timeIntervalSinceReferenceDate];</span><br><span class="line">NSLog(@&quot;timeInterval is %f&quot;,timeInterval); // timeInterval is 513745346.558782</span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">// 1970年1月1日0时0分0秒 与 现在时间 之间的时间戳</span><br><span class="line">NSDate *now = [NSDate date];</span><br><span class="line">NSTimeInterval timeInterval = [now timeIntervalSince1970];</span><br><span class="line">NSLog(@&quot;timeInterval is %f&quot;,timeInterval); // timeInterval is 1492052119.655184</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>NSDate</strong>对象 与 时间戳（<strong>NSTimeInterval</strong>） 相互转换</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// NSDate对象 ------&gt; 相对于1970年的时间戳</span><br><span class="line">NSDate *now =[[NSDate alloc] init]; //创建此刻的时间</span><br><span class="line">NSTimeInterval timeInterval = [now timeIntervalSince1970]; </span><br><span class="line"></span><br><span class="line">// 相对于1970年的时间戳 ------&gt; NSDate 对象</span><br><span class="line">NSDate *date = [NSDate dateWithTimeIntervalSince1970:timeInterval]; //获取时间</span><br></pre></td></tr></table></figure>
<ul>
<li>数字字符串 ——&gt; 时间戳 ——&gt; <strong>NSDate</strong> 对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSString *timeString = @&quot;1234567890&quot;;</span><br><span class="line">NSDate *convertDate = [NSDate dateWithTimeIntervalSince1970:[timeString doubleValue]];</span><br><span class="line">NSLog(@&quot;convertDate %@&quot;, convertDate);	// convertDate Sat Feb 14 07:31:30 2009</span><br></pre></td></tr></table></figure>
<h1 id="NSDateFormatter"><a href="#NSDateFormatter" class="headerlink" title="NSDateFormatter"></a>NSDateFormatter</h1><p><strong>NSDateFormatter</strong> 是 <strong>NSFormatter</strong> 的子类。另，<strong>NSFormatter</strong> 的用途是“将数据在字符串与特定类型的对象之间转换”，目前 <strong>NSFormatter</strong> 只有两个子类 <strong>NSNumberFormatter</strong> 和 <strong>NSDateFormatter</strong>。</p>
<p>尽管 <strong>NSDateFormatter</strong> 提供了许多已定义好的时间格式，但是开发中开发人员更加喜欢自定义时间格式。</p>
<p>过多使用 <strong>NSDateFormatter</strong> 将影响程序的性能，且程序中 <strong>NSDateFormatter</strong> 对象的时间格式基本一致，所以使用 <strong>NSDateFormatter</strong> 的时候尽量使用单例模式。</p>
<ul>
<li><a href="http://www.jianshu.com/p/82c1104aea6c" target="_blank" rel="noopener">性能优化之 NSDateFormatter</a></li>
</ul>
<ol>
<li><p>将时间字符串转换到 <strong>NSDate</strong> 对象，一般都是使用”年月日 时分秒”，数据库中的date类型基本上也是这样的时间类型。 格式一般为：yyyy-MM-dd HH:mm:ss。</p>
<blockquote>
<p>⚠️ yyyy是小写的；大写的YYYY的意思有些不同——“将这一年中第一周的周日当作今年的第一天”，因此有时结果和yyyy相同，有时就会不同。</p>
</blockquote>
</li>
<li><p>将 <strong>NSDate</strong> 对象转换成特定格式的字符串。</p>
<p>转换后的字符串会根据设备的“区域格式”，显示特定语言的结果。假如程序需要保证不同语言环境下显示一致，请注意这方面的问题，使用其他代替方法！</p>
</li>
</ol>
<p>日期格式RFC文档：<a href="http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns" target="_blank" rel="noopener">Date_Format_Patterns</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">NSDate *date = [NSDate date];</span><br><span class="line">NSLog(@&quot;date = %@\n&quot;,date);</span><br><span class="line">// date = 2017-10-27 05:03:09 +0000</span><br><span class="line"></span><br><span class="line">NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];</span><br><span class="line">[dateFormatter setTimeZone:[NSTimeZone defaultTimeZone]];</span><br><span class="line">[dateFormatter setLocale:[NSLocale currentLocale]];</span><br><span class="line">[dateFormatter setDateFormat:@&quot;yyyy-MM-dd aHH:mm:ss&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 2017-10-27 下午13:30:52</span><br><span class="line"></span><br><span class="line">NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];</span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;公元（G=GG=GGG=GGGG=GGGGG）&apos;:G&apos;=&apos;GG&apos;=&apos;GGG&apos;=&apos;GGGG&apos;=&apos;GGGGG&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 公元（G=GG=GGG=GGGG=GGGGG）:公元=公元=公元=公元=公元</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;年度（y=yy=yyy=yyyy=yyyyy）&apos;:y&apos;=&apos;yy&apos;=&apos;yyy&apos;=&apos;yyyy&apos;=&apos;yyyyy&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 年度（y=yy=yyy=yyyy=yyyyy）:2017=17=2017=2017=02017</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;季度（Q=QQ=QQQ=QQQQ）&apos;:Q&apos;=&apos;QQ&apos;=&apos;QQQ&apos;=&apos;QQQQ&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 季度（Q=QQ=QQQ=QQQQ）:4=04=4季度=第四季度</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;季度（q=qq=qqq=qqq）&apos;:q&apos;=&apos;qq&apos;=&apos;qqq&apos;=&apos;qqqq&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 季度（q=qq=qqq=qqq）:4=04=4季度=第四季度</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;月份（M=MM=MMM=MMMM=MMMMM）&apos;:M&apos;=&apos;MM&apos;=&apos;MMM&apos;=&apos;MMMM&apos;=&apos;MMMMM&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 月份（M=MM=MMM=MMMM=MMMMM）:10=10=10月=十月=10</span><br><span class="line">// 月份（M=MM=MMM=MMMM=MMMMM）:3=03=3月=三月=3</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;本年第几周（w）&apos;:w&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 本年第几周（w）:43</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;本月第几周（W）&apos;:W&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 本月第几周（W）:4</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;本年第几天（D）&apos;:D&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 本年第几天（D）:300</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;本月第几天（d=dd）&apos;:d&apos;=&apos;dd&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 本月第几天（d=dd）:27=27</span><br><span class="line">// 本月第几天（d=dd）:3=03</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;本周第几天（F）&apos;:F&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 本周第几天（F）:4</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;星期（e=ee=eee=eeee=eeeee）&apos;:e&apos;=&apos;ee&apos;=&apos;eee&apos;=&apos;eeee&apos;=&apos;eeeee&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 星期（e=ee=eee=eeee=eeeee）:6=06=周五=星期五=五</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;星期（c=ccc=cccc=ccccc）&apos;:c&apos;=&apos;ccc&apos;=&apos;cccc&apos;=&apos;ccccc&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 星期（c=ccc=cccc=ccccc）:6=周五=星期五=五</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;上午/下午（a）&apos;:a&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 上午/下午（a）:下午</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;小时（h=hh=H=HH）&apos;:h&apos;=&apos;hh&apos;=&apos;H&apos;=&apos;HH&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 小时（h=hh=H=HH）:1=01=13=13</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;分钟（m=mm）&apos;:m&apos;=&apos;mm&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 分钟（m=mm）:3=03</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;秒（s=ss）&apos;:s&apos;=&apos;ss&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 秒（s=ss）:9=09</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;毫秒（S）&apos;:S&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 毫秒（S）:9</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;一天中的毫秒（A）&apos;:A&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 一天中的毫秒（A）:46989943</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;时区（z/zz/zzz=zzzz=v=vvvv）&apos;:z&apos;=&apos;zzzz&apos;=&apos;v&apos;=&apos;vvvv&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 时区（z/zz/zzz=zzzz=v=vvvv）:GMT+8=中国标准时间=中国时间=中国标准时间</span><br><span class="line"></span><br><span class="line">[dateFormatter setDateFormat:@&quot;&apos;时区编号（Z/ZZ/ZZZ=ZZZZ）&apos;:Z&apos;=&apos;ZZZZ&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,[dateFormatter stringFromDate:date]);</span><br><span class="line">// 时区编号（Z/ZZ/ZZZ=ZZZZ）:+0800=GMT+08:00</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>NSDate</strong> 对象 —&gt; 格式化日期字符串</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NSDate *date = [NSDate date];</span><br><span class="line">//设置日期的格式 ：2015年01月03日 03：32：12</span><br><span class="line">NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];</span><br><span class="line">[dateFormat setDateFormat:@&quot;yyyy年MM月dd日 HH:mm:ss&quot;];</span><br><span class="line">NSString *dateString = [dateFormat stringFromDate:date];</span><br><span class="line">NSLog(@&quot;当前系统时间：%@ \n 格式化后的时间字符串：%@&quot;,date,dateString);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>当前系统时间：</strong> <strong>2017-04-13 04:38:23 +0000 </strong></p>
<p><strong>格式化后的时间字符串：</strong> <strong>2017</strong> <strong>年</strong> <strong>04</strong> <strong>月</strong> <strong>13</strong> <strong>日</strong> <strong>12:38:23</strong></p>
</blockquote>
<ul>
<li>日期字符串 —&gt; <strong>NSDate</strong> 对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NSString *str = @&quot;2014-03-21 15:55:55&quot;;</span><br><span class="line">// 设置字符串的日期格式</span><br><span class="line">NSDateFormatter *dateFormater = [[NSDateFormatter alloc] init];</span><br><span class="line">[dateFormater setDateFormat:@&quot;yyyy-M-d HH:mm:ss&quot;];</span><br><span class="line"></span><br><span class="line">NSDate *date = [dateFormater dateFromString:str];</span><br><span class="line">NSLog(@&quot;date:%@&quot;,date); // date:Fri Mar 21 15:55:55 2014</span><br></pre></td></tr></table></figure>
<blockquote>
<p>⚠️ 日期字符串转换为 <strong>NSDate</strong> 对象时，设置的 <strong>NSDateFormatter</strong> 对象是字符串的日期格式，而不是转换后的 <strong>NSDate</strong> 对象格式。</p>
</blockquote>
<ul>
<li><p>NSString —&gt; NSDate —&gt; NSString</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// YYModel 框架方法、DateTool 方法</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)modelCustomTransformFromDictionary:(<span class="built_in">NSDictionary</span> *)dic &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自定义转换日期</span></span><br><span class="line">    <span class="built_in">NSString</span> *treatmentDateString = dic[<span class="string">@"就诊时间"</span>];</span><br><span class="line">    <span class="keyword">if</span> (![treatmentDateString isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// string -&gt; date -&gt; string</span></span><br><span class="line">    <span class="comment">// (yyyy-MM-dd HH:mm:ss) -&gt; (yyyy年MM月dd日 HH:mm:ss)</span></span><br><span class="line">    <span class="built_in">NSDate</span> *date = [<span class="built_in">NSDate</span> dateWithString:treatmentDateString formatString:<span class="string">@"yyyy-MM-dd"</span>];</span><br><span class="line">    _treatmentDate = [date formattedDateWithFormat:<span class="string">@"yyyy年MM月dd日"</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>NSDateFormatterStyle</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSUInteger, NSDateFormatterStyle) &#123;    // date and time format styles</span><br><span class="line">    NSDateFormatterNoStyle = kCFDateFormatterNoStyle,</span><br><span class="line">    NSDateFormatterShortStyle = kCFDateFormatterShortStyle,</span><br><span class="line">    NSDateFormatterMediumStyle = kCFDateFormatterMediumStyle,</span><br><span class="line">    NSDateFormatterLongStyle = kCFDateFormatterLongStyle,</span><br><span class="line">    NSDateFormatterFullStyle = kCFDateFormatterFullStyle</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>代码示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">- (NSDateFormatter *)dateFormatter  </span><br><span class="line">&#123;  </span><br><span class="line">    static NSDateFormatter *dateFormatter;  </span><br><span class="line">    if (!dateFormatter) &#123;  </span><br><span class="line">        dateFormatter = [[NSDateFormatter alloc] init];  </span><br><span class="line">          </span><br><span class="line">        dateFormatter = [[NSDateFormatter alloc] init];  </span><br><span class="line">        // NSDateFormatterStyle几种取值样式  </span><br><span class="line">        // NSDateFormatterNoStyle  </span><br><span class="line">        // 例如： （其实就是空白的，不显示）  </span><br><span class="line">  </span><br><span class="line">        // NSDateFormatterShortStyle  </span><br><span class="line">        // 例如：下午7:00 | 15/5/19  </span><br><span class="line">          </span><br><span class="line">        // NSDateFormatterMediumStyle  </span><br><span class="line">        // 例如：下午7:00:00 | 2013年5月19日  </span><br><span class="line">          </span><br><span class="line">        // NSDateFormatterLongStyle  </span><br><span class="line">        // 例如：GMT +8下午7:00:00 | 2013年5月19日  </span><br><span class="line">          </span><br><span class="line">        // NSDateFormatterFullStyle  </span><br><span class="line">        // 例如：中国标准时间下午7:00:00 | 2013年5月19日 星期日  </span><br><span class="line">        dateFormatter.timeStyle = NSDateFormatterFullStyle;  </span><br><span class="line">        dateFormatter.dateStyle = NSDateFormatterLongStyle;  </span><br><span class="line">    &#125;  </span><br><span class="line">    return dateFormatter;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="NSTimeZone"><a href="#NSTimeZone" class="headerlink" title="NSTimeZone"></a>NSTimeZone</h1><ul>
<li>时区是一个地理名字，是为了克服各个地区或国家之间在使用时间上的混乱。</li>
</ul>
<h3 id="基本概念："><a href="#基本概念：" class="headerlink" title="基本概念："></a>基本概念：</h3><ol>
<li><ul>
<li>GMT 0:00 格林威治标准时间; </li>
<li>UTC +00:00 校准的全球时间; </li>
<li>CCD +08:00 中国标准时间 ;</li>
</ul>
</li>
<li>夏时制，英文”DaylightSavingTime”。夏季时将时区内的时间提前（一般为1小时），以节省资源，提高效率。使用夏时制期间，当前时区相对于GMT的时间偏移量会发生变化。在某些应用中可能需要考虑。</li>
<li>任何时区都以 <strong>GMT</strong> 为基准，即，任何 <strong>NSTimeZone</strong> 对象所代表的时区都是相对于 <strong>GMT</strong> 的，这里的相对性是 <strong>NSTimeZone</strong> 中最重要的属性，我们称之为当前时区相对于GMT的偏移量。一旦知道了一个偏移量，便可以确定一个时区。在iOS中，偏移量是以”秒”为单位的。</li>
<li><strong>NSTimeZone</strong> 是一个类簇，我们所使用的任何 <strong>NSTimeZone</strong> 对象都是 <strong>NSTimeZone</strong> 的私有子类。</li>
<li>iOS中的时间类 <strong>NSDate</strong> 中存储的时间，都是相对于 <strong>GMT</strong> 的，我们使用 <strong>NSDate</strong> 时，会根据App的时区设置返回与时区对应的数据。</li>
<li><p>iOS系统中的 <figure class="highlight plain"><figcaption><span>地理位置名称 或 时区别名 得到的时区信息。时区别名都是与具体的地理位置一一对应的。(已越狱的童鞋请看)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">7. iOS中的时区表示方法：```GMT+0800``` 、```GMT-0800```。(【+：东区】【 -：西区】【 08：小时数】【 00：分钟数】)。 ```GMT+0830 ```就是指比GMT早8小时外加30分钟的时区。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* ```+ (NSArray *)knownTimeZoneNames;</span><br></pre></td></tr></table></figure></p>
<p>返回列出系统已知的所有时区ID的字符串数组。</p>
</li>
</ol>
<ul>
<li><figure class="highlight plain"><figcaption><span>(NSDictionary *)abbreviationDictionary;```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  获取所有的时区名称缩写</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ ```+ (id)timeZoneWithName:(NSString *)tzName;</span><br></pre></td></tr></table></figure>
<p>由时区的名称获得对应的NSTimeZone对象<br>通过时区名称可以获得时区文件，通过时区文件就可以获得“偏移量”，“名称缩写”，“是否使用夏时制”等信息。</p>
</li>
</ul>
<ul>
<li><figure class="highlight plain"><figcaption><span>*)abbreviation;```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">  由时区名称缩写获得对应的NSTimeZone对象</span><br><span class="line">  &gt; 这里的时区名称缩写有两种情况：</span><br><span class="line">  &gt;</span><br><span class="line">  &gt; * 第一种是上面说的HKT这样的缩写，与时区名称一一对应，通过这样的缩写获得的NSTimeZone对象，与使用时区名称获得得NSTimeZone对象一样。（大概读取得是同一个时区文件）</span><br><span class="line">  &gt; * 第二种是&quot;GMT+0800&quot;这样格式得缩写，其实这就是偏移量。通过偏移量在iOS中是不能读到与之对应得时区文件的，因此就无法知道“时区名称”，“名称缩写”，“是否使用夏时制”这样的信息了。默认情况下，&quot;时区名称&quot;和&quot;名称缩写&quot;都会赋值为&quot;GMT+0800&quot;，&quot;是否使用夏时制&quot;则不会设置（默认不使用）。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ ```+ (id)timeZoneForSecondsFromGMT:(NSInteger)seconds;``` </span><br><span class="line">  由偏移量获得对应的NSTimeZone对象</span><br><span class="line"></span><br><span class="line">  &gt; 只说一点：通过偏移量获得的 **NSTimeZone** 对象的“市区名称”，“名称缩写”都会赋值为&quot;GMT+0800&quot;，&quot;是否使用夏时制&quot;则不会设置（默认不使用）。</span><br><span class="line">  &gt;  注意！！！！该方法不做参数的范围检查！！！</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 根据指定时区格式化日期</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```objective-c</span><br><span class="line">NSDate *date = [NSDate date];</span><br><span class="line">//设置日期的格式</span><br><span class="line">NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];</span><br><span class="line">[dateFormat setDateFormat:@&quot;yyyy年MM月dd日 HH:mm:ss&quot;];</span><br><span class="line"></span><br><span class="line">//获取到所有时区的名字</span><br><span class="line">NSArray *zoneName = [NSTimeZone knownTimeZoneNames];</span><br><span class="line">NSLog(@&quot;%@&quot;,zoneName);</span><br><span class="line"></span><br><span class="line">//设置时区为纽约时区</span><br><span class="line">NSTimeZone *timeZone = [[NSTimeZone alloc] initWithName:@&quot;America/New_York&quot;];</span><br><span class="line">[dateFormat setTimeZone:timeZone];</span><br><span class="line">  </span><br><span class="line">NSString *dateString = [dateFormat stringFromDate:date];</span><br><span class="line">NSLog(@&quot;当前时间：%@ \n纽约时间:%@&quot;,date,dateString);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><strong>当前时间：</strong> <strong>2017-04-13 04:46:23 +0000 </strong></p>
<p><strong>纽约时间：</strong> <strong>2017</strong> <strong>年</strong> <strong>04</strong> <strong>月</strong> <strong>13</strong> <strong>日</strong> <strong>00:46:23</strong></p>
</blockquote>
<h1 id="NSLocale"><a href="#NSLocale" class="headerlink" title="NSLocale"></a>NSLocale</h1><p>若你只开发中国区的应用，需要保证用户修改当前语言环境时应用的显示不发生变化。而像NSDateFormatter这样的类，会根据设备的设置，自动返回不同语言的数据。为了保证返回数据的语言一致，我们需要设置NSLocale。 下面的代码就可以保证在任何语言环境下，只返回中文的数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@&quot;zh&quot;];</span><br><span class="line">NSDateFormatter *secondDateFormatter = [[NSDateFormatter alloc] init];</span><br><span class="line">[secondDateFormatter setDateFormat:@&quot;cccc&quot;];</span><br><span class="line">secondDateFormatter.locale = locale;</span><br><span class="line">NSDate *date = [NSDate date];</span><br><span class="line">NSLog(@&quot;%@&quot;, [secondDateFormatter stringFromDate:date]);</span><br></pre></td></tr></table></figure>
<p>当然，像上面的需求很罕见。</p>
<p>作为大家都不常用的一个类，NSLocale类是将与国家和语言相关的信息进行简单的组合，包括货币，文学方面的信息。 货币：货币的国际名称（人民币的国际货币名称是CNY）；货币符号（人民币的国际货币符号是¥） 文学：标点符号，文字的书写顺序（左右顺序），引用的起止符号等等 若做金融一类的应用可能会用到NSLocale这个类。</p>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h5 id="日期说明符号对照一览表"><a href="#日期说明符号对照一览表" class="headerlink" title="日期说明符号对照一览表"></a>日期说明符号对照一览表</h5><ul>
<li><a href="http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns" target="_blank" rel="noopener">UNICODE LOCALE DATA MARKUP LANGUAGE (LDML)</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">// -------------------------------------------------------------</span><br><span class="line">d 月中的某一天。一位数的日期没有前导零。  </span><br><span class="line"></span><br><span class="line">dd 月中的某一天。一位数的日期有一个前导零。  </span><br><span class="line"></span><br><span class="line">ddd 周中某天的缩写名称,在 AbbreviatedDayNames 中定义。  </span><br><span class="line"></span><br><span class="line">dddd 周中某天的完整名称,在 DayNames 中定义。  </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">M 月份数字。一位数的月份没有前导零。  </span><br><span class="line"></span><br><span class="line">MM 月份数字。一位数的月份有一个前导零。  </span><br><span class="line"></span><br><span class="line">MMM 月份的缩写名称,在 AbbreviatedMonthNames 中定义。  </span><br><span class="line"></span><br><span class="line">MMMM 月份的完整名称,在 MonthNames 中定义。  </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">y 不包含纪元的年份。如果不包含纪元的年份小于 10,则显示不具有前导零的年份。  </span><br><span class="line"></span><br><span class="line">yy 不包含纪元的年份。如果不包含纪元的年份小于 10,则显示具有前导零的年份。  </span><br><span class="line"></span><br><span class="line">yyyy 包括纪元的四位数的年份。  </span><br><span class="line"></span><br><span class="line">gg 时期或纪元。如果要设置格式的日期不具有关联的时期或纪元字符串,则忽略该模式。   </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">h 12小时制的小时。一位数的小时数没有前导零。  </span><br><span class="line"></span><br><span class="line">hh 12小时制的小时。一位数的小时数有前导零。  </span><br><span class="line"></span><br><span class="line">H 24小时制的小时。一位数的小时数没有前导零。  </span><br><span class="line"></span><br><span class="line">HH 24小时制的小时。一位数的小时数有前导零。  </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">m 分钟。一位数的分钟数没有前导零。  </span><br><span class="line"></span><br><span class="line">mm 分钟。一位数的分钟数有一个前导零。   </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">s 秒。一位数的秒数没有前导零。   </span><br><span class="line"></span><br><span class="line">ss 秒。一位数的秒数有一个前导零。   </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">f 秒的小数精度为一位。其余数字被截断。  </span><br><span class="line"></span><br><span class="line">ff 秒的小数精度为两位。其余数字被截断。  </span><br><span class="line"></span><br><span class="line">fff 秒的小数精度为三位。其余数字被截断。  </span><br><span class="line"></span><br><span class="line">ffff 秒的小数精度为四位。其余数字被截断。  </span><br><span class="line"></span><br><span class="line">fffff 秒的小数精度为五位。其余数字被截断。  </span><br><span class="line"></span><br><span class="line">ffffff 秒的小数精度为六位。其余数字被截断。  </span><br><span class="line"></span><br><span class="line">fffffff 秒的小数精度为七位。其余数字被截断。  </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">t 在 AMDesignator 或 PMDesignator 中定义的 AM/PM 指示项的第一个字符(如果存在)。   </span><br><span class="line"></span><br><span class="line">tt 在 AMDesignator 或 PMDesignator 中定义的 AM/PM 指示项(如果存在)。  </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">z 时区偏移量(“+”或“-”后 仅跟小时)。一位数的小时数没有前导零。例如,太平洋标准时间是“-8”。   </span><br><span class="line"></span><br><span class="line">zz 时区偏移量(“+”或“-”后 仅跟小时)。一位数的小时数有前导零。例如,太平洋标准时间是“-08”。   </span><br><span class="line"></span><br><span class="line">zzz 完整时区偏移量(“+”或“-”后 跟有小时和分钟)。一位数的小时数和分钟数有前导零。例如,太平 洋标准时间是“-08:00”。  </span><br><span class="line"></span><br><span class="line">// -------------------------------------------------------------</span><br><span class="line">: 在 TimeSeparator 中定义的默认时间分隔符。  </span><br><span class="line"></span><br><span class="line">/ 在 DateSeparator 中定义的默认日期分隔符。  </span><br><span class="line"></span><br><span class="line">% c 其中 c 是格式模式(如果单独使 )。如果格式模式与原义字符或其他格式模式合并,则可以省略 “%”字符。  </span><br><span class="line"></span><br><span class="line">\ c 其中 c 是任意字符。照原义显示字符。若要显示反斜杠字符,请使 “\”。</span><br></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://my.oschina.net/yongbin45/blog/150114" target="_blank" rel="noopener">iOS时间那点事–NSDate</a></li>
<li><a href="https://my.oschina.net/yongbin45/blog/150667" target="_blank" rel="noopener">iOS时间那点事–NSDateFormatter</a></li>
<li><a href="https://my.oschina.net/yongbin45/blog/151376" target="_blank" rel="noopener">iOS时间那点事–NSTimeZone</a></li>
<li><a href="https://my.oschina.net/yongbin45/blog/156130" target="_blank" rel="noopener">ios时间那点事–NSLocale</a></li>
<li><a href="http://blog.csdn.net/ahut_qyb_6737/article/details/42494211" target="_blank" rel="noopener"><a href="http://blog.csdn.net/ahut_qyb_6737/article/details/42494211" target="_blank" rel="noopener">NSDateFormatterStyle 几种取值的区别</a></a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/30/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><span class="page-number current">31</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/32/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws1.sinaimg.cn/large/006tNc79gy1g22m14458rj30u014xu0x.jpg" alt="独木舟的木">
            
              <p class="site-author-name" itemprop="name">独木舟的木</p>
              <div class="site-description motion-element" itemprop="description">有时候阳光很好 有时候阳光很暗</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">312</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">54</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">独木舟的木</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/31/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz',
                'X-LC-Key': 'brOnU8mOQvSjpipJvdKUAIbU',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  


  <!-- red heart -->
  <script type="text/javascript" src="/js/src/love.js"></script>
  
</body>
</html>
