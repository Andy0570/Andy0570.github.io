<!DOCTYPE html>













<html class="theme-next gemini" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">



  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/han-css@3/dist/han.min.css">













  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">







  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/panda/apple-touch-icon.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/panda/favicon-32x32.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/panda/favicon-16x16.png?v=7.1.0">


  <link rel="mask-icon" href="/images/panda/safari-pinned-tab.svg?v=7.1.0" color="#222">


  <link rel="manifest" href="/images/panda/site.webmanifest">


  <meta name="msapplication-config" content="/images/panda/browserconfig.xml">





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '0E2AON8EZF',
      apiKey: '22fbefd84c8343239f5c04365b9728de',
      indexName: 'MyBlogPlatform',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="有时候阳光很好 有时候阳光很暗">
<meta name="keywords" content="独木舟的木">
<meta property="og:type" content="website">
<meta property="og:title" content="独木舟的木">
<meta property="og:url" content="https://andy0570.com/page/18/index.html">
<meta property="og:site_name" content="独木舟的木">
<meta property="og:description" content="有时候阳光很好 有时候阳光很暗">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="独木舟的木">
<meta name="twitter:description" content="有时候阳光很好 有时候阳光很暗">



  <link rel="alternate" href="/atom.xml" title="独木舟的木" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://andy0570.com/page/18/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>独木舟的木</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8229a094facca297f211d61323fd9fde";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/andy0570" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">独木舟的木</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">iOS Developer</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">14</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">37</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">317</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/andy0570" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/08/10/iOS 编程：在导航视图堆栈中显示模态视图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/10/iOS 编程：在导航视图堆栈中显示模态视图/" class="post-title-link" itemprop="url">iOS 编程：在导航视图堆栈中显示模态视图</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-10 12:33:00" itemprop="dateCreated datePublished" datetime="2017-08-10T12:33:00+08:00">2017-08-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/08/10/iOS 编程：在导航视图堆栈中显示模态视图/" class="leancloud_visitors" data-flag-title="iOS 编程：在导航视图堆栈中显示模态视图">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="需求描述"><a href="#需求描述" class="headerlink" title="需求描述"></a>需求描述</h3><ul>
<li>在 <strong>UINavigationController</strong> 中的【A页面】 push 到【B 页面】之前，先显示一个【模态页面】显示使用须知、服务条款等内容。</li>
<li>在【模态页面】中，如果点击“返回”按钮，则关闭【模态页面】，返回到【A页面】 ；如果点击“同意”按钮，关闭【模态页面】显示【B 页面】</li>
</ul>
<h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><ul>
<li>【A 页面】→【模态页面】→【A 页面】</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071805.gif" alt></p>
<ul>
<li>【A 页面】→【模态页面】→【B 页面】→【A 页面】</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071808.gif" alt></p>
<h3 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h3><h5 id="MainViewController"><a href="#MainViewController" class="headerlink" title="MainViewController"></a>MainViewController</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 【主页按钮】按下时执行</span><br><span class="line">- (IBAction)buttonDidClicked:(id)sender &#123;</span><br><span class="line">    </span><br><span class="line">    // 模态视图控制器</span><br><span class="line">    ModelViewController *modelViewController = [[ModelViewController alloc] initWithNibName:NSStringFromClass([ModelViewController class]) bundle:nil];</span><br><span class="line">    </span><br><span class="line">    // ‼️ Block回调，push 到第二页</span><br><span class="line">    modelViewController.conformBlock = ^&#123;</span><br><span class="line">        SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:NSStringFromClass([SecondViewController class]) bundle:nil];</span><br><span class="line">        [self.navigationController pushViewController:secondViewController animated:NO];</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    // 你可以直接 present 【模态视图控制器】</span><br><span class="line">    // [self presentViewController:modelViewController animated:YES completion:nil];</span><br><span class="line">    </span><br><span class="line">    // 也可以将【模态视图控制器】封装到【导航视图控制器】中显示。</span><br><span class="line">    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:modelViewController];</span><br><span class="line">    [self presentViewController:navController animated:YES completion:nil];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ModelViewController"><a href="#ModelViewController" class="headerlink" title="ModelViewController"></a>ModelViewController</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// .h 文件中设置 Block 属性</span><br><span class="line">@property (nonatomic, copy) void(^conformBlock)(void);</span><br><span class="line"></span><br><span class="line">// .m 文件</span><br><span class="line">- (void)setupNavigationBackBarButton &#123;</span><br><span class="line">    self.title = @&quot;模态页面&quot;;</span><br><span class="line">    UIBarButtonItem *cancelButtonItem = [[UIBarButtonItem alloc]</span><br><span class="line">        initWithBarButtonSystemItem:UIBarButtonSystemItemCancel</span><br><span class="line">                             target:self</span><br><span class="line">                             action:@selector(cancelButtonDidClicked:)];</span><br><span class="line">    self.navigationItem.leftBarButtonItem = cancelButtonItem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 取消按钮</span><br><span class="line">- (void)cancelButtonDidClicked:(id)sender &#123;</span><br><span class="line">    [self.navigationController dismissViewControllerAnimated:YES completion:nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 关闭模态页面，push 到第二页</span><br><span class="line">- (IBAction)dismissModelViewController:(id)sender &#123;</span><br><span class="line">    // ‼️ 先执行 Block 块 ，第二页视图控制器 push 进导航堆栈后，再关闭模态页面。</span><br><span class="line">    // 如果先关闭模态页面，再 push 第二页视图控制器会影响页面动画过渡上的流畅性。</span><br><span class="line">    self.conformBlock();</span><br><span class="line">    [self.navigationController dismissViewControllerAnimated:YES completion:nil];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="SecondViewController"><a href="#SecondViewController" class="headerlink" title="SecondViewController"></a>SecondViewController</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 返回到根视图控制器</span><br><span class="line">- (IBAction)backToRootViewController:(id)sender &#123;</span><br><span class="line">    [self.navigationController popToRootViewControllerAnimated:YES];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://segmentfault.com/q/1010000000504594" target="_blank" rel="noopener">IOS 模态视图能实现Push到其他页面的功能吗？</a></li>
<li><a href="https://stackoverflow.com/questions/8619805/ios-pushing-another-viewcontroller-on-a-model-view" target="_blank" rel="noopener">Pushing another ViewController on a model view</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/08/08/UIScrollView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/08/UIScrollView/" class="post-title-link" itemprop="url">UIScrollView</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-08 15:00:00" itemprop="dateCreated datePublished" datetime="2017-08-08T15:00:00+08:00">2017-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/08/08/UIScrollView/" class="leancloud_visitors" data-flag-title="UIScrollView">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><strong>UIScrollView</strong> 类为展示内容比应用程序窗口大的视图提供支持。它允许用户通过触控手势卷起内容并且通过捏合手势放大缩小内容。</p>
<ul>
<li><a href="http://www.jianshu.com/p/ba88e12eddc2" target="_blank" rel="noopener">iOS控件详解之UIScrollView</a></li>
</ul>
<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p><strong>UIScrollViewIndicatorStyle</strong> 指示器样式，指的是类似于 web 页面上的滚动条样式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 设置指示器（滚动条）样式</span><br><span class="line">self.scrollerView.indicatorStyle = UIScrollViewIndicatorStyleWhite;</span><br><span class="line">// 加载时闪一下指示器（滚动条）</span><br><span class="line">[self.scrollerView flashScrollIndicators];</span><br></pre></td></tr></table></figure>
<h3 id="在UIScrollView中放一张2倍于窗口大小的视图"><a href="#在UIScrollView中放一张2倍于窗口大小的视图" class="headerlink" title="在UIScrollView中放一张2倍于窗口大小的视图"></a>在UIScrollView中放一张2倍于窗口大小的视图</h3><p>视图层次：根视图控制器中添加 UIScrollView ,UIScrollView 中添加 HyponsisView 视图。</p>
<p>实现方法：覆盖 UIViewController 中的 loadView 方法，创建视图层次结构。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (void)loadView &#123;</span><br><span class="line">//创建一个超大视图</span><br><span class="line">CGRect screenRect = CGRectMake(0, 0, 414, 736);</span><br><span class="line">//创建一个 UIScrollView 对象，将其尺寸设置为窗口大小</span><br><span class="line">UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:screenRect];</span><br><span class="line">self.view = scrollView;</span><br><span class="line"></span><br><span class="line">//HyponsisView的视图大小是窗口的2倍</span><br><span class="line">CGRect bigRect = screenRect;</span><br><span class="line">bigRect.size.width *= 2.0;</span><br><span class="line">bigRect.size.height *= 2.0;</span><br><span class="line">  </span><br><span class="line">//创建一个有着超大尺寸的 HQLHypnosisView 对象并将其加入 UIScrollView 对象</span><br><span class="line">HQLHypnosisView *hyponsisView = [[HQLHypnosisView alloc]initWithFrame:bigRect];</span><br><span class="line"></span><br><span class="line">[scrollView addSubview:hyponsisView];</span><br><span class="line"></span><br><span class="line">//告诉 UIScrollView 对象“取景”范围有多大</span><br><span class="line">scrollView.contentSize = bigRect.size;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="在UIScrollView中放左右两张视图"><a href="#在UIScrollView中放左右两张视图" class="headerlink" title="在UIScrollView中放左右两张视图"></a>在UIScrollView中放左右两张视图</h3><p><strong>UIScrollView</strong> 对象的分页实现原理是：UIScrollView 对象会根据其 bounds 的尺寸，将contentSize 分割为尺寸相同的多个区域。拖动结束后，UIScrollView 实例会自动滚动并只显示其中的一个区域。</p>
<p>同样覆盖loadView方法创建视图层次结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//创建两个 CGRect 结构分别作为 UIScrollView 对象和 HQLHypnosisView 对象的 frame</span><br><span class="line">CGRect screenRect = CGRectMake(0, 0, 414, 736);</span><br><span class="line"></span><br><span class="line">//创建一个 UIScrollView 对象，将其尺寸设置为窗口大小</span><br><span class="line">UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:screenRect];</span><br><span class="line"></span><br><span class="line">//设置UIScrollView 对象的“镜头”的边和其显示的某个视图的边对齐</span><br><span class="line">[scrollView setPagingEnabled:YES];</span><br><span class="line">self.view = scrollView;</span><br><span class="line"></span><br><span class="line">CGRect bigRect = screenRect;</span><br><span class="line">bigRect.size.width *= 2.0;</span><br><span class="line"></span><br><span class="line">//创建一个大小与屏幕相同的 HQLPictureView 对象并将其加入 UIScrollView 对象</span><br><span class="line">HQLPictureView *pictureView = [[HQLPictureView alloc]initWithFrame:screenRect];</span><br><span class="line">[scrollView addSubview:pictureView];</span><br><span class="line"></span><br><span class="line">//创建第二个大小与屏幕相同的 HQLHypnosisView 对象并放置在第一个 HQLPictureView 对象的右侧，使其刚好移除屏幕外</span><br><span class="line">screenRect.origin.x +=screenRect.size.width;</span><br><span class="line"></span><br><span class="line">HQLHypnosisView *anotherView = [[HQLHypnosisView alloc]initWithFrame:screenRect];</span><br><span class="line"></span><br><span class="line">[scrollView addSubview:anotherView];</span><br><span class="line"></span><br><span class="line">//告诉 UIScrollView 对象“取景”范围有多大</span><br><span class="line">scrollView.contentSize=bigRect.size;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/08/08/iOS 编程：深拷贝与浅拷贝/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/08/08/iOS 编程：深拷贝与浅拷贝/" class="post-title-link" itemprop="url">iOS 编程：深拷贝与浅拷贝</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-08-08 00:23:00" itemprop="dateCreated datePublished" datetime="2017-08-08T00:23:00+08:00">2017-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C-编程/" itemprop="url" rel="index"><span itemprop="name">Objective-C 编程</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/08/08/iOS 编程：深拷贝与浅拷贝/" class="leancloud_visitors" data-flag-title="iOS 编程：深拷贝与浅拷贝">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>最近经常在关注的公众号或者技术网站看到关于iOS深拷贝与浅拷贝的话题。看到一篇技术文章，点击收藏或者只是读过一遍，并不会让你深刻领悟其中的技术原理，只有照着源码敲一遍，运行调试一通，你才会深谙其道，说不定还会有新的发现。所以，这篇文章就是阅读了人家的文章，自己又敲了一遍，加深一下印象，然后还有一点点新的感悟和理解。</p>
<p>参考的文章如下：</p>
<ul>
<li><a href="http://www.cnblogs.com/beckwang0912/p/7212075.html" target="_blank" rel="noopener">iOS 图文并茂的带你了解深拷贝与浅拷贝 @贝克的飞机</a></li>
<li><a href="http://www.cnblogs.com/mddblog/archive/2017/07/25/7236138.html" target="_blank" rel="noopener">集合深浅拷贝以及经常遇到的坑（面试常问）@时间已静止</a></li>
</ul>
<h1 id="一、概念与总结"><a href="#一、概念与总结" class="headerlink" title="一、概念与总结"></a>一、概念与总结</h1><h2 id="1-浅拷贝"><a href="#1-浅拷贝" class="headerlink" title="1. 浅拷贝"></a>1. 浅拷贝</h2><p>浅拷贝就是对内存地址的复制，让【目标对象指针】和【源对象指针】指向同一块内存空间，当内存被销毁时，指向这块内存的几个指针需要重新定义才可以使用，要不然会成为野指针。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/074027.png" alt></p>
<p><strong>浅拷贝就是拷贝【指向原来对象的】指针，使原对象的引用计数+1，可以理解为创建了一个指向原对象的新指针而已，并没有创建一个全新的对象。</strong></p>
<h2 id="2-深拷贝"><a href="#2-深拷贝" class="headerlink" title="2. 深拷贝"></a>2. 深拷贝</h2><p>深拷贝是指拷贝对象的具体内容，而内存地址是自主分配的，拷贝结束之后，两个对象虽然存的值是相同的，但是内存地址不一样，两个对象也互不影响，互不干涉。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/074029.png" alt></p>
<p><strong>深拷贝就是创建【值与原对象相同，但是内存地址不同的】新对象，创建后的对象和原对象没有任何关系。</strong></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>浅拷贝是指针拷贝，深拷贝是内容拷贝。本质区别在于：</p>
<ul>
<li>是否影响内存地址的引用计数；</li>
</ul>
<ul>
<li>是否创建新的内存地址。</li>
</ul>
<h1 id="二、示例分析"><a href="#二、示例分析" class="headerlink" title="二、示例分析"></a>二、示例分析</h1><p>在iOS中，深拷贝与浅拷贝要更加的复杂，涉及到容器与非容器、可变与不可变对象的 <code>copy</code> 与 <code>mutableCopy</code>，还有 <strong>@property</strong> 属性中的内存管理。</p>
<h2 id="1-非集合对象的-copy-与-mutableCopy"><a href="#1-非集合对象的-copy-与-mutableCopy" class="headerlink" title="1. 非集合对象的 copy 与 mutableCopy"></a>1. 非集合对象的 copy 与 mutableCopy</h2><h3 id="1-1-不可变对象-NSString-→-NSMutableString"><a href="#1-1-不可变对象-NSString-→-NSMutableString" class="headerlink" title="1.1 不可变对象 NSString → NSMutableString"></a>1.1 不可变对象 NSString → NSMutableString</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">NSString *string1 = @&quot;Hello&quot;;</span><br><span class="line"></span><br><span class="line">// 引用计数+1。</span><br><span class="line">NSString *string2 = string1;</span><br><span class="line"></span><br><span class="line">// NSString 的 copy 是浅拷贝，且 copy 返回的对象是不可变对象。</span><br><span class="line">NSMutableString *string3 = [string1 copy];</span><br><span class="line">// copy 返回的是不可变对象，string3 不能被修改，因此程序会 crash。</span><br><span class="line">// [string3 appendString:@&quot; World&quot;];</span><br><span class="line"></span><br><span class="line">// NSString 的 mutableCopy 是深拷贝。</span><br><span class="line">NSMutableString *string4 = [string1 mutableCopy];</span><br><span class="line">[string4 appendString:@&quot; World&quot;];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;string1:&lt;%p : %@&gt; \n&quot;,string1,string1);</span><br><span class="line">NSLog(@&quot;string2:&lt;%p : %@&gt; \n&quot;,string2,string2);</span><br><span class="line">NSLog(@&quot;string3:&lt;%p : %@&gt; \n&quot;,string3,string3);</span><br><span class="line">NSLog(@&quot;string4:&lt;%p : %@&gt; \n&quot;,string4,string4);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string1:&lt;0x100001040 : Hello&gt;</span><br><span class="line">string2:&lt;0x100001040 : Hello&gt;</span><br><span class="line">string3:&lt;0x100001040 : Hello&gt;</span><br><span class="line">string4:&lt;0x1003004a0 : Hello World&gt;</span><br></pre></td></tr></table></figure>
<p>结论：</p>
<ul>
<li><strong>NSString</strong> 的 <code>copy</code> 是浅拷贝，且 <code>copy</code> 返回的对象是不可变对象；</li>
<li><strong>NSString</strong> 的 <code>mutableCopy</code> 是深拷贝。</li>
</ul>
<h3 id="1-2-可变对象-NSMutableString-→-NSMutableString"><a href="#1-2-可变对象-NSMutableString-→-NSMutableString" class="headerlink" title="1.2 可变对象 NSMutableString → NSMutableString"></a>1.2 可变对象 NSMutableString → NSMutableString</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *mStr1 = [NSMutableString stringWithString:@&quot;Hello&quot;];</span><br><span class="line"></span><br><span class="line">// 引用计数+1。</span><br><span class="line">NSMutableString *mStr2 = mStr1;</span><br><span class="line"></span><br><span class="line">// NSMutableString 的 copy 是深拷贝，且 copy 返回的对象是不可变对象。</span><br><span class="line">NSMutableString *mStr3 = [mStr1 copy];</span><br><span class="line">// copy 返回的是不可变对象，mStr3 不能被修改，因此程序会 crash。</span><br><span class="line">// [mStr3 appendString:@&quot; World&quot;];</span><br><span class="line"></span><br><span class="line">// NSMutableString 的 mutableCopy 是深拷贝。</span><br><span class="line">NSMutableString *mStr4 = [mStr1 mutableCopy];</span><br><span class="line">[mStr4 appendString:@&quot; World&quot;];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mStr1:&lt;%p : %@&gt; \n&quot;,mStr1,mStr1);</span><br><span class="line">NSLog(@&quot;mStr2:&lt;%p : %@&gt; \n&quot;,mStr2,mStr2);</span><br><span class="line">NSLog(@&quot;mStr3:&lt;%p : %@&gt; \n&quot;,mStr3,mStr3);</span><br><span class="line">NSLog(@&quot;mStr4:&lt;%p : %@&gt; \n&quot;,mStr4,mStr4);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mStr1:&lt;0x100200f10 : Hello&gt;</span><br><span class="line">mStr2:&lt;0x100200f10 : Hello&gt;</span><br><span class="line">mStr3:&lt;0x6f6c6c654855 : Hello&gt;</span><br><span class="line">mStr4:&lt;0x100200ba0 : Hello World&gt;</span><br></pre></td></tr></table></figure>
<p>结论：</p>
<ul>
<li><p><strong>NSMutableString</strong> 的 <code>copy</code> 是深拷贝，且 <code>copy</code> 返回的对象是不可变对象；</p>
</li>
<li><p><strong>NSMutableString</strong> 的 <code>mutableCopy</code> 是深拷贝；</p>
</li>
<li><p><strong>NSMutableString</strong> 的 <code>copy</code>  和 <code>mutableCopy</code> 都是深拷贝；</p>
</li>
<li><p>‼️重要‼️，虽然 <strong>NSMutableString</strong> 的 <code>copy</code> 是深拷贝，但  <code>copy</code> 返回的对象是不可变对象，这下明白 <strong>@property</strong> 属性声明 <strong>NSMutableString</strong> 不使用 <code>copy</code> 的原因了吧：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@property (nonatomic, copy) NSString *string;</span><br><span class="line">@property (nonatomic, strong) NSMutableString *mutableString;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-3-可变对象-NSMutableString-→-NSString"><a href="#1-3-可变对象-NSMutableString-→-NSString" class="headerlink" title="1.3 可变对象 NSMutableString → NSString"></a>1.3 可变对象 NSMutableString → NSString</h3><blockquote>
<p>引用这个示例的原因在后面【项目应用】中会讲到。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *mStr1 = [NSMutableString stringWithString:@&quot;Hello&quot;];</span><br><span class="line"></span><br><span class="line">// 引用计数+1。</span><br><span class="line">NSString *str2 = mStr1;</span><br><span class="line"></span><br><span class="line">// NSMutableString 的 copy 是深拷贝。</span><br><span class="line">NSString *str3 = [mStr1 copy];</span><br><span class="line"></span><br><span class="line">// NSMutableString 的 mutableCopy 是深拷贝。</span><br><span class="line">NSString *str4 = [mStr1 mutableCopy];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mStr1:&lt;%p : %@&gt; \n&quot;,mStr1,mStr1);</span><br><span class="line">NSLog(@&quot;str2 :&lt;%p : %@&gt; \n&quot;,str2,str2);</span><br><span class="line">NSLog(@&quot;str3 :&lt;%p : %@&gt; \n&quot;,str3,str3);</span><br><span class="line">NSLog(@&quot;str4 :&lt;%p : %@&gt; \n&quot;,str4,str4);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mStr1:&lt;0x10030a240 : Hello&gt;</span><br><span class="line">str2 :&lt;0x10030a240 : Hello&gt;</span><br><span class="line">str3 :&lt;0x6f6c6c654855 : Hello&gt;</span><br><span class="line">str4 :&lt;0x100309fb0 : Hello&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-集合对象的-copy-与-mutableCopy"><a href="#2-集合对象的-copy-与-mutableCopy" class="headerlink" title="2.集合对象的 copy 与 mutableCopy"></a>2.集合对象的 copy 与 mutableCopy</h2><h3 id="2-1-不可变对象-NSArray"><a href="#2-1-不可变对象-NSArray" class="headerlink" title="2.1 不可变对象 NSArray"></a>2.1 不可变对象 NSArray</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NSArray *array1 = @[@&quot;Hello&quot;,@&quot;World&quot;];</span><br><span class="line"></span><br><span class="line">// NSArray 的 copy 是浅拷贝，且 copy 返回的对象是不可变对象。</span><br><span class="line">NSArray *array2 = [array1 copy];</span><br><span class="line"></span><br><span class="line">// NSArray 的 mutableCopy 是深拷贝。</span><br><span class="line">NSArray *array3 = [array1 mutableCopy];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;array1:&lt;%p : %@&gt; \n&quot;,array1,array1);</span><br><span class="line">NSLog(@&quot;array2:&lt;%p : %@&gt; \n&quot;,array2,array2);</span><br><span class="line">NSLog(@&quot;array3:&lt;%p : %@&gt; \n&quot;,array3,array3);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">array1:&lt;0x1003065d0 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br><span class="line">array2:&lt;0x1003065d0 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br><span class="line">array3:&lt;0x100306bd0 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br></pre></td></tr></table></figure>
<p>结论：</p>
<ul>
<li><p><strong>NSArray</strong> 的 <code>copy</code> 是浅拷贝，且 <code>copy</code> 返回的对象是不可变对象;</p>
</li>
<li><p><strong>NSArray</strong> 的 <code>mutableCopy</code> 是深拷贝。</p>
</li>
</ul>
<h3 id="2-2-可变对象-NSMutableArray"><a href="#2-2-可变对象-NSMutableArray" class="headerlink" title="2.2 可变对象 NSMutableArray"></a>2.2 可变对象 NSMutableArray</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NSMutableArray *mArray1 = [NSMutableArray arrayWithObjects:@&quot;Hello&quot;,@&quot;World&quot;, nil];</span><br><span class="line"></span><br><span class="line">// NSMutableArray 的 copy 是深拷贝，且 copy 返回的对象是不可变对象。</span><br><span class="line">NSMutableArray *mArray2 = [mArray1 copy];</span><br><span class="line"></span><br><span class="line">// NSMutableArray 的 mutableCopy 是深拷贝。</span><br><span class="line">NSMutableArray *mArray3 = [mArray1 mutableCopy];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mArray1:&lt;%p : %@&gt; \n&quot;,mArray1,mArray1);</span><br><span class="line">NSLog(@&quot;mArray2:&lt;%p : %@&gt; \n&quot;,mArray2,mArray2);</span><br><span class="line">NSLog(@&quot;mArray3:&lt;%p : %@&gt; \n&quot;,mArray3,mArray3);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mArray1:&lt;0x100203da0 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br><span class="line">mArray2:&lt;0x100204030 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br><span class="line">mArray3:&lt;0x1002040b0 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br></pre></td></tr></table></figure>
<p>结论：</p>
<ul>
<li><p><strong>NSMutableArray</strong> 的 <code>copy</code> 是深拷贝，且 <code>copy</code> 返回的对象是不可变对象；</p>
</li>
<li><p><strong>NSMutableArray</strong> 的 <code>mutableCopy</code> 是深拷贝。</p>
</li>
<li><p>‼️重要‼️，同样地，<strong>@property</strong> 属性声明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@property (nonatomic, copy) NSArray *array;</span><br><span class="line">@property (nonatomic, strong) NSMutableArray *mutableArray;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-3-单层深拷贝"><a href="#2-3-单层深拷贝" class="headerlink" title="2.3 单层深拷贝"></a>2.3 单层深拷贝</h3><p><strong>特别注意的是</strong>：对于集合类的可变对象来说，深拷贝并非严格意义上的深复制，只能算是<strong>单层深复制</strong>，即虽然新开辟了内存地址，但是存放在内存上的值（也就是数组里的元素仍然指向原数组元素值，并没有另外复制一份），这就叫做 <strong>单层深复制</strong>。</p>
<p>示例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *mString1 = [NSMutableString stringWithString:@&quot;Hello&quot;];</span><br><span class="line">NSMutableString *mString2 = [NSMutableString stringWithString:@&quot;World&quot;];</span><br><span class="line">NSMutableArray *mArray1 = [NSMutableArray arrayWithObjects:mString1,mString2, nil];</span><br><span class="line"></span><br><span class="line">NSMutableArray *mArray2 = [mArray1 copy];</span><br><span class="line">NSMutableArray *mArray3 = [mArray1 mutableCopy];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mArray1:&lt;%p : %@&gt; \n&quot;,mArray1,mArray1);</span><br><span class="line">NSLog(@&quot;mArray2:&lt;%p : %@&gt; \n&quot;,mArray2,mArray2);</span><br><span class="line">NSLog(@&quot;mArray3:&lt;%p : %@&gt; \n&quot;,mArray3,mArray3);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,mArray1[0],mArray1[1]);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,mArray2[0],mArray2[1]);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,mArray3[0],mArray3[1]);</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;-----------修改原值后---------&quot;);</span><br><span class="line">[mString1 appendString:@&quot;ios&quot;];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mArray1:&lt;%p : %@&gt; \n&quot;,mArray1,mArray1);</span><br><span class="line">NSLog(@&quot;mArray2:&lt;%p : %@&gt; \n&quot;,mArray2,mArray2);</span><br><span class="line">NSLog(@&quot;mArray3:&lt;%p : %@&gt; \n&quot;,mArray3,mArray3);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,mArray1[0],mArray1[1]);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,mArray2[0],mArray2[1]);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,mArray3[0],mArray3[1]);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">mArray1:</span><span class="params">&lt;<span class="number">0x100306bc0</span> : (</span></span><br><span class="line"><span class="params">    Hello,</span></span><br><span class="line"><span class="params">    World</span></span><br><span class="line"><span class="params">)&gt;</span></span><br><span class="line"><span class="symbol">mArray2:</span><span class="params">&lt;<span class="number">0x100306d10</span> : (</span></span><br><span class="line"><span class="params">    Hello,</span></span><br><span class="line"><span class="params">    World</span></span><br><span class="line"><span class="params">)&gt;</span></span><br><span class="line"><span class="symbol">mArray3:</span><span class="params">&lt;<span class="number">0x100306dc0</span> : (</span></span><br><span class="line"><span class="params">    Hello,</span></span><br><span class="line"><span class="params">    World</span></span><br><span class="line"><span class="params">)&gt;</span></span><br><span class="line">数组元素地址：<span class="params">&lt;value1:<span class="number">0x100306620</span>&gt;</span>,<span class="params">&lt;value2:<span class="number">0x100306a00</span>&gt;</span> </span><br><span class="line">数组元素地址：<span class="params">&lt;value1:<span class="number">0x100306620</span>&gt;</span>,<span class="params">&lt;value2:<span class="number">0x100306a00</span>&gt;</span> </span><br><span class="line">数组元素地址：<span class="params">&lt;value1:<span class="number">0x100306620</span>&gt;</span>,<span class="params">&lt;value2:<span class="number">0x100306a00</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"> -----------修改原值后---------</span><br><span class="line"><span class="symbol">mArray1:</span><span class="params">&lt;<span class="number">0x100306bc0</span> : (</span></span><br><span class="line"><span class="params">    Helloios,</span></span><br><span class="line"><span class="params">    World</span></span><br><span class="line"><span class="params">)&gt;</span></span><br><span class="line"><span class="symbol">mArray2:</span><span class="params">&lt;<span class="number">0x100306d10</span> : (</span></span><br><span class="line"><span class="params">    Helloios,</span></span><br><span class="line"><span class="params">    World</span></span><br><span class="line"><span class="params">)&gt;</span></span><br><span class="line"><span class="symbol">mArray3:</span><span class="params">&lt;<span class="number">0x100306dc0</span> : (</span></span><br><span class="line"><span class="params">    Helloios,</span></span><br><span class="line"><span class="params">    World</span></span><br><span class="line"><span class="params">)&gt;</span></span><br><span class="line">数组元素地址：<span class="params">&lt;value1:<span class="number">0x100306620</span>&gt;</span>,<span class="params">&lt;value2:<span class="number">0x100306a00</span>&gt;</span> </span><br><span class="line">数组元素地址：<span class="params">&lt;value1:<span class="number">0x100306620</span>&gt;</span>,<span class="params">&lt;value2:<span class="number">0x100306a00</span>&gt;</span> </span><br><span class="line">数组元素地址：<span class="params">&lt;value1:<span class="number">0x100306620</span>&gt;</span>,<span class="params">&lt;value2:<span class="number">0x100306a00</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>结论：</p>
<ul>
<li>mArray1、mArray2、mArray3 的地址都不一样，开辟了新的内存空间，证明 <strong>NSMutableArray</strong> 的 <code>copy</code> 和 <code>mutableCopy</code> 的确都是深拷贝。</li>
<li>所有数组中值的地址是一样的，并没有开辟新的内存，而是指针指向了原地址。因此说它是 <strong>单层深拷贝</strong>。</li>
<li>修改原数组 mArray1 中的值后，mArray2 和 mArray3 数组中的值也跟着发生了变化。也证明了它是 <strong>单层深拷贝</strong>。</li>
</ul>
<h3 id="2-4-集合对象的完全深拷贝"><a href="#2-4-集合对象的完全深拷贝" class="headerlink" title="2.4 集合对象的完全深拷贝"></a>2.4 集合对象的完全深拷贝</h3><p>2.2 中提到的  <strong>NSMutableArray</strong> 的拷贝只是单层深拷贝，下面的方法可以实现完全深拷贝：</p>
<h4 id="（1）归档解档法"><a href="#（1）归档解档法" class="headerlink" title="（1）归档解档法"></a>（1）归档解档法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *mString1 = [NSMutableString stringWithString:@&quot;Hello&quot;];</span><br><span class="line">NSMutableString *mString2 = [NSMutableString stringWithString:@&quot;World&quot;];</span><br><span class="line">NSMutableArray *mArray1 = [NSMutableArray arrayWithObjects:mString1,mString2, nil];</span><br><span class="line"></span><br><span class="line">// 归档</span><br><span class="line">NSData *data = [NSKeyedArchiver archivedDataWithRootObject:mArray1];</span><br><span class="line">// 解档</span><br><span class="line">NSArray *array = [NSKeyedUnarchiver unarchiveTopLevelObjectWithData:data error:nil];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mArray1:&lt;%p : %@&gt; \n&quot;,mArray1,mArray1);</span><br><span class="line">NSLog(@&quot;array:&lt;%p : %@&gt; \n&quot;,array,array);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,mArray1[0],mArray1[1]);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,array[0],array[1]);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mArray1:&lt;0x100303270 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br><span class="line">array:&lt;0x100305400 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br><span class="line">数组元素地址：&lt;value1:0x100302f30&gt;,&lt;value2:0x1003030d0&gt;</span><br><span class="line">数组元素地址：&lt;value1:0x1003053c0&gt;,&lt;value2:0x100305990&gt;</span><br></pre></td></tr></table></figure>
<p>结论</p>
<ul>
<li>两个数组的内存地址不同，数组中元素的内存地址也不同，实现了完全深拷贝。</li>
</ul>
<h4 id="2-instancetype-initWithArray-NSArray-lt-ObjectType-gt-array-copyItems-BOOL-flag"><a href="#2-instancetype-initWithArray-NSArray-lt-ObjectType-gt-array-copyItems-BOOL-flag" class="headerlink" title="(2) - (instancetype)initWithArray:(NSArray&lt;ObjectType&gt; *)array copyItems:(BOOL)flag;"></a>(2) <code>- (instancetype)initWithArray:(NSArray&lt;ObjectType&gt; *)array copyItems:(BOOL)flag;</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *mString1 = [NSMutableString stringWithString:@&quot;Hello&quot;];</span><br><span class="line">NSMutableString *mString2 = [NSMutableString stringWithString:@&quot;World&quot;];</span><br><span class="line">NSMutableArray *mArray1 = [NSMutableArray arrayWithObjects:mString1,mString2, nil];</span><br><span class="line"></span><br><span class="line">NSArray *array = [[NSArray alloc] initWithArray:mArray1 copyItems:YES];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mArray1:&lt;%p : %@&gt; \n&quot;,mArray1,mArray1);</span><br><span class="line">NSLog(@&quot;array:&lt;%p : %@&gt; \n&quot;,array,array);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,mArray1[0],mArray1[1]);</span><br><span class="line">NSLog(@&quot;数组元素地址：&lt;value1:%p&gt;,&lt;value2:%p&gt; \n&quot;,array[0],array[1]);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mArray1:&lt;0x100403270 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br><span class="line">array:&lt;0x1004034d0 : (</span><br><span class="line">    Hello,</span><br><span class="line">    World</span><br><span class="line">)&gt;</span><br><span class="line">数组元素地址：&lt;value1:0x100402f30&gt;,&lt;value2:0x1004030d0&gt;</span><br><span class="line">数组元素地址：&lt;value1:0x6f6c6c654855&gt;,&lt;value2:0x646c726f5755&gt;</span><br></pre></td></tr></table></figure>
<p>结论</p>
<ul>
<li>两个数组的内存地址不同，数组中元素的内存地址也不同，实现了完全深拷贝。（那之前的<strong>归档解档法</strong>是不是有点旁门左道，或者说有点杂技代码（hack）的嫌疑🤔）</li>
</ul>
<h1 id="三、准则"><a href="#三、准则" class="headerlink" title="三、准则"></a>三、准则</h1><ol>
<li>不可变对象的 <code>copy</code> 方法是浅拷贝，<code>mutableCopy</code>  方法是深拷贝。</li>
<li>可变对象的 <code>copy</code> 和 <code>mutableCopy</code> 方法都是深拷贝（区别完全深拷贝与单层深拷贝） 。</li>
<li>无论是可变对象还是不可变对象， <code>copy</code> 方法返回的对象都是不可变对象。</li>
</ol>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/074033.png" alt></p>
<h2 id="项目应用"><a href="#项目应用" class="headerlink" title="项目应用"></a>项目应用</h2><h3 id="自定义指定初始化方法"><a href="#自定义指定初始化方法" class="headerlink" title="自定义指定初始化方法"></a>自定义指定初始化方法</h3><h4 id="推荐："><a href="#推荐：" class="headerlink" title="推荐："></a>推荐：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithUsername:(NSString *)username</span><br><span class="line">                        password:(NSString *)password &#123;</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        _username = [username copy];</span><br><span class="line">        _password = [password copy];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="反对："><a href="#反对：" class="headerlink" title="反对："></a>反对：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithUsername:(NSString *)username</span><br><span class="line">                        password:(NSString *)password &#123;</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        _username = username;</span><br><span class="line">        _password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="原因："><a href="#原因：" class="headerlink" title="原因："></a>原因：</h4><p>如果传入的 <strong>NSString</strong> 对象类型是 <strong>NSMutableString</strong> 类型，一旦对原数据修改，会引起不必要的麻烦。如果使用 <code>copy</code> 方法，不管它是 <strong>NSString</strong> 对象的<code>copy</code>浅拷贝还是 <strong>NSMutableString</strong> 对象的<code>copy</code>深拷贝，得到的总是不可变对象。</p>
<p>示例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 1.3 扩展</span><br><span class="line">NSMutableString *mStr1 = [NSMutableString stringWithString:@&quot;Hello&quot;];</span><br><span class="line"></span><br><span class="line">// 引用计数+1</span><br><span class="line">NSString *str2 = mStr1;</span><br><span class="line">NSString *str3 = [mStr1 copy];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mStr1:&lt;%p : %@&gt; \n&quot;,mStr1,mStr1);</span><br><span class="line">NSLog(@&quot;str2 :&lt;%p : %@&gt; \n&quot;,str2,str2);</span><br><span class="line">NSLog(@&quot;str3 :&lt;%p : %@&gt; \n&quot;,str3,str3);</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;-----------修改原值后---------&quot;);</span><br><span class="line">[mStr1 appendString:@&quot; World&quot;];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;mStr1:&lt;%p : %@&gt; \n&quot;,mStr1,mStr1);</span><br><span class="line">NSLog(@&quot;str2 :&lt;%p : %@&gt; \n&quot;,str2,str2);</span><br><span class="line">NSLog(@&quot;str3 :&lt;%p : %@&gt; \n&quot;,str3,str3);</span><br></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mStr1:&lt;0x100304b00 : Hello&gt;</span><br><span class="line">str2 :&lt;0x100304b00 : Hello&gt;</span><br><span class="line">str3 :&lt;0x6f6c6c654855 : Hello&gt;</span><br><span class="line">-----------修改原值后---------</span><br><span class="line">mStr1:&lt;0x100304b00 : Hello World&gt;</span><br><span class="line">str2 :&lt;0x100304b00 : Hello World&gt;</span><br><span class="line">str3 :&lt;0x6f6c6c654855 : Hello&gt;</span><br></pre></td></tr></table></figure>
<h3 id="setter方法"><a href="#setter方法" class="headerlink" title="setter方法"></a>setter方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@property (nonatomic, copy) NSString *str;</span><br><span class="line"></span><br><span class="line">- (void)setStr:(NSString *)str &#123;</span><br><span class="line">    // _str = str; 不要这样写</span><br><span class="line">    _str = [str copy];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="http://www.cnblogs.com/beckwang0912/p/7212075.html" target="_blank" rel="noopener">iOS 图文并茂的带你了解深拷贝与浅拷贝 @贝克的飞机</a></li>
<li><a href="http://www.jianshu.com/p/8a35e30ddcc1" target="_blank" rel="noopener">集合深浅拷贝以及经常遇到的坑（面试常问）@时间已静止</a></li>
<li><a href="http://www.jianshu.com/p/d85a5e56c505" target="_blank" rel="noopener">程序底层——程序如何在RAM ROM运行，内存分配与分区</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/07/31/UIStepper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/07/31/UIStepper/" class="post-title-link" itemprop="url">UIStepper</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-07-31 13:28:00" itemprop="dateCreated datePublished" datetime="2017-07-31T13:28:00+08:00">2017-07-31</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/07/31/UIStepper/" class="leancloud_visitors" data-flag-title="UIStepper">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="UIStepper-步进器"><a href="#UIStepper-步进器" class="headerlink" title="UIStepper 步进器"></a>UIStepper 步进器</h1><p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072906.png" alt></p>
<p>步进器是一个用于增加或减少数值的两段控件。默认状态下，步进器的一个分段显示一个加号（+）而另外一个显示减号（-）。如果有需要，这些符号也可以替换成自定义图片。</p>
<p><strong>确保步进器所调整的数值显眼易见。</strong>由于步进器本身不显示任何值，因此要确保用户知道他们用步进器改变的是什么值。</p>
<p><strong>若可能涉及到较大数值的调整，那就不要使用步进器。</strong>步进器适用于只需少量点击的小数值调整。比如，在打印页面，使用步进器调整打印份数是合理的，因为用户极少会大幅度调整这个值。反之，用步进器来选择页码范围就是不合理的，因为即使是对于页码不多的文档，用户也必须通过多次点击才能完成选择。</p>
<p>了解开发详情，请参阅<a href="https://developer.apple.com/reference/uikit/uistepper" target="_blank" rel="noopener">UIStepper</a>。</p>
<h2 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h2><p>如果将步进器行为设置为 <code>autorepeat</code>（这是默认值），则按住其中一个按钮会持续增加或减少步进器的值。 变化率取决于用户持续按压控制的时间。<br>最大值必须大于等于最小值。 如果设置了一个会导致步进中断的最大值或最小值，这两个值都将设置为新值。 例如，如果最小值为200，并设置最大值为100，则最小值和最大值都为200。</p>
<h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h2><h3 id="配置步进器"><a href="#配置步进器" class="headerlink" title="配置步进器"></a>配置步进器</h3><ul>
<li><p><code>continuous</code></p>
<p>步进器的连续与非连续状态。代表被改变的值是在用户交互期间立即更改，还是用户交互结束时再更改？<br>此属性的默认值为YES。</p>
</li>
<li><p><code>autorepeat</code></p>
<p>步进器的自动与非自动步进状态。代表用户持续按压会不会自动持续增加或减少步进器的值。</p>
</li>
<li><p><code>wraps</code></p>
<p>步进器的包装与非包装状态。</p>
<blockquote>
<p>如果设置为 <strong>YES</strong>，增加超过 <code>maximumValue</code> 将值设置为 <code>minimumValue</code> ; 同样，减少到 <code>minimumValue</code> 以下将值设置为 <code>maximumValue</code>。 如果设置为 NO，步进器不会超出<code>maximumValue</code>，也不会递减到 <code>minimumValue</code> 以下，而是保持在这些值。此属性的默认值为 <strong>NO</strong>。</p>
</blockquote>
</li>
<li><p><code>minimumValue</code> </p>
<p>最小值。</p>
</li>
<li><p><code>maximumValue</code></p>
<p>最大值。</p>
</li>
<li><p><code>stepValue</code></p>
<p>步进值，默认为1。</p>
</li>
</ul>
<h3 id="获取步进值"><a href="#获取步进值" class="headerlink" title="获取步进值"></a>获取步进值</h3><ul>
<li><p><code>value</code></p>
<p>步进器的数值。</p>
<blockquote>
<p>当值更改时，步进器将 <strong>UIControlEventValueChanged</strong> 标志发送到其 Target（参阅 <code>addTarget：action：forControlEvents：</code>）。 关于值更改事件是连续发送还是用户交互结束时发送，请参阅 <code>continuous</code> 属性。<br>此属性的默认值为0。此属性在其下限处被钳制至 <code>minimumValue</code>，并将其上限钳制到<code>maximumValue</code>。</p>
</blockquote>
</li>
</ul>
<h3 id="配置外观"><a href="#配置外观" class="headerlink" title="配置外观"></a>配置外观</h3><ul>
<li><p><code>tintColor</code></p>
</li>
<li><p><code>backgroundImageForState:</code></p>
<p>获取步进器在不同状态下的背景图片。</p>
</li>
<li><p><code>setBackgroundImage:forState:</code></p>
<p>设置步进器在不同状态下的背景图片。</p>
</li>
<li><p><code>decrementImageForState:</code></p>
<p>返回用于控件的递减字形的图像。(把步进器的减号（“-”）替换为图片)</p>
</li>
<li><p><code>setDecrementImage:forState:</code></p>
<p>设置递减值的图片。</p>
</li>
<li><p><code>dividerImageForLeftSegmentState:rightSegmentState:</code></p>
<p>返回给定的左右状态组合的分割图像。</p>
</li>
<li><p><code>setDividerImage:forLeftSegmentState:rightSegmentState:</code></p>
<p>设置分割图像。</p>
</li>
<li><p><code>incrementImageForState:</code></p>
<p>返回用于控件的递增字形的图像。(把步进器的加号（“+”）替换为图片)。</p>
</li>
<li><p><code>setIncrementImage:forState:</code></p>
<p>设置用于控件的递增字形的图像。</p>
</li>
</ul>
<h2 id="使用-UIStepper"><a href="#使用-UIStepper" class="headerlink" title="使用 UIStepper"></a>使用 UIStepper</h2><h3 id="示例代码："><a href="#示例代码：" class="headerlink" title="示例代码："></a>示例代码：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    // 标签，用于显示步进值</span><br><span class="line">    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(35, 100, 105, 29)];</span><br><span class="line">    label.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">    label.textColor = [UIColor flatBlueColor];</span><br><span class="line">    label.textAlignment = NSTextAlignmentCenter;</span><br><span class="line">    self.label = label;</span><br><span class="line">    [self.view addSubview:self.label];</span><br><span class="line">    </span><br><span class="line">    // 创建 UIStepper 实例对象</span><br><span class="line">    UIStepper *stepper = [[UIStepper alloc] initWithFrame:CGRectMake(150, 100, 94, 29)];</span><br><span class="line">    // 用户交互时实时更新步进值</span><br><span class="line">    stepper.continuous = YES; // default = YES</span><br><span class="line">    // 用户持续按住，自动增加或减少</span><br><span class="line">    stepper.autorepeat = YES; // default = YES</span><br><span class="line">    // 如果设置为 YES, 值会在 min &lt;-&gt; max 之间循环</span><br><span class="line">    stepper.wraps = NO; // default = NO</span><br><span class="line">    stepper.minimumValue = 0;   // default 0</span><br><span class="line">    stepper.maximumValue = 100; // default 100</span><br><span class="line">    stepper.stepValue    = 1;   // default 1</span><br><span class="line">    // 设置 Target-Action</span><br><span class="line">    [stepper addTarget:self</span><br><span class="line">                action:@selector(stepperValueChanged:)</span><br><span class="line">      forControlEvents:UIControlEventValueChanged];</span><br><span class="line">    // 添加到视图</span><br><span class="line">    [self.view addSubview:stepper];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)stepperValueChanged:(UIStepper *)stepper &#123;</span><br><span class="line">    // 获取步进值</span><br><span class="line">    NSString *value = [NSString stringWithFormat:@&quot;%f&quot;,stepper.value];</span><br><span class="line">    self.label.text = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072908.gif" alt></p>
<h3 id="参考设置大小"><a href="#参考设置大小" class="headerlink" title="参考设置大小"></a>参考设置大小</h3><p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072908.jpg" alt></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://developer.apple.com/reference/uikit/uistepper" target="_blank" rel="noopener">UIStepper API</a></li>
</ul>
<ul>
<li><a href="http://www.woshipm.com/ucd/639614.html" target="_blank" rel="noopener">译文 | iOS 10 人机界面指南 （完结）</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/07/29/UIDatePicker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/07/29/UIDatePicker/" class="post-title-link" itemprop="url">UIDatePicker</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-07-29 16:49:00" itemprop="dateCreated datePublished" datetime="2017-07-29T16:49:00+08:00">2017-07-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/07/29/UIDatePicker/" class="leancloud_visitors" data-flag-title="UIDatePicker">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><strong>UIDatePicker</strong> 对象是用于输入日期和时间值的控件。 你可以使用日期选择器来允许用户输入时间点（日历日期，时间值或两者）或时间间隔（例如定时器）。 日期选择器会向与其相关联的目标对象（target）报告 用户交互行为。</p>
<h2 id="Attributes-属性"><a href="#Attributes-属性" class="headerlink" title="Attributes 属性"></a>Attributes 属性</h2><h3 id="核心属性"><a href="#核心属性" class="headerlink" title="核心属性"></a>核心属性</h3><table>
<thead>
<tr>
<th style="text-align:left">属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Mode</strong></td>
<td>日期选择器模式。 确定日期选择器是否应显示时间，日期，时间和日期或倒计时间隔。 在运行时使用 <code>datePickerMode</code> 属性访问该值。</td>
</tr>
<tr>
<td style="text-align:left"><strong>Locale</strong></td>
<td>与日期选择器关联的区域设置。 该属性允许你设置指定区域来覆盖系统默认值。 您可以使用<code>locale</code> 属性以编程方式访问该属性。</td>
</tr>
<tr>
<td style="text-align:left"><strong>Interval</strong></td>
<td>分钟旋转器的间隔，如果在当前模式下显示。 默认值为1，最大值为30.您选择的值必须是除数为60（1,2,3,4,5,6,10,12,15,20,30）的除数。 在运行时使用 <code>minuteInterval</code> 属性访问该值。</td>
</tr>
</tbody>
</table>
<h3 id="时间属性"><a href="#时间属性" class="headerlink" title="时间属性"></a>时间属性</h3><table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>Date</strong></td>
<td>日期选择器将显示的初始日期。 默认为当前日期，但您可以设置自定义值。 此属性等效于以编程方式设置 <code>date</code> 属性。</td>
</tr>
<tr>
<td style="text-align:center"><strong>Constraints</strong></td>
<td>日期选择器显示的可选日期的范围。 要使用动态范围，以编程方式配置 <code>minimumDate</code> 和<code>maximumDate</code> 属性。 当 <strong>Mode</strong> 属性设置为倒计时器时，日期选择器将忽略这些选项。</td>
</tr>
<tr>
<td style="text-align:center"><strong>Timer</strong></td>
<td>日期选择器在倒计时模式下使用的初始值。 该值以秒为单位，但以分钟为单位显示。</td>
</tr>
</tbody>
</table>
<h2 id="Symbols"><a href="#Symbols" class="headerlink" title="Symbols"></a>Symbols</h2><h3 id="管理日期和日历"><a href="#管理日期和日历" class="headerlink" title="管理日期和日历"></a>管理日期和日历</h3><ul>
<li><code>calendar</code></li>
<li><code>date</code></li>
<li><code>locale</code></li>
<li><code>setDate:animated:</code></li>
<li><code>timeZone</code></li>
</ul>
<h3 id="配置日期选择器模式"><a href="#配置日期选择器模式" class="headerlink" title="配置日期选择器模式"></a>配置日期选择器模式</h3><ul>
<li><p><code>datePickerMode</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedef enum UIDatePickerMode : NSInteger &#123;</span><br><span class="line">    UIDatePickerModeTime,</span><br><span class="line">    UIDatePickerModeDate,</span><br><span class="line">    UIDatePickerModeDateAndTime,</span><br><span class="line">    UIDatePickerModeCountDownTimer</span><br><span class="line">&#125; UIDatePickerMode;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="配置时间属性"><a href="#配置时间属性" class="headerlink" title="配置时间属性"></a>配置时间属性</h3><ul>
<li><p><code>maximumDate</code></p>
<p>日期选择器可以显示的最大日期。</p>
</li>
<li><p><code>minimumDate</code></p>
<p>日期选择器可以显示的最小日期。</p>
</li>
<li><p><code>minuteInterval</code></p>
<p>日期选择器应显示分钟的间隔。</p>
</li>
<li><p><code>countDownDuration</code></p>
<p>当 <strong>mode</strong> 属性设置为 <code>UIDatePickerModeCountDownTimer</code> 时，日期选择器显示的值。</p>
</li>
</ul>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><ul>
<li><code>UIDatePickerMode</code></li>
</ul>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="示例一："><a href="#示例一：" class="headerlink" title="示例一："></a>示例一：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    CGRect frame = CGRectMake(27, 100, 320, 216);</span><br><span class="line">    // 创建 UIDatePicker 对象</span><br><span class="line">    UIDatePicker *datePicker = [[UIDatePicker alloc] initWithFrame:frame];</span><br><span class="line">    // 设置背景颜色</span><br><span class="line">    datePicker.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">    // 设置日期选择器模式:日期模式</span><br><span class="line">    datePicker.datePickerMode = UIDatePickerModeDate;</span><br><span class="line">    // 设置可供选择的最小时间：昨天</span><br><span class="line">    NSTimeInterval time = 24 * 60 * 60; // 24H 的时间戳值</span><br><span class="line">    datePicker.minimumDate = [[NSDate alloc] initWithTimeIntervalSinceNow:- time];</span><br><span class="line">    // 设置可供选择的最大时间：明天</span><br><span class="line">    datePicker.maximumDate = [[NSDate alloc] initWithTimeIntervalSinceNow:time];</span><br><span class="line">    // 添加 Target-Action</span><br><span class="line">    [datePicker addTarget:self</span><br><span class="line">                   action:@selector(datePickerValueChanged:)</span><br><span class="line">         forControlEvents:UIControlEventValueChanged];</span><br><span class="line">    // 将 UIDatePicker 对象添加到当前视图</span><br><span class="line">    [self.view addSubview:datePicker];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)datePickerValueChanged:(id)sender &#123;</span><br><span class="line">    // 直接打印 Data</span><br><span class="line">//    UIDatePicker *datePicker = (UIDatePicker *)sender;</span><br><span class="line">//    NSDate *date = datePicker.date;</span><br><span class="line">//    NSLog(@&quot;%@&quot;,date); // Sun Jul 30 15:28:17 2017</span><br><span class="line">    </span><br><span class="line">    // 格式化日期后再打印</span><br><span class="line">    UIDatePicker *datePicker = (UIDatePicker *)sender;</span><br><span class="line">    NSDate *date = datePicker.date;</span><br><span class="line">    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];</span><br><span class="line">    [dateFormatter setDateFormat:@&quot;yyyy年MM月dd日&quot;];</span><br><span class="line">    NSString *string = [dateFormatter stringFromDate:date];</span><br><span class="line">    NSLog(@&quot;%@&quot;,string); // 2017年07月29日</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/074023.jpg" alt></p>
<h3 id="示例二：点击-UITextField-弹出-UIDatePicker-日期选择器"><a href="#示例二：点击-UITextField-弹出-UIDatePicker-日期选择器" class="headerlink" title="示例二：点击 UITextField 弹出 UIDatePicker 日期选择器"></a>示例二：点击 UITextField 弹出 UIDatePicker 日期选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line">#import &quot;Chameleon.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ViewController () &lt;UITextFieldDelegate&gt;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong) UITextField *textField;</span><br><span class="line">@property (nonatomic ,strong) UITextField *otherTextField;</span><br><span class="line">@property (nonatomic, strong) UIDatePicker *datePicker;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    [self.view addSubview:self.textField];</span><br><span class="line">    [self.view addSubview:self.otherTextField];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Custom Accessors</span><br><span class="line"></span><br><span class="line">- (UITextField *)textField &#123;</span><br><span class="line">    if (!_textField) &#123;</span><br><span class="line">        _textField = [[UITextField alloc] initWithFrame:CGRectMake(30, 100, 320, 44)];</span><br><span class="line">        _textField.backgroundColor = [UIColor flatLimeColor];</span><br><span class="line">        _textField.returnKeyType = UIReturnKeyDone;</span><br><span class="line">        _textField.tag = 1001;</span><br><span class="line">        _textField.delegate = self;</span><br><span class="line">    &#125;</span><br><span class="line">    return _textField;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UITextField *)otherTextField &#123;</span><br><span class="line">    if (!_otherTextField) &#123;</span><br><span class="line">        _otherTextField = [[UITextField alloc] initWithFrame:CGRectMake(30, 160, 320, 44)];</span><br><span class="line">        _otherTextField.backgroundColor = [UIColor flatBlueColor];</span><br><span class="line">        _otherTextField.returnKeyType = UIReturnKeyDone;</span><br><span class="line">        _otherTextField.tag = 1002;</span><br><span class="line">        _otherTextField.delegate = self;</span><br><span class="line">    &#125;</span><br><span class="line">    return _otherTextField;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIDatePicker *)datePicker &#123;</span><br><span class="line">    if (!_datePicker) &#123;</span><br><span class="line">        // 创建 UIDatePicker 对象</span><br><span class="line">        _datePicker = [[UIDatePicker alloc] init];</span><br><span class="line">        // 设置背景颜色</span><br><span class="line">        _datePicker.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">        // 设置日期选择器模式:日期模式</span><br><span class="line">        _datePicker.datePickerMode = UIDatePickerModeDate;</span><br><span class="line">        // 设置可供选择的最小时间：昨天</span><br><span class="line">        NSTimeInterval time = 24 * 60 * 60; // 24H 的时间戳值</span><br><span class="line">        _datePicker.minimumDate = [[NSDate alloc] initWithTimeIntervalSinceNow:- time];</span><br><span class="line">        // 设置可供选择的最大时间：明天</span><br><span class="line">        _datePicker.maximumDate = [[NSDate alloc] initWithTimeIntervalSinceNow:time];</span><br><span class="line">        // 添加 Target-Action</span><br><span class="line">        [_datePicker addTarget:self</span><br><span class="line">                        action:@selector(datePickerValueChanged:)</span><br><span class="line">              forControlEvents:UIControlEventValueChanged];</span><br><span class="line">    &#125;</span><br><span class="line">    return _datePicker;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - IBActions</span><br><span class="line"></span><br><span class="line">- (void)datePickerValueChanged:(id)sender &#123;</span><br><span class="line">    UIDatePicker *datePicker = (UIDatePicker *)sender;</span><br><span class="line">    NSDate *date = datePicker.date;</span><br><span class="line">    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];</span><br><span class="line">    [dateFormatter setDateFormat:@&quot;yyyy年MM月dd日&quot;];</span><br><span class="line">    NSString *string = [dateFormatter stringFromDate:date];</span><br><span class="line">    // 将日期赋值给 textField</span><br><span class="line">    self.textField.text = string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UITextFieldDelegate</span><br><span class="line"></span><br><span class="line">- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField &#123;</span><br><span class="line">    // 如果需要显示键盘，则隐藏 datePicker</span><br><span class="line">    if (textField.tag != 1001) &#123;</span><br><span class="line">        if (self.datePicker.superview) &#123;</span><br><span class="line">            [self.datePicker removeFromSuperview];</span><br><span class="line">        &#125;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 如果需要弹出日期选择器，则隐藏所有键盘</span><br><span class="line">    [self.view endEditing:YES];</span><br><span class="line">   </span><br><span class="line">    // 以动画的方式显示日期选择器</span><br><span class="line">    self.datePicker.frame = CGRectMake(0, [UIScreen mainScreen].bounds.size.height, [UIScreen mainScreen].bounds.size.width, 216);</span><br><span class="line">    [self.view addSubview:self.datePicker];</span><br><span class="line">    </span><br><span class="line">    [UIView animateWithDuration:0.3f animations:^&#123;</span><br><span class="line">        self.datePicker.frame = CGRectMake(0, [UIScreen mainScreen].bounds.size.height - 216, [UIScreen mainScreen].bounds.size.width, 216);</span><br><span class="line">    &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;];</span><br><span class="line">    return NO;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (BOOL)textFieldShouldReturn:(UITextField *)textField &#123;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>效果：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/074025.jpg" alt></p>
<h3 id="示例2-2"><a href="#示例2-2" class="headerlink" title="示例2-2"></a>示例2-2</h3><p>将<code>textFileDate.inputView</code> 设置成 <strong>UIDatePicker</strong> 可能更好：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1  声明datePicker设置弹出日期键盘的格式</span></span><br><span class="line">datePicker = [[<span class="built_in">UIDatePicker</span> alloc] init];</span><br><span class="line"></span><br><span class="line"><span class="comment">//datePicker.datePickerMode = UIDatePickerModeDateAndTime;</span></span><br><span class="line"><span class="comment">//datePicker.minuteInterval = 30;</span></span><br><span class="line"></span><br><span class="line">[datePicker setDatePickerMode:<span class="built_in">UIDatePickerModeDate</span>];</span><br><span class="line"></span><br><span class="line">[datePicker addTarget:<span class="keyword">self</span></span><br><span class="line">               action:<span class="keyword">@selector</span>(chooseDate:)</span><br><span class="line">     forControlEvents:<span class="built_in">UIControlEventValueChanged</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选择日期</span></span><br><span class="line">-(<span class="keyword">void</span>)chooseDate:(<span class="built_in">UIDatePicker</span> *)sender &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSDate</span> *selectedDate = sender.date;</span><br><span class="line"><span class="built_in">NSDateFormatter</span> *formatter = [[<span class="built_in">NSDateFormatter</span> alloc] init];</span><br><span class="line">formatter.dateFormat = <span class="string">@"yyyy-MM-dd"</span>;</span><br><span class="line"><span class="built_in">NSString</span> *dateString = [formatter stringFromDate:selectedDate];</span><br><span class="line">textFileDate.text = dateString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置输入的界面是时间选择的datepicker</span></span><br><span class="line">textFileDate.inputView = datePicker;</span><br></pre></td></tr></table></figure>
<h3 id="示例三："><a href="#示例三：" class="headerlink" title="示例三："></a>示例三：</h3><p>项目需求需要做一个日期选择器，只显示年月，不需要显示日。</p>
<p>网上找到这篇文章，<a href="http://www.jianshu.com/p/840510e92f71" target="_blank" rel="noopener">iOS-日期选择控件(可单独选年/年月/年月日)</a> ，看源码实现非常麻烦。</p>
<p>看到 stackoverflow 上的提问 <a href="https://stackoverflow.com/questions/3348247/uidatepicker-select-month-and-year" target="_blank" rel="noopener">UIDatePicker select Month and Year</a> </p>
<p>推荐还是自己写一个 <strong>UIPickerView</strong> 实现可能比较方便。</p>
<h2 id="附录1-UIDatePicker源码"><a href="#附录1-UIDatePicker源码" class="headerlink" title="附录1 UIDatePicker源码"></a>附录1 UIDatePicker源码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">//  UIDatePicker.h</span><br><span class="line">//  UIKit</span><br><span class="line">//</span><br><span class="line">//  Copyright (c) 2006-2015 Apple Inc. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &lt;UIKit/UIControl.h&gt;</span><br><span class="line">#import &lt;UIKit/UIKitDefines.h&gt;</span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_BEGIN</span><br><span class="line"></span><br><span class="line">// 日期选择器模式</span><br><span class="line">typedef NS_ENUM(NSInteger, UIDatePickerMode) &#123;</span><br><span class="line">    UIDatePickerModeTime,           // 根据区域设置显示小时，分钟和可选的AM/PM（例如 6 | 53 | PM）</span><br><span class="line">    UIDatePickerModeDate,           // 根据区域设置显示年月日（例如，11 | 15 | 2007）</span><br><span class="line">    UIDatePickerModeDateAndTime,    // 根据区域设置显示日期，小时，分钟和可选的AM/PM（例如 Wed Nov 15 | 6 | 53 | PM）</span><br><span class="line">    UIDatePickerModeCountDownTimer, // 显示小时和分钟（例如 1 | 53）</span><br><span class="line">&#125; __TVOS_PROHIBITED;</span><br><span class="line"></span><br><span class="line">// ****************************📌 UIDatePicker 头文件*****************************</span><br><span class="line">NS_CLASS_AVAILABLE_IOS(2_0) __TVOS_PROHIBITED @interface UIDatePicker : UIControl &lt;NSCoding&gt;</span><br><span class="line"></span><br><span class="line">// 日期选择器模式，默认为 UIDatePickerModeDateAndTime</span><br><span class="line">@property (nonatomic) UIDatePickerMode datePickerMode; </span><br><span class="line"></span><br><span class="line">// 区域，默认为 [NSLocale currentLocale]. 设置为 nil 则返回默认值</span><br><span class="line">@property (nullable, nonatomic, strong) NSLocale   *locale;</span><br><span class="line"></span><br><span class="line">// 日历，默认 [NSCalendar currentCalendar]. 设置为 nil 则返回默认值</span><br><span class="line">@property (null_resettable, nonatomic, copy)   NSCalendar *calendar;</span><br><span class="line"></span><br><span class="line">// 时区，默认为 nil. use current time zone or time zone from calendar</span><br><span class="line">@property (nullable, nonatomic, strong) NSTimeZone *timeZone; </span><br><span class="line"></span><br><span class="line">// 日期，当选择器创建时默认为当前日期。当选择 UIDatePickerModeCountDownTimer 模式时会被忽略，且选择器以 0:00 为起点</span><br><span class="line">@property (nonatomic, strong) NSDate *date;        </span><br><span class="line"></span><br><span class="line">// 指定最小/最大日期范围。 默认值为 nil。 当 min&gt; max 时，这些值将被忽略。 </span><br><span class="line">// 选择 UIDatePickerModeCountDownTimer 模式时忽略该值。</span><br><span class="line">@property (nullable, nonatomic, strong) NSDate *minimumDate; </span><br><span class="line">@property (nullable, nonatomic, strong) NSDate *maximumDate; </span><br><span class="line"></span><br><span class="line">// 倒计时持续时间</span><br><span class="line">// 当日期选择器的 mode 属性设置为 UIDatePickerModeCountDownTimer 时，使用此属性获取并设置当前选定的值。 此属性的类型为 NSTimeInterval，因此以秒为单位，尽管日期选择器仅显示小时和分钟。 如果日期选择器的模式不是 UIDatePickerModeCountDownTimer，则此值为 undefined; 参考date属性。 默认值为0.0，最大值为23:59（86,399秒）。</span><br><span class="line">@property (nonatomic) NSTimeInterval countDownDuration; </span><br><span class="line"></span><br><span class="line">// 显示分钟转盘的时间间隔。 间隔必须均匀分为60.默认值为1. min为1，max为30</span><br><span class="line">@property (nonatomic) NSInteger      minuteInterval;</span><br><span class="line"></span><br><span class="line">// 如果动画为YES，则以动画方式转动时间转盘来显示新的日期</span><br><span class="line">- (void)setDate:(NSDate *)date animated:(BOOL)animated; </span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_END</span><br></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.jianshu.com/p/0dcf2b70d897" target="_blank" rel="noopener">实现点击UITextField弹出UIDatePicker日期选择器</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/07/28/UIPickerView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/07/28/UIPickerView/" class="post-title-link" itemprop="url">UIPickerView</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-07-28 18:34:00" itemprop="dateCreated datePublished" datetime="2017-07-28T18:34:00+08:00">2017-07-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/07/28/UIPickerView/" class="leancloud_visitors" data-flag-title="UIPickerView">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="UIPickerView"><a href="#UIPickerView" class="headerlink" title="UIPickerView"></a>UIPickerView</h1><p><strong>UIPickerView</strong> 是使用旋转轮或类似老虎机来显示一组或多组值的视图。</p>
<p><strong>时钟</strong> 应用中设置时间就是通过 <strong>UIPickerView</strong> 来实现的。</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073903.jpg" alt="系统时钟"></p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073908.jpg" alt="彩云天气-设置语言"></p>
<blockquote>
<p><strong>UIPickerView.h</strong> 的源码见附录。</p>
</blockquote>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h3 id="单列选择器"><a href="#单列选择器" class="headerlink" title="单列选择器"></a>单列选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ViewController () &lt;UIPickerViewDataSource, UIPickerViewDelegate&gt;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong) UIPickerView *pickerView; // 选择器视图</span><br><span class="line">@property (nonatomic, copy) NSArray *dataSourceArray;   // 数据源数组</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // 设置选择器数据源</span><br><span class="line">    self.dataSourceArray = @[@&quot;iMac&quot;,@&quot;iPad&quot;,@&quot;iPhone&quot;,@&quot;iWatch&quot;,@&quot;iPod&quot;];</span><br><span class="line">    // 添加选择器视图</span><br><span class="line">    [self.view addSubview:self.pickerView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Custom Accessors</span><br><span class="line"></span><br><span class="line">- (UIPickerView *)pickerView &#123;</span><br><span class="line">    if (!_pickerView) &#123;</span><br><span class="line">        CGRect frame = CGRectMake(50, 100, 275, 300);</span><br><span class="line">        _pickerView = [[UIPickerView alloc] initWithFrame:frame];</span><br><span class="line">        _pickerView.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">        _pickerView.dataSource = self;</span><br><span class="line">        _pickerView.delegate = self;</span><br><span class="line">    &#125;</span><br><span class="line">    return _pickerView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIPickerViewDataSource</span><br><span class="line"></span><br><span class="line">// 返回需要展示的列（columns）的数目</span><br><span class="line">- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView &#123;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 返回每一列的行（rows）数</span><br><span class="line">- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component &#123;</span><br><span class="line">    return self.dataSourceArray.count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIPickerViewDelegate</span><br><span class="line"></span><br><span class="line">// 返回每一行的标题</span><br><span class="line">- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component &#123;</span><br><span class="line">    return self.dataSourceArray[row];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 某一行被选择时调用</span><br><span class="line">- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component &#123;</span><br><span class="line">    NSString *item = self.dataSourceArray[row];</span><br><span class="line">    NSLog(@&quot;第 %lu 项的 %@ 被选择了！&quot;,row,item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 显示效果</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073914.jpg" alt></p>
<h4 id="初始化选中中间项"><a href="#初始化选中中间项" class="headerlink" title="初始化选中中间项"></a>初始化选中中间项</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 初始化选中中间一项</span><br><span class="line">[self.pickerView selectRow:2 inComponent:0 animated:NO];</span><br></pre></td></tr></table></figure>
<p>这个方法可以让选择器初始化时选中指定项，这样它就会居中显示</p>
<p>效果如下：</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073916.jpg" alt></p>
<h3 id="多列选择器"><a href="#多列选择器" class="headerlink" title="多列选择器"></a>多列选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ViewController () &lt;UIPickerViewDataSource, UIPickerViewDelegate&gt;</span><br><span class="line"></span><br><span class="line">// 选择器视图</span><br><span class="line">@property (nonatomic, strong) UIPickerView *pickerView;</span><br><span class="line">@property (nonatomic, copy) NSArray *column1Array;</span><br><span class="line">@property (nonatomic, copy) NSArray *column2Array;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    // 设置选择器数据源</span><br><span class="line">    self.column1Array = @[@&quot;iMac&quot;,@&quot;iPad&quot;,@&quot;iPhone&quot;,@&quot;iWatch&quot;,@&quot;iPod&quot;];</span><br><span class="line">    self.column2Array = @[@&quot;MacBook&quot;,@&quot;MacBook Air&quot;,@&quot;MacBook Pro&quot;,@&quot;iMac&quot;,@&quot;iMac Pro&quot;,@&quot;Mac Pro&quot;,@&quot;Mac mini&quot;];</span><br><span class="line">    </span><br><span class="line">    // 添加选择器视图</span><br><span class="line">    [self.view addSubview:self.pickerView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Custom Accessors</span><br><span class="line"></span><br><span class="line">- (UIPickerView *)pickerView &#123;</span><br><span class="line">    if (!_pickerView) &#123;</span><br><span class="line">        CGRect frame = CGRectMake(50, 100, 275, 300);</span><br><span class="line">        _pickerView = [[UIPickerView alloc] initWithFrame:frame];</span><br><span class="line">        _pickerView.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">        _pickerView.dataSource = self;</span><br><span class="line">        _pickerView.delegate = self;</span><br><span class="line">    &#125;</span><br><span class="line">    return _pickerView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIPickerViewDataSource</span><br><span class="line"></span><br><span class="line">// 返回需要展示的列（columns）的数目</span><br><span class="line">- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView &#123;</span><br><span class="line">    // 设置返回两列</span><br><span class="line">    return 2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 返回每一列的行（rows）数</span><br><span class="line">- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component &#123;</span><br><span class="line">    switch (component) &#123;</span><br><span class="line">        case 0:</span><br><span class="line">            // 第一列返回的行数</span><br><span class="line">            return self.column1Array.count;</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            // 第二列返回的行数</span><br><span class="line">            return self.column2Array.count;</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            return 0;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIPickerViewDelegate</span><br><span class="line"></span><br><span class="line">// 设置组件的宽度</span><br><span class="line">- (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component &#123;</span><br><span class="line">    if (component == 0) &#123;</span><br><span class="line">        return 90;</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        return 210;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 设置每行的高度</span><br><span class="line">//- (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component &#123;</span><br><span class="line">//    </span><br><span class="line">//&#125;</span><br><span class="line"></span><br><span class="line">// 返回每一行的标题</span><br><span class="line">- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component &#123;</span><br><span class="line">    switch (component) &#123;</span><br><span class="line">        case 0:</span><br><span class="line">            // 第一列的标题</span><br><span class="line">            return self.column1Array[row];</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            // 第二列的标题</span><br><span class="line">            return self.column2Array[row];</span><br><span class="line">        default:</span><br><span class="line">            return nil;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 某一行被选择时调用</span><br><span class="line">- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component &#123;</span><br><span class="line">    NSString *column1;</span><br><span class="line">    NSString *column2;</span><br><span class="line">    // 只会进入一个 case 分支, 不会两个分支同时执行</span><br><span class="line">    switch (component) &#123;</span><br><span class="line">        case 0: &#123;</span><br><span class="line">            column1 = self.column1Array[row];</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">        case 1: &#123;</span><br><span class="line">            column2 = self.column2Array[row];</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">        default:</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">    NSLog(@&quot;%@ - %@&quot;,column1,column2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>显示效果</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073921.jpg" alt></p>
<h3 id="相互依赖的多列选择器"><a href="#相互依赖的多列选择器" class="headerlink" title="相互依赖的多列选择器"></a>相互依赖的多列选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ViewController () &lt;UIPickerViewDataSource, UIPickerViewDelegate&gt;</span><br><span class="line"></span><br><span class="line">// 选择器视图</span><br><span class="line">@property (nonatomic, strong) UIPickerView *pickerView;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, copy) NSArray *column0Array; // 第一列</span><br><span class="line">@property (nonatomic, copy) NSArray *column01Array; //与第一列相关联的第二列</span><br><span class="line"></span><br><span class="line">@property (nonatomic, copy) NSArray *column1Array;</span><br><span class="line">@property (nonatomic, copy) NSArray *column2Array;</span><br><span class="line">@property (nonatomic, copy) NSArray *column3Array;</span><br><span class="line">@property (nonatomic, copy) NSArray *column4Array;</span><br><span class="line">@property (nonatomic, copy) NSArray *column5Array;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">#pragma mark - Lifecycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    // 设置选择器数据源</span><br><span class="line">    self.column0Array = @[@&quot;Mac&quot;,@&quot;iPad&quot;,@&quot;iPhone&quot;,@&quot;Watch&quot;,@&quot;TV&quot;];</span><br><span class="line">    </span><br><span class="line">    self.column1Array = @[@&quot;MacBook&quot;,@&quot;MacBook Air&quot;,@&quot;MacBook Pro&quot;,@&quot;iMac&quot;,@&quot;iMac Pro&quot;,@&quot;Mac Pro&quot;,@&quot;Mac mini&quot;];</span><br><span class="line">    self.column2Array = @[@&quot;iPad Pro&quot;,@&quot;iPad&quot;,@&quot;iPad mini 4&quot;];</span><br><span class="line">    self.column3Array = @[@&quot;iPhone 7&quot;,@&quot;iPhone 6s&quot;,@&quot;iPhone SE&quot;];</span><br><span class="line">    self.column4Array = @[@&quot;Apple Watch Serries 2&quot;,@&quot;Apple Watch Nike+&quot;,@&quot;Apple Watch Herms&quot;,@&quot;Apple Watch Edition&quot;,@&quot;Apple Watch Serries 1&quot;];</span><br><span class="line">    self.column5Array = @[@&quot;Apple TV&quot;];</span><br><span class="line">    </span><br><span class="line">    // 初始化第二列</span><br><span class="line">    self.column01Array = self.column1Array;</span><br><span class="line">    </span><br><span class="line">    // 添加选择器视图</span><br><span class="line">    [self.view addSubview:self.pickerView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - Custom Accessors</span><br><span class="line"></span><br><span class="line">- (UIPickerView *)pickerView &#123;</span><br><span class="line">    if (!_pickerView) &#123;</span><br><span class="line">        CGRect frame = CGRectMake(50, 100, 300, 300);</span><br><span class="line">        _pickerView = [[UIPickerView alloc] initWithFrame:frame];</span><br><span class="line">        _pickerView.backgroundColor = [UIColor flatWhiteColor];</span><br><span class="line">        _pickerView.dataSource = self;</span><br><span class="line">        _pickerView.delegate = self;</span><br><span class="line">    &#125;</span><br><span class="line">    return _pickerView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIPickerViewDataSource</span><br><span class="line"></span><br><span class="line">// 返回需要展示的列（columns）的数目</span><br><span class="line">- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView &#123;</span><br><span class="line">    // 设置返回两列</span><br><span class="line">    return 2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 返回每一列的行（rows）数</span><br><span class="line">- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component &#123;</span><br><span class="line">    switch (component) &#123;</span><br><span class="line">        case 0:</span><br><span class="line">            // 第一列返回的行数</span><br><span class="line">            return self.column0Array.count;</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            // 第二列返回的行数</span><br><span class="line">            return self.column01Array.count;</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            return 0;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - UIPickerViewDelegate</span><br><span class="line"></span><br><span class="line">// 设置组件的宽度</span><br><span class="line">- (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component &#123;</span><br><span class="line">    if (component == 0) &#123;</span><br><span class="line">        return 90;</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        return 210;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 返回每一行的标题</span><br><span class="line">- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component &#123;</span><br><span class="line">    switch (component) &#123;</span><br><span class="line">        case 0:</span><br><span class="line">            // 第一列的标题</span><br><span class="line">            return self.column0Array[row];</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            // 第二列的标题</span><br><span class="line">            return self.column01Array[row];</span><br><span class="line">        default:</span><br><span class="line">            return nil;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 某一行被选择时调用</span><br><span class="line">- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component &#123;</span><br><span class="line">    if (component == 0) &#123;</span><br><span class="line">        // 根据选择的左边列，修改右边列数组</span><br><span class="line">        if (row == 0) &#123;</span><br><span class="line">            self.column01Array = self.column1Array;</span><br><span class="line">        &#125;else if (row == 1) &#123;</span><br><span class="line">            self.column01Array = self.column2Array;</span><br><span class="line">        &#125;else if (row == 2) &#123;</span><br><span class="line">            self.column01Array = self.column3Array;</span><br><span class="line">        &#125;else if (row == 3) &#123;</span><br><span class="line">            self.column01Array = self.column4Array;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            self.column01Array = self.column5Array;</span><br><span class="line">        &#125;</span><br><span class="line">        // 刷新右边列数据</span><br><span class="line">        [pickerView reloadComponent:1];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>显示效果</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073933.gif" alt></p>
<h3 id="自定义视图"><a href="#自定义视图" class="headerlink" title="自定义视图"></a>自定义视图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 返回自定义视图</span><br><span class="line">- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(nullable UIView *)view &#123;</span><br><span class="line"></span><br><span class="line">    if (view == nil) &#123;</span><br><span class="line">        view = [[UIView alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">    view.backgroundColor = [UIColor randomFlatColor];</span><br><span class="line">    return view;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该方法可以返回任意 <strong>UIView</strong> 或其子类对象，比如 <strong>UILabel</strong>。</p>
<p>显示效果</p>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/073944.jpg" alt></p>
<h2 id="附录1、UIPickerView-源码"><a href="#附录1、UIPickerView-源码" class="headerlink" title="附录1、UIPickerView 源码"></a>附录1、UIPickerView 源码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">//  UIPickerView.h</span><br><span class="line">//  UIKit</span><br><span class="line">//</span><br><span class="line">//  Copyright (c) 2006-2015 Apple Inc. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &lt;CoreGraphics/CoreGraphics.h&gt;</span><br><span class="line">#import &lt;UIKit/UIView.h&gt;</span><br><span class="line">#import &lt;UIKit/UIKitDefines.h&gt;</span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_BEGIN</span><br><span class="line"></span><br><span class="line">@protocol UIPickerViewDataSource, UIPickerViewDelegate;</span><br><span class="line"></span><br><span class="line">// **********************📌 UIPickerView 头文件******************************</span><br><span class="line"></span><br><span class="line">NS_CLASS_AVAILABLE_IOS(2_0) __TVOS_PROHIBITED @interface UIPickerView : UIView &lt;NSCoding&gt;</span><br><span class="line"></span><br><span class="line">@property(nullable,nonatomic,weak) id&lt;UIPickerViewDataSource&gt; dataSource;                // 数据源协议，默认为 nil. 弱引用</span><br><span class="line">@property(nullable,nonatomic,weak) id&lt;UIPickerViewDelegate&gt;   delegate;                  // 委托协议，默认为 nil. 弱引用</span><br><span class="line"></span><br><span class="line">/** </span><br><span class="line"> * 该属性控制是否显示UIPickerView中的选中标记（以高亮背景作为选中标记）</span><br><span class="line"> * </span><br><span class="line"> * 在iOS 7及更高版本上，你无法自定义 UIPickerView 选择指示器。 </span><br><span class="line"> * 选择指示器将始终显示，因此将此属性设置为NO无效。</span><br><span class="line"> **/</span><br><span class="line">@property(nonatomic)        BOOL                       showsSelectionIndicator;   // 默认为  NO</span><br><span class="line"></span><br><span class="line">// 从数据源和委托中获取和缓存的信息</span><br><span class="line">@property(nonatomic,readonly) NSInteger numberOfComponents; // 组件数目</span><br><span class="line">- (NSInteger)numberOfRowsInComponent:(NSInteger)component;  // 指定组件中的 Item 项数目</span><br><span class="line">- (CGSize)rowSizeForComponent:(NSInteger)component;         // 指定组件中 Item 项的尺寸</span><br><span class="line"></span><br><span class="line">// 返回通过实现委托协议 pickerView:viewForRow:forComponent:reusingView: 得到的视图</span><br><span class="line">// 如果 row/组件不可见或者没有实现 pickerView:viewForRow:forComponent:reusingView: 委托协议就返回 nil</span><br><span class="line">- (nullable UIView *)viewForRow:(NSInteger)row forComponent:(NSInteger)component;</span><br><span class="line"></span><br><span class="line">// 重新加载整个视图或单个组件</span><br><span class="line">- (void)reloadAllComponents;</span><br><span class="line">- (void)reloadComponent:(NSInteger)component;</span><br><span class="line"></span><br><span class="line">// 选择项。 在这种情况下，意味着在中间显示适当的行</span><br><span class="line">- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated;  // 将指定的行滚动到中心位置。</span><br><span class="line"></span><br><span class="line">- (NSInteger)selectedRowInComponent:(NSInteger)component;                                   // 返回所选行。 如果没有选择就返回-1</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// **********************📌 UIPickerView 数据源协议******************************</span><br><span class="line">__TVOS_PROHIBITED</span><br><span class="line">@protocol UIPickerViewDataSource&lt;NSObject&gt;</span><br><span class="line">@required // 必须实现</span><br><span class="line"></span><br><span class="line">// 返回显示的“列”数。</span><br><span class="line">- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;</span><br><span class="line"></span><br><span class="line">// 返回每个组件中的行数</span><br><span class="line">- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// **********************📌 UIPickerView 委托协议******************************</span><br><span class="line">__TVOS_PROHIBITED</span><br><span class="line">@protocol UIPickerViewDelegate&lt;NSObject&gt;</span><br><span class="line">@optional</span><br><span class="line"></span><br><span class="line">// 返回每个组件的列的宽度和行的高度。</span><br><span class="line">- (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component __TVOS_PROHIBITED;</span><br><span class="line"></span><br><span class="line">// 关于高度值</span><br><span class="line">- (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component __TVOS_PROHIBITED;</span><br><span class="line"></span><br><span class="line">// 这些方法返回一个简单的 NSString 字符串，NSAttributedString 字符串或一个视图（如UILabel）来显示组件的行。 </span><br><span class="line">// 对于视图版本，我们缓存任何隐藏的，未被使用的视图，并将它们传回以供重用。</span><br><span class="line">// 如果您返回一个不同的对象，旧的将被释放。 视图将以行的 rect 为中心</span><br><span class="line">// The methods in this group are marked @optional. However, to use a picker view, you must implement either the pickerView:titleForRow:forComponent: or the pickerView:viewForRow:forComponent:reusingView: method to provide the content of component rows. 下面两个协议两个必须实现其中一个以显示组件内容</span><br><span class="line">- (nullable NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component __TVOS_PROHIBITED;</span><br><span class="line">- (nullable NSAttributedString *)pickerView:(UIPickerView *)pickerView attributedTitleForRow:(NSInteger)row forComponent:(NSInteger)component NS_AVAILABLE_IOS(6_0) __TVOS_PROHIBITED; // 如果两种方法都实现，attributed title 优先被选择</span><br><span class="line">- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(nullable UIView *)view __TVOS_PROHIBITED;</span><br><span class="line"></span><br><span class="line">// 当用户选择组件中的某一行时，将会被调用。</span><br><span class="line">- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component __TVOS_PROHIBITED;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_END</span><br></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.jianshu.com/p/8bc79a704267" target="_blank" rel="noopener">UIKit－UIPickerView详解</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/07/24/简书里加入图片后，怎么调整图片大小/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/07/24/简书里加入图片后，怎么调整图片大小/" class="post-title-link" itemprop="url">简书里加入图片后，怎么调整图片大小</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-07-24 17:42:00" itemprop="dateCreated datePublished" datetime="2017-07-24T17:42:00+08:00">2017-07-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2017/07/24/简书里加入图片后，怎么调整图片大小/" class="leancloud_visitors" data-flag-title="简书里加入图片后，怎么调整图片大小">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="提前总结"><a href="#提前总结" class="headerlink" title="提前总结"></a>提前总结</h3><p>在点击 <strong>发布文章</strong> 之前，无论使用哪种方法修改图片尺寸，都是无效的。<br>只有 <strong>发布文章</strong> 之后，当图片地址的源码被转换成以下这种带后缀的图片：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![IMG_039](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072523.jpg)</span><br></pre></td></tr></table></figure></p>
<p>这时候，根据需要再手动修改末尾的宽度参数以调整显示尺寸才是有效的。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://www.zhihu.com/question/44787147" target="_blank" rel="noopener">知乎：简书里加入图片后，怎么调整图片大小?</a></li>
</ul>
<p>平时也经常碰到这样的问题，一般我都是打开系统默认的照片浏览器（<strong>预览</strong> ），手动调整大小。  </p>
<p>知乎上有两个方法：</p>
<ul>
<li><p>HTML 格式<br> <img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072524.jpg" alt></p>
</li>
<li><p>Markdown 格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](图片地址?imageMogr2/auto-orient/strip%7CimageView2/2/w/500) // 修改500这个数值</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="实测"><a href="#实测" class="headerlink" title="实测"></a>实测</h3><p>现在有一张尺寸为 1242*2208 的图片：</p>
<p>默认 Markdown 语法显示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// ![](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072528.jpg)</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072528.jpg" alt></p>
<h3 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a>Typora</h3><p>平时我使用得最多的 markdown 编辑器就是 <strong>Typora</strong>，看看这两个方法能不能在 <strong>Typora</strong> 上实现：</p>
<h4 id="HTML-方法"><a href="#HTML-方法" class="headerlink" title="HTML 方法"></a>HTML 方法</h4><p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072529-1.jpg" alt="IMG_039"></p>
<blockquote>
<p>HTML方法在 <strong>Typora</strong> 上奏效</p>
</blockquote>
<h4 id="Markdown方法"><a href="#Markdown方法" class="headerlink" title="Markdown方法"></a>Markdown方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 加上 ?imageMogr2/auto-orient/strip%7CimageView2/2/w/375 后缀</span><br><span class="line">// ![](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072530.jpg)</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072530.jpg" alt></p>
<blockquote>
<p>Markdown方法在 <strong>Typora</strong> 上无效</p>
</blockquote>
<h3 id="在简书上显示图片"><a href="#在简书上显示图片" class="headerlink" title="在简书上显示图片"></a>在简书上显示图片</h3><p>把带有图片的文章发布到简书上时，无论你使用的是 HTML 格式，还是 Markdown 格式，系统会自动把站外的图片转移到简书的服务器上，然后会把所有的图片语法统一设置成带后缀标识<code>?imageMogr2/auto-orient/strip%7CimageView2/2/w/xxx</code>格式，像这样：<br>原始地址：<br><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072532-1.jpg" alt><br>以上三种地址上传到简书后，都会被自动转换成如下的地址：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![IMG_039](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072523.jpg)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>连代码块里面加了 // 注释的图片格式都被自动转换了，简直了。</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/07/24/MJRefresh——下拉刷新控件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/07/24/MJRefresh——下拉刷新控件/" class="post-title-link" itemprop="url">MJRefresh——下拉刷新控件</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-07-24 15:20:00" itemprop="dateCreated datePublished" datetime="2017-07-24T15:20:00+08:00">2017-07-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-开源框架/" itemprop="url" rel="index"><span itemprop="name">iOS 开源框架</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/07/24/MJRefresh——下拉刷新控件/" class="leancloud_visitors" data-flag-title="MJRefresh——下拉刷新控件">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>GitHub地址：<a href="https://github.com/CoderMJLee/MJRefresh" target="_blank" rel="noopener">CoderMJLee/<strong>MJRefresh</strong></a></li>
<li>star: 10000+ 🙀</li>
</ul>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072337.png" alt="(logo)"></p>
<h2 id="MJRefresh"><a href="#MJRefresh" class="headerlink" title="MJRefresh"></a>MJRefresh</h2><ul>
<li>An easy way to use pull-to-refresh——实现下拉刷新控件</li>
</ul>
<h2 id="Support-what-kinds-of-controls-to-refresh"><a href="#Support-what-kinds-of-controls-to-refresh" class="headerlink" title="Support what kinds of controls to refresh"></a>Support what kinds of controls to refresh</h2><ul>
<li><code>UIScrollView</code>、<code>UITableView</code>、<code>UICollectionView</code>、<code>UIWebView</code></li>
</ul>
<h2 id="How-to-use-MJRefresh"><a href="#How-to-use-MJRefresh" class="headerlink" title="How to use MJRefresh"></a>How to use MJRefresh</h2><ul>
<li>Installation with CocoaPods：<code>pod &#39;MJRefresh&#39;</code></li>
<li>Manual import：<ul>
<li>Drag All files in the <code>MJRefresh</code> folder to project</li>
<li>Import the main file：<code>#import &quot;MJRefresh.h&quot;</code></li>
</ul>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Base                        Custom</span><br><span class="line">MJRefresh.bundle            MJRefresh.h</span><br><span class="line">MJRefreshConst.h            MJRefreshConst.m</span><br><span class="line"><span class="built_in">UIScrollView</span>+MJExtension.h  <span class="built_in">UIScrollView</span>+MJExtension.m</span><br><span class="line"><span class="built_in">UIScrollView</span>+MJRefresh.h    <span class="built_in">UIScrollView</span>+MJRefresh.m</span><br><span class="line"><span class="built_in">UIView</span>+MJExtension.h        <span class="built_in">UIView</span>+MJExtension.m</span><br></pre></td></tr></table></figure>
<h2 id="More-than-hundreds-of-Apps-are-using-MJRefresh"><a href="#More-than-hundreds-of-Apps-are-using-MJRefresh" class="headerlink" title="More than hundreds of Apps are using MJRefresh"></a>More than hundreds of Apps are using MJRefresh</h2><p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072338.jpg" alt></p>
<ul>
<li>More information of App can focus on：<a href="http://www.cnblogs.com/mjios/p/4409853.html" target="_blank" rel="noopener">M了个J-博客园</a></li>
</ul>
<h2 id="The-Class-Structure-Chart-of-MJRefresh"><a href="#The-Class-Structure-Chart-of-MJRefresh" class="headerlink" title="The Class Structure Chart of MJRefresh"></a>The Class Structure Chart of MJRefresh</h2><p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072341.jpg" alt></p>
<ul>
<li><p><code>The class of red text</code> in the chart：You can use them directly</p>
<ul>
<li>The drop-down refresh control types ——下拉刷新类型<ul>
<li>Normal：<code>MJRefreshNormalHeader</code></li>
<li>Gif：<code>MJRefreshGifHeader</code></li>
</ul>
</li>
<li>The pull to refresh control types ——上拉刷新类型<ul>
<li>Auto refresh<ul>
<li>Normal：<code>MJRefreshAutoNormalFooter</code></li>
<li>Gif：<code>MJRefreshAutoGifFooter</code></li>
</ul>
</li>
<li>Auto Back<ul>
<li>Normal：<code>MJRefreshBackNormalFooter</code></li>
<li>Gif：<code>MJRefreshBackGifFooter</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>The class of non-red text</code> in the chart：For inheritance，to use DIY the control of refresh</p>
</li>
<li><p>About how to DIY the control of refresh，You can refer the Class in below Chart</p>
<p>  <img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072342.jpg" alt></p>
</li>
</ul>
<h2 id="MJRefreshComponent-h"><a href="#MJRefreshComponent-h" class="headerlink" title="MJRefreshComponent.h"></a>MJRefreshComponent.h</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** The Base Class of refresh control */</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MJRefreshComponent</span> : <span class="title">UIView</span></span></span><br><span class="line"><span class="meta">#pragma mark -  Control the state of Refresh </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** BeginRefreshing */</span></span><br><span class="line">- (<span class="keyword">void</span>)beginRefreshing;</span><br><span class="line"><span class="comment">/** EndRefreshing */</span></span><br><span class="line">- (<span class="keyword">void</span>)endRefreshing; </span><br><span class="line"><span class="comment">/** IsRefreshing */</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)isRefreshing;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - Other</span></span><br><span class="line"><span class="comment">/** According to the drag ratio to change alpha automatically */</span></span><br><span class="line"><span class="comment">// 根据拖动比例自动更改alpha</span></span><br><span class="line"><span class="comment">// 设置自动切换透明度(在导航栏下面自动隐藏)</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>, <span class="keyword">nonatomic</span>, <span class="keyword">getter</span>=isAutomaticallyChangeAlpha) <span class="built_in">BOOL</span> automaticallyChangeAlpha;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="MJRefreshHeader-h"><a href="#MJRefreshHeader-h" class="headerlink" title="MJRefreshHeader.h"></a>MJRefreshHeader.h</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MJRefreshHeader</span> : <span class="title">MJRefreshComponent</span></span></span><br><span class="line"><span class="comment">/** Creat header */</span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)headerWithRefreshingBlock:(MJRefreshComponentRefreshingBlock)refreshingBlock;</span><br><span class="line"><span class="comment">/** Creat header */</span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)headerWithRefreshingTarget:(<span class="keyword">id</span>)target refreshingAction:(SEL)action;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** This key is used to storage the time that the last time of drown-down successfully */</span></span><br><span class="line"><span class="comment">/** 该关键字用于存储上次成功下拉刷新的时间*/</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *lastUpdatedTimeKey;</span><br><span class="line"><span class="comment">/** The last time of drown-down successfully */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSDate</span> *lastUpdatedTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Ignored scrollView contentInset top */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>, <span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> ignoredScrollViewContentInsetTop;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="MJRefreshFooter-h"><a href="#MJRefreshFooter-h" class="headerlink" title="MJRefreshFooter.h"></a>MJRefreshFooter.h</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MJRefreshFooter</span> : <span class="title">MJRefreshComponent</span></span></span><br><span class="line"><span class="comment">/** Creat footer */</span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)footerWithRefreshingBlock:(MJRefreshComponentRefreshingBlock)refreshingBlock;</span><br><span class="line"><span class="comment">/** Creat footer */</span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)footerWithRefreshingTarget:(<span class="keyword">id</span>)target refreshingAction:(SEL)action;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** NoticeNoMoreData */</span></span><br><span class="line">- (<span class="keyword">void</span>)noticeNoMoreData;</span><br><span class="line"><span class="comment">/** ResetNoMoreData（Clear the status of NoMoreData ） */</span></span><br><span class="line">- (<span class="keyword">void</span>)resetNoMoreData;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Ignored scrollView contentInset bottom */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>, <span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> ignoredScrollViewContentInsetBottom;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Automaticlly show or hidden by the count of data（Show-have data，Hidden- no data） */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>, <span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> automaticallyHidden;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="MJRefreshAutoFooter-h"><a href="#MJRefreshAutoFooter-h" class="headerlink" title="MJRefreshAutoFooter.h"></a>MJRefreshAutoFooter.h</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MJRefreshAutoFooter</span> : <span class="title">MJRefreshFooter</span></span></span><br><span class="line"><span class="comment">/** Is Automatically Refresh(Default is Yes) */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>, <span class="keyword">nonatomic</span>, <span class="keyword">getter</span>=isAutomaticallyRefresh) <span class="built_in">BOOL</span> automaticallyRefresh;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** When there is much at the bottom of the control is automatically refresh(Default is 1.0，Is at the bottom of the control appears in full, will refresh automatically) */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>, <span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> triggerAutomaticallyRefreshPercent;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* Due to there are more functions of this framework，Don't write specific text describe its usage</span><br><span class="line">* You can directly reference examples MJTableViewController、MJCollectionViewController、MJWebViewController，More intuitive and fast.</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072347.jpg" alt></p>
<h2 id="The-drop-down-refresh-01-Default"><a href="#The-drop-down-refresh-01-Default" class="headerlink" title="The drop-down refresh 01-Default"></a>The drop-down refresh 01-Default</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.tableView.header = [MJRefreshNormalHeader headerWithRefreshingBlock:^&#123;</span><br><span class="line">   <span class="comment">// 设置回调（一旦进入刷新状态就会调用这个refreshingBlock）</span></span><br><span class="line">&#125;];</span><br><span class="line">或</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.tableView.header = [MJRefreshNormalHeader headerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadNewData)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 马上进入刷新状态</span></span><br><span class="line">[<span class="keyword">self</span>.tableView.mj_header beginRefreshing];</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="comment">// 获取到数据后刷新列表</span></span><br><span class="line">[<span class="keyword">self</span>.tableView reloadData];</span><br><span class="line"><span class="comment">// 拿到当前的下拉刷新控件，结束刷新状态</span></span><br><span class="line">[<span class="keyword">self</span>.tableView.mj_header endRefreshing];</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072348.gif" alt="(下拉刷新01-普通)"></p>
<h2 id="The-drop-down-refresh-02-Animation-image"><a href="#The-drop-down-refresh-02-Animation-image" class="headerlink" title="The drop-down refresh 02-Animation image"></a>The drop-down refresh 02-Animation image</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置回调（一旦进入刷新状态，就调用target的action，也就是调用self的loadNewData方法）</span></span><br><span class="line">MJRefreshGifHeader *header = [MJRefreshGifHeader headerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadNewData)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置普通状态的动画图片</span></span><br><span class="line"><span class="built_in">NSMutableArray</span> *idleImages = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSUInteger</span> i = <span class="number">1</span>; i&lt;=<span class="number">60</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">UIImage</span> *image = [<span class="built_in">UIImage</span> imageNamed:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"dropdown_anim__000%zd"</span>, i]];</span><br><span class="line">    [idleImages addObject:image];</span><br><span class="line">&#125;</span><br><span class="line"> [header setImages:idleImages forState:MJRefreshStateIdle];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置即将刷新状态的动画图片（一松开就会刷新的状态）</span></span><br><span class="line"><span class="built_in">NSMutableArray</span> *refreshingImages = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSUInteger</span> i = <span class="number">1</span>; i&lt;=<span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">UIImage</span> *image = [<span class="built_in">UIImage</span> imageNamed:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"dropdown_loading_0%zd"</span>, i]];</span><br><span class="line">    [refreshingImages addObject:image];</span><br><span class="line">&#125;</span><br><span class="line">[header setImages:refreshingImages forState:MJRefreshStatePulling];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置正在刷新状态的动画图片</span></span><br><span class="line">[header setImages:refreshingImages forState:MJRefreshStateRefreshing];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置header</span></span><br><span class="line"><span class="keyword">self</span>.tableView.mj_header = header;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072349.gif" alt="(下拉刷新02-动画图片)"></p>
<h2 id="The-drop-down-refresh-03-Hide-the-time"><a href="#The-drop-down-refresh-03-Hide-the-time" class="headerlink" title="The drop-down refresh 03-Hide the time"></a>The drop-down refresh 03-Hide the time</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 隐藏时间</span></span><br><span class="line">header.lastUpdatedTimeLabel.hidden = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072350.gif" alt="(下拉刷新03-隐藏时间)"></p>
<h2 id="The-drop-down-refresh-04-Hide-status-and-time"><a href="#The-drop-down-refresh-04-Hide-status-and-time" class="headerlink" title="The drop-down refresh 04-Hide status and time"></a>The drop-down refresh 04-Hide status and time</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 隐藏时间</span></span><br><span class="line">header.lastUpdatedTimeLabel.hidden = <span class="literal">YES</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐藏状态</span></span><br><span class="line">header.stateLabel.hidden = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072351.gif" alt="(下拉刷新04-隐藏状态和时间)"></p>
<h2 id="The-drop-down-refresh-05-DIY-title"><a href="#The-drop-down-refresh-05-DIY-title" class="headerlink" title="The drop-down refresh 05-DIY title"></a>The drop-down refresh 05-DIY title</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置回调（一旦进入刷新状态，就调用target的action，也就是调用self的loadNewData方法）</span></span><br><span class="line">MJRefreshNormalHeader *header = [MJRefreshNormalHeader headerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadNewData)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字</span></span><br><span class="line">[header setTitle:<span class="string">@"Pull down to refresh"</span> forState:MJRefreshStateIdle];</span><br><span class="line">[header setTitle:<span class="string">@"Release to refresh"</span> forState:MJRefreshStatePulling];</span><br><span class="line">[header setTitle:<span class="string">@"Loading ..."</span> forState:MJRefreshStateRefreshing];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置字体</span></span><br><span class="line">header.stateLabel.font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">15</span>];</span><br><span class="line">header.lastUpdatedTimeLabel.font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">14</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置颜色</span></span><br><span class="line">header.stateLabel.textColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line">header.lastUpdatedTimeLabel.textColor = [<span class="built_in">UIColor</span> blueColor];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 马上进入刷新状态</span></span><br><span class="line">[header beginRefreshing];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置刷新控件</span></span><br><span class="line"><span class="keyword">self</span>.tableView.mj_header = header;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072352.gif" alt="(下拉刷新05-自定义文字)"></p>
<h2 id="The-drop-down-refresh-06-DIY-the-control-of-refresh"><a href="#The-drop-down-refresh-06-DIY-the-control-of-refresh" class="headerlink" title="The drop-down refresh 06-DIY the control of refresh"></a>The drop-down refresh 06-DIY the control of refresh</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.tableView.mj_header = [MJDIYHeader headerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadNewData)];</span><br><span class="line"><span class="comment">// Implementation reference to MJDIYHeader.h和MJDIYHeader.m</span></span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072355.gif" alt="(下拉刷新06-自定义刷新控件)"></p>
<h2 id="The-pull-to-refresh-01-Default"><a href="#The-pull-to-refresh-01-Default" class="headerlink" title="The pull to refresh 01-Default"></a>The pull to refresh 01-Default</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.tableView.mj_footer = [MJRefreshAutoNormalFooter footerWithRefreshingBlock:^&#123;</span><br><span class="line">    <span class="comment">//Call this Block When enter the refresh status automatically</span></span><br><span class="line">&#125;];</span><br><span class="line">或</span><br><span class="line"><span class="comment">// 设置回调（一旦进入刷新状态，就调用target的action，也就是调用self的loadNewData方法）</span></span><br><span class="line"><span class="keyword">self</span>.tableView.mj_footer = [MJRefreshAutoNormalFooter footerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadMoreData)];</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072356.gif" alt="(上拉刷新01-默认)"></p>
<h2 id="The-pull-to-refresh-02-Animation-image"><a href="#The-pull-to-refresh-02-Animation-image" class="headerlink" title="The pull to refresh 02-Animation image"></a>The pull to refresh 02-Animation image</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置回调（一旦进入刷新状态，就调用target的action，也就是调用self的loadMoreData方法）</span></span><br><span class="line">MJRefreshAutoGifFooter *footer = [MJRefreshAutoGifFooter footerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadMoreData)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置正在刷新状态的动画图片</span></span><br><span class="line"><span class="built_in">NSMutableArray</span> *refreshingImages = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSUInteger</span> i = <span class="number">1</span>; i&lt;=<span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">UIImage</span> *image = [<span class="built_in">UIImage</span> imageNamed:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"dropdown_loading_0%zd"</span>, i]];</span><br><span class="line">    [refreshingImages addObject:image];</span><br><span class="line">&#125;</span><br><span class="line">[footer setImages:refreshingImages forState:MJRefreshStateRefreshing];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置上拉刷新控件</span></span><br><span class="line"><span class="keyword">self</span>.tableView.mj_footer = footer;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072357.gif" alt="(上拉刷新02-动画图片)"></p>
<h2 id="The-pull-to-refresh-03-Hide-the-title-of-refresh-status"><a href="#The-pull-to-refresh-03-Hide-the-title-of-refresh-status" class="headerlink" title="The pull to refresh 03-Hide the title of refresh status"></a>The pull to refresh 03-Hide the title of refresh status</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当上拉刷新控件出现50%时（出现一半），就会自动刷新。这个值默认是1.0（也就是上拉刷新100%出现时，才会自动刷新）</span></span><br><span class="line"><span class="comment">//    footer.triggerAutomaticallyRefreshPercent = 0.5; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐藏刷新状态的文字</span></span><br><span class="line">footer.refreshingTitleHidden = <span class="literal">YES</span>;</span><br><span class="line"><span class="comment">// If does have not above method，then use footer.stateLabel.hidden = YES;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072358.gif" alt="(上拉刷新03-隐藏刷新状态的文字)"></p>
<h2 id="The-pull-to-refresh-04-All-loaded"><a href="#The-pull-to-refresh-04-All-loaded" class="headerlink" title="The pull to refresh 04-All loaded"></a>The pull to refresh 04-All loaded</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="comment">// 刷新表格</span></span><br><span class="line">[tableView reloadData];</span><br><span class="line"><span class="comment">// 拿到当前的上拉刷新控件，文字变为没有更多数据的状态</span></span><br><span class="line">[tableView.mj_footer endRefreshingWithNoMoreData];</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072359.gif" alt="(上拉刷新04-全部加载完毕)"></p>
<h2 id="The-pull-to-refresh-05-DIY-title"><a href="#The-pull-to-refresh-05-DIY-title" class="headerlink" title="The pull to refresh 05-DIY title"></a>The pull to refresh 05-DIY title</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加默认的上拉刷新</span></span><br><span class="line"><span class="comment">// 设置回调（一旦进入刷新状态，就调用target的action，也就是调用self的loadMoreData方法）</span></span><br><span class="line">MJRefreshAutoNormalFooter *footer = [MJRefreshAutoNormalFooter footerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadMoreData)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字</span></span><br><span class="line">[footer setTitle:<span class="string">@"Click or drag up to refresh"</span> forState:MJRefreshStateIdle];</span><br><span class="line">[footer setTitle:<span class="string">@"Loading more ..."</span> forState:MJRefreshStateRefreshing];</span><br><span class="line">[footer setTitle:<span class="string">@"No more data"</span> forState:MJRefreshStateNoMoreData];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置字体</span></span><br><span class="line">footer.stateLabel.font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">17</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置颜色</span></span><br><span class="line">footer.stateLabel.textColor = [<span class="built_in">UIColor</span> blueColor];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置footer</span></span><br><span class="line"><span class="keyword">self</span>.tableView.mj_footer = footer;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072402.gif" alt="(上拉刷新05-自定义文字)"></p>
<h2 id="The-pull-to-refresh-06-Hidden-After-loaded"><a href="#The-pull-to-refresh-06-Hidden-After-loaded" class="headerlink" title="The pull to refresh 06-Hidden After loaded"></a>The pull to refresh 06-Hidden After loaded</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="comment">// 刷新表格</span></span><br><span class="line">[tableView reloadData];</span><br><span class="line"><span class="comment">// 隐藏当前的上拉刷新控件</span></span><br><span class="line">tableView.mj_footer.hidden = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072403.gif" alt="(上拉刷新06-加载后隐藏)"></p>
<h2 id="The-pull-to-refresh-07-Automatic-back-of-the-pull01"><a href="#The-pull-to-refresh-07-Automatic-back-of-the-pull01" class="headerlink" title="The pull to refresh 07-Automatic back of the pull01"></a>The pull to refresh 07-Automatic back of the pull01</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置回调（一旦进入刷新状态，就调用target的action，也就是调用self的loadMoreData方法）</span></span><br><span class="line"><span class="keyword">self</span>.tableView.mj_footer = [MJRefreshBackNormalFooter footerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadMoreData)];</span><br><span class="line"><span class="comment">// 设置了底部inset</span></span><br><span class="line"><span class="keyword">self</span>.tableView.contentInset = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 忽略掉底部inset</span></span><br><span class="line"><span class="keyword">self</span>.tableView.mj_footer.ignoredScrollViewContentInsetBottom = <span class="number">30</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072404.gif" alt="(上拉刷新07-自动回弹的上拉01)"></p>
<h2 id="The-pull-to-refresh-08-Automatic-back-of-the-pull02"><a href="#The-pull-to-refresh-08-Automatic-back-of-the-pull02" class="headerlink" title="The pull to refresh 08-Automatic back of the pull02"></a>The pull to refresh 08-Automatic back of the pull02</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MJRefreshBackGifFooter *footer = [MJRefreshBackGifFooter footerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadMoreData)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set the normal state of the animated image</span></span><br><span class="line">[footer setImages:idleImages forState:MJRefreshStateIdle];</span><br><span class="line"><span class="comment">//  Set the pulling state of animated images（Enter the status of refreshing as soon as loosen）</span></span><br><span class="line">[footer setImages:pullingImages forState:MJRefreshStatePulling];</span><br><span class="line"><span class="comment">// Set the refreshing state of animated images</span></span><br><span class="line">[footer setImages:refreshingImages forState:MJRefreshStateRefreshing];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set footer</span></span><br><span class="line"><span class="keyword">self</span>.tableView.mj_footer = footer;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072405.gif" alt="(上拉刷新07-自动回弹的上拉02)"></p>
<h2 id="The-pull-to-refresh-09-DIY-the-control-of-refresh-Automatic-refresh"><a href="#The-pull-to-refresh-09-DIY-the-control-of-refresh-Automatic-refresh" class="headerlink" title="The pull to refresh 09-DIY the control of refresh(Automatic refresh)"></a>The pull to refresh 09-DIY the control of refresh(Automatic refresh)</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.tableView.mj_footer = [MJDIYAutoFooter footerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadMoreData)];</span><br><span class="line"><span class="comment">// Implementation reference to MJDIYAutoFooter.h和MJDIYAutoFooter.m</span></span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072408.gif" alt="(上拉刷新09-自定义刷新控件(自动刷新))"></p>
<h2 id="The-pull-to-refresh-10-DIY-the-control-of-refresh-Automatic-back"><a href="#The-pull-to-refresh-10-DIY-the-control-of-refresh-Automatic-back" class="headerlink" title="The pull to refresh 10-DIY the control of refresh(Automatic back)"></a>The pull to refresh 10-DIY the control of refresh(Automatic back)</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.tableView.mj_footer = [MJDIYBackFooter footerWithRefreshingTarget:<span class="keyword">self</span> refreshingAction:<span class="keyword">@selector</span>(loadMoreData)];</span><br><span class="line"><span class="comment">// Implementation reference to MJDIYBackFooter.h和MJDIYBackFooter.m</span></span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072409.gif" alt="(上拉刷新10-自定义刷新控件(自动回弹))"></p>
<h2 id="UICollectionView01-The-pull-and-drop-down-refresh"><a href="#UICollectionView01-The-pull-and-drop-down-refresh" class="headerlink" title="UICollectionView01-The pull and drop-down refresh"></a>UICollectionView01-The pull and drop-down refresh</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下拉刷新</span></span><br><span class="line"><span class="keyword">self</span>.collectionView.mj_header = [MJRefreshNormalHeader headerWithRefreshingBlock:^&#123;</span><br><span class="line">   <span class="comment">//Call this Block When enter the refresh status automatically </span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">   [weakSelf.collectionView reloadData];</span><br><span class="line">   <span class="comment">// 结束刷新</span></span><br><span class="line">   [weakSelf.collectionView.mj_header endRefreshing];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 上拉刷新</span></span><br><span class="line"><span class="keyword">self</span>.collectionView.mj_footer = [MJRefreshAutoNormalFooter footerWithRefreshingBlock:^&#123;</span><br><span class="line">   <span class="comment">//Call this Block When enter the refresh status automatically</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line">   [weakSelf.collectionView reloadData];</span><br><span class="line">   <span class="comment">// 结束刷新</span></span><br><span class="line">   [weakSelf.collectionView.mj_footer endRefreshing];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认先隐藏footer</span></span><br><span class="line"><span class="keyword">self</span>.collectionView.mj_footer.hidden = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072411.gif" alt="(UICollectionView01-上下拉刷新)"></p>
<h2 id="UIWebView01-The-drop-down-refresh"><a href="#UIWebView01-The-drop-down-refresh" class="headerlink" title="UIWebView01-The drop-down refresh"></a>UIWebView01-The drop-down refresh</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加下拉刷新控件</span></span><br><span class="line"><span class="keyword">self</span>.webView.scrollView.mj_header = [MJRefreshNormalHeader headerWithRefreshingBlock:^&#123;</span><br><span class="line">   <span class="comment">//Call this Block When enter the refresh status automatically</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/072414.gif" alt="(UICollectionView01-上下拉刷新)"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/07/22/EAIntroView——简单的 iOS 引导视图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/07/22/EAIntroView——简单的 iOS 引导视图/" class="post-title-link" itemprop="url">EAIntroView——简单的 iOS 引导视图</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-07-22 18:37:00" itemprop="dateCreated datePublished" datetime="2017-07-22T18:37:00+08:00">2017-07-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-开源框架/" itemprop="url" rel="index"><span itemprop="name">iOS 开源框架</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/07/22/EAIntroView——简单的 iOS 引导视图/" class="leancloud_visitors" data-flag-title="EAIntroView——简单的 iOS 引导视图">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<ul>
<li>GitHub地址：<a href="https://github.com/ealeksandrov/EAIntroView" target="_blank" rel="noopener">ealeksandrov/<strong>EAIntroView</strong></a></li>
<li>star: 3400+</li>
</ul>
<h1 id="EAIntroView-简单的-iOS-引导视图"><a href="#EAIntroView-简单的-iOS-引导视图" class="headerlink" title="EAIntroView - 简单的 iOS 引导视图"></a>EAIntroView - 简单的 iOS 引导视图</h1><p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071446.png" alt="BackgroundImage"><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071448.png" alt="BackgroundImage"></p>
<p>启动引导页视图的高度可定制的嵌入式解决方案。</p>
<p>一些功能特征（记住，大多数功能是可选的并且可以被关闭）</p>
<ul>
<li>能够查看一些优秀的demo示例项目（WTF！🙄 这也算特征？）<ul>
<li>无限自定义，可以使用动画和交互式页面创建复杂的 interView，因此不要限制于现有的示例。（The only limit is your imagination !）</li>
</ul>
</li>
<li>对于每一个基础页面 ：<strong>EAIntroPage</strong>：<ul>
<li>背景 (在页面之间进行交叉溶解切换)</li>
<li>在背景上自定义 iOS7 运动效果（视差）</li>
<li>标题视图 title view (+ Y position)——可以显示在所有页面上的视图，默认 YES 显示。</li>
<li>标题图片 titleIconView——单独为每一个页面标题设置的视图，支持 UIImageView 或 animated views。</li>
<li>标题文本 title text (+ font, color and Y position)</li>
<li>描述文本 description text (+ font, color, width and Y position)</li>
<li>子视图数组 subviews array (added to page after building default layout)</li>
</ul>
</li>
<li>可以设置自定义页面视图：<ul>
<li><code>+ (instancetype)page</code></li>
<li><code>+ (instancetype)pageWithCustomView:</code></li>
<li><code>+ (instancetype)pageWithCustomViewFromNibNamed:</code></li>
<li><code>+ (instancetype)pageWithCustomViewFromNibNamed:bundle:</code></li>
</ul>
</li>
<li>可以在页面事件中设置 block action 事件：<ul>
<li>onPageDidLoad</li>
<li>onPageDidAppear</li>
<li>onPageDidDisappear</li>
</ul>
</li>
<li>自定义父视图的许多选项：<ul>
<li>从最后一页滑动到关闭</li>
<li>使用简单的tap切换页面</li>
<li>自定义背景图片或者颜色</li>
<li>自定义 page control</li>
<li>自定义 skip button</li>
<li>固定 titleView (+ Y position, can be hidden on some pages)</li>
</ul>
</li>
<li>可监听的委托协议 <code>EAIntroDelegate</code>:<ul>
<li><code>- (void)introWillFinish: wasSkipped:</code></li>
<li><code>- (void)introDidFinish: wasSkipped:</code></li>
<li><code>- (void)intro:pageAppeared:withIndex:</code></li>
<li><code>- (void)intro:pageStartScrolling:withIndex:</code></li>
<li><code>- (void)intro:pageEndScrolling:withIndex:</code></li>
<li><code>(void)intro:didScrollWithOffset:</code></li>
</ul>
</li>
<li>IntroView 动作:<ul>
<li>setPages:</li>
<li>showInView:animateDuration:</li>
<li>hideWithFadeOutDuration:</li>
<li>setCurrentPageIndex:animated:</li>
</ul>
</li>
<li>支持 storyboard/IB</li>
<li>and many more…</li>
</ul>
<h2 id="CocoaPods"><a href="#CocoaPods" class="headerlink" title="CocoaPods"></a>CocoaPods</h2><p><a href="http://cocoapods.org/" target="_blank" rel="noopener">CocoaPods</a> is the recommended way to use EAIntroView in your project.</p>
<ul>
<li>Simply add this line to your <code>Podfile</code>: <code>pod &#39;EAIntroView&#39;, &#39;~&gt; 2.10.0&#39;</code></li>
<li>Run <code>pod install</code>.</li>
<li>Include with <code>#import &quot;EAIntroView.h&quot;</code> to use it wherever you need.</li>
<li>Subscribe to the <code>EAIntroDelegate</code> to enable delegate/callback interaction.</li>
</ul>
<h2 id="Manual-installation"><a href="#Manual-installation" class="headerlink" title="Manual installation"></a>Manual installation</h2><ul>
<li>Add <code>EAIntroPage</code> and <code>EAIntroView</code> headers and implementations to your project (4 files total).</li>
<li>Add <a href="https://github.com/ealeksandrov/EARestrictedScrollView" target="_blank" rel="noopener">EARestrictedScrollView</a> header and implementation to your project (2 files total).</li>
<li>Include with <code>#import &quot;EAIntroView.h&quot;</code> to use it wherever you need.</li>
<li>Subscribe to the <code>EAIntroDelegate</code> to enable delegate/callback interaction.</li>
</ul>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>Sample project have many examples of customization. Here are only simple ones.</p>
<blockquote>
<p>📌 </p>
<p>这个框架只有两个类：</p>
<ul>
<li><strong>EAIntroPage</strong> ：用于设置每个不同的页面。</li>
<li><strong>EAIntroView</strong> ：包含所有页面的容器视图。</li>
</ul>
</blockquote>
<h3 id="Step-1-构建页面"><a href="#Step-1-构建页面" class="headerlink" title="Step 1 - 构建页面"></a>Step 1 - 构建页面</h3><p>使用 <code>[EAIntroPage page]</code> 类方法创建页面。 然后，你可以自定义任何属性，所有属性都是可选的。 另一种方法是通过你自己的（可以是 nib 文件），在 <strong>EAIntroPage</strong> 中定制视图，该方法会忽略大多数其他选项。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// basic</span></span><br><span class="line">EAIntroPage *page1 = [EAIntroPage page];</span><br><span class="line">page1.title = <span class="string">@"Hello world"</span>;</span><br><span class="line">page1.desc = sampleDescription1;</span><br><span class="line"></span><br><span class="line"><span class="comment">// custom</span></span><br><span class="line">EAIntroPage *page2 = [EAIntroPage page];</span><br><span class="line">page2.title = <span class="string">@"This is page 2"</span>;</span><br><span class="line">page2.titleFont = [<span class="built_in">UIFont</span> fontWithName:<span class="string">@"Georgia-BoldItalic"</span> size:<span class="number">20</span>];</span><br><span class="line">page2.titlePositionY = <span class="number">220</span>;</span><br><span class="line">page2.desc = sampleDescription2;</span><br><span class="line">page2.descFont = [<span class="built_in">UIFont</span> fontWithName:<span class="string">@"Georgia-Italic"</span> size:<span class="number">18</span>];</span><br><span class="line">page2.descPositionY = <span class="number">200</span>;</span><br><span class="line">page2.titleIconView = [[<span class="built_in">UIImageView</span> alloc] initWithImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"title2"</span>]];</span><br><span class="line">page2.titleIconPositionY = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// custom view from nib</span></span><br><span class="line">EAIntroPage *page3 = [EAIntroPage pageWithCustomViewFromNibNamed:<span class="string">@"IntroPage"</span>];</span><br><span class="line">page3.bgImage = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"bg2"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="Step-2-创建引导视图"><a href="#Step-2-创建引导视图" class="headerlink" title="Step 2 - 创建引导视图"></a>Step 2 - 创建引导视图</h3><p>Once all pages have been created,  you are ready to create the introduction view. Just pass them in right order in the introduction view. You can also pass array of pages after IntroView’s initialization, it will rebuild its contents.</p>
<p>当所有页面创建完成后，你就可以创建引导视图了。 只需在引导视图中按正确的顺序传递它们。 当 <strong>EAIntroView</strong> 初始化之后，你还可以传递页面数组，它将重建其内容。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EAIntroView *intro = [[EAIntroView alloc] initWithFrame:<span class="keyword">self</span>.view.bounds andPages:@[page1,page2,page3,page4]];</span><br></pre></td></tr></table></figure>
<p>如果你需要使用任何回调，不要忘记设置委托。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[intro setDelegate:<span class="keyword">self</span>];</span><br></pre></td></tr></table></figure>
<h3 id="Step-3-显示引导视图"><a href="#Step-3-显示引导视图" class="headerlink" title="Step 3 - 显示引导视图"></a>Step 3 - 显示引导视图</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// showFullscreen</span></span><br><span class="line">[intro showFullscreenWithAnimateDuration:<span class="number">0.3</span>f];</span><br><span class="line"></span><br><span class="line"><span class="comment">// showInView</span></span><br><span class="line">[intro showInView:<span class="keyword">self</span>.view animateDuration:<span class="number">0.0</span>];</span><br></pre></td></tr></table></figure>
<p>📌 </p>
<p>关于显示引导视图 <code>showInView:(UIView *)view</code></p>
<ol>
<li><p>源码中有方法可以全屏显示在 <strong>UIWindow</strong> 上，具体没测过。</p>
</li>
<li><p>如果 <code>rootViewController</code> 是 <strong>UINavigationController</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// using self.navigationController.view - to display EAIntroView above navigation bar</span><br><span class="line">rootView = self.navigationController.view;</span><br><span class="line"></span><br><span class="line">// ...</span><br><span class="line">[intro showInView:rootView animateDuration:0.0];</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果 <code>rootViewController</code> 是 <strong>UITabBarController</strong>,就显示在该视图控制器的 <code>view</code> 上：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[introView showInView:self.view];</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Storyboard-IB"><a href="#Storyboard-IB" class="headerlink" title="Storyboard/IB"></a>Storyboard/IB</h3><p>Since 1.3.0 <code>EAIntroView</code> supports init from IB. Since 2.0.0 <code>EAIntroPage</code> supports it too.</p>
<ol>
<li>Drop <code>UIView</code> to your IB document.</li>
<li>Set its class to <code>EAIntroView</code>.</li>
<li>Create <code>IBOutlet</code> property in your view controller: <code>@property(nonatomic,weak) IBOutlet EAIntroView *introView;</code>.</li>
<li>Connect <code>IBOutlet</code> with <code>EAIntroView</code> in IB.</li>
<li>Build array of pages (you can use <code>pageWithCustomViewFromNibNamed:</code> here with separate nibs for each page).</li>
<li>Pass pages array to <code>EAIntroView</code> property in <code>setPages:</code>.</li>
</ol>
<h2 id="Author"><a href="#Author" class="headerlink" title="Author"></a>Author</h2><p>Created and maintained by Evgeny Aleksandrov (<a href="https://twitter.com/EAleksandrov" target="_blank" rel="noopener">@EAleksandrov</a>).</p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p><code>EAIntroView</code> is available under the MIT license. See the <a href="https://github.com/ealeksandrov/EAIntroView/blob/master/LICENSE.md" target="_blank" rel="noopener">LICENSE.md</a> file for more info.</p>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><h4 id="示例一：交叉溶解"><a href="#示例一：交叉溶解" class="headerlink" title="示例一：交叉溶解"></a>示例一：交叉溶解</h4><blockquote>
<p>all settings are basic, pages with custom backgrounds, title image on each page</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">- (void)showIntroWithCrossDissolve &#123;</span><br><span class="line">    EAIntroPage *page1 = [EAIntroPage page];</span><br><span class="line">    page1.title = @&quot;Hello world&quot;;</span><br><span class="line">    page1.desc = sampleDescription1;</span><br><span class="line">    page1.bgImage = [UIImage imageNamed:@&quot;bg1&quot;];</span><br><span class="line">    page1.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title1&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page2 = [EAIntroPage page];</span><br><span class="line">    page2.title = @&quot;This is page 2&quot;;</span><br><span class="line">    page2.desc = sampleDescription2;</span><br><span class="line">    page2.bgImage = [UIImage imageNamed:@&quot;bg2&quot;];</span><br><span class="line">    page2.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title2&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page3 = [EAIntroPage page];</span><br><span class="line">    page3.title = @&quot;This is page 3&quot;;</span><br><span class="line">    page3.desc = sampleDescription3;</span><br><span class="line">    page3.bgImage = [UIImage imageNamed:@&quot;bg3&quot;];</span><br><span class="line">    page3.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title3&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page4 = [EAIntroPage page];</span><br><span class="line">    page4.title = @&quot;This is page 4&quot;;</span><br><span class="line">    page4.desc = sampleDescription4;</span><br><span class="line">    page4.bgImage = [UIImage imageNamed:@&quot;bg4&quot;];</span><br><span class="line">    page4.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title4&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroView *intro = [[EAIntroView alloc] initWithFrame:rootView.bounds andPages:@[page1,page2,page3,page4]];</span><br><span class="line">    intro.skipButtonAlignment = EAViewAlignmentCenter;</span><br><span class="line">    intro.skipButtonY = 80.f;</span><br><span class="line">    intro.pageControlY = 42.f;</span><br><span class="line"></span><br><span class="line">    [intro setDelegate:self];</span><br><span class="line">    </span><br><span class="line">    [intro showInView:rootView animateDuration:0.3];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - EAIntroView delegate</span><br><span class="line"></span><br><span class="line">- (void)introDidFinish:(EAIntroView *)introView wasSkipped:(BOOL)wasSkipped &#123;</span><br><span class="line">    if(wasSkipped) &#123;</span><br><span class="line">        NSLog(@&quot;Intro skipped&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        NSLog(@&quot;Intro finished&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071450.gif" alt></p>
<hr>
<h4 id="示例二：固定标题视图"><a href="#示例二：固定标题视图" class="headerlink" title="示例二：固定标题视图"></a>示例二：固定标题视图</h4><blockquote>
<p>all settings are basic, introview with colored background, fixed title image</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">- (void)showIntroWithFixedTitleView &#123;</span><br><span class="line">    EAIntroPage *page1 = [EAIntroPage page];</span><br><span class="line">    page1.title = @&quot;Hello world&quot;;</span><br><span class="line">    page1.desc = sampleDescription1;</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page2 = [EAIntroPage page];</span><br><span class="line">    page2.title = @&quot;This is page 2&quot;;</span><br><span class="line">    page2.desc = sampleDescription2;</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page3 = [EAIntroPage page];</span><br><span class="line">    page3.title = @&quot;This is page 3&quot;;</span><br><span class="line">    page3.desc = sampleDescription3;</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page4 = [EAIntroPage page];</span><br><span class="line">    page4.title = @&quot;This is page 4&quot;;</span><br><span class="line">    page4.desc = sampleDescription4;</span><br><span class="line">    </span><br><span class="line">    EAIntroView *intro = [[EAIntroView alloc] initWithFrame:rootView.bounds andPages:@[page1,page2,page3,page4]];</span><br><span class="line">    [intro setDelegate:self];</span><br><span class="line">    </span><br><span class="line">    // 设置固定标题视图，即无论页面滑动到第几页，标题视图永远固定显示</span><br><span class="line">    UIImageView *titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title1&quot;]];</span><br><span class="line">    intro.titleView = titleView;</span><br><span class="line">    intro.titleViewY = 90;</span><br><span class="line">    intro.backgroundColor = [UIColor colorWithRed:0.f green:0.49f blue:0.96f alpha:1.f]; //iOS7 dark blue</span><br><span class="line">    </span><br><span class="line">    [intro showInView:rootView animateDuration:0.3];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071456.gif" alt></p>
<h4 id="示例三：自定义页面视图"><a href="#示例三：自定义页面视图" class="headerlink" title="示例三：自定义页面视图"></a>示例三：自定义页面视图</h4><blockquote>
<p>basic pages with custom settings</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">// 对每个页面内容元素的位置、字体、大小等属性进行设置</span><br><span class="line">- (void)showIntroWithCustomPages &#123;</span><br><span class="line">    EAIntroPage *page1 = [EAIntroPage page];</span><br><span class="line">    page1.title = @&quot;Hello world&quot;;</span><br><span class="line">    page1.desc = sampleDescription1;</span><br><span class="line">    page1.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title1&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page2 = [EAIntroPage page];</span><br><span class="line">    page2.title = @&quot;This is page 2&quot;;</span><br><span class="line">    page2.titlePositionY = self.view.bounds.size.height/2 - 10;</span><br><span class="line">    page2.desc = sampleDescription2;</span><br><span class="line">    page2.descPositionY = self.view.bounds.size.height/2 - 50;</span><br><span class="line">    page2.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title2&quot;]];</span><br><span class="line">    page2.titleIconPositionY = 70;</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page3 = [EAIntroPage page];</span><br><span class="line">    page3.title = @&quot;This is page 3&quot;;</span><br><span class="line">    page3.titleFont = [UIFont fontWithName:@&quot;Georgia-BoldItalic&quot; size:20];</span><br><span class="line">    page3.titlePositionY = 220;</span><br><span class="line">    page3.desc = sampleDescription2;</span><br><span class="line">    page3.descFont = [UIFont fontWithName:@&quot;Georgia-Italic&quot; size:18];</span><br><span class="line">    page3.descPositionY = 200;</span><br><span class="line">    page3.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title3&quot;]];</span><br><span class="line">    page3.titleIconPositionY = 100;</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page4 = [EAIntroPage page];</span><br><span class="line">    page4.title = @&quot;This is page 4&quot;;</span><br><span class="line">    page4.desc = sampleDescription4;</span><br><span class="line">    page4.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title4&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroView *intro = [[EAIntroView alloc] initWithFrame:rootView.bounds andPages:@[page1,page2,page3,page4]];</span><br><span class="line">    intro.bgImage = [UIImage imageNamed:@&quot;bg2&quot;];</span><br><span class="line">    </span><br><span class="line">    intro.pageControlY = 250.f;</span><br><span class="line">    </span><br><span class="line">    // 自定义 skipButton</span><br><span class="line">    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];</span><br><span class="line">    [btn setFrame:CGRectMake(0, 0, 230, 40)];</span><br><span class="line">    [btn setTitle:@&quot;SKIP NOW&quot; forState:UIControlStateNormal];</span><br><span class="line">    [btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];</span><br><span class="line">    btn.layer.borderWidth = 2.f;</span><br><span class="line">    btn.layer.cornerRadius = 10;</span><br><span class="line">    btn.layer.borderColor = [[UIColor whiteColor] CGColor];</span><br><span class="line">    intro.skipButton = btn;</span><br><span class="line">    intro.skipButtonY = 60.f;</span><br><span class="line">    intro.skipButtonAlignment = EAViewAlignmentCenter;</span><br><span class="line">    </span><br><span class="line">    [intro setDelegate:self];</span><br><span class="line">    [intro showInView:rootView animateDuration:0.3];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071458.gif" alt></p>
<h4 id="示例四：自定义视图"><a href="#示例四：自定义视图" class="headerlink" title="示例四：自定义视图"></a>示例四：自定义视图</h4><blockquote>
<p>using page with custom view</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">- (void)showIntroWithCustomView &#123;</span><br><span class="line">    EAIntroPage *page1 = [EAIntroPage page];</span><br><span class="line">    page1.title = @&quot;Hello world&quot;;</span><br><span class="line">    page1.desc = sampleDescription1;</span><br><span class="line">    page1.bgImage = [UIImage imageNamed:@&quot;bg1&quot;];</span><br><span class="line">    page1.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title1&quot;]];</span><br><span class="line">    </span><br><span class="line">    // 第二页是自定义视图</span><br><span class="line">    UIView *viewForPage2 = [[UIView alloc] initWithFrame:rootView.bounds];</span><br><span class="line">    UILabel *labelForPage2 = [[UILabel alloc] initWithFrame:CGRectMake(0, 300, rootView.bounds.size.width, 30)];</span><br><span class="line">    labelForPage2.text = @&quot;Some custom view&quot;;</span><br><span class="line">    labelForPage2.font = [UIFont systemFontOfSize:32];</span><br><span class="line">    labelForPage2.textColor = [UIColor whiteColor];</span><br><span class="line">    labelForPage2.backgroundColor = [UIColor clearColor];</span><br><span class="line">    labelForPage2.transform = CGAffineTransformMakeRotation(M_PI_2*3);</span><br><span class="line">    [viewForPage2 addSubview:labelForPage2];</span><br><span class="line">    EAIntroPage *page2 = [EAIntroPage pageWithCustomView:viewForPage2];</span><br><span class="line">    page2.bgImage = [UIImage imageNamed:@&quot;bg2&quot;];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page3 = [EAIntroPage page];</span><br><span class="line">    page3.title = @&quot;This is page 3&quot;;</span><br><span class="line">    page3.desc = sampleDescription3;</span><br><span class="line">    page3.bgImage = [UIImage imageNamed:@&quot;bg3&quot;];</span><br><span class="line">    page3.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title3&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page4 = [EAIntroPage page];</span><br><span class="line">    page4.title = @&quot;This is page 4&quot;;</span><br><span class="line">    page4.desc = sampleDescription4;</span><br><span class="line">    page4.bgImage = [UIImage imageNamed:@&quot;bg4&quot;];</span><br><span class="line">    page4.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title4&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroView *intro = [[EAIntroView alloc] initWithFrame:rootView.bounds andPages:@[page1,page2,page3,page4]];</span><br><span class="line">    [intro.skipButton setTitle:@&quot;Skip now&quot; forState:UIControlStateNormal];</span><br><span class="line">    [intro setDelegate:self];</span><br><span class="line">    intro.tapToNext = YES; // 点击翻页</span><br><span class="line">    </span><br><span class="line">    [intro showInView:rootView animateDuration:0.3];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071500.gif" alt></p>
<h4 id="示例五：从-NIB-文件加载自定义视图"><a href="#示例五：从-NIB-文件加载自定义视图" class="headerlink" title="示例五：从 NIB 文件加载自定义视图"></a>示例五：从 NIB 文件加载自定义视图</h4><blockquote>
<p>using page with custom view from nib</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">- (void)showIntroWithCustomViewFromNib &#123;</span><br><span class="line">    EAIntroPage *page1 = [EAIntroPage page];</span><br><span class="line">    page1.title = @&quot;Hello world&quot;;</span><br><span class="line">    page1.desc = sampleDescription1;</span><br><span class="line">    page1.bgImage = [UIImage imageNamed:@&quot;bg1&quot;];</span><br><span class="line">    page1.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title1&quot;]];</span><br><span class="line">    </span><br><span class="line">    // 第二页视图是 NIB 文件</span><br><span class="line">    EAIntroPage *page2 = [EAIntroPage pageWithCustomViewFromNibNamed:@&quot;IntroPage&quot;];</span><br><span class="line">    page2.bgImage = [UIImage imageNamed:@&quot;bg2&quot;];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page3 = [EAIntroPage page];</span><br><span class="line">    page3.title = @&quot;This is page 3&quot;;</span><br><span class="line">    page3.desc = sampleDescription3;</span><br><span class="line">    page3.bgImage = [UIImage imageNamed:@&quot;bg3&quot;];</span><br><span class="line">    page3.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title3&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page4 = [EAIntroPage page];</span><br><span class="line">    page4.title = @&quot;This is page 4&quot;;</span><br><span class="line">    page4.desc = sampleDescription4;</span><br><span class="line">    page4.bgImage = [UIImage imageNamed:@&quot;bg4&quot;];</span><br><span class="line">    page4.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title4&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroView *intro = [[EAIntroView alloc] initWithFrame:rootView.bounds andPages:@[page1,page2,page3,page4]];</span><br><span class="line">    [intro setDelegate:self];</span><br><span class="line">    </span><br><span class="line">    UISwitch *switchControl = (UISwitch *)[page2.pageView viewWithTag:1];</span><br><span class="line">    if(switchControl) &#123;</span><br><span class="line">        [switchControl addTarget:self action:@selector(switchFlip:) forControlEvents:UIControlEventValueChanged];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [intro showInView:rootView animateDuration:0.3];</span><br><span class="line">    _intro = intro;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (IBAction)switchFlip:(id)sender &#123;</span><br><span class="line">    UISwitch *switchControl = (UISwitch *) sender;</span><br><span class="line">    NSLog(@&quot;%@&quot;, switchControl.on ? @&quot;On&quot; : @&quot;Off&quot;);</span><br><span class="line">    </span><br><span class="line">    // limit scrolling on one, currently visible page (can&apos;t go previous or next page)</span><br><span class="line">    //[_intro setScrollingEnabled:switchControl.on];</span><br><span class="line">    </span><br><span class="line">    if(!switchControl.on) &#123;</span><br><span class="line">        // scroll no further selected page (can go previous pages, but not next)</span><br><span class="line">        _intro.limitPageIndex = _intro.visiblePageIndex;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        [_intro setScrollingEnabled:YES];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071503.gif" alt></p>
<h4 id="示例六：单独的页面-Init-和页面回调"><a href="#示例六：单独的页面-Init-和页面回调" class="headerlink" title="示例六：单独的页面 Init 和页面回调"></a>示例六：单独的页面 Init 和页面回调</h4><blockquote>
<p>pages separate init and using block callback in one of pages</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">- (void)showIntroWithSeparatePagesInitAndPageCallback &#123;</span><br><span class="line">    EAIntroPage *page1 = [EAIntroPage page];</span><br><span class="line">    page1.title = @&quot;Hello world&quot;;</span><br><span class="line">    page1.desc = sampleDescription1;</span><br><span class="line">    page1.bgImage = [UIImage imageNamed:@&quot;bg1&quot;];</span><br><span class="line">    page1.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title1&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page2 = [EAIntroPage page];</span><br><span class="line">    page2.title = @&quot;This is page 2&quot;;</span><br><span class="line">    page2.desc = sampleDescription2;</span><br><span class="line">    page2.bgImage = [UIImage imageNamed:@&quot;bg2&quot;];</span><br><span class="line">    page2.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title2&quot;]];</span><br><span class="line">    // 第二页显示后的 Block</span><br><span class="line">    page2.onPageDidAppear = ^&#123;</span><br><span class="line">        NSLog(@&quot;Page 2 did appear block&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page3 = [EAIntroPage page];</span><br><span class="line">    page3.title = @&quot;This is page 3&quot;;</span><br><span class="line">    page3.desc = sampleDescription3;</span><br><span class="line">    page3.bgImage = [UIImage imageNamed:@&quot;bg3&quot;];</span><br><span class="line">    page3.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title3&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page4 = [EAIntroPage page];</span><br><span class="line">    page4.title = @&quot;This is page 4&quot;;</span><br><span class="line">    page4.desc = sampleDescription4;</span><br><span class="line">    page4.bgImage = [UIImage imageNamed:@&quot;bg4&quot;];</span><br><span class="line">    page4.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title4&quot;]];</span><br><span class="line">    </span><br><span class="line">    EAIntroView *intro = [[EAIntroView alloc] initWithFrame:rootView.bounds];</span><br><span class="line">    [intro setDelegate:self];</span><br><span class="line">    </span><br><span class="line">    // 只在第三页显示 skipButton</span><br><span class="line">    intro.skipButton.alpha = 0.f;</span><br><span class="line">    intro.skipButton.enabled = NO;</span><br><span class="line">    page3.onPageDidAppear = ^&#123;</span><br><span class="line">        intro.skipButton.enabled = YES;</span><br><span class="line">        [UIView animateWithDuration:0.3f animations:^&#123;</span><br><span class="line">            intro.skipButton.alpha = 1.f;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;;</span><br><span class="line">    page3.onPageDidDisappear = ^&#123;</span><br><span class="line">        intro.skipButton.enabled = NO;</span><br><span class="line">        [UIView animateWithDuration:0.3f animations:^&#123;</span><br><span class="line">            intro.skipButton.alpha = 0.f;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    [intro setPages:@[page1,page2,page3,page4]];</span><br><span class="line">    </span><br><span class="line">    [intro showInView:rootView animateDuration:0.3];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071505.gif" alt></p>
<h4 id="示例七：自定义引导视图"><a href="#示例七：自定义引导视图" class="headerlink" title="示例七：自定义引导视图"></a>示例七：自定义引导视图</h4><blockquote>
<p>show custom intro</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">- (void)showCustomIntro &#123;</span><br><span class="line">    EAIntroPage *page1 = [EAIntroPage page];</span><br><span class="line">    page1.title = @&quot;Hello world&quot;;</span><br><span class="line">    page1.titlePositionY = 240;</span><br><span class="line">    page1.desc = sampleDescription1;</span><br><span class="line">    page1.descPositionY = 220;</span><br><span class="line">    page1.bgImage = [UIImage imageNamed:@&quot;bg1&quot;];</span><br><span class="line">    page1.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;title1&quot;]];</span><br><span class="line">    page1.titleIconPositionY = 100;</span><br><span class="line">    page1.showTitleView = NO; // 第一页不显示 titleView</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page2 = [EAIntroPage page];</span><br><span class="line">    page2.title = @&quot;This is page 2&quot;;</span><br><span class="line">    page2.titlePositionY = 240;</span><br><span class="line">    page2.desc = sampleDescription2;</span><br><span class="line">    page2.descPositionY = 220;</span><br><span class="line">    page2.bgImage = [UIImage imageNamed:@&quot;bg2&quot;];</span><br><span class="line">    page2.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;icon1&quot;]];</span><br><span class="line">    page2.titleIconPositionY = 260;</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page3 = [EAIntroPage page];</span><br><span class="line">    page3.title = @&quot;This is page 3&quot;;</span><br><span class="line">    page3.titlePositionY = 240;</span><br><span class="line">    page3.desc = sampleDescription3;</span><br><span class="line">    page3.descPositionY = 220;</span><br><span class="line">    page3.bgImage = [UIImage imageNamed:@&quot;bg3&quot;];</span><br><span class="line">    page3.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;icon2&quot;]];</span><br><span class="line">    page3.titleIconPositionY = 260;</span><br><span class="line">    </span><br><span class="line">    EAIntroPage *page4 = [EAIntroPage page];</span><br><span class="line">    page4.title = @&quot;This is page 4&quot;;</span><br><span class="line">    page4.titlePositionY = 240;</span><br><span class="line">    page4.desc = sampleDescription4;</span><br><span class="line">    page4.descPositionY = 220;</span><br><span class="line">    page4.bgImage = [UIImage imageNamed:@&quot;bg4&quot;];</span><br><span class="line">    page4.titleIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;icon3&quot;]];</span><br><span class="line">    page4.titleIconPositionY = 260;</span><br><span class="line">    </span><br><span class="line">    EAIntroView *intro = [[EAIntroView alloc] initWithFrame:rootView.bounds andPages:@[page1,page2,page3,page4]];</span><br><span class="line">    intro.titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;bigLogo&quot;]];</span><br><span class="line">    intro.titleViewY = 120;</span><br><span class="line">    intro.tapToNext = YES;</span><br><span class="line">    [intro setDelegate:self];</span><br><span class="line">    </span><br><span class="line">    /** </span><br><span class="line">     * SMPageControl 是另一个第三方框架.</span><br><span class="line">     *</span><br><span class="line">     * 它可以使用一系列其他自定义选项替代 UIPageControl。</span><br><span class="line">     * GitHub地址：https://github.com/Spaceman-Labs/SMPageControl</span><br><span class="line">     */</span><br><span class="line">    SMPageControl *pageControl = [[SMPageControl alloc] init];</span><br><span class="line">    pageControl.pageIndicatorImage = [UIImage imageNamed:@&quot;pageDot&quot;];</span><br><span class="line">    pageControl.currentPageIndicatorImage = [UIImage imageNamed:@&quot;selectedPageDot&quot;];</span><br><span class="line">    [pageControl sizeToFit];</span><br><span class="line">    </span><br><span class="line">    // This is a hack - not recommended for Swift, more information: https://github.com/ealeksandrov/EAIntroView/issues/161</span><br><span class="line">    intro.pageControl = (UIPageControl *)pageControl;</span><br><span class="line">    intro.pageControlY = 130.f;</span><br><span class="line">    </span><br><span class="line">    // 自定义 Button</span><br><span class="line">    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];</span><br><span class="line">    [btn setBackgroundImage:[UIImage imageNamed:@&quot;skipButton&quot;] forState:UIControlStateNormal];</span><br><span class="line">    [btn setFrame:CGRectMake(0, 0, 270, 50)];</span><br><span class="line">    intro.skipButton = btn;</span><br><span class="line">    intro.skipButtonY = 80.f;</span><br><span class="line">    intro.skipButtonAlignment = EAViewAlignmentCenter;</span><br><span class="line">    </span><br><span class="line">    [intro showInView:rootView animateDuration:0.3];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2648731-e5d65613ec10846f.gif?imageMogr2/auto-orient/strip" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://andy0570.com/2017/07/22/Onboard——引人入胜的启动引导页/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="独木舟的木">
      <meta itemprop="description" content="有时候阳光很好 有时候阳光很暗">
      <meta itemprop="image" content="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独木舟的木">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/07/22/Onboard——引人入胜的启动引导页/" class="post-title-link" itemprop="url">Onboard——引人入胜的启动引导页</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-07-22 13:51:00" itemprop="dateCreated datePublished" datetime="2017-07-22T13:51:00+08:00">2017-07-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-28 15:45:00" itemprop="dateModified" datetime="2019-04-28T15:45:00+08:00">2019-04-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS-开源框架/" itemprop="url" rel="index"><span itemprop="name">iOS 开源框架</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2017/07/22/Onboard——引人入胜的启动引导页/" class="leancloud_visitors" data-flag-title="Onboard——引人入胜的启动引导页">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>GitHub地址：<a href="https://github.com/mamaral/Onboard" target="_blank" rel="noopener">mamaral/<strong>Onboard</strong></a></li>
<li>star: 5600+</li>
</ul>
<p>#Onboard</p>
<blockquote>
<p>仅需添加几行代码，即可轻松创建一个美丽和吸引人的载入体验。</p>
</blockquote>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071816.gif" alt><br><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071823.gif" alt><br><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071822.gif" alt><br><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071835.gif" alt><br><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071840.gif" alt></p>
<p>#<a href="examples.md">Click Here For More Examples</a></p>
<h1 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h1><p>Adding the following to your <code>Podfile</code> and running <code>pod install</code> should do the trick:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pod</span> <span class="string">'Onboard'</span></span><br></pre></td></tr></table></figure>
<p><em>If you don’t want to use CocoaPods</em>, you can use Carthage or grab the files located in the <em>Source</em> folder and pull them into your project manually.</p>
<p>Each onboarding experience is comprised of two primary components - the background and the content pages. The background includes the static background image/video, the page control, and the skip button. The content pages are made up of four pieces, an image/icon, title, body, and action button.</p>
<p>Create individual pages by creating instances of <code>OnboardingContentViewController</code>. Provide a title, body, image, text for an action button, and within the action block handle whatever you want to do when the users press the button. If you don’t want a button, you can leave both the button text and action handler nil.</p>
<p>每个载入体验包括两个主要组件 - 背景和内容页面。 背景包括静态背景图像/视频，页面控制和跳过按钮。 内容页由四个部分组成，一个图像/图标，标题，正文和动作按钮。</p>
<p>通过创建 <code>OnboardingContentViewController</code> 的实例来创建单个页面。 为操作按钮提供标题，正文，图像，文字，以及在用户按下按钮时您希望做什么的动作块句柄。 如果你不想要一个按钮，你可以保留按钮文本和动作处理程序为 nil。</p>
<h4 id="Objective-C"><a href="#Objective-C" class="headerlink" title="Objective-C"></a>Objective-C</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 创建单个页面视图控制器：OnboardingContentViewController</span><br><span class="line">OnboardingContentViewController *firstPage = [OnboardingContentViewController contentWithTitle:@&quot;Page Title&quot; body:@&quot;Page body goes here.&quot; image:[UIImage imageNamed:@&quot;icon&quot;] buttonText:@&quot;Text For Button&quot; action:^&#123;</span><br><span class="line">    // do something here when users press the button, like ask for location services permissions, register for push notifications, connect to social media, or finish the onboarding process</span><br><span class="line">    // 当用户按下按钮时，执行某些操作，例如要求位置服务权限，注册推送通知，连接到社交媒体或完成载入进程。</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstPage = <span class="type">OnboardingContentViewController</span>(title: <span class="string">"Page Title"</span>, body: <span class="string">"Page body goes here."</span>, image: <span class="type">UIImage</span>(named: <span class="string">"icon"</span>), buttonText: <span class="string">"Text For Button"</span>) &#123; () -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// do something here when users press the button, like ask for location services permissions, register for push notifications, connect to social media, or finish the onboarding process</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Then create the <code>OnboardingViewController</code> by providing either a background image or a URL to a local video file in your project, and an array of content view controllers you just created. You can then present the view modally and get the onboarding process started!</p>
<p>然后在项目中 【通过提供背景图片或本地视频文件的URL，以及刚创建的一系列内容视图控制器】来创建 <code>OnboardingViewController</code>。 然后，您可以以模态方式呈现视图，并启动载入过程！</p>
<h4 id="Objective-C-1"><a href="#Objective-C-1" class="headerlink" title="Objective-C"></a>Objective-C</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 创建启动引导主页： OnboardingViewController</span><br><span class="line"></span><br><span class="line">// Image</span><br><span class="line">OnboardingViewController *onboardingVC = [OnboardingViewController onboardWithBackgroundImage:[UIImage imageNamed:@&quot;background&quot;] contents:@[firstPage, secondPage, thirdPage]];</span><br><span class="line"></span><br><span class="line">// Video</span><br><span class="line">NSBundle *bundle = [NSBundle mainBundle];</span><br><span class="line">NSString *moviePath = [bundle pathForResource:@&quot;yourVid&quot; ofType:@&quot;mp4&quot;];</span><br><span class="line">NSURL *movieURL = [NSURL fileURLWithPath:moviePath];</span><br><span class="line"></span><br><span class="line">OnboardingViewController *onboardingVC = [OnboardingViewController onboardWithBackgroundVideoURL:movieURL contents:@[firstPage, secondPage, thirdPage]];</span><br></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Image</span></span><br><span class="line"><span class="keyword">let</span> onboardingVC = <span class="type">OnboardingViewController</span>(backgroundImage: <span class="type">UIImage</span>(named: <span class="string">"background"</span>), contents: [firstPage, secondPage, thirdPage])</span><br><span class="line"></span><br><span class="line"><span class="comment">// Video</span></span><br><span class="line"><span class="keyword">let</span> bundle = <span class="type">NSBundle</span>.mainBundle()</span><br><span class="line"><span class="keyword">let</span> moviePath = bundle.pathForResource(<span class="string">"yourVid"</span>, ofType: <span class="string">"mp4"</span>)</span><br><span class="line"><span class="keyword">let</span> movieURL = <span class="type">NSURL</span>(fileURLWithPath: moviePath!)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> onboardingVC = <span class="type">OnboardingViewController</span>(backgroundVideoURL: movieUrl, contents: [firstPage, secondPage, thirdPage])</span><br></pre></td></tr></table></figure>
<p>With only a few lines of code you have a beautiful, end-to-end onboarding process that will get your users excited to use your awesome application.</p>
<h1 id="Customization-定制"><a href="#Customization-定制" class="headerlink" title="Customization 定制"></a>Customization 定制</h1><p>The <code>iconImageView</code>, <code>titleLabel</code>, <code>bodyLabel</code>, and <code>actionButton</code> properties are exposed for customizing fonts, sizing, etc., and the spacing between elements on the content pages can be customized as well:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onboardingVC.topPadding = 20;</span><br><span class="line">onboardingVC.underIconPadding = 10;</span><br><span class="line">onboardingVC.underTitlePadding = 15;</span><br><span class="line">onboardingVC.bottomPadding = 20;</span><br></pre></td></tr></table></figure>
<p><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071844.jpg" alt></p>
<h1 id="Blurring-Masking-and-Fading-模糊，遮罩和褪色"><a href="#Blurring-Masking-and-Fading-模糊，遮罩和褪色" class="headerlink" title="Blurring, Masking, and Fading 模糊，遮罩和褪色"></a>Blurring, Masking, and Fading 模糊，遮罩和褪色</h1><p>By default, the image you use for the background will have a mask applied over it, darkening it a bit. This is to add a little bit of contrast so the text can more easily be seen. This can easily be disabled if your image is already edited or looks fine as-is:</p>
<p>默认情况下，背景图片上会有一层遮罩，使其变暗。 这会增加一点点的对比度，使得文本可以更容易被看到。 如果你的图片已经被编辑过了或者它本身看起来就很好，你可以很容易禁用遮罩层：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onboardingVC.shouldMaskBackground = NO; // defaults to YES</span><br></pre></td></tr></table></figure>
<p>We can also apply a blur to your background image:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onboardingVC.shouldBlurBackground = YES; // defaults to NO</span><br></pre></td></tr></table></figure>
<p>Apply a fade effect to the icons, text, and buttons, while transitioning between pages. Contents fade out as you scroll away, and the contents for the next page fade in as they scroll in.</p>
<p>在页面之间转换时，对图标，文本和按钮应用淡入淡出效果。 当你滚动时，内容淡出，下一页的内容会在滚动时淡入淡出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onboardingVC.shouldFadeTransitions = YES; // defaults to NO</span><br></pre></td></tr></table></figure>
<p><strong><em>Note:</em></strong> Ensure you do not cause the onboard view controller’s view to be loaded prior to setting these properties, as these values only take effect when the view controller’s <code>viewDidLoad</code> is called, so doing something like setting your <code>onboardingVC.view.backgroundColor = [UIColor whiteColor];</code> before setting this values would lead to the setting of these to not take effect.</p>
<p>确保不要在设置这些属性之前加载 <code>OnboardingViewController</code> 的视图，因为这些值仅在调用视图控制器的 <code>viewDidLoad</code> 时生效，因此可以像设置 <code>onboardingVC.view.backgroundColor = [UIColor whiteColor];</code> 时那样做;在设置这个值之前会导致这些设置不生效。</p>
<p>You can tweak these settings in a few different combinations to get your desired effect:</p>
<h5 id="normal"><a href="#normal" class="headerlink" title="normal"></a>normal</h5><h2 id><a href="#" class="headerlink" title></a><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071844-1.jpg" alt="normal"></h2><h5 id="dark"><a href="#dark" class="headerlink" title="dark"></a>dark</h5><h2 id="-1"><a href="#-1" class="headerlink" title></a><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071846.jpg" alt></h2><h5 id="lightblur"><a href="#lightblur" class="headerlink" title="lightblur"></a>lightblur</h5><h2 id="-2"><a href="#-2" class="headerlink" title></a><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071847.jpg" alt></h2><h5 id="darkblur"><a href="#darkblur" class="headerlink" title="darkblur"></a>darkblur</h5><h2 id="-3"><a href="#-3" class="headerlink" title></a><img src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/071848.jpg" alt></h2><h1 id="Auto-Navigation-自动导航"><a href="#Auto-Navigation-自动导航" class="headerlink" title="Auto-Navigation 自动导航"></a>Auto-Navigation 自动导航</h1><p>If you want to automatically move users to the next page in the onboarding process when they press the action button simply set the <code>movesToNextViewController</code> property to <code>YES</code> on any <code>OnboardingContentViewController</code> that isn’t the last view controller in the onboarding process. Coupled with this, you can disable the ability to swipe between contents by setting the <code>swipingEnabled</code> property on the <code>OnboardingViewController</code> to <code>NO</code>. This allows you to have greater control over the onboarding process if you desire. Finally, if your design lends itself to not having a page control, or if it is only one page, you can set the <code>hidePageControl</code> property to <code>YES</code> and the page control dots will not appear.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contentVC.movesToNextViewController = YES; // Button 按下时自动滑动到下一页</span><br><span class="line">onboardingVC.swipingEnabled = NO;          // 禁用手势滑动</span><br><span class="line">onboardingVC.hidePageControl = YES;        // 隐藏页面小圆点</span><br></pre></td></tr></table></figure>
<h1 id="Skipping-跳过"><a href="#Skipping-跳过" class="headerlink" title="Skipping 跳过"></a>Skipping 跳过</h1><p>If you want to allow users to skip the onboarding process, enable skipping on the onboarding view controller and set a block to be executed when the skip button is pressed.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onboardingVC.allowSkipping = YES;</span><br><span class="line">onboardingVC.skipHandler = ^&#123;</span><br><span class="line">    // Dismiss, fade out, etc...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="Blocks-块"><a href="#Blocks-块" class="headerlink" title="Blocks 块"></a>Blocks 块</h1><p>There may be cases in which you want to do <em>something</em> when the content pages are about to appear, and when they did appear. In this case, you can set the viewWillAppearBlock and viewDidAppearBlock properties on any or all of the content pages to handle whatever you’d like.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">contentVC.viewWillAppearBlock = ^&#123;</span><br><span class="line">	// do something when the view will appear here…</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contentVC.viewDidAppearBlock = ^&#123;</span><br><span class="line">	// do something when the view appears here…</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h1><p>I’m not currently supporting landscape at the moment, so I would recommend either using this in an application that only supports portrait, or wrapping it in a subclassed UINavigationController that only supports portrait.</p>
<p>目前不支持横屏模式，所以我建议在只支持竖屏的应用程序中使用，或者将其包装在仅支持竖屏的子类<strong>UINavigationController</strong> 中。</p>
<h1 id="Community"><a href="#Community" class="headerlink" title="Community "></a>Community </h1><p>Questions, comments, issues, and pull requests welcomed!!</p>
<h1 id="License"><a href="#License" class="headerlink" title="License"></a>License</h1><p>This project is made available under the MIT license. See LICENSE.txt for details.</p>
<h2 id="Demo-用法："><a href="#Demo-用法：" class="headerlink" title="Demo 用法："></a>Demo 用法：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">//  AppDelegate.m</span><br><span class="line">//  Onboard</span><br><span class="line">//</span><br><span class="line">//  Created by Mike on 8/17/14.</span><br><span class="line">//  Copyright (c) 2014 Mike Amaral. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &quot;AppDelegate.h&quot;</span><br><span class="line">#import &quot;OnboardingViewController.h&quot;</span><br><span class="line">#import &quot;OnboardingContentViewController.h&quot;</span><br><span class="line"></span><br><span class="line">static NSString * const kUserHasOnboardedKey = @&quot;user_has_onboarded&quot;;</span><br><span class="line"></span><br><span class="line">@implementation AppDelegate</span><br><span class="line"></span><br><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</span><br><span class="line">    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];</span><br><span class="line">    self.window.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    </span><br><span class="line">    // 确定用户是否已经加载过了 onboard</span><br><span class="line">    BOOL userHasOnboarded = [[NSUserDefaults standardUserDefaults] boolForKey:kUserHasOnboardedKey];</span><br><span class="line">    </span><br><span class="line">    // 如果用户已经加载过了 onboard，只需为应用程序设置正常的根视图控制器</span><br><span class="line">    if (userHasOnboarded) &#123;</span><br><span class="line">        [self setupNormalRootViewController];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 否则将根视图控制器设置为 OnboardingViewController</span><br><span class="line">    else &#123;</span><br><span class="line">        // 样式一：标准样式</span><br><span class="line">        self.window.rootViewController = [self generateStandardOnboardingVC];</span><br><span class="line">        </span><br><span class="line">        // 样式二：动画模式</span><br><span class="line">//        self.window.rootViewController = [self generateMovieOnboardingVC];</span><br><span class="line">        </span><br><span class="line">        // 样式三：内容视频</span><br><span class="line">//        self.window.rootViewController = [self generateContentVideoOnboardingVC];</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">//        __weak typeof(self) weakSelf = self;</span><br><span class="line">//        </span><br><span class="line">//        self.window.rootViewController = [[MyOnboardingViewController alloc] initWithCompletionHandler:^&#123;</span><br><span class="line">//            [weakSelf setupNormalRootViewController];</span><br><span class="line">//        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // UIStatusBarStyleDefault       默认，黑色状态栏，用于浅色背景</span><br><span class="line">    // UIStatusBarStyleLightContent  浅色状态栏，用于黑色背景</span><br><span class="line">    application.statusBarStyle = UIStatusBarStyleLightContent;</span><br><span class="line">    </span><br><span class="line">    [self.window makeKeyAndVisible];</span><br><span class="line">    </span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - 设置正常的根视图控制器</span><br><span class="line">- (void)setupNormalRootViewController &#123;</span><br><span class="line">    // create whatever your root view controller is going to be, in this case just a simple view controller</span><br><span class="line">    // wrapped in a navigation controller</span><br><span class="line">    UIViewController *mainVC = [UIViewController new];</span><br><span class="line">    mainVC.title = @&quot;Main Application&quot;;</span><br><span class="line"></span><br><span class="line">    self.window.rootViewController = [[UINavigationController alloc] initWithRootViewController:mainVC];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark 处理 onboard 加载完成后的情况</span><br><span class="line">- (void)handleOnboardingCompletion &#123;</span><br><span class="line">    // set that we have completed onboarding so we only do it once... for demo</span><br><span class="line">    // purposes we don&apos;t want to have to set this every time so I&apos;ll just leave</span><br><span class="line">    // this here...</span><br><span class="line">    // 设置我们已经完成 onboard 载入，所以我们只做一次...为了演示目的，我们不想每次都设置这个，所以我只要离开这里...</span><br><span class="line">//    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:kUserHasOnboardedKey];</span><br><span class="line">    </span><br><span class="line">    // transition to the main application</span><br><span class="line">    [self setupNormalRootViewController];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark -</span><br><span class="line">#pragma mark 样式一：标准样式</span><br><span class="line">- (OnboardingViewController *)generateStandardOnboardingVC &#123;</span><br><span class="line">    // 第一页</span><br><span class="line">    OnboardingContentViewController *firstPage = [OnboardingContentViewController contentWithTitle:@&quot;What A Beautiful Photo&quot; body:@&quot;This city background image is so beautiful.&quot; image:[UIImage imageNamed:@&quot;blue&quot;] buttonText:@&quot;Enable Location Services&quot; action:^&#123;</span><br><span class="line">        [[[UIAlertView alloc] initWithTitle:nil message:@&quot;在这里，您可以提示用户开启各种应用程序权限，为他们提供有关您希望这些权限增强其体验的有用信息，增加您将获得这些权限的机会&quot; delegate:nil cancelButtonTitle:@&quot;OK&quot; otherButtonTitles:nil] show];</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    // 第二页</span><br><span class="line">    OnboardingContentViewController *secondPage = [OnboardingContentViewController contentWithTitle:@&quot;I&apos;m so sorry&quot; body:@&quot;I can&apos;t get over the nice blurry background photo.&quot; image:[UIImage imageNamed:@&quot;red&quot;] buttonText:@&quot;Connect With Facebook&quot; action:^&#123;</span><br><span class="line">        [[[UIAlertView alloc] initWithTitle:nil message:@&quot;提示用户在启动时做其他很酷的事情。 正如你看到的那样，点击前一页按钮会自动导航到下一页。 很酷是不是？&quot; delegate:nil cancelButtonTitle:@&quot;OK&quot; otherButtonTitles:nil] show];</span><br><span class="line">    &#125;];</span><br><span class="line">    secondPage.movesToNextViewController = YES; //第二页按钮按下后自动导航到第三页</span><br><span class="line">    secondPage.viewDidAppearBlock = ^&#123;</span><br><span class="line">        [[[UIAlertView alloc] initWithTitle:@&quot;Welcome!&quot; message:@&quot;您已到达第二页，此弹出警告在页面的 viewDidAppearBlock 中显示。&quot; delegate:nil cancelButtonTitle:@&quot;OK&quot; otherButtonTitles:nil] show];</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    // 第三页</span><br><span class="line">    OnboardingContentViewController *thirdPage = [OnboardingContentViewController contentWithTitle:@&quot;Seriously Though&quot; body:@&quot;Kudos to the photographer.&quot; image:[UIImage imageNamed:@&quot;yellow&quot;] buttonText:@&quot;Get Started&quot; action:^&#123;</span><br><span class="line">        [self handleOnboardingCompletion];</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    // 容器视图控制器</span><br><span class="line">    OnboardingViewController *onboardingVC = [OnboardingViewController onboardWithBackgroundImage:[UIImage imageNamed:@&quot;street&quot;] contents:@[firstPage, secondPage, thirdPage]];</span><br><span class="line">    onboardingVC.shouldFadeTransitions = YES; // 设置每一页内容淡入淡出过渡</span><br><span class="line">    onboardingVC.fadePageControlOnLastPage = YES;</span><br><span class="line">    onboardingVC.fadeSkipButtonOnLastPage = YES;</span><br><span class="line"></span><br><span class="line">    // 如果你想要允许用户跳过启动引导页，则启用 allowSkipping 并设置用户点击跳过按钮时执行的 Block块</span><br><span class="line">    onboardingVC.allowSkipping = YES;</span><br><span class="line">    onboardingVC.skipHandler = ^&#123;</span><br><span class="line">        [self handleOnboardingCompletion];</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    return onboardingVC;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark 样式二：动画模式</span><br><span class="line">- (OnboardingViewController *)generateMovieOnboardingVC &#123;</span><br><span class="line">    // 第一页</span><br><span class="line">    OnboardingContentViewController *firstPage = [[OnboardingContentViewController alloc] initWithTitle:@&quot;Everything Under The Sun&quot; body:@&quot;The temperature of the photosphere is over 10,000°F.&quot; image:nil buttonText:nil action:nil];</span><br><span class="line">    firstPage.topPadding = -15;</span><br><span class="line">    firstPage.underTitlePadding = 160;</span><br><span class="line">    firstPage.titleLabel.textColor = [UIColor colorWithRed:239/255.0 green:88/255.0 blue:35/255.0 alpha:1.0];</span><br><span class="line">    // 标题和正文的字体都是自定义的</span><br><span class="line">    firstPage.titleLabel.font = [UIFont fontWithName:@&quot;SFOuterLimitsUpright&quot; size:38.0];</span><br><span class="line">    firstPage.bodyLabel.textColor = [UIColor colorWithRed:239/255.0 green:88/255.0 blue:35/255.0 alpha:1.0];</span><br><span class="line">    firstPage.bodyLabel.font = [UIFont fontWithName:@&quot;NasalizationRg-Regular&quot; size:18.0];</span><br><span class="line">    </span><br><span class="line">    // 第二页</span><br><span class="line">    OnboardingContentViewController *secondPage = [[OnboardingContentViewController alloc] initWithTitle:@&quot;Every Second&quot; body:@&quot;600 million tons of protons are converted into helium atoms.&quot; image:nil buttonText:nil action:nil];</span><br><span class="line">    secondPage.titleLabel.font = [UIFont fontWithName:@&quot;SFOuterLimitsUpright&quot; size:38.0];</span><br><span class="line">    secondPage.underTitlePadding = 170;</span><br><span class="line">    secondPage.topPadding = 0;</span><br><span class="line">    secondPage.titleLabel.textColor = [UIColor colorWithRed:251/255.0 green:176/255.0 blue:59/255.0 alpha:1.0];</span><br><span class="line">    secondPage.bodyLabel.textColor = [UIColor colorWithRed:251/255.0 green:176/255.0 blue:59/255.0 alpha:1.0];</span><br><span class="line">    secondPage.bodyLabel.font = [UIFont fontWithName:@&quot;NasalizationRg-Regular&quot; size:18.0];</span><br><span class="line">    </span><br><span class="line">    // 第三页</span><br><span class="line">    OnboardingContentViewController *thirdPage = [[OnboardingContentViewController alloc] initWithTitle:@&quot;We&apos;re All Star Stuff&quot; body:@&quot;Our very bodies consist of the same chemical elements found in the most distant nebulae, and our activities are guided by the same universal rules.&quot; image:nil buttonText:@&quot;Explore the universe&quot; action:^&#123;</span><br><span class="line">        [self handleOnboardingCompletion];</span><br><span class="line">    &#125;];</span><br><span class="line">    thirdPage.topPadding = 10;</span><br><span class="line">    thirdPage.underTitlePadding = 160;</span><br><span class="line">    thirdPage.bottomPadding = -10;</span><br><span class="line">    thirdPage.titleLabel.font = [UIFont fontWithName:@&quot;SFOuterLimitsUpright&quot; size:38.0];</span><br><span class="line">    thirdPage.titleLabel.textColor = [UIColor colorWithRed:58/255.0 green:105/255.0 blue:136/255.0 alpha:1.0];</span><br><span class="line">    thirdPage.bodyLabel.textColor = [UIColor colorWithRed:58/255.0 green:105/255.0 blue:136/255.0 alpha:1.0];</span><br><span class="line">    thirdPage.bodyLabel.font = [UIFont fontWithName:@&quot;NasalizationRg-Regular&quot; size:15.0];</span><br><span class="line">    [thirdPage.actionButton setTitleColor:[UIColor colorWithRed:239/255.0 green:88/255.0 blue:35/255.0 alpha:1.0] forState:UIControlStateNormal];</span><br><span class="line">    thirdPage.actionButton.titleLabel.font = [UIFont fontWithName:@&quot;SpaceAge&quot; size:17.0];</span><br><span class="line">    </span><br><span class="line">    // 容器视图的背景图是一个 mp4 视频文件</span><br><span class="line">    NSBundle *bundle = [NSBundle mainBundle];</span><br><span class="line">    NSString *moviePath = [bundle pathForResource:@&quot;sun&quot; ofType:@&quot;mp4&quot;];</span><br><span class="line">    NSURL *movieURL = [NSURL fileURLWithPath:moviePath];</span><br><span class="line">    </span><br><span class="line">    OnboardingViewController *onboardingVC = [[OnboardingViewController alloc] initWithBackgroundVideoURL:movieURL contents:@[firstPage, secondPage, thirdPage]];</span><br><span class="line">    onboardingVC.shouldFadeTransitions = YES;</span><br><span class="line">    onboardingVC.shouldMaskBackground = NO;</span><br><span class="line">    // 设置当前 pageControl 的颜色：橙色</span><br><span class="line">    onboardingVC.pageControl.currentPageIndicatorTintColor = [UIColor colorWithRed:239/255.0 green:88/255.0 blue:35/255.0 alpha:1.0];</span><br><span class="line">    // 设置默认 pageControl 的颜色：白色</span><br><span class="line">    onboardingVC.pageControl.pageIndicatorTintColor = [UIColor whiteColor];</span><br><span class="line">    return onboardingVC;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark 样式三：内容视频</span><br><span class="line">- (OnboardingViewController *)generateContentVideoOnboardingVC &#123;</span><br><span class="line">    // 每一页的 video 是视频</span><br><span class="line">    NSBundle *bundle = [NSBundle mainBundle];</span><br><span class="line">    NSString *moviePath = [bundle pathForResource:@&quot;sun&quot; ofType:@&quot;mp4&quot;];</span><br><span class="line">    NSURL *movieURL = [NSURL fileURLWithPath:moviePath];</span><br><span class="line">    </span><br><span class="line">    // 第一页</span><br><span class="line">    OnboardingContentViewController *firstPage = [OnboardingContentViewController contentWithTitle:@&quot;Everything Under The Sun&quot; body:@&quot;The temperature of the photosphere is over 10,000°F.&quot; videoURL:movieURL buttonText:nil action:nil];</span><br><span class="line">    firstPage.topPadding = -15;</span><br><span class="line">    firstPage.underTitlePadding = 160;</span><br><span class="line">    firstPage.titleLabel.textColor = [UIColor colorWithRed:239/255.0 green:88/255.0 blue:35/255.0 alpha:1.0];</span><br><span class="line">    firstPage.titleLabel.font = [UIFont fontWithName:@&quot;SFOuterLimitsUpright&quot; size:38.0];</span><br><span class="line">    firstPage.bodyLabel.textColor = [UIColor colorWithRed:239/255.0 green:88/255.0 blue:35/255.0 alpha:1.0];</span><br><span class="line">    firstPage.bodyLabel.font = [UIFont fontWithName:@&quot;NasalizationRg-Regular&quot; size:18.0];</span><br><span class="line"></span><br><span class="line">    // 第二页</span><br><span class="line">    OnboardingContentViewController *secondPage = [OnboardingContentViewController contentWithTitle:@&quot;Every Second&quot; body:@&quot;600 million tons of protons are converted into helium atoms.&quot; videoURL:movieURL buttonText:nil action:nil];</span><br><span class="line">    secondPage.titleLabel.font = [UIFont fontWithName:@&quot;SFOuterLimitsUpright&quot; size:38.0];</span><br><span class="line">    secondPage.underTitlePadding = 170;</span><br><span class="line">    secondPage.topPadding = 0;</span><br><span class="line">    secondPage.titleLabel.textColor = [UIColor colorWithRed:251/255.0 green:176/255.0 blue:59/255.0 alpha:1.0];</span><br><span class="line">    secondPage.bodyLabel.textColor = [UIColor colorWithRed:251/255.0 green:176/255.0 blue:59/255.0 alpha:1.0];</span><br><span class="line">    secondPage.bodyLabel.font = [UIFont fontWithName:@&quot;NasalizationRg-Regular&quot; size:18.0];</span><br><span class="line">    </span><br><span class="line">    // 第三页</span><br><span class="line">    OnboardingContentViewController *thirdPage = [OnboardingContentViewController contentWithTitle:@&quot;We&apos;re All Star Stuff&quot; body:@&quot;Our very bodies consist of the same chemical elements found in the most distant nebulae, and our activities are guided by the same universal rules.&quot; videoURL:movieURL buttonText:nil action:^&#123;</span><br><span class="line">        [self handleOnboardingCompletion];</span><br><span class="line">    &#125;];</span><br><span class="line">    thirdPage.topPadding = 10;</span><br><span class="line">    thirdPage.underTitlePadding = 160;</span><br><span class="line">    thirdPage.bottomPadding = -10;</span><br><span class="line">    thirdPage.titleLabel.font = [UIFont fontWithName:@&quot;SFOuterLimitsUpright&quot; size:38.0];</span><br><span class="line">    thirdPage.titleLabel.textColor = [UIColor colorWithRed:58/255.0 green:105/255.0 blue:136/255.0 alpha:1.0];</span><br><span class="line">    thirdPage.bodyLabel.textColor = [UIColor colorWithRed:58/255.0 green:105/255.0 blue:136/255.0 alpha:1.0];</span><br><span class="line">    thirdPage.bodyLabel.font = [UIFont fontWithName:@&quot;NasalizationRg-Regular&quot; size:15.0];</span><br><span class="line">    [thirdPage.actionButton setTitleColor:[UIColor colorWithRed:239/255.0 green:88/255.0 blue:35/255.0 alpha:1.0] forState:UIControlStateNormal];</span><br><span class="line">    thirdPage.actionButton.titleLabel.font = [UIFont fontWithName:@&quot;SpaceAge&quot; size:17.0];</span><br><span class="line">    </span><br><span class="line">    // 容器视图控制器</span><br><span class="line">    OnboardingViewController *onboardingVC = [[OnboardingViewController alloc] initWithBackgroundImage:nil contents:@[firstPage, secondPage, thirdPage]];</span><br><span class="line">    onboardingVC.view.backgroundColor = [UIColor blackColor];</span><br><span class="line">    onboardingVC.shouldFadeTransitions = YES;</span><br><span class="line">    onboardingVC.shouldMaskBackground = NO;</span><br><span class="line">    onboardingVC.pageControl.currentPageIndicatorTintColor = [UIColor colorWithRed:239/255.0 green:88/255.0 blue:35/255.0 alpha:1.0];</span><br><span class="line">    onboardingVC.pageControl.pageIndicatorTintColor = [UIColor whiteColor];</span><br><span class="line">    return onboardingVC;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/17/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/19/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/avatar.png" alt="独木舟的木">
            
              <p class="site-author-name" itemprop="name">独木舟的木</p>
              <div class="site-description motion-element" itemprop="description">有时候阳光很好 有时候阳光很暗</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">317</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Andy0570" title="GitHub &rarr; https://github.com/Andy0570" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:andywhm@163.com" title="E-Mail &rarr; mailto:andywhm@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-grin-wink"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">独木舟的木</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
      
    
  
  <script color="17,119,176" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>













  
  <script src="//cdn.jsdelivr.net/npm/jquery@2/dist/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/fastclick@1/lib/fastclick.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/jquery-lazyload@1/jquery.lazyload.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  
  
  
    
  

  
    
      
    
  

  
  
  
    <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
    <script>
      
        window.addEventListener('load', () => {
      
        quicklink({
          timeout: 3000,
          priority: true,
          ignores: [uri => uri.includes('#'),uri => uri == 'https://andy0570.com/page/18/',]
        });
      
        });
      
    </script>
  


  



  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/algolia-search.js?v=7.1.0"></script>



  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'S7i1Y8YorMKFPaYbJbekD5el-gzGzoHsz',
                'X-LC-Key': 'brOnU8mOQvSjpipJvdKUAIbU',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.loadBookmark();
  
  </script>


  

  

  


  <!-- red heart -->
  <script type="text/javascript" src="/js/src/love.js"></script>
  
</body>
</html>
